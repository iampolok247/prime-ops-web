function eg(t,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function tg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fm={exports:{}},io={},_m={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aa=Symbol.for("react.element"),sg=Symbol.for("react.portal"),ng=Symbol.for("react.fragment"),rg=Symbol.for("react.strict_mode"),ag=Symbol.for("react.profiler"),lg=Symbol.for("react.provider"),og=Symbol.for("react.context"),ig=Symbol.for("react.forward_ref"),dg=Symbol.for("react.suspense"),cg=Symbol.for("react.memo"),ug=Symbol.for("react.lazy"),_c=Symbol.iterator;function mg(t){return t===null||typeof t!="object"?null:(t=_c&&t[_c]||t["@@iterator"],typeof t=="function"?t:null)}var zm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Um=Object.assign,Bm={};function yr(t,s,n){this.props=t,this.context=s,this.refs=Bm,this.updater=n||zm}yr.prototype.isReactComponent={};yr.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};yr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hm(){}Hm.prototype=yr.prototype;function Ed(t,s,n){this.props=t,this.context=s,this.refs=Bm,this.updater=n||zm}var Md=Ed.prototype=new Hm;Md.constructor=Ed;Um(Md,yr.prototype);Md.isPureReactComponent=!0;var zc=Array.isArray,Wm=Object.prototype.hasOwnProperty,Ld={current:null},Vm={key:!0,ref:!0,__self:!0,__source:!0};function qm(t,s,n){var r,a={},l=null,o=null;if(s!=null)for(r in s.ref!==void 0&&(o=s.ref),s.key!==void 0&&(l=""+s.key),s)Wm.call(s,r)&&!Vm.hasOwnProperty(r)&&(a[r]=s[r]);var i=arguments.length-2;if(i===1)a.children=n;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(r in i=t.defaultProps,i)a[r]===void 0&&(a[r]=i[r]);return{$$typeof:Aa,type:t,key:l,ref:o,props:a,_owner:Ld.current}}function xg(t,s){return{$$typeof:Aa,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Pd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Aa}function hg(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return s[n]})}var Uc=/\/+/g;function Bo(t,s){return typeof t=="object"&&t!==null&&t.key!=null?hg(""+t.key):s.toString(36)}function ul(t,s,n,r,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Aa:case sg:o=!0}}if(o)return o=t,a=a(o),t=r===""?"."+Bo(o,0):r,zc(a)?(n="",t!=null&&(n=t.replace(Uc,"$&/")+"/"),ul(a,s,n,"",function(u){return u})):a!=null&&(Pd(a)&&(a=xg(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Uc,"$&/")+"/")+t)),s.push(a)),1;if(o=0,r=r===""?".":r+":",zc(t))for(var i=0;i<t.length;i++){l=t[i];var c=r+Bo(l,i);o+=ul(l,s,n,c,a)}else if(c=mg(t),typeof c=="function")for(t=c.call(t),i=0;!(l=t.next()).done;)l=l.value,c=r+Bo(l,i++),o+=ul(l,s,n,c,a);else if(l==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return o}function Fa(t,s,n){if(t==null)return t;var r=[],a=0;return ul(t,r,"","",function(l){return s.call(n,l,a++)}),r}function pg(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},ml={transition:null},gg={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:ml,ReactCurrentOwner:Ld};function Gm(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Fa,forEach:function(t,s,n){Fa(t,function(){s.apply(this,arguments)},n)},count:function(t){var s=0;return Fa(t,function(){s++}),s},toArray:function(t){return Fa(t,function(s){return s})||[]},only:function(t){if(!Pd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=yr;be.Fragment=ng;be.Profiler=ag;be.PureComponent=Ed;be.StrictMode=rg;be.Suspense=dg;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gg;be.act=Gm;be.cloneElement=function(t,s,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Um({},t.props),a=t.key,l=t.ref,o=t._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,o=Ld.current),s.key!==void 0&&(a=""+s.key),t.type&&t.type.defaultProps)var i=t.type.defaultProps;for(c in s)Wm.call(s,c)&&!Vm.hasOwnProperty(c)&&(r[c]=s[c]===void 0&&i!==void 0?i[c]:s[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var u=0;u<c;u++)i[u]=arguments[u+2];r.children=i}return{$$typeof:Aa,type:t.type,key:a,ref:l,props:r,_owner:o}};be.createContext=function(t){return t={$$typeof:og,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lg,_context:t},t.Consumer=t};be.createElement=qm;be.createFactory=function(t){var s=qm.bind(null,t);return s.type=t,s};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:ig,render:t}};be.isValidElement=Pd;be.lazy=function(t){return{$$typeof:ug,_payload:{_status:-1,_result:t},_init:pg}};be.memo=function(t,s){return{$$typeof:cg,type:t,compare:s===void 0?null:s}};be.startTransition=function(t){var s=ml.transition;ml.transition={};try{t()}finally{ml.transition=s}};be.unstable_act=Gm;be.useCallback=function(t,s){return xt.current.useCallback(t,s)};be.useContext=function(t){return xt.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};be.useEffect=function(t,s){return xt.current.useEffect(t,s)};be.useId=function(){return xt.current.useId()};be.useImperativeHandle=function(t,s,n){return xt.current.useImperativeHandle(t,s,n)};be.useInsertionEffect=function(t,s){return xt.current.useInsertionEffect(t,s)};be.useLayoutEffect=function(t,s){return xt.current.useLayoutEffect(t,s)};be.useMemo=function(t,s){return xt.current.useMemo(t,s)};be.useReducer=function(t,s,n){return xt.current.useReducer(t,s,n)};be.useRef=function(t){return xt.current.useRef(t)};be.useState=function(t){return xt.current.useState(t)};be.useSyncExternalStore=function(t,s,n){return xt.current.useSyncExternalStore(t,s,n)};be.useTransition=function(){return xt.current.useTransition()};be.version="18.3.1";_m.exports=be;var d=_m.exports;const ve=tg(d),fg=eg({__proto__:null,default:ve},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg=d,bg=Symbol.for("react.element"),vg=Symbol.for("react.fragment"),jg=Object.prototype.hasOwnProperty,Ng=yg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wg={key:!0,ref:!0,__self:!0,__source:!0};function Ym(t,s,n){var r,a={},l=null,o=null;n!==void 0&&(l=""+n),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(o=s.ref);for(r in s)jg.call(s,r)&&!wg.hasOwnProperty(r)&&(a[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:bg,type:t,key:l,ref:o,props:a,_owner:Ng.current}}io.Fragment=vg;io.jsx=Ym;io.jsxs=Ym;Fm.exports=io;var e=Fm.exports,Jm={exports:{}},Tt={},Qm={exports:{}},Xm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s($,P){var W=$.length;$.push(P);e:for(;0<W;){var O=W-1>>>1,U=$[O];if(0<a(U,P))$[O]=P,$[W]=U,W=O;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var P=$[0],W=$.pop();if(W!==P){$[0]=W;e:for(var O=0,U=$.length,q=U>>>1;O<q;){var ee=2*(O+1)-1,z=$[ee],te=ee+1,K=$[te];if(0>a(z,W))te<U&&0>a(K,z)?($[O]=K,$[te]=W,O=te):($[O]=z,$[ee]=W,O=ee);else if(te<U&&0>a(K,W))$[O]=K,$[te]=W,O=te;else break e}}return P}function a($,P){var W=$.sortIndex-P.sortIndex;return W!==0?W:$.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();t.unstable_now=function(){return o.now()-i}}var c=[],u=[],x=1,m=null,p=3,b=!1,k=!1,g=!1,N=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j($){for(var P=n(u);P!==null;){if(P.callback===null)r(u);else if(P.startTime<=$)r(u),P.sortIndex=P.expirationTime,s(c,P);else break;P=n(u)}}function y($){if(g=!1,j($),!k)if(n(c)!==null)k=!0,M(w);else{var P=n(u);P!==null&&C(y,P.startTime-$)}}function w($,P){k=!1,g&&(g=!1,v(D),D=-1),b=!0;var W=p;try{for(j(P),m=n(c);m!==null&&(!(m.expirationTime>P)||$&&!_());){var O=m.callback;if(typeof O=="function"){m.callback=null,p=m.priorityLevel;var U=O(m.expirationTime<=P);P=t.unstable_now(),typeof U=="function"?m.callback=U:m===n(c)&&r(c),j(P)}else r(c);m=n(c)}if(m!==null)var q=!0;else{var ee=n(u);ee!==null&&C(y,ee.startTime-P),q=!1}return q}finally{m=null,p=W,b=!1}}var S=!1,A=null,D=-1,T=5,R=-1;function _(){return!(t.unstable_now()-R<T)}function I(){if(A!==null){var $=t.unstable_now();R=$;var P=!0;try{P=A(!0,$)}finally{P?E():(S=!1,A=null)}}else S=!1}var E;if(typeof h=="function")E=function(){h(I)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,F=V.port2;V.port1.onmessage=I,E=function(){F.postMessage(null)}}else E=function(){N(I,0)};function M($){A=$,S||(S=!0,E())}function C($,P){D=N(function(){$(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){k||b||(k=!0,M(w))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var P=3;break;default:P=p}var W=p;p=P;try{return $()}finally{p=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,P){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var W=p;p=$;try{return P()}finally{p=W}},t.unstable_scheduleCallback=function($,P,W){var O=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?O+W:O):W=O,$){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=W+U,$={id:x++,callback:P,priorityLevel:$,startTime:W,expirationTime:U,sortIndex:-1},W>O?($.sortIndex=W,s(u,$),n(c)===null&&$===n(u)&&(g?(v(D),D=-1):g=!0,C(y,W-O))):($.sortIndex=U,s(c,$),k||b||(k=!0,M(w))),$},t.unstable_shouldYield=_,t.unstable_wrapCallback=function($){var P=p;return function(){var W=p;p=P;try{return $.apply(this,arguments)}finally{p=W}}}})(Xm);Qm.exports=Xm;var Sg=Qm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg=d,At=Sg;function ne(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)s+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Km=new Set,ra={};function In(t,s){dr(t,s),dr(t+"Capture",s)}function dr(t,s){for(ra[t]=s,t=0;t<s.length;t++)Km.add(s[t])}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ci=Object.prototype.hasOwnProperty,Cg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bc={},Hc={};function Ag(t){return Ci.call(Hc,t)?!0:Ci.call(Bc,t)?!1:Cg.test(t)?Hc[t]=!0:(Bc[t]=!0,!1)}function Dg(t,s,n,r){if(n!==null&&n.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Tg(t,s,n,r){if(s===null||typeof s>"u"||Dg(t,s,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function ht(t,s,n,r,a,l,o){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];nt[s]=new ht(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Id=/[\-:]([a-z])/g;function Rd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(Id,Rd);nt[s]=new ht(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(Id,Rd);nt[s]=new ht(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(Id,Rd);nt[s]=new ht(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new ht(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function $d(t,s,n,r){var a=nt.hasOwnProperty(s)?nt[s]:null;(a!==null?a.type!==0:r||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Tg(s,n,a,r)&&(n=null),r||a===null?Ag(s)&&(n===null?t.removeAttribute(s):t.setAttribute(s,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(s=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(s):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,s,n):t.setAttribute(s,n))))}var As=kg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_a=Symbol.for("react.element"),Un=Symbol.for("react.portal"),Bn=Symbol.for("react.fragment"),Od=Symbol.for("react.strict_mode"),Ai=Symbol.for("react.profiler"),Zm=Symbol.for("react.provider"),ex=Symbol.for("react.context"),Fd=Symbol.for("react.forward_ref"),Di=Symbol.for("react.suspense"),Ti=Symbol.for("react.suspense_list"),_d=Symbol.for("react.memo"),Bs=Symbol.for("react.lazy"),tx=Symbol.for("react.offscreen"),Wc=Symbol.iterator;function Dr(t){return t===null||typeof t!="object"?null:(t=Wc&&t[Wc]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Ho;function zr(t){if(Ho===void 0)try{throw Error()}catch(n){var s=n.stack.trim().match(/\n( *(at )?)/);Ho=s&&s[1]||""}return`
`+Ho+t}var Wo=!1;function Vo(t,s){if(!t||Wo)return"";Wo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(u){var r=u}Reflect.construct(t,[],s)}else{try{s.call()}catch(u){r=u}t.call(s.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),l=r.stack.split(`
`),o=a.length-1,i=l.length-1;1<=o&&0<=i&&a[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==l[i]){if(o!==1||i!==1)do if(o--,i--,0>i||a[o]!==l[i]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=i);break}}}finally{Wo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zr(t):""}function Eg(t){switch(t.tag){case 5:return zr(t.type);case 16:return zr("Lazy");case 13:return zr("Suspense");case 19:return zr("SuspenseList");case 0:case 2:case 15:return t=Vo(t.type,!1),t;case 11:return t=Vo(t.type.render,!1),t;case 1:return t=Vo(t.type,!0),t;default:return""}}function Ei(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bn:return"Fragment";case Un:return"Portal";case Ai:return"Profiler";case Od:return"StrictMode";case Di:return"Suspense";case Ti:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ex:return(t.displayName||"Context")+".Consumer";case Zm:return(t._context.displayName||"Context")+".Provider";case Fd:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _d:return s=t.displayName||null,s!==null?s:Ei(t.type)||"Memo";case Bs:s=t._payload,t=t._init;try{return Ei(t(s))}catch{}}return null}function Mg(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ei(s);case 8:return s===Od?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function on(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sx(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Lg(t){var s=sx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),r=""+t[s];if(!t.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(t,s,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function za(t){t._valueTracker||(t._valueTracker=Lg(t))}function nx(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var n=s.getValue(),r="";return t&&(r=sx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(s.setValue(t),!0):!1}function kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mi(t,s){var n=s.checked;return Fe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vc(t,s){var n=s.defaultValue==null?"":s.defaultValue,r=s.checked!=null?s.checked:s.defaultChecked;n=on(s.value!=null?s.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function rx(t,s){s=s.checked,s!=null&&$d(t,"checked",s,!1)}function Li(t,s){rx(t,s);var n=on(s.value),r=s.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Pi(t,s.type,n):s.hasOwnProperty("defaultValue")&&Pi(t,s.type,on(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function qc(t,s,n){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var r=s.type;if(!(r!=="submit"&&r!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,n||s===t.value||(t.value=s),t.defaultValue=s}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pi(t,s,n){(s!=="number"||kl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ur=Array.isArray;function sr(t,s,n,r){if(t=t.options,s){s={};for(var a=0;a<n.length;a++)s["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=s.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+on(n),s=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}s!==null||t[a].disabled||(s=t[a])}s!==null&&(s.selected=!0)}}function Ii(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Fe({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gc(t,s){var n=s.value;if(n==null){if(n=s.children,s=s.defaultValue,n!=null){if(s!=null)throw Error(ne(92));if(Ur(n)){if(1<n.length)throw Error(ne(93));n=n[0]}s=n}s==null&&(s=""),n=s}t._wrapperState={initialValue:on(n)}}function ax(t,s){var n=on(s.value),r=on(s.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),s.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Yc(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function lx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ri(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?lx(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ua,ox=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(s,n,r,a)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Ua=Ua||document.createElement("div"),Ua.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ua.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function aa(t,s){if(s){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=s;return}}t.textContent=s}var qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pg=["Webkit","ms","Moz","O"];Object.keys(qr).forEach(function(t){Pg.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),qr[s]=qr[t]})});function ix(t,s,n){return s==null||typeof s=="boolean"||s===""?"":n||typeof s!="number"||s===0||qr.hasOwnProperty(t)&&qr[t]?(""+s).trim():s+"px"}function dx(t,s){t=t.style;for(var n in s)if(s.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=ix(n,s[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var Ig=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $i(t,s){if(s){if(Ig[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(ne(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(ne(61))}if(s.style!=null&&typeof s.style!="object")throw Error(ne(62))}}function Oi(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fi=null;function zd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _i=null,nr=null,rr=null;function Jc(t){if(t=Ea(t)){if(typeof _i!="function")throw Error(ne(280));var s=t.stateNode;s&&(s=ho(s),_i(t.stateNode,t.type,s))}}function cx(t){nr?rr?rr.push(t):rr=[t]:nr=t}function ux(){if(nr){var t=nr,s=rr;if(rr=nr=null,Jc(t),s)for(t=0;t<s.length;t++)Jc(s[t])}}function mx(t,s){return t(s)}function xx(){}var qo=!1;function hx(t,s,n){if(qo)return t(s,n);qo=!0;try{return mx(t,s,n)}finally{qo=!1,(nr!==null||rr!==null)&&(xx(),ux())}}function la(t,s){var n=t.stateNode;if(n===null)return null;var r=ho(n);if(r===null)return null;n=r[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,s,typeof n));return n}var zi=!1;if(ws)try{var Tr={};Object.defineProperty(Tr,"passive",{get:function(){zi=!0}}),window.addEventListener("test",Tr,Tr),window.removeEventListener("test",Tr,Tr)}catch{zi=!1}function Rg(t,s,n,r,a,l,o,i,c){var u=Array.prototype.slice.call(arguments,3);try{s.apply(n,u)}catch(x){this.onError(x)}}var Gr=!1,Cl=null,Al=!1,Ui=null,$g={onError:function(t){Gr=!0,Cl=t}};function Og(t,s,n,r,a,l,o,i,c){Gr=!1,Cl=null,Rg.apply($g,arguments)}function Fg(t,s,n,r,a,l,o,i,c){if(Og.apply(this,arguments),Gr){if(Gr){var u=Cl;Gr=!1,Cl=null}else throw Error(ne(198));Al||(Al=!0,Ui=u)}}function Rn(t){var s=t,n=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(n=s.return),t=s.return;while(t)}return s.tag===3?n:null}function px(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Qc(t){if(Rn(t)!==t)throw Error(ne(188))}function _g(t){var s=t.alternate;if(!s){if(s=Rn(t),s===null)throw Error(ne(188));return s!==t?null:t}for(var n=t,r=s;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return Qc(a),t;if(l===r)return Qc(a),s;l=l.sibling}throw Error(ne(188))}if(n.return!==r.return)n=a,r=l;else{for(var o=!1,i=a.child;i;){if(i===n){o=!0,n=a,r=l;break}if(i===r){o=!0,r=a,n=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===n){o=!0,n=l,r=a;break}if(i===r){o=!0,r=l,n=a;break}i=i.sibling}if(!o)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:s}function gx(t){return t=_g(t),t!==null?fx(t):null}function fx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=fx(t);if(s!==null)return s;t=t.sibling}return null}var yx=At.unstable_scheduleCallback,Xc=At.unstable_cancelCallback,zg=At.unstable_shouldYield,Ug=At.unstable_requestPaint,Ue=At.unstable_now,Bg=At.unstable_getCurrentPriorityLevel,Ud=At.unstable_ImmediatePriority,bx=At.unstable_UserBlockingPriority,Dl=At.unstable_NormalPriority,Hg=At.unstable_LowPriority,vx=At.unstable_IdlePriority,co=null,ms=null;function Wg(t){if(ms&&typeof ms.onCommitFiberRoot=="function")try{ms.onCommitFiberRoot(co,t,void 0,(t.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:Gg,Vg=Math.log,qg=Math.LN2;function Gg(t){return t>>>=0,t===0?32:31-(Vg(t)/qg|0)|0}var Ba=64,Ha=4194304;function Br(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tl(t,s){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,l=t.pingedLanes,o=n&268435455;if(o!==0){var i=o&~a;i!==0?r=Br(i):(l&=o,l!==0&&(r=Br(l)))}else o=n&~a,o!==0?r=Br(o):l!==0&&(r=Br(l));if(r===0)return 0;if(s!==0&&s!==r&&!(s&a)&&(a=r&-r,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(r&4&&(r|=n&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=r;0<s;)n=31-Kt(s),a=1<<n,r|=t[n],s&=~a;return r}function Yg(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jg(t,s){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var o=31-Kt(l),i=1<<o,c=a[o];c===-1?(!(i&n)||i&r)&&(a[o]=Yg(i,s)):c<=s&&(t.expiredLanes|=i),l&=~i}}function Bi(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jx(){var t=Ba;return Ba<<=1,!(Ba&4194240)&&(Ba=64),t}function Go(t){for(var s=[],n=0;31>n;n++)s.push(t);return s}function Da(t,s,n){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Kt(s),t[s]=n}function Qg(t,s){var n=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-Kt(n),l=1<<a;s[a]=0,r[a]=-1,t[a]=-1,n&=~l}}function Bd(t,s){var n=t.entangledLanes|=s;for(t=t.entanglements;n;){var r=31-Kt(n),a=1<<r;a&s|t[r]&s&&(t[r]|=s),n&=~a}}var Se=0;function Nx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wx,Hd,Sx,kx,Cx,Hi=!1,Wa=[],Xs=null,Ks=null,Zs=null,oa=new Map,ia=new Map,Vs=[],Xg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kc(t,s){switch(t){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":oa.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ia.delete(s.pointerId)}}function Er(t,s,n,r,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},s!==null&&(s=Ea(s),s!==null&&Hd(s)),t):(t.eventSystemFlags|=r,s=t.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),t)}function Kg(t,s,n,r,a){switch(s){case"focusin":return Xs=Er(Xs,t,s,n,r,a),!0;case"dragenter":return Ks=Er(Ks,t,s,n,r,a),!0;case"mouseover":return Zs=Er(Zs,t,s,n,r,a),!0;case"pointerover":var l=a.pointerId;return oa.set(l,Er(oa.get(l)||null,t,s,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,ia.set(l,Er(ia.get(l)||null,t,s,n,r,a)),!0}return!1}function Ax(t){var s=Nn(t.target);if(s!==null){var n=Rn(s);if(n!==null){if(s=n.tag,s===13){if(s=px(n),s!==null){t.blockedOn=s,Cx(t.priority,function(){Sx(n)});return}}else if(s===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xl(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var n=Wi(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fi=r,n.target.dispatchEvent(r),Fi=null}else return s=Ea(n),s!==null&&Hd(s),t.blockedOn=n,!1;s.shift()}return!0}function Zc(t,s,n){xl(t)&&n.delete(s)}function Zg(){Hi=!1,Xs!==null&&xl(Xs)&&(Xs=null),Ks!==null&&xl(Ks)&&(Ks=null),Zs!==null&&xl(Zs)&&(Zs=null),oa.forEach(Zc),ia.forEach(Zc)}function Mr(t,s){t.blockedOn===s&&(t.blockedOn=null,Hi||(Hi=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,Zg)))}function da(t){function s(a){return Mr(a,t)}if(0<Wa.length){Mr(Wa[0],t);for(var n=1;n<Wa.length;n++){var r=Wa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xs!==null&&Mr(Xs,t),Ks!==null&&Mr(Ks,t),Zs!==null&&Mr(Zs,t),oa.forEach(s),ia.forEach(s),n=0;n<Vs.length;n++)r=Vs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vs.length&&(n=Vs[0],n.blockedOn===null);)Ax(n),n.blockedOn===null&&Vs.shift()}var ar=As.ReactCurrentBatchConfig,El=!0;function ef(t,s,n,r){var a=Se,l=ar.transition;ar.transition=null;try{Se=1,Wd(t,s,n,r)}finally{Se=a,ar.transition=l}}function tf(t,s,n,r){var a=Se,l=ar.transition;ar.transition=null;try{Se=4,Wd(t,s,n,r)}finally{Se=a,ar.transition=l}}function Wd(t,s,n,r){if(El){var a=Wi(t,s,n,r);if(a===null)ni(t,s,r,Ml,n),Kc(t,r);else if(Kg(a,t,s,n,r))r.stopPropagation();else if(Kc(t,r),s&4&&-1<Xg.indexOf(t)){for(;a!==null;){var l=Ea(a);if(l!==null&&wx(l),l=Wi(t,s,n,r),l===null&&ni(t,s,r,Ml,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else ni(t,s,r,null,n)}}var Ml=null;function Wi(t,s,n,r){if(Ml=null,t=zd(r),t=Nn(t),t!==null)if(s=Rn(t),s===null)t=null;else if(n=s.tag,n===13){if(t=px(s),t!==null)return t;t=null}else if(n===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Ml=t,null}function Dx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bg()){case Ud:return 1;case bx:return 4;case Dl:case Hg:return 16;case vx:return 536870912;default:return 16}default:return 16}}var Ys=null,Vd=null,hl=null;function Tx(){if(hl)return hl;var t,s=Vd,n=s.length,r,a="value"in Ys?Ys.value:Ys.textContent,l=a.length;for(t=0;t<n&&s[t]===a[t];t++);var o=n-t;for(r=1;r<=o&&s[n-r]===a[l-r];r++);return hl=a.slice(t,1<r?1-r:void 0)}function pl(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Va(){return!0}function eu(){return!1}function Et(t){function s(n,r,a,l,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in t)t.hasOwnProperty(i)&&(n=t[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Va:eu,this.isPropagationStopped=eu,this}return Fe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Va)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Va)},persist:function(){},isPersistent:Va}),s}var br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qd=Et(br),Ta=Fe({},br,{view:0,detail:0}),sf=Et(Ta),Yo,Jo,Lr,uo=Fe({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lr&&(Lr&&t.type==="mousemove"?(Yo=t.screenX-Lr.screenX,Jo=t.screenY-Lr.screenY):Jo=Yo=0,Lr=t),Yo)},movementY:function(t){return"movementY"in t?t.movementY:Jo}}),tu=Et(uo),nf=Fe({},uo,{dataTransfer:0}),rf=Et(nf),af=Fe({},Ta,{relatedTarget:0}),Qo=Et(af),lf=Fe({},br,{animationName:0,elapsedTime:0,pseudoElement:0}),of=Et(lf),df=Fe({},br,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cf=Et(df),uf=Fe({},br,{data:0}),su=Et(uf),mf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pf(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=hf[t])?!!s[t]:!1}function Gd(){return pf}var gf=Fe({},Ta,{key:function(t){if(t.key){var s=mf[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=pl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xf[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gd,charCode:function(t){return t.type==="keypress"?pl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ff=Et(gf),yf=Fe({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nu=Et(yf),bf=Fe({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gd}),vf=Et(bf),jf=Fe({},br,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nf=Et(jf),wf=Fe({},uo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Sf=Et(wf),kf=[9,13,27,32],Yd=ws&&"CompositionEvent"in window,Yr=null;ws&&"documentMode"in document&&(Yr=document.documentMode);var Cf=ws&&"TextEvent"in window&&!Yr,Ex=ws&&(!Yd||Yr&&8<Yr&&11>=Yr),ru=" ",au=!1;function Mx(t,s){switch(t){case"keyup":return kf.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hn=!1;function Af(t,s){switch(t){case"compositionend":return Lx(s);case"keypress":return s.which!==32?null:(au=!0,ru);case"textInput":return t=s.data,t===ru&&au?null:t;default:return null}}function Df(t,s){if(Hn)return t==="compositionend"||!Yd&&Mx(t,s)?(t=Tx(),hl=Vd=Ys=null,Hn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ex&&s.locale!=="ko"?null:s.data;default:return null}}var Tf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lu(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Tf[t.type]:s==="textarea"}function Px(t,s,n,r){cx(r),s=Ll(s,"onChange"),0<s.length&&(n=new qd("onChange","change",null,n,r),t.push({event:n,listeners:s}))}var Jr=null,ca=null;function Ef(t){Wx(t,0)}function mo(t){var s=qn(t);if(nx(s))return t}function Mf(t,s){if(t==="change")return s}var Ix=!1;if(ws){var Xo;if(ws){var Ko="oninput"in document;if(!Ko){var ou=document.createElement("div");ou.setAttribute("oninput","return;"),Ko=typeof ou.oninput=="function"}Xo=Ko}else Xo=!1;Ix=Xo&&(!document.documentMode||9<document.documentMode)}function iu(){Jr&&(Jr.detachEvent("onpropertychange",Rx),ca=Jr=null)}function Rx(t){if(t.propertyName==="value"&&mo(ca)){var s=[];Px(s,ca,t,zd(t)),hx(Ef,s)}}function Lf(t,s,n){t==="focusin"?(iu(),Jr=s,ca=n,Jr.attachEvent("onpropertychange",Rx)):t==="focusout"&&iu()}function Pf(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mo(ca)}function If(t,s){if(t==="click")return mo(s)}function Rf(t,s){if(t==="input"||t==="change")return mo(s)}function $f(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ts=typeof Object.is=="function"?Object.is:$f;function ua(t,s){if(ts(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var n=Object.keys(t),r=Object.keys(s);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Ci.call(s,a)||!ts(t[a],s[a]))return!1}return!0}function du(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cu(t,s){var n=du(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=s&&r>=s)return{node:n,offset:s-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=du(n)}}function $x(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?$x(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Ox(){for(var t=window,s=kl();s instanceof t.HTMLIFrameElement;){try{var n=typeof s.contentWindow.location.href=="string"}catch{n=!1}if(n)t=s.contentWindow;else break;s=kl(t.document)}return s}function Jd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Of(t){var s=Ox(),n=t.focusedElem,r=t.selectionRange;if(s!==n&&n&&n.ownerDocument&&$x(n.ownerDocument.documentElement,n)){if(r!==null&&Jd(n)){if(s=r.start,t=r.end,t===void 0&&(t=s),"selectionStart"in n)n.selectionStart=s,n.selectionEnd=Math.min(t,n.value.length);else if(t=(s=n.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!t.extend&&l>r&&(a=r,r=l,l=a),a=cu(n,l);var o=cu(n,r);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),t.removeAllRanges(),l>r?(t.addRange(s),t.extend(o.node,o.offset)):(s.setEnd(o.node,o.offset),t.addRange(s)))}}for(s=[],t=n;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<s.length;n++)t=s[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ff=ws&&"documentMode"in document&&11>=document.documentMode,Wn=null,Vi=null,Qr=null,qi=!1;function uu(t,s,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qi||Wn==null||Wn!==kl(r)||(r=Wn,"selectionStart"in r&&Jd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qr&&ua(Qr,r)||(Qr=r,r=Ll(Vi,"onSelect"),0<r.length&&(s=new qd("onSelect","select",null,s,n),t.push({event:s,listeners:r}),s.target=Wn)))}function qa(t,s){var n={};return n[t.toLowerCase()]=s.toLowerCase(),n["Webkit"+t]="webkit"+s,n["Moz"+t]="moz"+s,n}var Vn={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionend:qa("Transition","TransitionEnd")},Zo={},Fx={};ws&&(Fx=document.createElement("div").style,"AnimationEvent"in window||(delete Vn.animationend.animation,delete Vn.animationiteration.animation,delete Vn.animationstart.animation),"TransitionEvent"in window||delete Vn.transitionend.transition);function xo(t){if(Zo[t])return Zo[t];if(!Vn[t])return t;var s=Vn[t],n;for(n in s)if(s.hasOwnProperty(n)&&n in Fx)return Zo[t]=s[n];return t}var _x=xo("animationend"),zx=xo("animationiteration"),Ux=xo("animationstart"),Bx=xo("transitionend"),Hx=new Map,mu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xn(t,s){Hx.set(t,s),In(s,[t])}for(var ei=0;ei<mu.length;ei++){var ti=mu[ei],_f=ti.toLowerCase(),zf=ti[0].toUpperCase()+ti.slice(1);xn(_f,"on"+zf)}xn(_x,"onAnimationEnd");xn(zx,"onAnimationIteration");xn(Ux,"onAnimationStart");xn("dblclick","onDoubleClick");xn("focusin","onFocus");xn("focusout","onBlur");xn(Bx,"onTransitionEnd");dr("onMouseEnter",["mouseout","mouseover"]);dr("onMouseLeave",["mouseout","mouseover"]);dr("onPointerEnter",["pointerout","pointerover"]);dr("onPointerLeave",["pointerout","pointerover"]);In("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));In("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));In("onBeforeInput",["compositionend","keypress","textInput","paste"]);In("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));In("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));In("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hr));function xu(t,s,n){var r=t.type||"unknown-event";t.currentTarget=n,Fg(r,s,void 0,t),t.currentTarget=null}function Wx(t,s){s=(s&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var l=void 0;if(s)for(var o=r.length-1;0<=o;o--){var i=r[o],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==l&&a.isPropagationStopped())break e;xu(a,i,u),l=c}else for(o=0;o<r.length;o++){if(i=r[o],c=i.instance,u=i.currentTarget,i=i.listener,c!==l&&a.isPropagationStopped())break e;xu(a,i,u),l=c}}}if(Al)throw t=Ui,Al=!1,Ui=null,t}function Te(t,s){var n=s[Xi];n===void 0&&(n=s[Xi]=new Set);var r=t+"__bubble";n.has(r)||(Vx(s,t,2,!1),n.add(r))}function si(t,s,n){var r=0;s&&(r|=4),Vx(n,t,r,s)}var Ga="_reactListening"+Math.random().toString(36).slice(2);function ma(t){if(!t[Ga]){t[Ga]=!0,Km.forEach(function(n){n!=="selectionchange"&&(Uf.has(n)||si(n,!1,t),si(n,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Ga]||(s[Ga]=!0,si("selectionchange",!1,s))}}function Vx(t,s,n,r){switch(Dx(s)){case 1:var a=ef;break;case 4:a=tf;break;default:a=Wd}n=a.bind(null,s,n,t),a=void 0,!zi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(s,n,{capture:!0,passive:a}):t.addEventListener(s,n,!0):a!==void 0?t.addEventListener(s,n,{passive:a}):t.addEventListener(s,n,!1)}function ni(t,s,n,r,a){var l=r;if(!(s&1)&&!(s&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var i=r.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;i!==null;){if(o=Nn(i),o===null)return;if(c=o.tag,c===5||c===6){r=l=o;continue e}i=i.parentNode}}r=r.return}hx(function(){var u=l,x=zd(n),m=[];e:{var p=Hx.get(t);if(p!==void 0){var b=qd,k=t;switch(t){case"keypress":if(pl(n)===0)break e;case"keydown":case"keyup":b=ff;break;case"focusin":k="focus",b=Qo;break;case"focusout":k="blur",b=Qo;break;case"beforeblur":case"afterblur":b=Qo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=rf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=vf;break;case _x:case zx:case Ux:b=of;break;case Bx:b=Nf;break;case"scroll":b=sf;break;case"wheel":b=Sf;break;case"copy":case"cut":case"paste":b=cf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=nu}var g=(s&4)!==0,N=!g&&t==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var h=u,j;h!==null;){j=h;var y=j.stateNode;if(j.tag===5&&y!==null&&(j=y,v!==null&&(y=la(h,v),y!=null&&g.push(xa(h,y,j)))),N)break;h=h.return}0<g.length&&(p=new b(p,k,null,n,x),m.push({event:p,listeners:g}))}}if(!(s&7)){e:{if(p=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",p&&n!==Fi&&(k=n.relatedTarget||n.fromElement)&&(Nn(k)||k[Ss]))break e;if((b||p)&&(p=x.window===x?x:(p=x.ownerDocument)?p.defaultView||p.parentWindow:window,b?(k=n.relatedTarget||n.toElement,b=u,k=k?Nn(k):null,k!==null&&(N=Rn(k),k!==N||k.tag!==5&&k.tag!==6)&&(k=null)):(b=null,k=u),b!==k)){if(g=tu,y="onMouseLeave",v="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(g=nu,y="onPointerLeave",v="onPointerEnter",h="pointer"),N=b==null?p:qn(b),j=k==null?p:qn(k),p=new g(y,h+"leave",b,n,x),p.target=N,p.relatedTarget=j,y=null,Nn(x)===u&&(g=new g(v,h+"enter",k,n,x),g.target=j,g.relatedTarget=N,y=g),N=y,b&&k)t:{for(g=b,v=k,h=0,j=g;j;j=_n(j))h++;for(j=0,y=v;y;y=_n(y))j++;for(;0<h-j;)g=_n(g),h--;for(;0<j-h;)v=_n(v),j--;for(;h--;){if(g===v||v!==null&&g===v.alternate)break t;g=_n(g),v=_n(v)}g=null}else g=null;b!==null&&hu(m,p,b,g,!1),k!==null&&N!==null&&hu(m,N,k,g,!0)}}e:{if(p=u?qn(u):window,b=p.nodeName&&p.nodeName.toLowerCase(),b==="select"||b==="input"&&p.type==="file")var w=Mf;else if(lu(p))if(Ix)w=Rf;else{w=Pf;var S=Lf}else(b=p.nodeName)&&b.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(w=If);if(w&&(w=w(t,u))){Px(m,w,n,x);break e}S&&S(t,p,u),t==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&Pi(p,"number",p.value)}switch(S=u?qn(u):window,t){case"focusin":(lu(S)||S.contentEditable==="true")&&(Wn=S,Vi=u,Qr=null);break;case"focusout":Qr=Vi=Wn=null;break;case"mousedown":qi=!0;break;case"contextmenu":case"mouseup":case"dragend":qi=!1,uu(m,n,x);break;case"selectionchange":if(Ff)break;case"keydown":case"keyup":uu(m,n,x)}var A;if(Yd)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Hn?Mx(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(Ex&&n.locale!=="ko"&&(Hn||D!=="onCompositionStart"?D==="onCompositionEnd"&&Hn&&(A=Tx()):(Ys=x,Vd="value"in Ys?Ys.value:Ys.textContent,Hn=!0)),S=Ll(u,D),0<S.length&&(D=new su(D,t,null,n,x),m.push({event:D,listeners:S}),A?D.data=A:(A=Lx(n),A!==null&&(D.data=A)))),(A=Cf?Af(t,n):Df(t,n))&&(u=Ll(u,"onBeforeInput"),0<u.length&&(x=new su("onBeforeInput","beforeinput",null,n,x),m.push({event:x,listeners:u}),x.data=A))}Wx(m,s)})}function xa(t,s,n){return{instance:t,listener:s,currentTarget:n}}function Ll(t,s){for(var n=s+"Capture",r=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=la(t,n),l!=null&&r.unshift(xa(t,l,a)),l=la(t,s),l!=null&&r.push(xa(t,l,a))),t=t.return}return r}function _n(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hu(t,s,n,r,a){for(var l=s._reactName,o=[];n!==null&&n!==r;){var i=n,c=i.alternate,u=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&u!==null&&(i=u,a?(c=la(n,l),c!=null&&o.unshift(xa(n,c,i))):a||(c=la(n,l),c!=null&&o.push(xa(n,c,i)))),n=n.return}o.length!==0&&t.push({event:s,listeners:o})}var Bf=/\r\n?/g,Hf=/\u0000|\uFFFD/g;function pu(t){return(typeof t=="string"?t:""+t).replace(Bf,`
`).replace(Hf,"")}function Ya(t,s,n){if(s=pu(s),pu(t)!==s&&n)throw Error(ne(425))}function Pl(){}var Gi=null,Yi=null;function Ji(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Qi=typeof setTimeout=="function"?setTimeout:void 0,Wf=typeof clearTimeout=="function"?clearTimeout:void 0,gu=typeof Promise=="function"?Promise:void 0,Vf=typeof queueMicrotask=="function"?queueMicrotask:typeof gu<"u"?function(t){return gu.resolve(null).then(t).catch(qf)}:Qi;function qf(t){setTimeout(function(){throw t})}function ri(t,s){var n=s,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),da(s);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);da(s)}function en(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function fu(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(s===0)return t;s--}else n==="/$"&&s++}t=t.previousSibling}return null}var vr=Math.random().toString(36).slice(2),cs="__reactFiber$"+vr,ha="__reactProps$"+vr,Ss="__reactContainer$"+vr,Xi="__reactEvents$"+vr,Gf="__reactListeners$"+vr,Yf="__reactHandles$"+vr;function Nn(t){var s=t[cs];if(s)return s;for(var n=t.parentNode;n;){if(s=n[Ss]||n[cs]){if(n=s.alternate,s.child!==null||n!==null&&n.child!==null)for(t=fu(t);t!==null;){if(n=t[cs])return n;t=fu(t)}return s}t=n,n=t.parentNode}return null}function Ea(t){return t=t[cs]||t[Ss],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function ho(t){return t[ha]||null}var Ki=[],Gn=-1;function hn(t){return{current:t}}function Ee(t){0>Gn||(t.current=Ki[Gn],Ki[Gn]=null,Gn--)}function Ae(t,s){Gn++,Ki[Gn]=t.current,t.current=s}var dn={},dt=hn(dn),vt=hn(!1),Tn=dn;function cr(t,s){var n=t.type.contextTypes;if(!n)return dn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===s)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=s[l];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),a}function jt(t){return t=t.childContextTypes,t!=null}function Il(){Ee(vt),Ee(dt)}function yu(t,s,n){if(dt.current!==dn)throw Error(ne(168));Ae(dt,s),Ae(vt,n)}function qx(t,s,n){var r=t.stateNode;if(s=s.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in s))throw Error(ne(108,Mg(t)||"Unknown",a));return Fe({},n,r)}function Rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dn,Tn=dt.current,Ae(dt,t),Ae(vt,vt.current),!0}function bu(t,s,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=qx(t,s,Tn),r.__reactInternalMemoizedMergedChildContext=t,Ee(vt),Ee(dt),Ae(dt,t)):Ee(vt),Ae(vt,n)}var ys=null,po=!1,ai=!1;function Gx(t){ys===null?ys=[t]:ys.push(t)}function Jf(t){po=!0,Gx(t)}function pn(){if(!ai&&ys!==null){ai=!0;var t=0,s=Se;try{var n=ys;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ys=null,po=!1}catch(a){throw ys!==null&&(ys=ys.slice(t+1)),yx(Ud,pn),a}finally{Se=s,ai=!1}}return null}var Yn=[],Jn=0,$l=null,Ol=0,Rt=[],$t=0,En=null,bs=1,vs="";function yn(t,s){Yn[Jn++]=Ol,Yn[Jn++]=$l,$l=t,Ol=s}function Yx(t,s,n){Rt[$t++]=bs,Rt[$t++]=vs,Rt[$t++]=En,En=t;var r=bs;t=vs;var a=32-Kt(r)-1;r&=~(1<<a),n+=1;var l=32-Kt(s)+a;if(30<l){var o=a-a%5;l=(r&(1<<o)-1).toString(32),r>>=o,a-=o,bs=1<<32-Kt(s)+a|n<<a|r,vs=l+t}else bs=1<<l|n<<a|r,vs=t}function Qd(t){t.return!==null&&(yn(t,1),Yx(t,1,0))}function Xd(t){for(;t===$l;)$l=Yn[--Jn],Yn[Jn]=null,Ol=Yn[--Jn],Yn[Jn]=null;for(;t===En;)En=Rt[--$t],Rt[$t]=null,vs=Rt[--$t],Rt[$t]=null,bs=Rt[--$t],Rt[$t]=null}var Ct=null,kt=null,Le=!1,Qt=null;function Jx(t,s){var n=Ot(5,null,null,0);n.elementType="DELETED",n.stateNode=s,n.return=t,s=t.deletions,s===null?(t.deletions=[n],t.flags|=16):s.push(n)}function vu(t,s){switch(t.tag){case 5:var n=t.type;return s=s.nodeType!==1||n.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Ct=t,kt=en(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Ct=t,kt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(n=En!==null?{id:bs,overflow:vs}:null,t.memoizedState={dehydrated:s,treeContext:n,retryLane:1073741824},n=Ot(18,null,null,0),n.stateNode=s,n.return=t,t.child=n,Ct=t,kt=null,!0):!1;default:return!1}}function Zi(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ed(t){if(Le){var s=kt;if(s){var n=s;if(!vu(t,s)){if(Zi(t))throw Error(ne(418));s=en(n.nextSibling);var r=Ct;s&&vu(t,s)?Jx(r,n):(t.flags=t.flags&-4097|2,Le=!1,Ct=t)}}else{if(Zi(t))throw Error(ne(418));t.flags=t.flags&-4097|2,Le=!1,Ct=t}}}function ju(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function Ja(t){if(t!==Ct)return!1;if(!Le)return ju(t),Le=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Ji(t.type,t.memoizedProps)),s&&(s=kt)){if(Zi(t))throw Qx(),Error(ne(418));for(;s;)Jx(t,s),s=en(s.nextSibling)}if(ju(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(s===0){kt=en(t.nextSibling);break e}s--}else n!=="$"&&n!=="$!"&&n!=="$?"||s++}t=t.nextSibling}kt=null}}else kt=Ct?en(t.stateNode.nextSibling):null;return!0}function Qx(){for(var t=kt;t;)t=en(t.nextSibling)}function ur(){kt=Ct=null,Le=!1}function Kd(t){Qt===null?Qt=[t]:Qt.push(t)}var Qf=As.ReactCurrentBatchConfig;function Pr(t,s,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var a=r,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(o){var i=a.refs;o===null?delete i[l]:i[l]=o},s._stringRef=l,s)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function Qa(t,s){throw t=Object.prototype.toString.call(s),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Nu(t){var s=t._init;return s(t._payload)}function Xx(t){function s(v,h){if(t){var j=v.deletions;j===null?(v.deletions=[h],v.flags|=16):j.push(h)}}function n(v,h){if(!t)return null;for(;h!==null;)s(v,h),h=h.sibling;return null}function r(v,h){for(v=new Map;h!==null;)h.key!==null?v.set(h.key,h):v.set(h.index,h),h=h.sibling;return v}function a(v,h){return v=rn(v,h),v.index=0,v.sibling=null,v}function l(v,h,j){return v.index=j,t?(j=v.alternate,j!==null?(j=j.index,j<h?(v.flags|=2,h):j):(v.flags|=2,h)):(v.flags|=1048576,h)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function i(v,h,j,y){return h===null||h.tag!==6?(h=mi(j,v.mode,y),h.return=v,h):(h=a(h,j),h.return=v,h)}function c(v,h,j,y){var w=j.type;return w===Bn?x(v,h,j.props.children,y,j.key):h!==null&&(h.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Bs&&Nu(w)===h.type)?(y=a(h,j.props),y.ref=Pr(v,h,j),y.return=v,y):(y=Nl(j.type,j.key,j.props,null,v.mode,y),y.ref=Pr(v,h,j),y.return=v,y)}function u(v,h,j,y){return h===null||h.tag!==4||h.stateNode.containerInfo!==j.containerInfo||h.stateNode.implementation!==j.implementation?(h=xi(j,v.mode,y),h.return=v,h):(h=a(h,j.children||[]),h.return=v,h)}function x(v,h,j,y,w){return h===null||h.tag!==7?(h=An(j,v.mode,y,w),h.return=v,h):(h=a(h,j),h.return=v,h)}function m(v,h,j){if(typeof h=="string"&&h!==""||typeof h=="number")return h=mi(""+h,v.mode,j),h.return=v,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case _a:return j=Nl(h.type,h.key,h.props,null,v.mode,j),j.ref=Pr(v,null,h),j.return=v,j;case Un:return h=xi(h,v.mode,j),h.return=v,h;case Bs:var y=h._init;return m(v,y(h._payload),j)}if(Ur(h)||Dr(h))return h=An(h,v.mode,j,null),h.return=v,h;Qa(v,h)}return null}function p(v,h,j,y){var w=h!==null?h.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return w!==null?null:i(v,h,""+j,y);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case _a:return j.key===w?c(v,h,j,y):null;case Un:return j.key===w?u(v,h,j,y):null;case Bs:return w=j._init,p(v,h,w(j._payload),y)}if(Ur(j)||Dr(j))return w!==null?null:x(v,h,j,y,null);Qa(v,j)}return null}function b(v,h,j,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return v=v.get(j)||null,i(h,v,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case _a:return v=v.get(y.key===null?j:y.key)||null,c(h,v,y,w);case Un:return v=v.get(y.key===null?j:y.key)||null,u(h,v,y,w);case Bs:var S=y._init;return b(v,h,j,S(y._payload),w)}if(Ur(y)||Dr(y))return v=v.get(j)||null,x(h,v,y,w,null);Qa(h,y)}return null}function k(v,h,j,y){for(var w=null,S=null,A=h,D=h=0,T=null;A!==null&&D<j.length;D++){A.index>D?(T=A,A=null):T=A.sibling;var R=p(v,A,j[D],y);if(R===null){A===null&&(A=T);break}t&&A&&R.alternate===null&&s(v,A),h=l(R,h,D),S===null?w=R:S.sibling=R,S=R,A=T}if(D===j.length)return n(v,A),Le&&yn(v,D),w;if(A===null){for(;D<j.length;D++)A=m(v,j[D],y),A!==null&&(h=l(A,h,D),S===null?w=A:S.sibling=A,S=A);return Le&&yn(v,D),w}for(A=r(v,A);D<j.length;D++)T=b(A,v,D,j[D],y),T!==null&&(t&&T.alternate!==null&&A.delete(T.key===null?D:T.key),h=l(T,h,D),S===null?w=T:S.sibling=T,S=T);return t&&A.forEach(function(_){return s(v,_)}),Le&&yn(v,D),w}function g(v,h,j,y){var w=Dr(j);if(typeof w!="function")throw Error(ne(150));if(j=w.call(j),j==null)throw Error(ne(151));for(var S=w=null,A=h,D=h=0,T=null,R=j.next();A!==null&&!R.done;D++,R=j.next()){A.index>D?(T=A,A=null):T=A.sibling;var _=p(v,A,R.value,y);if(_===null){A===null&&(A=T);break}t&&A&&_.alternate===null&&s(v,A),h=l(_,h,D),S===null?w=_:S.sibling=_,S=_,A=T}if(R.done)return n(v,A),Le&&yn(v,D),w;if(A===null){for(;!R.done;D++,R=j.next())R=m(v,R.value,y),R!==null&&(h=l(R,h,D),S===null?w=R:S.sibling=R,S=R);return Le&&yn(v,D),w}for(A=r(v,A);!R.done;D++,R=j.next())R=b(A,v,D,R.value,y),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?D:R.key),h=l(R,h,D),S===null?w=R:S.sibling=R,S=R);return t&&A.forEach(function(I){return s(v,I)}),Le&&yn(v,D),w}function N(v,h,j,y){if(typeof j=="object"&&j!==null&&j.type===Bn&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case _a:e:{for(var w=j.key,S=h;S!==null;){if(S.key===w){if(w=j.type,w===Bn){if(S.tag===7){n(v,S.sibling),h=a(S,j.props.children),h.return=v,v=h;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Bs&&Nu(w)===S.type){n(v,S.sibling),h=a(S,j.props),h.ref=Pr(v,S,j),h.return=v,v=h;break e}n(v,S);break}else s(v,S);S=S.sibling}j.type===Bn?(h=An(j.props.children,v.mode,y,j.key),h.return=v,v=h):(y=Nl(j.type,j.key,j.props,null,v.mode,y),y.ref=Pr(v,h,j),y.return=v,v=y)}return o(v);case Un:e:{for(S=j.key;h!==null;){if(h.key===S)if(h.tag===4&&h.stateNode.containerInfo===j.containerInfo&&h.stateNode.implementation===j.implementation){n(v,h.sibling),h=a(h,j.children||[]),h.return=v,v=h;break e}else{n(v,h);break}else s(v,h);h=h.sibling}h=xi(j,v.mode,y),h.return=v,v=h}return o(v);case Bs:return S=j._init,N(v,h,S(j._payload),y)}if(Ur(j))return k(v,h,j,y);if(Dr(j))return g(v,h,j,y);Qa(v,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,h!==null&&h.tag===6?(n(v,h.sibling),h=a(h,j),h.return=v,v=h):(n(v,h),h=mi(j,v.mode,y),h.return=v,v=h),o(v)):n(v,h)}return N}var mr=Xx(!0),Kx=Xx(!1),Fl=hn(null),_l=null,Qn=null,Zd=null;function ec(){Zd=Qn=_l=null}function tc(t){var s=Fl.current;Ee(Fl),t._currentValue=s}function td(t,s,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,r!==null&&(r.childLanes|=s)):r!==null&&(r.childLanes&s)!==s&&(r.childLanes|=s),t===n)break;t=t.return}}function lr(t,s){_l=t,Zd=Qn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(bt=!0),t.firstContext=null)}function zt(t){var s=t._currentValue;if(Zd!==t)if(t={context:t,memoizedValue:s,next:null},Qn===null){if(_l===null)throw Error(ne(308));Qn=t,_l.dependencies={lanes:0,firstContext:t}}else Qn=Qn.next=t;return s}var wn=null;function sc(t){wn===null?wn=[t]:wn.push(t)}function Zx(t,s,n,r){var a=s.interleaved;return a===null?(n.next=n,sc(s)):(n.next=a.next,a.next=n),s.interleaved=n,ks(t,r)}function ks(t,s){t.lanes|=s;var n=t.alternate;for(n!==null&&(n.lanes|=s),n=t,t=t.return;t!==null;)t.childLanes|=s,n=t.alternate,n!==null&&(n.childLanes|=s),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hs=!1;function nc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ns(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function tn(t,s,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var a=r.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s,ks(t,n)}return a=r.interleaved,a===null?(s.next=s,sc(r)):(s.next=a.next,a.next=s),r.interleaved=s,ks(t,n)}function gl(t,s,n){if(s=s.updateQueue,s!==null&&(s=s.shared,(n&4194240)!==0)){var r=s.lanes;r&=t.pendingLanes,n|=r,s.lanes=n,Bd(t,n)}}function wu(t,s){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?a=l=s:l=l.next=s}else a=l=s;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=s:t.next=s,n.lastBaseUpdate=s}function zl(t,s,n,r){var a=t.updateQueue;Hs=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,u=c.next;c.next=null,o===null?l=u:o.next=u,o=c;var x=t.alternate;x!==null&&(x=x.updateQueue,i=x.lastBaseUpdate,i!==o&&(i===null?x.firstBaseUpdate=u:i.next=u,x.lastBaseUpdate=c))}if(l!==null){var m=a.baseState;o=0,x=u=c=null,i=l;do{var p=i.lane,b=i.eventTime;if((r&p)===p){x!==null&&(x=x.next={eventTime:b,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var k=t,g=i;switch(p=s,b=n,g.tag){case 1:if(k=g.payload,typeof k=="function"){m=k.call(b,m,p);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=g.payload,p=typeof k=="function"?k.call(b,m,p):k,p==null)break e;m=Fe({},m,p);break e;case 2:Hs=!0}}i.callback!==null&&i.lane!==0&&(t.flags|=64,p=a.effects,p===null?a.effects=[i]:p.push(i))}else b={eventTime:b,lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},x===null?(u=x=b,c=m):x=x.next=b,o|=p;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;p=i,i=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(x===null&&(c=m),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=x,s=a.shared.interleaved,s!==null){a=s;do o|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);Ln|=o,t.lanes=o,t.memoizedState=m}}function Su(t,s,n){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var r=t[s],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(ne(191,a));a.call(r)}}}var Ma={},xs=hn(Ma),pa=hn(Ma),ga=hn(Ma);function Sn(t){if(t===Ma)throw Error(ne(174));return t}function rc(t,s){switch(Ae(ga,s),Ae(pa,t),Ae(xs,Ma),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ri(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Ri(s,t)}Ee(xs),Ae(xs,s)}function xr(){Ee(xs),Ee(pa),Ee(ga)}function th(t){Sn(ga.current);var s=Sn(xs.current),n=Ri(s,t.type);s!==n&&(Ae(pa,t),Ae(xs,n))}function ac(t){pa.current===t&&(Ee(xs),Ee(pa))}var Re=hn(0);function Ul(t){for(var s=t;s!==null;){if(s.tag===13){var n=s.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var li=[];function lc(){for(var t=0;t<li.length;t++)li[t]._workInProgressVersionPrimary=null;li.length=0}var fl=As.ReactCurrentDispatcher,oi=As.ReactCurrentBatchConfig,Mn=0,$e=null,We=null,Je=null,Bl=!1,Xr=!1,fa=0,Xf=0;function at(){throw Error(ne(321))}function oc(t,s){if(s===null)return!1;for(var n=0;n<s.length&&n<t.length;n++)if(!ts(t[n],s[n]))return!1;return!0}function ic(t,s,n,r,a,l){if(Mn=l,$e=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,fl.current=t===null||t.memoizedState===null?t0:s0,t=n(r,a),Xr){l=0;do{if(Xr=!1,fa=0,25<=l)throw Error(ne(301));l+=1,Je=We=null,s.updateQueue=null,fl.current=n0,t=n(r,a)}while(Xr)}if(fl.current=Hl,s=We!==null&&We.next!==null,Mn=0,Je=We=$e=null,Bl=!1,s)throw Error(ne(300));return t}function dc(){var t=fa!==0;return fa=0,t}function ds(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?$e.memoizedState=Je=t:Je=Je.next=t,Je}function Ut(){if(We===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var s=Je===null?$e.memoizedState:Je.next;if(s!==null)Je=s,We=t;else{if(t===null)throw Error(ne(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Je===null?$e.memoizedState=Je=t:Je=Je.next=t}return Je}function ya(t,s){return typeof s=="function"?s(t):s}function ii(t){var s=Ut(),n=s.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=We,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var i=o=null,c=null,u=l;do{var x=u.lane;if((Mn&x)===x)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var m={lane:x,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(i=c=m,o=r):c=c.next=m,$e.lanes|=x,Ln|=x}u=u.next}while(u!==null&&u!==l);c===null?o=r:c.next=i,ts(r,s.memoizedState)||(bt=!0),s.memoizedState=r,s.baseState=o,s.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do l=a.lane,$e.lanes|=l,Ln|=l,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[s.memoizedState,n.dispatch]}function di(t){var s=Ut(),n=s.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,l=s.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do l=t(l,o.action),o=o.next;while(o!==a);ts(l,s.memoizedState)||(bt=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),n.lastRenderedState=l}return[l,r]}function sh(){}function nh(t,s){var n=$e,r=Ut(),a=s(),l=!ts(r.memoizedState,a);if(l&&(r.memoizedState=a,bt=!0),r=r.queue,cc(lh.bind(null,n,r,t),[t]),r.getSnapshot!==s||l||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,ba(9,ah.bind(null,n,r,a,s),void 0,null),Xe===null)throw Error(ne(349));Mn&30||rh(n,s,a)}return a}function rh(t,s,n){t.flags|=16384,t={getSnapshot:s,value:n},s=$e.updateQueue,s===null?(s={lastEffect:null,stores:null},$e.updateQueue=s,s.stores=[t]):(n=s.stores,n===null?s.stores=[t]:n.push(t))}function ah(t,s,n,r){s.value=n,s.getSnapshot=r,oh(s)&&ih(t)}function lh(t,s,n){return n(function(){oh(s)&&ih(t)})}function oh(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!ts(t,n)}catch{return!0}}function ih(t){var s=ks(t,1);s!==null&&Zt(s,t,1,-1)}function ku(t){var s=ds();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:t},s.queue=t,t=t.dispatch=e0.bind(null,$e,t),[s.memoizedState,t]}function ba(t,s,n,r){return t={tag:t,create:s,destroy:n,deps:r,next:null},s=$e.updateQueue,s===null?(s={lastEffect:null,stores:null},$e.updateQueue=s,s.lastEffect=t.next=t):(n=s.lastEffect,n===null?s.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,s.lastEffect=t)),t}function dh(){return Ut().memoizedState}function yl(t,s,n,r){var a=ds();$e.flags|=t,a.memoizedState=ba(1|s,n,void 0,r===void 0?null:r)}function go(t,s,n,r){var a=Ut();r=r===void 0?null:r;var l=void 0;if(We!==null){var o=We.memoizedState;if(l=o.destroy,r!==null&&oc(r,o.deps)){a.memoizedState=ba(s,n,l,r);return}}$e.flags|=t,a.memoizedState=ba(1|s,n,l,r)}function Cu(t,s){return yl(8390656,8,t,s)}function cc(t,s){return go(2048,8,t,s)}function ch(t,s){return go(4,2,t,s)}function uh(t,s){return go(4,4,t,s)}function mh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function xh(t,s,n){return n=n!=null?n.concat([t]):null,go(4,4,mh.bind(null,s,t),n)}function uc(){}function hh(t,s){var n=Ut();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&oc(s,r[1])?r[0]:(n.memoizedState=[t,s],t)}function ph(t,s){var n=Ut();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&oc(s,r[1])?r[0]:(t=t(),n.memoizedState=[t,s],t)}function gh(t,s,n){return Mn&21?(ts(n,s)||(n=jx(),$e.lanes|=n,Ln|=n,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=n)}function Kf(t,s){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=oi.transition;oi.transition={};try{t(!1),s()}finally{Se=n,oi.transition=r}}function fh(){return Ut().memoizedState}function Zf(t,s,n){var r=nn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yh(t))bh(s,n);else if(n=Zx(t,s,n,r),n!==null){var a=mt();Zt(n,t,r,a),vh(n,s,r)}}function e0(t,s,n){var r=nn(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yh(t))bh(s,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var o=s.lastRenderedState,i=l(o,n);if(a.hasEagerState=!0,a.eagerState=i,ts(i,o)){var c=s.interleaved;c===null?(a.next=a,sc(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}n=Zx(t,s,a,r),n!==null&&(a=mt(),Zt(n,t,r,a),vh(n,s,r))}}function yh(t){var s=t.alternate;return t===$e||s!==null&&s===$e}function bh(t,s){Xr=Bl=!0;var n=t.pending;n===null?s.next=s:(s.next=n.next,n.next=s),t.pending=s}function vh(t,s,n){if(n&4194240){var r=s.lanes;r&=t.pendingLanes,n|=r,s.lanes=n,Bd(t,n)}}var Hl={readContext:zt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},t0={readContext:zt,useCallback:function(t,s){return ds().memoizedState=[t,s===void 0?null:s],t},useContext:zt,useEffect:Cu,useImperativeHandle:function(t,s,n){return n=n!=null?n.concat([t]):null,yl(4194308,4,mh.bind(null,s,t),n)},useLayoutEffect:function(t,s){return yl(4194308,4,t,s)},useInsertionEffect:function(t,s){return yl(4,2,t,s)},useMemo:function(t,s){var n=ds();return s=s===void 0?null:s,t=t(),n.memoizedState=[t,s],t},useReducer:function(t,s,n){var r=ds();return s=n!==void 0?n(s):s,r.memoizedState=r.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},r.queue=t,t=t.dispatch=Zf.bind(null,$e,t),[r.memoizedState,t]},useRef:function(t){var s=ds();return t={current:t},s.memoizedState=t},useState:ku,useDebugValue:uc,useDeferredValue:function(t){return ds().memoizedState=t},useTransition:function(){var t=ku(!1),s=t[0];return t=Kf.bind(null,t[1]),ds().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,n){var r=$e,a=ds();if(Le){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=s(),Xe===null)throw Error(ne(349));Mn&30||rh(r,s,n)}a.memoizedState=n;var l={value:n,getSnapshot:s};return a.queue=l,Cu(lh.bind(null,r,l,t),[t]),r.flags|=2048,ba(9,ah.bind(null,r,l,n,s),void 0,null),n},useId:function(){var t=ds(),s=Xe.identifierPrefix;if(Le){var n=vs,r=bs;n=(r&~(1<<32-Kt(r)-1)).toString(32)+n,s=":"+s+"R"+n,n=fa++,0<n&&(s+="H"+n.toString(32)),s+=":"}else n=Xf++,s=":"+s+"r"+n.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},s0={readContext:zt,useCallback:hh,useContext:zt,useEffect:cc,useImperativeHandle:xh,useInsertionEffect:ch,useLayoutEffect:uh,useMemo:ph,useReducer:ii,useRef:dh,useState:function(){return ii(ya)},useDebugValue:uc,useDeferredValue:function(t){var s=Ut();return gh(s,We.memoizedState,t)},useTransition:function(){var t=ii(ya)[0],s=Ut().memoizedState;return[t,s]},useMutableSource:sh,useSyncExternalStore:nh,useId:fh,unstable_isNewReconciler:!1},n0={readContext:zt,useCallback:hh,useContext:zt,useEffect:cc,useImperativeHandle:xh,useInsertionEffect:ch,useLayoutEffect:uh,useMemo:ph,useReducer:di,useRef:dh,useState:function(){return di(ya)},useDebugValue:uc,useDeferredValue:function(t){var s=Ut();return We===null?s.memoizedState=t:gh(s,We.memoizedState,t)},useTransition:function(){var t=di(ya)[0],s=Ut().memoizedState;return[t,s]},useMutableSource:sh,useSyncExternalStore:nh,useId:fh,unstable_isNewReconciler:!1};function Yt(t,s){if(t&&t.defaultProps){s=Fe({},s),t=t.defaultProps;for(var n in t)s[n]===void 0&&(s[n]=t[n]);return s}return s}function sd(t,s,n,r){s=t.memoizedState,n=n(r,s),n=n==null?s:Fe({},s,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fo={isMounted:function(t){return(t=t._reactInternals)?Rn(t)===t:!1},enqueueSetState:function(t,s,n){t=t._reactInternals;var r=mt(),a=nn(t),l=Ns(r,a);l.payload=s,n!=null&&(l.callback=n),s=tn(t,l,a),s!==null&&(Zt(s,t,a,r),gl(s,t,a))},enqueueReplaceState:function(t,s,n){t=t._reactInternals;var r=mt(),a=nn(t),l=Ns(r,a);l.tag=1,l.payload=s,n!=null&&(l.callback=n),s=tn(t,l,a),s!==null&&(Zt(s,t,a,r),gl(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var n=mt(),r=nn(t),a=Ns(n,r);a.tag=2,s!=null&&(a.callback=s),s=tn(t,a,r),s!==null&&(Zt(s,t,r,n),gl(s,t,r))}};function Au(t,s,n,r,a,l,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,l,o):s.prototype&&s.prototype.isPureReactComponent?!ua(n,r)||!ua(a,l):!0}function jh(t,s,n){var r=!1,a=dn,l=s.contextType;return typeof l=="object"&&l!==null?l=zt(l):(a=jt(s)?Tn:dt.current,r=s.contextTypes,l=(r=r!=null)?cr(t,a):dn),s=new s(n,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=fo,t.stateNode=s,s._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),s}function Du(t,s,n,r){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(n,r),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(n,r),s.state!==t&&fo.enqueueReplaceState(s,s.state,null)}function nd(t,s,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},nc(t);var l=s.contextType;typeof l=="object"&&l!==null?a.context=zt(l):(l=jt(s)?Tn:dt.current,a.context=cr(t,l)),a.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(sd(t,s,l,n),a.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&fo.enqueueReplaceState(a,a.state,null),zl(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function hr(t,s){try{var n="",r=s;do n+=Eg(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:a,digest:null}}function ci(t,s,n){return{value:t,source:null,stack:n??null,digest:s??null}}function rd(t,s){try{console.error(s.value)}catch(n){setTimeout(function(){throw n})}}var r0=typeof WeakMap=="function"?WeakMap:Map;function Nh(t,s,n){n=Ns(-1,n),n.tag=3,n.payload={element:null};var r=s.value;return n.callback=function(){Vl||(Vl=!0,hd=r),rd(t,s)},n}function wh(t,s,n){n=Ns(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=s.value;n.payload=function(){return r(a)},n.callback=function(){rd(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){rd(t,s),typeof r!="function"&&(sn===null?sn=new Set([this]):sn.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})}),n}function Tu(t,s,n){var r=t.pingCache;if(r===null){r=t.pingCache=new r0;var a=new Set;r.set(s,a)}else a=r.get(s),a===void 0&&(a=new Set,r.set(s,a));a.has(n)||(a.add(n),t=y0.bind(null,t,s,n),s.then(t,t))}function Eu(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Mu(t,s,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===s?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(s=Ns(-1,1),s.tag=2,tn(n,s,1))),n.lanes|=1),t)}var a0=As.ReactCurrentOwner,bt=!1;function ut(t,s,n,r){s.child=t===null?Kx(s,null,n,r):mr(s,t.child,n,r)}function Lu(t,s,n,r,a){n=n.render;var l=s.ref;return lr(s,a),r=ic(t,s,n,r,l,a),n=dc(),t!==null&&!bt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,Cs(t,s,a)):(Le&&n&&Qd(s),s.flags|=1,ut(t,s,r,a),s.child)}function Pu(t,s,n,r,a){if(t===null){var l=n.type;return typeof l=="function"&&!bc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(s.tag=15,s.type=l,Sh(t,s,l,r,a)):(t=Nl(n.type,null,r,s,s.mode,a),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,!(t.lanes&a)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:ua,n(o,r)&&t.ref===s.ref)return Cs(t,s,a)}return s.flags|=1,t=rn(l,r),t.ref=s.ref,t.return=s,s.child=t}function Sh(t,s,n,r,a){if(t!==null){var l=t.memoizedProps;if(ua(l,r)&&t.ref===s.ref)if(bt=!1,s.pendingProps=r=l,(t.lanes&a)!==0)t.flags&131072&&(bt=!0);else return s.lanes=t.lanes,Cs(t,s,a)}return ad(t,s,n,r,a)}function kh(t,s,n){var r=s.pendingProps,a=r.children,l=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Kn,wt),wt|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Ae(Kn,wt),wt|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Ae(Kn,wt),wt|=r}else l!==null?(r=l.baseLanes|n,s.memoizedState=null):r=n,Ae(Kn,wt),wt|=r;return ut(t,s,a,n),s.child}function Ch(t,s){var n=s.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(s.flags|=512,s.flags|=2097152)}function ad(t,s,n,r,a){var l=jt(n)?Tn:dt.current;return l=cr(s,l),lr(s,a),n=ic(t,s,n,r,l,a),r=dc(),t!==null&&!bt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,Cs(t,s,a)):(Le&&r&&Qd(s),s.flags|=1,ut(t,s,n,a),s.child)}function Iu(t,s,n,r,a){if(jt(n)){var l=!0;Rl(s)}else l=!1;if(lr(s,a),s.stateNode===null)bl(t,s),jh(s,n,r),nd(s,n,r,a),r=!0;else if(t===null){var o=s.stateNode,i=s.memoizedProps;o.props=i;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=zt(u):(u=jt(n)?Tn:dt.current,u=cr(s,u));var x=n.getDerivedStateFromProps,m=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==r||c!==u)&&Du(s,o,r,u),Hs=!1;var p=s.memoizedState;o.state=p,zl(s,r,o,a),c=s.memoizedState,i!==r||p!==c||vt.current||Hs?(typeof x=="function"&&(sd(s,n,x,r),c=s.memoizedState),(i=Hs||Au(s,n,i,r,p,c,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(s.flags|=4194308)):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=r,s.memoizedState=c),o.props=r,o.state=c,o.context=u,r=i):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),r=!1)}else{o=s.stateNode,eh(t,s),i=s.memoizedProps,u=s.type===s.elementType?i:Yt(s.type,i),o.props=u,m=s.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=zt(c):(c=jt(n)?Tn:dt.current,c=cr(s,c));var b=n.getDerivedStateFromProps;(x=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==m||p!==c)&&Du(s,o,r,c),Hs=!1,p=s.memoizedState,o.state=p,zl(s,r,o,a);var k=s.memoizedState;i!==m||p!==k||vt.current||Hs?(typeof b=="function"&&(sd(s,n,b,r),k=s.memoizedState),(u=Hs||Au(s,n,u,r,p,k,c)||!1)?(x||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,c)),typeof o.componentDidUpdate=="function"&&(s.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===t.memoizedProps&&p===t.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&p===t.memoizedState||(s.flags|=1024),s.memoizedProps=r,s.memoizedState=k),o.props=r,o.state=k,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||i===t.memoizedProps&&p===t.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&p===t.memoizedState||(s.flags|=1024),r=!1)}return ld(t,s,n,r,l,a)}function ld(t,s,n,r,a,l){Ch(t,s);var o=(s.flags&128)!==0;if(!r&&!o)return a&&bu(s,n,!1),Cs(t,s,l);r=s.stateNode,a0.current=s;var i=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return s.flags|=1,t!==null&&o?(s.child=mr(s,t.child,null,l),s.child=mr(s,null,i,l)):ut(t,s,i,l),s.memoizedState=r.state,a&&bu(s,n,!0),s.child}function Ah(t){var s=t.stateNode;s.pendingContext?yu(t,s.pendingContext,s.pendingContext!==s.context):s.context&&yu(t,s.context,!1),rc(t,s.containerInfo)}function Ru(t,s,n,r,a){return ur(),Kd(a),s.flags|=256,ut(t,s,n,r),s.child}var od={dehydrated:null,treeContext:null,retryLane:0};function id(t){return{baseLanes:t,cachePool:null,transitions:null}}function Dh(t,s,n){var r=s.pendingProps,a=Re.current,l=!1,o=(s.flags&128)!==0,i;if((i=o)||(i=t!==null&&t.memoizedState===null?!1:(a&2)!==0),i?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Ae(Re,a&1),t===null)return ed(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(o=r.children,t=r.fallback,l?(r=s.mode,l=s.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=vo(o,r,0,null),t=An(t,r,n,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=id(n),s.memoizedState=od,t):mc(s,o));if(a=t.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return l0(t,s,o,r,i,a,n);if(l){l=r.fallback,o=s.mode,a=t.child,i=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&s.child!==a?(r=s.child,r.childLanes=0,r.pendingProps=c,s.deletions=null):(r=rn(a,c),r.subtreeFlags=a.subtreeFlags&14680064),i!==null?l=rn(i,l):(l=An(l,o,n,null),l.flags|=2),l.return=s,r.return=s,r.sibling=l,s.child=r,r=l,l=s.child,o=t.child.memoizedState,o=o===null?id(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=t.childLanes&~n,s.memoizedState=od,r}return l=t.child,t=l.sibling,r=rn(l,{mode:"visible",children:r.children}),!(s.mode&1)&&(r.lanes=n),r.return=s,r.sibling=null,t!==null&&(n=s.deletions,n===null?(s.deletions=[t],s.flags|=16):n.push(t)),s.child=r,s.memoizedState=null,r}function mc(t,s){return s=vo({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Xa(t,s,n,r){return r!==null&&Kd(r),mr(s,t.child,null,n),t=mc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function l0(t,s,n,r,a,l,o){if(n)return s.flags&256?(s.flags&=-257,r=ci(Error(ne(422))),Xa(t,s,o,r)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=r.fallback,a=s.mode,r=vo({mode:"visible",children:r.children},a,0,null),l=An(l,a,o,null),l.flags|=2,r.return=s,l.return=s,r.sibling=l,s.child=r,s.mode&1&&mr(s,t.child,null,o),s.child.memoizedState=id(o),s.memoizedState=od,l);if(!(s.mode&1))return Xa(t,s,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(ne(419)),r=ci(l,r,void 0),Xa(t,s,o,r)}if(i=(o&t.childLanes)!==0,bt||i){if(r=Xe,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,ks(t,a),Zt(r,t,a,-1))}return yc(),r=ci(Error(ne(421))),Xa(t,s,o,r)}return a.data==="$?"?(s.flags|=128,s.child=t.child,s=b0.bind(null,t),a._reactRetry=s,null):(t=l.treeContext,kt=en(a.nextSibling),Ct=s,Le=!0,Qt=null,t!==null&&(Rt[$t++]=bs,Rt[$t++]=vs,Rt[$t++]=En,bs=t.id,vs=t.overflow,En=s),s=mc(s,r.children),s.flags|=4096,s)}function $u(t,s,n){t.lanes|=s;var r=t.alternate;r!==null&&(r.lanes|=s),td(t.return,s,n)}function ui(t,s,n,r,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function Th(t,s,n){var r=s.pendingProps,a=r.revealOrder,l=r.tail;if(ut(t,s,r.children,n),r=Re.current,r&2)r=r&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$u(t,n,s);else if(t.tag===19)$u(t,n,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Re,r),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(n=s.child,a=null;n!==null;)t=n.alternate,t!==null&&Ul(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=s.child,s.child=null):(a=n.sibling,n.sibling=null),ui(s,!1,a,n,l);break;case"backwards":for(n=null,a=s.child,s.child=null;a!==null;){if(t=a.alternate,t!==null&&Ul(t)===null){s.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}ui(s,!0,n,null,l);break;case"together":ui(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function bl(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Cs(t,s,n){if(t!==null&&(s.dependencies=t.dependencies),Ln|=s.lanes,!(n&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(ne(153));if(s.child!==null){for(t=s.child,n=rn(t,t.pendingProps),s.child=n,n.return=s;t.sibling!==null;)t=t.sibling,n=n.sibling=rn(t,t.pendingProps),n.return=s;n.sibling=null}return s.child}function o0(t,s,n){switch(s.tag){case 3:Ah(s),ur();break;case 5:th(s);break;case 1:jt(s.type)&&Rl(s);break;case 4:rc(s,s.stateNode.containerInfo);break;case 10:var r=s.type._context,a=s.memoizedProps.value;Ae(Fl,r._currentValue),r._currentValue=a;break;case 13:if(r=s.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Re,Re.current&1),s.flags|=128,null):n&s.child.childLanes?Dh(t,s,n):(Ae(Re,Re.current&1),t=Cs(t,s,n),t!==null?t.sibling:null);Ae(Re,Re.current&1);break;case 19:if(r=(n&s.childLanes)!==0,t.flags&128){if(r)return Th(t,s,n);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ae(Re,Re.current),r)break;return null;case 22:case 23:return s.lanes=0,kh(t,s,n)}return Cs(t,s,n)}var Eh,dd,Mh,Lh;Eh=function(t,s){for(var n=s.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dd=function(){};Mh=function(t,s,n,r){var a=t.memoizedProps;if(a!==r){t=s.stateNode,Sn(xs.current);var l=null;switch(n){case"input":a=Mi(t,a),r=Mi(t,r),l=[];break;case"select":a=Fe({},a,{value:void 0}),r=Fe({},r,{value:void 0}),l=[];break;case"textarea":a=Ii(t,a),r=Ii(t,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pl)}$i(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var i=a[u];for(o in i)i.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ra.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in r){var c=r[u];if(i=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&c!==i&&(c!=null||i!=null))if(u==="style")if(i){for(o in i)!i.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&i[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(l||(l=[]),l.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ra.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Te("scroll",t),l||i===c||(l=[])):(l=l||[]).push(u,c))}n&&(l=l||[]).push("style",n);var u=l;(s.updateQueue=u)&&(s.flags|=4)}};Lh=function(t,s,n,r){n!==r&&(s.flags|=4)};function Ir(t,s){if(!Le)switch(t.tailMode){case"hidden":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var s=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(s)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,s}function i0(t,s,n){var r=s.pendingProps;switch(Xd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(s),null;case 1:return jt(s.type)&&Il(),lt(s),null;case 3:return r=s.stateNode,xr(),Ee(vt),Ee(dt),lc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ja(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Qt!==null&&(fd(Qt),Qt=null))),dd(t,s),lt(s),null;case 5:ac(s);var a=Sn(ga.current);if(n=s.type,t!==null&&s.stateNode!=null)Mh(t,s,n,r,a),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!r){if(s.stateNode===null)throw Error(ne(166));return lt(s),null}if(t=Sn(xs.current),Ja(s)){r=s.stateNode,n=s.type;var l=s.memoizedProps;switch(r[cs]=s,r[ha]=l,t=(s.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(a=0;a<Hr.length;a++)Te(Hr[a],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":Vc(r,l),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Te("invalid",r);break;case"textarea":Gc(r,l),Te("invalid",r)}$i(n,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var i=l[o];o==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&Ya(r.textContent,i,t),a=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&Ya(r.textContent,i,t),a=["children",""+i]):ra.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":za(r),qc(r,l,!0);break;case"textarea":za(r),Yc(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Pl)}r=a,s.updateQueue=r,r!==null&&(s.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[cs]=s,t[ha]=r,Eh(t,s,!1,!1),s.stateNode=t;e:{switch(o=Oi(n,r),n){case"dialog":Te("cancel",t),Te("close",t),a=r;break;case"iframe":case"object":case"embed":Te("load",t),a=r;break;case"video":case"audio":for(a=0;a<Hr.length;a++)Te(Hr[a],t);a=r;break;case"source":Te("error",t),a=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),a=r;break;case"details":Te("toggle",t),a=r;break;case"input":Vc(t,r),a=Mi(t,r),Te("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=Fe({},r,{value:void 0}),Te("invalid",t);break;case"textarea":Gc(t,r),a=Ii(t,r),Te("invalid",t);break;default:a=r}$i(n,a),i=a;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?dx(t,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ox(t,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&aa(t,c):typeof c=="number"&&aa(t,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ra.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Te("scroll",t):c!=null&&$d(t,l,c,o))}switch(n){case"input":za(t),qc(t,r,!1);break;case"textarea":za(t),Yc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+on(r.value));break;case"select":t.multiple=!!r.multiple,l=r.value,l!=null?sr(t,!!r.multiple,l,!1):r.defaultValue!=null&&sr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Pl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return lt(s),null;case 6:if(t&&s.stateNode!=null)Lh(t,s,t.memoizedProps,r);else{if(typeof r!="string"&&s.stateNode===null)throw Error(ne(166));if(n=Sn(ga.current),Sn(xs.current),Ja(s)){if(r=s.stateNode,n=s.memoizedProps,r[cs]=s,(l=r.nodeValue!==n)&&(t=Ct,t!==null))switch(t.tag){case 3:Ya(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ya(r.nodeValue,n,(t.mode&1)!==0)}l&&(s.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cs]=s,s.stateNode=r}return lt(s),null;case 13:if(Ee(Re),r=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&kt!==null&&s.mode&1&&!(s.flags&128))Qx(),ur(),s.flags|=98560,l=!1;else if(l=Ja(s),r!==null&&r.dehydrated!==null){if(t===null){if(!l)throw Error(ne(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ne(317));l[cs]=s}else ur(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;lt(s),l=!1}else Qt!==null&&(fd(Qt),Qt=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=n,s):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(s.child.flags|=8192,s.mode&1&&(t===null||Re.current&1?qe===0&&(qe=3):yc())),s.updateQueue!==null&&(s.flags|=4),lt(s),null);case 4:return xr(),dd(t,s),t===null&&ma(s.stateNode.containerInfo),lt(s),null;case 10:return tc(s.type._context),lt(s),null;case 17:return jt(s.type)&&Il(),lt(s),null;case 19:if(Ee(Re),l=s.memoizedState,l===null)return lt(s),null;if(r=(s.flags&128)!==0,o=l.rendering,o===null)if(r)Ir(l,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(o=Ul(t),o!==null){for(s.flags|=128,Ir(l,!1),r=o.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),s.subtreeFlags=0,r=n,n=s.child;n!==null;)l=n,t=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,t=o.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Re,Re.current&1|2),s.child}t=t.sibling}l.tail!==null&&Ue()>pr&&(s.flags|=128,r=!0,Ir(l,!1),s.lanes=4194304)}else{if(!r)if(t=Ul(o),t!==null){if(s.flags|=128,r=!0,n=t.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),Ir(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Le)return lt(s),null}else 2*Ue()-l.renderingStartTime>pr&&n!==1073741824&&(s.flags|=128,r=!0,Ir(l,!1),s.lanes=4194304);l.isBackwards?(o.sibling=s.child,s.child=o):(n=l.last,n!==null?n.sibling=o:s.child=o,l.last=o)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Ue(),s.sibling=null,n=Re.current,Ae(Re,r?n&1|2:n&1),s):(lt(s),null);case 22:case 23:return fc(),r=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(s.flags|=8192),r&&s.mode&1?wt&1073741824&&(lt(s),s.subtreeFlags&6&&(s.flags|=8192)):lt(s),null;case 24:return null;case 25:return null}throw Error(ne(156,s.tag))}function d0(t,s){switch(Xd(s),s.tag){case 1:return jt(s.type)&&Il(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return xr(),Ee(vt),Ee(dt),lc(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return ac(s),null;case 13:if(Ee(Re),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(ne(340));ur()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Ee(Re),null;case 4:return xr(),null;case 10:return tc(s.type._context),null;case 22:case 23:return fc(),null;case 24:return null;default:return null}}var Ka=!1,ot=!1,c0=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Xn(t,s){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,s,r)}else n.current=null}function cd(t,s,n){try{n()}catch(r){ze(t,s,r)}}var Ou=!1;function u0(t,s){if(Gi=El,t=Ox(),Jd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,i=-1,c=-1,u=0,x=0,m=t,p=null;t:for(;;){for(var b;m!==n||a!==0&&m.nodeType!==3||(i=o+a),m!==l||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(b=m.firstChild)!==null;)p=m,m=b;for(;;){if(m===t)break t;if(p===n&&++u===a&&(i=o),p===l&&++x===r&&(c=o),(b=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=b}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yi={focusedElem:t,selectionRange:n},El=!1,ue=s;ue!==null;)if(s=ue,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ue=t;else for(;ue!==null;){s=ue;try{var k=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var g=k.memoizedProps,N=k.memoizedState,v=s.stateNode,h=v.getSnapshotBeforeUpdate(s.elementType===s.type?g:Yt(s.type,g),N);v.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(y){ze(s,s.return,y)}if(t=s.sibling,t!==null){t.return=s.return,ue=t;break}ue=s.return}return k=Ou,Ou=!1,k}function Kr(t,s,n){var r=s.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&cd(s,n,l)}a=a.next}while(a!==r)}}function yo(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==s)}}function ud(t){var s=t.ref;if(s!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof s=="function"?s(t):s.current=t}}function Ph(t){var s=t.alternate;s!==null&&(t.alternate=null,Ph(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[cs],delete s[ha],delete s[Xi],delete s[Gf],delete s[Yf])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ih(t){return t.tag===5||t.tag===3||t.tag===4}function Fu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ih(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function md(t,s,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?n.nodeType===8?n.parentNode.insertBefore(t,s):n.insertBefore(t,s):(n.nodeType===8?(s=n.parentNode,s.insertBefore(t,n)):(s=n,s.appendChild(t)),n=n._reactRootContainer,n!=null||s.onclick!==null||(s.onclick=Pl));else if(r!==4&&(t=t.child,t!==null))for(md(t,s,n),t=t.sibling;t!==null;)md(t,s,n),t=t.sibling}function xd(t,s,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?n.insertBefore(t,s):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xd(t,s,n),t=t.sibling;t!==null;)xd(t,s,n),t=t.sibling}var tt=null,Jt=!1;function $s(t,s,n){for(n=n.child;n!==null;)Rh(t,s,n),n=n.sibling}function Rh(t,s,n){if(ms&&typeof ms.onCommitFiberUnmount=="function")try{ms.onCommitFiberUnmount(co,n)}catch{}switch(n.tag){case 5:ot||Xn(n,s);case 6:var r=tt,a=Jt;tt=null,$s(t,s,n),tt=r,Jt=a,tt!==null&&(Jt?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(Jt?(t=tt,n=n.stateNode,t.nodeType===8?ri(t.parentNode,n):t.nodeType===1&&ri(t,n),da(t)):ri(tt,n.stateNode));break;case 4:r=tt,a=Jt,tt=n.stateNode.containerInfo,Jt=!0,$s(t,s,n),tt=r,Jt=a;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&cd(n,s,o),a=a.next}while(a!==r)}$s(t,s,n);break;case 1:if(!ot&&(Xn(n,s),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){ze(n,s,i)}$s(t,s,n);break;case 21:$s(t,s,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,$s(t,s,n),ot=r):$s(t,s,n);break;default:$s(t,s,n)}}function _u(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new c0),s.forEach(function(r){var a=v0.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function qt(t,s){var n=s.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=t,o=s,i=o;e:for(;i!==null;){switch(i.tag){case 5:tt=i.stateNode,Jt=!1;break e;case 3:tt=i.stateNode.containerInfo,Jt=!0;break e;case 4:tt=i.stateNode.containerInfo,Jt=!0;break e}i=i.return}if(tt===null)throw Error(ne(160));Rh(l,o,a),tt=null,Jt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){ze(a,s,u)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)$h(s,t),s=s.sibling}function $h(t,s){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qt(s,t),os(t),r&4){try{Kr(3,t,t.return),yo(3,t)}catch(g){ze(t,t.return,g)}try{Kr(5,t,t.return)}catch(g){ze(t,t.return,g)}}break;case 1:qt(s,t),os(t),r&512&&n!==null&&Xn(n,n.return);break;case 5:if(qt(s,t),os(t),r&512&&n!==null&&Xn(n,n.return),t.flags&32){var a=t.stateNode;try{aa(a,"")}catch(g){ze(t,t.return,g)}}if(r&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,o=n!==null?n.memoizedProps:l,i=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&rx(a,l),Oi(i,o);var u=Oi(i,l);for(o=0;o<c.length;o+=2){var x=c[o],m=c[o+1];x==="style"?dx(a,m):x==="dangerouslySetInnerHTML"?ox(a,m):x==="children"?aa(a,m):$d(a,x,m,u)}switch(i){case"input":Li(a,l);break;case"textarea":ax(a,l);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var b=l.value;b!=null?sr(a,!!l.multiple,b,!1):p!==!!l.multiple&&(l.defaultValue!=null?sr(a,!!l.multiple,l.defaultValue,!0):sr(a,!!l.multiple,l.multiple?[]:"",!1))}a[ha]=l}catch(g){ze(t,t.return,g)}}break;case 6:if(qt(s,t),os(t),r&4){if(t.stateNode===null)throw Error(ne(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(g){ze(t,t.return,g)}}break;case 3:if(qt(s,t),os(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{da(s.containerInfo)}catch(g){ze(t,t.return,g)}break;case 4:qt(s,t),os(t);break;case 13:qt(s,t),os(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(pc=Ue())),r&4&&_u(t);break;case 22:if(x=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(u=ot)||x,qt(s,t),ot=u):qt(s,t),os(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!x&&t.mode&1)for(ue=t,x=t.child;x!==null;){for(m=ue=x;ue!==null;){switch(p=ue,b=p.child,p.tag){case 0:case 11:case 14:case 15:Kr(4,p,p.return);break;case 1:Xn(p,p.return);var k=p.stateNode;if(typeof k.componentWillUnmount=="function"){r=p,n=p.return;try{s=r,k.props=s.memoizedProps,k.state=s.memoizedState,k.componentWillUnmount()}catch(g){ze(r,n,g)}}break;case 5:Xn(p,p.return);break;case 22:if(p.memoizedState!==null){Uu(m);continue}}b!==null?(b.return=p,ue=b):Uu(m)}x=x.sibling}e:for(x=null,m=t;;){if(m.tag===5){if(x===null){x=m;try{a=m.stateNode,u?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=ix("display",o))}catch(g){ze(t,t.return,g)}}}else if(m.tag===6){if(x===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(g){ze(t,t.return,g)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;x===m&&(x=null),m=m.return}x===m&&(x=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:qt(s,t),os(t),r&4&&_u(t);break;case 21:break;default:qt(s,t),os(t)}}function os(t){var s=t.flags;if(s&2){try{e:{for(var n=t.return;n!==null;){if(Ih(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(aa(a,""),r.flags&=-33);var l=Fu(t);xd(t,l,a);break;case 3:case 4:var o=r.stateNode.containerInfo,i=Fu(t);md(t,i,o);break;default:throw Error(ne(161))}}catch(c){ze(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function m0(t,s,n){ue=t,Oh(t)}function Oh(t,s,n){for(var r=(t.mode&1)!==0;ue!==null;){var a=ue,l=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Ka;if(!o){var i=a.alternate,c=i!==null&&i.memoizedState!==null||ot;i=Ka;var u=ot;if(Ka=o,(ot=c)&&!u)for(ue=a;ue!==null;)o=ue,c=o.child,o.tag===22&&o.memoizedState!==null?Bu(a):c!==null?(c.return=o,ue=c):Bu(a);for(;l!==null;)ue=l,Oh(l),l=l.sibling;ue=a,Ka=i,ot=u}zu(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,ue=l):zu(t)}}function zu(t){for(;ue!==null;){var s=ue;if(s.flags&8772){var n=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:ot||yo(5,s);break;case 1:var r=s.stateNode;if(s.flags&4&&!ot)if(n===null)r.componentDidMount();else{var a=s.elementType===s.type?n.memoizedProps:Yt(s.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&Su(s,l,r);break;case 3:var o=s.updateQueue;if(o!==null){if(n=null,s.child!==null)switch(s.child.tag){case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}Su(s,o,n)}break;case 5:var i=s.stateNode;if(n===null&&s.flags&4){n=i;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var u=s.alternate;if(u!==null){var x=u.memoizedState;if(x!==null){var m=x.dehydrated;m!==null&&da(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}ot||s.flags&512&&ud(s)}catch(p){ze(s,s.return,p)}}if(s===t){ue=null;break}if(n=s.sibling,n!==null){n.return=s.return,ue=n;break}ue=s.return}}function Uu(t){for(;ue!==null;){var s=ue;if(s===t){ue=null;break}var n=s.sibling;if(n!==null){n.return=s.return,ue=n;break}ue=s.return}}function Bu(t){for(;ue!==null;){var s=ue;try{switch(s.tag){case 0:case 11:case 15:var n=s.return;try{yo(4,s)}catch(c){ze(s,n,c)}break;case 1:var r=s.stateNode;if(typeof r.componentDidMount=="function"){var a=s.return;try{r.componentDidMount()}catch(c){ze(s,a,c)}}var l=s.return;try{ud(s)}catch(c){ze(s,l,c)}break;case 5:var o=s.return;try{ud(s)}catch(c){ze(s,o,c)}}}catch(c){ze(s,s.return,c)}if(s===t){ue=null;break}var i=s.sibling;if(i!==null){i.return=s.return,ue=i;break}ue=s.return}}var x0=Math.ceil,Wl=As.ReactCurrentDispatcher,xc=As.ReactCurrentOwner,Ft=As.ReactCurrentBatchConfig,je=0,Xe=null,Be=null,st=0,wt=0,Kn=hn(0),qe=0,va=null,Ln=0,bo=0,hc=0,Zr=null,yt=null,pc=0,pr=1/0,gs=null,Vl=!1,hd=null,sn=null,Za=!1,Js=null,ql=0,ea=0,pd=null,vl=-1,jl=0;function mt(){return je&6?Ue():vl!==-1?vl:vl=Ue()}function nn(t){return t.mode&1?je&2&&st!==0?st&-st:Qf.transition!==null?(jl===0&&(jl=jx()),jl):(t=Se,t!==0||(t=window.event,t=t===void 0?16:Dx(t.type)),t):1}function Zt(t,s,n,r){if(50<ea)throw ea=0,pd=null,Error(ne(185));Da(t,n,r),(!(je&2)||t!==Xe)&&(t===Xe&&(!(je&2)&&(bo|=n),qe===4&&qs(t,st)),Nt(t,r),n===1&&je===0&&!(s.mode&1)&&(pr=Ue()+500,po&&pn()))}function Nt(t,s){var n=t.callbackNode;Jg(t,s);var r=Tl(t,t===Xe?st:0);if(r===0)n!==null&&Xc(n),t.callbackNode=null,t.callbackPriority=0;else if(s=r&-r,t.callbackPriority!==s){if(n!=null&&Xc(n),s===1)t.tag===0?Jf(Hu.bind(null,t)):Gx(Hu.bind(null,t)),Vf(function(){!(je&6)&&pn()}),n=null;else{switch(Nx(r)){case 1:n=Ud;break;case 4:n=bx;break;case 16:n=Dl;break;case 536870912:n=vx;break;default:n=Dl}n=Vh(n,Fh.bind(null,t))}t.callbackPriority=s,t.callbackNode=n}}function Fh(t,s){if(vl=-1,jl=0,je&6)throw Error(ne(327));var n=t.callbackNode;if(or()&&t.callbackNode!==n)return null;var r=Tl(t,t===Xe?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||s)s=Gl(t,r);else{s=r;var a=je;je|=2;var l=zh();(Xe!==t||st!==s)&&(gs=null,pr=Ue()+500,Cn(t,s));do try{g0();break}catch(i){_h(t,i)}while(!0);ec(),Wl.current=l,je=a,Be!==null?s=0:(Xe=null,st=0,s=qe)}if(s!==0){if(s===2&&(a=Bi(t),a!==0&&(r=a,s=gd(t,a))),s===1)throw n=va,Cn(t,0),qs(t,r),Nt(t,Ue()),n;if(s===6)qs(t,r);else{if(a=t.current.alternate,!(r&30)&&!h0(a)&&(s=Gl(t,r),s===2&&(l=Bi(t),l!==0&&(r=l,s=gd(t,l))),s===1))throw n=va,Cn(t,0),qs(t,r),Nt(t,Ue()),n;switch(t.finishedWork=a,t.finishedLanes=r,s){case 0:case 1:throw Error(ne(345));case 2:bn(t,yt,gs);break;case 3:if(qs(t,r),(r&130023424)===r&&(s=pc+500-Ue(),10<s)){if(Tl(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){mt(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Qi(bn.bind(null,t,yt,gs),s);break}bn(t,yt,gs);break;case 4:if(qs(t,r),(r&4194240)===r)break;for(s=t.eventTimes,a=-1;0<r;){var o=31-Kt(r);l=1<<o,o=s[o],o>a&&(a=o),r&=~l}if(r=a,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*x0(r/1960))-r,10<r){t.timeoutHandle=Qi(bn.bind(null,t,yt,gs),r);break}bn(t,yt,gs);break;case 5:bn(t,yt,gs);break;default:throw Error(ne(329))}}}return Nt(t,Ue()),t.callbackNode===n?Fh.bind(null,t):null}function gd(t,s){var n=Zr;return t.current.memoizedState.isDehydrated&&(Cn(t,s).flags|=256),t=Gl(t,s),t!==2&&(s=yt,yt=n,s!==null&&fd(s)),t}function fd(t){yt===null?yt=t:yt.push.apply(yt,t)}function h0(t){for(var s=t;;){if(s.flags&16384){var n=s.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!ts(l(),a))return!1}catch{return!1}}}if(n=s.child,s.subtreeFlags&16384&&n!==null)n.return=s,s=n;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function qs(t,s){for(s&=~hc,s&=~bo,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var n=31-Kt(s),r=1<<n;t[n]=-1,s&=~r}}function Hu(t){if(je&6)throw Error(ne(327));or();var s=Tl(t,0);if(!(s&1))return Nt(t,Ue()),null;var n=Gl(t,s);if(t.tag!==0&&n===2){var r=Bi(t);r!==0&&(s=r,n=gd(t,r))}if(n===1)throw n=va,Cn(t,0),qs(t,s),Nt(t,Ue()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,bn(t,yt,gs),Nt(t,Ue()),null}function gc(t,s){var n=je;je|=1;try{return t(s)}finally{je=n,je===0&&(pr=Ue()+500,po&&pn())}}function Pn(t){Js!==null&&Js.tag===0&&!(je&6)&&or();var s=je;je|=1;var n=Ft.transition,r=Se;try{if(Ft.transition=null,Se=1,t)return t()}finally{Se=r,Ft.transition=n,je=s,!(je&6)&&pn()}}function fc(){wt=Kn.current,Ee(Kn)}function Cn(t,s){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Wf(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Xd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Il();break;case 3:xr(),Ee(vt),Ee(dt),lc();break;case 5:ac(r);break;case 4:xr();break;case 13:Ee(Re);break;case 19:Ee(Re);break;case 10:tc(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Xe=t,Be=t=rn(t.current,null),st=wt=s,qe=0,va=null,hc=bo=Ln=0,yt=Zr=null,wn!==null){for(s=0;s<wn.length;s++)if(n=wn[s],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=a,r.next=o}n.pending=r}wn=null}return t}function _h(t,s){do{var n=Be;try{if(ec(),fl.current=Hl,Bl){for(var r=$e.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Bl=!1}if(Mn=0,Je=We=$e=null,Xr=!1,fa=0,xc.current=null,n===null||n.return===null){qe=1,va=s,Be=null;break}e:{var l=t,o=n.return,i=n,c=s;if(s=st,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,x=i,m=x.tag;if(!(x.mode&1)&&(m===0||m===11||m===15)){var p=x.alternate;p?(x.updateQueue=p.updateQueue,x.memoizedState=p.memoizedState,x.lanes=p.lanes):(x.updateQueue=null,x.memoizedState=null)}var b=Eu(o);if(b!==null){b.flags&=-257,Mu(b,o,i,l,s),b.mode&1&&Tu(l,u,s),s=b,c=u;var k=s.updateQueue;if(k===null){var g=new Set;g.add(c),s.updateQueue=g}else k.add(c);break e}else{if(!(s&1)){Tu(l,u,s),yc();break e}c=Error(ne(426))}}else if(Le&&i.mode&1){var N=Eu(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Mu(N,o,i,l,s),Kd(hr(c,i));break e}}l=c=hr(c,i),qe!==4&&(qe=2),Zr===null?Zr=[l]:Zr.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var v=Nh(l,c,s);wu(l,v);break e;case 1:i=c;var h=l.type,j=l.stateNode;if(!(l.flags&128)&&(typeof h.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(sn===null||!sn.has(j)))){l.flags|=65536,s&=-s,l.lanes|=s;var y=wh(l,i,s);wu(l,y);break e}}l=l.return}while(l!==null)}Bh(n)}catch(w){s=w,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function zh(){var t=Wl.current;return Wl.current=Hl,t===null?Hl:t}function yc(){(qe===0||qe===3||qe===2)&&(qe=4),Xe===null||!(Ln&268435455)&&!(bo&268435455)||qs(Xe,st)}function Gl(t,s){var n=je;je|=2;var r=zh();(Xe!==t||st!==s)&&(gs=null,Cn(t,s));do try{p0();break}catch(a){_h(t,a)}while(!0);if(ec(),je=n,Wl.current=r,Be!==null)throw Error(ne(261));return Xe=null,st=0,qe}function p0(){for(;Be!==null;)Uh(Be)}function g0(){for(;Be!==null&&!zg();)Uh(Be)}function Uh(t){var s=Wh(t.alternate,t,wt);t.memoizedProps=t.pendingProps,s===null?Bh(t):Be=s,xc.current=null}function Bh(t){var s=t;do{var n=s.alternate;if(t=s.return,s.flags&32768){if(n=d0(n,s),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Be=null;return}}else if(n=i0(n,s,wt),n!==null){Be=n;return}if(s=s.sibling,s!==null){Be=s;return}Be=s=t}while(s!==null);qe===0&&(qe=5)}function bn(t,s,n){var r=Se,a=Ft.transition;try{Ft.transition=null,Se=1,f0(t,s,n,r)}finally{Ft.transition=a,Se=r}return null}function f0(t,s,n,r){do or();while(Js!==null);if(je&6)throw Error(ne(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(Qg(t,l),t===Xe&&(Be=Xe=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Za||(Za=!0,Vh(Dl,function(){return or(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Ft.transition,Ft.transition=null;var o=Se;Se=1;var i=je;je|=4,xc.current=null,u0(t,n),$h(n,t),Of(Yi),El=!!Gi,Yi=Gi=null,t.current=n,m0(n),Ug(),je=i,Se=o,Ft.transition=l}else t.current=n;if(Za&&(Za=!1,Js=t,ql=a),l=t.pendingLanes,l===0&&(sn=null),Wg(n.stateNode),Nt(t,Ue()),s!==null)for(r=t.onRecoverableError,n=0;n<s.length;n++)a=s[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Vl)throw Vl=!1,t=hd,hd=null,t;return ql&1&&t.tag!==0&&or(),l=t.pendingLanes,l&1?t===pd?ea++:(ea=0,pd=t):ea=0,pn(),null}function or(){if(Js!==null){var t=Nx(ql),s=Ft.transition,n=Se;try{if(Ft.transition=null,Se=16>t?16:t,Js===null)var r=!1;else{if(t=Js,Js=null,ql=0,je&6)throw Error(ne(331));var a=je;for(je|=4,ue=t.current;ue!==null;){var l=ue,o=l.child;if(ue.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var u=i[c];for(ue=u;ue!==null;){var x=ue;switch(x.tag){case 0:case 11:case 15:Kr(8,x,l)}var m=x.child;if(m!==null)m.return=x,ue=m;else for(;ue!==null;){x=ue;var p=x.sibling,b=x.return;if(Ph(x),x===u){ue=null;break}if(p!==null){p.return=b,ue=p;break}ue=b}}}var k=l.alternate;if(k!==null){var g=k.child;if(g!==null){k.child=null;do{var N=g.sibling;g.sibling=null,g=N}while(g!==null)}}ue=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,ue=o;else e:for(;ue!==null;){if(l=ue,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Kr(9,l,l.return)}var v=l.sibling;if(v!==null){v.return=l.return,ue=v;break e}ue=l.return}}var h=t.current;for(ue=h;ue!==null;){o=ue;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,ue=j;else e:for(o=h;ue!==null;){if(i=ue,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:yo(9,i)}}catch(w){ze(i,i.return,w)}if(i===o){ue=null;break e}var y=i.sibling;if(y!==null){y.return=i.return,ue=y;break e}ue=i.return}}if(je=a,pn(),ms&&typeof ms.onPostCommitFiberRoot=="function")try{ms.onPostCommitFiberRoot(co,t)}catch{}r=!0}return r}finally{Se=n,Ft.transition=s}}return!1}function Wu(t,s,n){s=hr(n,s),s=Nh(t,s,1),t=tn(t,s,1),s=mt(),t!==null&&(Da(t,1,s),Nt(t,s))}function ze(t,s,n){if(t.tag===3)Wu(t,t,n);else for(;s!==null;){if(s.tag===3){Wu(s,t,n);break}else if(s.tag===1){var r=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sn===null||!sn.has(r))){t=hr(n,t),t=wh(s,t,1),s=tn(s,t,1),t=mt(),s!==null&&(Da(s,1,t),Nt(s,t));break}}s=s.return}}function y0(t,s,n){var r=t.pingCache;r!==null&&r.delete(s),s=mt(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(st&n)===n&&(qe===4||qe===3&&(st&130023424)===st&&500>Ue()-pc?Cn(t,0):hc|=n),Nt(t,s)}function Hh(t,s){s===0&&(t.mode&1?(s=Ha,Ha<<=1,!(Ha&130023424)&&(Ha=4194304)):s=1);var n=mt();t=ks(t,s),t!==null&&(Da(t,s,n),Nt(t,n))}function b0(t){var s=t.memoizedState,n=0;s!==null&&(n=s.retryLane),Hh(t,n)}function v0(t,s){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(s),Hh(t,n)}var Wh;Wh=function(t,s,n){if(t!==null)if(t.memoizedProps!==s.pendingProps||vt.current)bt=!0;else{if(!(t.lanes&n)&&!(s.flags&128))return bt=!1,o0(t,s,n);bt=!!(t.flags&131072)}else bt=!1,Le&&s.flags&1048576&&Yx(s,Ol,s.index);switch(s.lanes=0,s.tag){case 2:var r=s.type;bl(t,s),t=s.pendingProps;var a=cr(s,dt.current);lr(s,n),a=ic(null,s,r,t,a,n);var l=dc();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,jt(r)?(l=!0,Rl(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,nc(s),a.updater=fo,s.stateNode=a,a._reactInternals=s,nd(s,r,t,n),s=ld(null,s,r,!0,l,n)):(s.tag=0,Le&&l&&Qd(s),ut(null,s,a,n),s=s.child),s;case 16:r=s.elementType;e:{switch(bl(t,s),t=s.pendingProps,a=r._init,r=a(r._payload),s.type=r,a=s.tag=N0(r),t=Yt(r,t),a){case 0:s=ad(null,s,r,t,n);break e;case 1:s=Iu(null,s,r,t,n);break e;case 11:s=Lu(null,s,r,t,n);break e;case 14:s=Pu(null,s,r,Yt(r.type,t),n);break e}throw Error(ne(306,r,""))}return s;case 0:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Yt(r,a),ad(t,s,r,a,n);case 1:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Yt(r,a),Iu(t,s,r,a,n);case 3:e:{if(Ah(s),t===null)throw Error(ne(387));r=s.pendingProps,l=s.memoizedState,a=l.element,eh(t,s),zl(s,r,null,n);var o=s.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=hr(Error(ne(423)),s),s=Ru(t,s,r,n,a);break e}else if(r!==a){a=hr(Error(ne(424)),s),s=Ru(t,s,r,n,a);break e}else for(kt=en(s.stateNode.containerInfo.firstChild),Ct=s,Le=!0,Qt=null,n=Kx(s,null,r,n),s.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ur(),r===a){s=Cs(t,s,n);break e}ut(t,s,r,n)}s=s.child}return s;case 5:return th(s),t===null&&ed(s),r=s.type,a=s.pendingProps,l=t!==null?t.memoizedProps:null,o=a.children,Ji(r,a)?o=null:l!==null&&Ji(r,l)&&(s.flags|=32),Ch(t,s),ut(t,s,o,n),s.child;case 6:return t===null&&ed(s),null;case 13:return Dh(t,s,n);case 4:return rc(s,s.stateNode.containerInfo),r=s.pendingProps,t===null?s.child=mr(s,null,r,n):ut(t,s,r,n),s.child;case 11:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Yt(r,a),Lu(t,s,r,a,n);case 7:return ut(t,s,s.pendingProps,n),s.child;case 8:return ut(t,s,s.pendingProps.children,n),s.child;case 12:return ut(t,s,s.pendingProps.children,n),s.child;case 10:e:{if(r=s.type._context,a=s.pendingProps,l=s.memoizedProps,o=a.value,Ae(Fl,r._currentValue),r._currentValue=o,l!==null)if(ts(l.value,o)){if(l.children===a.children&&!vt.current){s=Cs(t,s,n);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var i=l.dependencies;if(i!==null){o=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=Ns(-1,n&-n),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var x=u.pending;x===null?c.next=c:(c.next=x.next,x.next=c),u.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),td(l.return,n,s),i.lanes|=n;break}c=c.next}}else if(l.tag===10)o=l.type===s.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(ne(341));o.lanes|=n,i=o.alternate,i!==null&&(i.lanes|=n),td(o,n,s),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===s){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}ut(t,s,a.children,n),s=s.child}return s;case 9:return a=s.type,r=s.pendingProps.children,lr(s,n),a=zt(a),r=r(a),s.flags|=1,ut(t,s,r,n),s.child;case 14:return r=s.type,a=Yt(r,s.pendingProps),a=Yt(r.type,a),Pu(t,s,r,a,n);case 15:return Sh(t,s,s.type,s.pendingProps,n);case 17:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Yt(r,a),bl(t,s),s.tag=1,jt(r)?(t=!0,Rl(s)):t=!1,lr(s,n),jh(s,r,a),nd(s,r,a,n),ld(null,s,r,!0,t,n);case 19:return Th(t,s,n);case 22:return kh(t,s,n)}throw Error(ne(156,s.tag))};function Vh(t,s){return yx(t,s)}function j0(t,s,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,s,n,r){return new j0(t,s,n,r)}function bc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function N0(t){if(typeof t=="function")return bc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fd)return 11;if(t===_d)return 14}return 2}function rn(t,s){var n=t.alternate;return n===null?(n=Ot(t.tag,s,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=s,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,s=t.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nl(t,s,n,r,a,l){var o=2;if(r=t,typeof t=="function")bc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bn:return An(n.children,a,l,s);case Od:o=8,a|=8;break;case Ai:return t=Ot(12,n,s,a|2),t.elementType=Ai,t.lanes=l,t;case Di:return t=Ot(13,n,s,a),t.elementType=Di,t.lanes=l,t;case Ti:return t=Ot(19,n,s,a),t.elementType=Ti,t.lanes=l,t;case tx:return vo(n,a,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Zm:o=10;break e;case ex:o=9;break e;case Fd:o=11;break e;case _d:o=14;break e;case Bs:o=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return s=Ot(o,n,s,a),s.elementType=t,s.type=r,s.lanes=l,s}function An(t,s,n,r){return t=Ot(7,t,r,s),t.lanes=n,t}function vo(t,s,n,r){return t=Ot(22,t,r,s),t.elementType=tx,t.lanes=n,t.stateNode={isHidden:!1},t}function mi(t,s,n){return t=Ot(6,t,null,s),t.lanes=n,t}function xi(t,s,n){return s=Ot(4,t.children!==null?t.children:[],t.key,s),s.lanes=n,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function w0(t,s,n,r,a){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Go(0),this.expirationTimes=Go(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Go(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function vc(t,s,n,r,a,l,o,i,c){return t=new w0(t,s,n,i,c),s===1?(s=1,l===!0&&(s|=8)):s=0,l=Ot(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},nc(l),t}function S0(t,s,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Un,key:r==null?null:""+r,children:t,containerInfo:s,implementation:n}}function qh(t){if(!t)return dn;t=t._reactInternals;e:{if(Rn(t)!==t||t.tag!==1)throw Error(ne(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(jt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(jt(n))return qx(t,n,s)}return s}function Gh(t,s,n,r,a,l,o,i,c){return t=vc(n,r,!0,t,a,l,o,i,c),t.context=qh(null),n=t.current,r=mt(),a=nn(n),l=Ns(r,a),l.callback=s??null,tn(n,l,a),t.current.lanes=a,Da(t,a,r),Nt(t,r),t}function jo(t,s,n,r){var a=s.current,l=mt(),o=nn(a);return n=qh(n),s.context===null?s.context=n:s.pendingContext=n,s=Ns(l,o),s.payload={element:t},r=r===void 0?null:r,r!==null&&(s.callback=r),t=tn(a,s,o),t!==null&&(Zt(t,a,o,l),gl(t,a,o)),o}function Yl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vu(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<s?n:s}}function jc(t,s){Vu(t,s),(t=t.alternate)&&Vu(t,s)}function k0(){return null}var Yh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nc(t){this._internalRoot=t}No.prototype.render=Nc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(ne(409));jo(t,s,null,null)};No.prototype.unmount=Nc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Pn(function(){jo(null,t,null,null)}),s[Ss]=null}};function No(t){this._internalRoot=t}No.prototype.unstable_scheduleHydration=function(t){if(t){var s=kx();t={blockedOn:null,target:t,priority:s};for(var n=0;n<Vs.length&&s!==0&&s<Vs[n].priority;n++);Vs.splice(n,0,t),n===0&&Ax(t)}};function wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qu(){}function C0(t,s,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var u=Yl(o);l.call(u)}}var o=Gh(s,r,t,0,null,!1,!1,"",qu);return t._reactRootContainer=o,t[Ss]=o.current,ma(t.nodeType===8?t.parentNode:t),Pn(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var i=r;r=function(){var u=Yl(c);i.call(u)}}var c=vc(t,0,!1,null,null,!1,!1,"",qu);return t._reactRootContainer=c,t[Ss]=c.current,ma(t.nodeType===8?t.parentNode:t),Pn(function(){jo(s,c,n,r)}),c}function So(t,s,n,r,a){var l=n._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var i=a;a=function(){var c=Yl(o);i.call(c)}}jo(s,o,t,a)}else o=C0(n,s,t,a,r);return Yl(o)}wx=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var n=Br(s.pendingLanes);n!==0&&(Bd(s,n|1),Nt(s,Ue()),!(je&6)&&(pr=Ue()+500,pn()))}break;case 13:Pn(function(){var r=ks(t,1);if(r!==null){var a=mt();Zt(r,t,1,a)}}),jc(t,1)}};Hd=function(t){if(t.tag===13){var s=ks(t,134217728);if(s!==null){var n=mt();Zt(s,t,134217728,n)}jc(t,134217728)}};Sx=function(t){if(t.tag===13){var s=nn(t),n=ks(t,s);if(n!==null){var r=mt();Zt(n,t,s,r)}jc(t,s)}};kx=function(){return Se};Cx=function(t,s){var n=Se;try{return Se=t,s()}finally{Se=n}};_i=function(t,s,n){switch(s){case"input":if(Li(t,n),s=n.name,n.type==="radio"&&s!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<n.length;s++){var r=n[s];if(r!==t&&r.form===t.form){var a=ho(r);if(!a)throw Error(ne(90));nx(r),Li(r,a)}}}break;case"textarea":ax(t,n);break;case"select":s=n.value,s!=null&&sr(t,!!n.multiple,s,!1)}};mx=gc;xx=Pn;var A0={usingClientEntryPoint:!1,Events:[Ea,qn,ho,cx,ux,gc]},Rr={findFiberByHostInstance:Nn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D0={bundleType:Rr.bundleType,version:Rr.version,rendererPackageName:Rr.rendererPackageName,rendererConfig:Rr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:As.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gx(t),t===null?null:t.stateNode},findFiberByHostInstance:Rr.findFiberByHostInstance||k0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var el=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!el.isDisabled&&el.supportsFiber)try{co=el.inject(D0),ms=el}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A0;Tt.createPortal=function(t,s){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wc(s))throw Error(ne(200));return S0(t,s,null,n)};Tt.createRoot=function(t,s){if(!wc(t))throw Error(ne(299));var n=!1,r="",a=Yh;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=vc(t,1,!1,null,null,n,!1,r,a),t[Ss]=s.current,ma(t.nodeType===8?t.parentNode:t),new Nc(s)};Tt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=gx(s),t=t===null?null:t.stateNode,t};Tt.flushSync=function(t){return Pn(t)};Tt.hydrate=function(t,s,n){if(!wo(s))throw Error(ne(200));return So(null,t,s,!0,n)};Tt.hydrateRoot=function(t,s,n){if(!wc(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",o=Yh;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),s=Gh(s,null,t,1,n??null,a,!1,l,o),t[Ss]=s.current,ma(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[n,a]:s.mutableSourceEagerHydrationData.push(n,a);return new No(s)};Tt.render=function(t,s,n){if(!wo(s))throw Error(ne(200));return So(null,t,s,!1,n)};Tt.unmountComponentAtNode=function(t){if(!wo(t))throw Error(ne(40));return t._reactRootContainer?(Pn(function(){So(null,null,t,!1,function(){t._reactRootContainer=null,t[Ss]=null})}),!0):!1};Tt.unstable_batchedUpdates=gc;Tt.unstable_renderSubtreeIntoContainer=function(t,s,n,r){if(!wo(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return So(t,s,n,!1,r)};Tt.version="18.3.1-next-f1338f8080-20240426";function Jh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jh)}catch(t){console.error(t)}}Jh(),Jm.exports=Tt;var Zn=Jm.exports,Qh,Gu=Zn;Qh=Gu.createRoot,Gu.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ja(){return ja=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ja.apply(this,arguments)}var Qs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qs||(Qs={}));const Yu="popstate";function T0(t){t===void 0&&(t={});function s(r,a){let{pathname:l,search:o,hash:i}=r.location;return yd("",{pathname:l,search:o,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Jl(a)}return M0(s,n,null,t)}function Oe(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Sc(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function E0(){return Math.random().toString(36).substr(2,8)}function Ju(t,s){return{usr:t.state,key:t.key,idx:s}}function yd(t,s,n,r){return n===void 0&&(n=null),ja({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?jr(s):s,{state:n,key:s&&s.key||r||E0()})}function Jl(t){let{pathname:s="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(s+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function jr(t){let s={};if(t){let n=t.indexOf("#");n>=0&&(s.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(s.search=t.substr(r),t=t.substr(0,r)),t&&(s.pathname=t)}return s}function M0(t,s,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,o=a.history,i=Qs.Pop,c=null,u=x();u==null&&(u=0,o.replaceState(ja({},o.state,{idx:u}),""));function x(){return(o.state||{idx:null}).idx}function m(){i=Qs.Pop;let N=x(),v=N==null?null:N-u;u=N,c&&c({action:i,location:g.location,delta:v})}function p(N,v){i=Qs.Push;let h=yd(g.location,N,v);u=x()+1;let j=Ju(h,u),y=g.createHref(h);try{o.pushState(j,"",y)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(y)}l&&c&&c({action:i,location:g.location,delta:1})}function b(N,v){i=Qs.Replace;let h=yd(g.location,N,v);u=x();let j=Ju(h,u),y=g.createHref(h);o.replaceState(j,"",y),l&&c&&c({action:i,location:g.location,delta:0})}function k(N){let v=a.location.origin!=="null"?a.location.origin:a.location.href,h=typeof N=="string"?N:Jl(N);return h=h.replace(/ $/,"%20"),Oe(v,"No window.location.(origin|href) available to create URL for href: "+h),new URL(h,v)}let g={get action(){return i},get location(){return t(a,o)},listen(N){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Yu,m),c=N,()=>{a.removeEventListener(Yu,m),c=null}},createHref(N){return s(a,N)},createURL:k,encodeLocation(N){let v=k(N);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:b,go(N){return o.go(N)}};return g}var Qu;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Qu||(Qu={}));function L0(t,s,n){return n===void 0&&(n="/"),P0(t,s,n)}function P0(t,s,n,r){let a=typeof s=="string"?jr(s):s,l=gr(a.pathname||"/",n);if(l==null)return null;let o=Xh(t);I0(o);let i=null;for(let c=0;i==null&&c<o.length;++c){let u=V0(l);i=H0(o[c],u)}return i}function Xh(t,s,n,r){s===void 0&&(s=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(l,o,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};c.relativePath.startsWith("/")&&(Oe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=an([r,c.relativePath]),x=n.concat(c);l.children&&l.children.length>0&&(Oe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Xh(l.children,s,x,u)),!(l.path==null&&!l.index)&&s.push({path:u,score:U0(u,l.index),routesMeta:x})};return t.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))a(l,o);else for(let c of Kh(l.path))a(l,o,c)}),s}function Kh(t){let s=t.split("/");if(s.length===0)return[];let[n,...r]=s,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let o=Kh(r.join("/")),i=[];return i.push(...o.map(c=>c===""?l:[l,c].join("/"))),a&&i.push(...o),i.map(c=>t.startsWith("/")&&c===""?"/":c)}function I0(t){t.sort((s,n)=>s.score!==n.score?n.score-s.score:B0(s.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const R0=/^:[\w-]+$/,$0=3,O0=2,F0=1,_0=10,z0=-2,Xu=t=>t==="*";function U0(t,s){let n=t.split("/"),r=n.length;return n.some(Xu)&&(r+=z0),s&&(r+=O0),n.filter(a=>!Xu(a)).reduce((a,l)=>a+(R0.test(l)?$0:l===""?F0:_0),r)}function B0(t,s){return t.length===s.length&&t.slice(0,-1).every((r,a)=>r===s[a])?t[t.length-1]-s[s.length-1]:0}function H0(t,s,n){let{routesMeta:r}=t,a={},l="/",o=[];for(let i=0;i<r.length;++i){let c=r[i],u=i===r.length-1,x=l==="/"?s:s.slice(l.length)||"/",m=bd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},x),p=c.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:an([l,m.pathname]),pathnameBase:Q0(an([l,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(l=an([l,m.pathnameBase]))}return o}function bd(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=W0(t.path,t.caseSensitive,t.end),a=s.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:r.reduce((u,x,m)=>{let{paramName:p,isOptional:b}=x;if(p==="*"){let g=i[m]||"";o=l.slice(0,l.length-g.length).replace(/(.)\/+$/,"$1")}const k=i[m];return b&&!k?u[p]=void 0:u[p]=(k||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:o,pattern:t}}function W0(t,s,n){s===void 0&&(s=!1),n===void 0&&(n=!0),Sc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),r]}function V0(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Sc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function gr(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let n=s.endsWith("/")?s.length-1:s.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const q0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,G0=t=>q0.test(t);function Y0(t,s){s===void 0&&(s="/");let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?jr(t):t,l;if(n)if(G0(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Sc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=Ku(n.substring(1),"/"):l=Ku(n,s)}else l=s;return{pathname:l,search:X0(r),hash:K0(a)}}function Ku(t,s){let n=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function hi(t,s,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function J0(t){return t.filter((s,n)=>n===0||s.route.path&&s.route.path.length>0)}function kc(t,s){let n=J0(t);return s?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Cc(t,s,n,r){r===void 0&&(r=!1);let a;typeof t=="string"?a=jr(t):(a=ja({},t),Oe(!a.pathname||!a.pathname.includes("?"),hi("?","pathname","search",a)),Oe(!a.pathname||!a.pathname.includes("#"),hi("#","pathname","hash",a)),Oe(!a.search||!a.search.includes("#"),hi("#","search","hash",a)));let l=t===""||a.pathname==="",o=l?"/":a.pathname,i;if(o==null)i=n;else{let m=s.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;a.pathname=p.join("/")}i=m>=0?s[m]:"/"}let c=Y0(a,i),u=o&&o!=="/"&&o.endsWith("/"),x=(l||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||x)&&(c.pathname+="/"),c}const an=t=>t.join("/").replace(/\/\/+/g,"/"),Q0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),X0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,K0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Z0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Zh=["post","put","patch","delete"];new Set(Zh);const ey=["get",...Zh];new Set(ey);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Na(){return Na=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Na.apply(this,arguments)}const ko=d.createContext(null),ep=d.createContext(null),Ds=d.createContext(null),Co=d.createContext(null),Ts=d.createContext({outlet:null,matches:[],isDataRoute:!1}),tp=d.createContext(null);function ty(t,s){let{relative:n}=s===void 0?{}:s;Nr()||Oe(!1);let{basename:r,navigator:a}=d.useContext(Ds),{hash:l,pathname:o,search:i}=Ao(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:an([r,o])),a.createHref({pathname:c,search:i,hash:l})}function Nr(){return d.useContext(Co)!=null}function gn(){return Nr()||Oe(!1),d.useContext(Co).location}function sp(t){d.useContext(Ds).static||d.useLayoutEffect(t)}function $n(){let{isDataRoute:t}=d.useContext(Ts);return t?gy():sy()}function sy(){Nr()||Oe(!1);let t=d.useContext(ko),{basename:s,future:n,navigator:r}=d.useContext(Ds),{matches:a}=d.useContext(Ts),{pathname:l}=gn(),o=JSON.stringify(kc(a,n.v7_relativeSplatPath)),i=d.useRef(!1);return sp(()=>{i.current=!0}),d.useCallback(function(u,x){if(x===void 0&&(x={}),!i.current)return;if(typeof u=="number"){r.go(u);return}let m=Cc(u,JSON.parse(o),l,x.relative==="path");t==null&&s!=="/"&&(m.pathname=m.pathname==="/"?s:an([s,m.pathname])),(x.replace?r.replace:r.push)(m,x.state,x)},[s,r,o,l,t])}const ny=d.createContext(null);function ry(t){let s=d.useContext(Ts).outlet;return s&&d.createElement(ny.Provider,{value:t},s)}function Ao(t,s){let{relative:n}=s===void 0?{}:s,{future:r}=d.useContext(Ds),{matches:a}=d.useContext(Ts),{pathname:l}=gn(),o=JSON.stringify(kc(a,r.v7_relativeSplatPath));return d.useMemo(()=>Cc(t,JSON.parse(o),l,n==="path"),[t,o,l,n])}function ay(t,s){return ly(t,s)}function ly(t,s,n,r){Nr()||Oe(!1);let{navigator:a}=d.useContext(Ds),{matches:l}=d.useContext(Ts),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=gn(),x;if(s){var m;let N=typeof s=="string"?jr(s):s;c==="/"||(m=N.pathname)!=null&&m.startsWith(c)||Oe(!1),x=N}else x=u;let p=x.pathname||"/",b=p;if(c!=="/"){let N=c.replace(/^\//,"").split("/");b="/"+p.replace(/^\//,"").split("/").slice(N.length).join("/")}let k=L0(t,{pathname:b}),g=uy(k&&k.map(N=>Object.assign({},N,{params:Object.assign({},i,N.params),pathname:an([c,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:an([c,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,n,r);return s&&g?d.createElement(Co.Provider,{value:{location:Na({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Qs.Pop}},g):g}function oy(){let t=py(),s=Z0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},s),n?d.createElement("pre",{style:a},n):null,null)}const iy=d.createElement(oy,null);class dy extends d.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,n){return n.location!==s.location||n.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:n.error,location:n.location,revalidation:s.revalidation||n.revalidation}}componentDidCatch(s,n){console.error("React Router caught the following error during render",s,n)}render(){return this.state.error!==void 0?d.createElement(Ts.Provider,{value:this.props.routeContext},d.createElement(tp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cy(t){let{routeContext:s,match:n,children:r}=t,a=d.useContext(ko);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),d.createElement(Ts.Provider,{value:s},r)}function uy(t,s,n,r){var a;if(s===void 0&&(s=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&s.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,i=(a=n)==null?void 0:a.errors;if(i!=null){let x=o.findIndex(m=>m.route.id&&(i==null?void 0:i[m.route.id])!==void 0);x>=0||Oe(!1),o=o.slice(0,Math.min(o.length,x+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let x=0;x<o.length;x++){let m=o[x];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=x),m.route.id){let{loaderData:p,errors:b}=n,k=m.route.loader&&p[m.route.id]===void 0&&(!b||b[m.route.id]===void 0);if(m.route.lazy||k){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((x,m,p)=>{let b,k=!1,g=null,N=null;n&&(b=i&&m.route.id?i[m.route.id]:void 0,g=m.route.errorElement||iy,c&&(u<0&&p===0?(fy("route-fallback"),k=!0,N=null):u===p&&(k=!0,N=m.route.hydrateFallbackElement||null)));let v=s.concat(o.slice(0,p+1)),h=()=>{let j;return b?j=g:k?j=N:m.route.Component?j=d.createElement(m.route.Component,null):m.route.element?j=m.route.element:j=x,d.createElement(cy,{match:m,routeContext:{outlet:x,matches:v,isDataRoute:n!=null},children:j})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?d.createElement(dy,{location:n.location,revalidation:n.revalidation,component:g,error:b,children:h(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):h()},null)}var np=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(np||{}),rp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rp||{});function my(t){let s=d.useContext(ko);return s||Oe(!1),s}function xy(t){let s=d.useContext(ep);return s||Oe(!1),s}function hy(t){let s=d.useContext(Ts);return s||Oe(!1),s}function ap(t){let s=hy(),n=s.matches[s.matches.length-1];return n.route.id||Oe(!1),n.route.id}function py(){var t;let s=d.useContext(tp),n=xy(),r=ap();return s!==void 0?s:(t=n.errors)==null?void 0:t[r]}function gy(){let{router:t}=my(np.UseNavigateStable),s=ap(rp.UseNavigateStable),n=d.useRef(!1);return sp(()=>{n.current=!0}),d.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Na({fromRouteId:s},l)))},[t,s])}const Zu={};function fy(t,s,n){Zu[t]||(Zu[t]=!0)}function yy(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function wa(t){let{to:s,replace:n,state:r,relative:a}=t;Nr()||Oe(!1);let{future:l,static:o}=d.useContext(Ds),{matches:i}=d.useContext(Ts),{pathname:c}=gn(),u=$n(),x=Cc(s,kc(i,l.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(x);return d.useEffect(()=>u(JSON.parse(m),{replace:n,state:r,relative:a}),[u,m,a,n,r]),null}function Ac(t){return ry(t.context)}function ce(t){Oe(!1)}function by(t){let{basename:s="/",children:n=null,location:r,navigationType:a=Qs.Pop,navigator:l,static:o=!1,future:i}=t;Nr()&&Oe(!1);let c=s.replace(/^\/*/,"/"),u=d.useMemo(()=>({basename:c,navigator:l,static:o,future:Na({v7_relativeSplatPath:!1},i)}),[c,i,l,o]);typeof r=="string"&&(r=jr(r));let{pathname:x="/",search:m="",hash:p="",state:b=null,key:k="default"}=r,g=d.useMemo(()=>{let N=gr(x,c);return N==null?null:{location:{pathname:N,search:m,hash:p,state:b,key:k},navigationType:a}},[c,x,m,p,b,k,a]);return g==null?null:d.createElement(Ds.Provider,{value:u},d.createElement(Co.Provider,{children:n,value:g}))}function lp(t){let{children:s,location:n}=t;return ay(vd(s),n)}new Promise(()=>{});function vd(t,s){s===void 0&&(s=[]);let n=[];return d.Children.forEach(t,(r,a)=>{if(!d.isValidElement(r))return;let l=[...s,a];if(r.type===d.Fragment){n.push.apply(n,vd(r.props.children,l));return}r.type!==ce&&Oe(!1),!r.props.index||!r.props.children||Oe(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=vd(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ql(){return Ql=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ql.apply(this,arguments)}function op(t,s){if(t==null)return{};var n={},r=Object.keys(t),a,l;for(l=0;l<r.length;l++)a=r[l],!(s.indexOf(a)>=0)&&(n[a]=t[a]);return n}function vy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jy(t,s){return t.button===0&&(!s||s==="_self")&&!vy(t)}const Ny=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wy=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Sy="6";try{window.__reactRouterVersion=Sy}catch{}const ky=d.createContext({isTransitioning:!1}),Cy="startTransition",em=fg[Cy];function Ay(t){let{basename:s,children:n,future:r,window:a}=t,l=d.useRef();l.current==null&&(l.current=T0({window:a,v5Compat:!0}));let o=l.current,[i,c]=d.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},x=d.useCallback(m=>{u&&em?em(()=>c(m)):c(m)},[c,u]);return d.useLayoutEffect(()=>o.listen(x),[o,x]),d.useEffect(()=>yy(r),[r]),d.createElement(by,{basename:s,children:n,location:i.location,navigationType:i.action,navigator:o,future:r})}const Dy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ty=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ln=d.forwardRef(function(s,n){let{onClick:r,relative:a,reloadDocument:l,replace:o,state:i,target:c,to:u,preventScrollReset:x,viewTransition:m}=s,p=op(s,Ny),{basename:b}=d.useContext(Ds),k,g=!1;if(typeof u=="string"&&Ty.test(u)&&(k=u,Dy))try{let j=new URL(window.location.href),y=u.startsWith("//")?new URL(j.protocol+u):new URL(u),w=gr(y.pathname,b);y.origin===j.origin&&w!=null?u=w+y.search+y.hash:g=!0}catch{}let N=ty(u,{relative:a}),v=Ly(u,{replace:o,state:i,target:c,preventScrollReset:x,relative:a,viewTransition:m});function h(j){r&&r(j),j.defaultPrevented||v(j)}return d.createElement("a",Ql({},p,{href:k||N,onClick:g||l?r:h,ref:n,target:c}))}),Ey=d.forwardRef(function(s,n){let{"aria-current":r="page",caseSensitive:a=!1,className:l="",end:o=!1,style:i,to:c,viewTransition:u,children:x}=s,m=op(s,wy),p=Ao(c,{relative:m.relative}),b=gn(),k=d.useContext(ep),{navigator:g,basename:N}=d.useContext(Ds),v=k!=null&&Py(p)&&u===!0,h=g.encodeLocation?g.encodeLocation(p).pathname:p.pathname,j=b.pathname,y=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;a||(j=j.toLowerCase(),y=y?y.toLowerCase():null,h=h.toLowerCase()),y&&N&&(y=gr(y,N)||y);const w=h!=="/"&&h.endsWith("/")?h.length-1:h.length;let S=j===h||!o&&j.startsWith(h)&&j.charAt(w)==="/",A=y!=null&&(y===h||!o&&y.startsWith(h)&&y.charAt(h.length)==="/"),D={isActive:S,isPending:A,isTransitioning:v},T=S?r:void 0,R;typeof l=="function"?R=l(D):R=[l,S?"active":null,A?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let _=typeof i=="function"?i(D):i;return d.createElement(ln,Ql({},m,{"aria-current":T,className:R,ref:n,style:_,to:c,viewTransition:u}),typeof x=="function"?x(D):x)});var jd;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jd||(jd={}));var tm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tm||(tm={}));function My(t){let s=d.useContext(ko);return s||Oe(!1),s}function Ly(t,s){let{target:n,replace:r,state:a,preventScrollReset:l,relative:o,viewTransition:i}=s===void 0?{}:s,c=$n(),u=gn(),x=Ao(t,{relative:o});return d.useCallback(m=>{if(jy(m,n)){m.preventDefault();let p=r!==void 0?r:Jl(u)===Jl(x);c(t,{replace:p,state:a,preventScrollReset:l,relative:o,viewTransition:i})}},[u,c,x,r,a,n,t,l,o,i])}function Py(t,s){s===void 0&&(s={});let n=d.useContext(ky);n==null&&Oe(!1);let{basename:r}=My(jd.useViewTransitionState),a=Ao(t,{relative:s.relative});if(!n.isTransitioning)return!1;let l=gr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=gr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return bd(a.pathname,o)!=null||bd(a.pathname,l)!=null}const J=()=>(console.log("[API] Production build - using production API"),"http://31.97.228.226:5000");async function Q(t,s={}){const n=localStorage.getItem("auth_token"),r={...s.headers};n&&(r.Authorization=`Bearer ${n}`),console.log("[API] Fetching:",t);try{const a=await fetch(t,{...s,credentials:"include",headers:r});return console.log("[API] Response status:",a.status,"for",t),a}catch(a){throw console.error("[API] Fetch FAILED:",a.message,"for",t),a}}async function X(t,s){if(!t.ok){let r={};try{r=await t.json()}catch{}const a=(r==null?void 0:r.message)||(r==null?void 0:r.code)||`${s} (${t.status})`;throw new Error(a)}let n={};try{n=await t.json()}catch{}return n}function es(t){try{return new Intl.NumberFormat("bn-BD",{style:"currency",currency:"BDT",maximumFractionDigits:0}).format(t||0)}catch{return`${Number(t||0).toLocaleString("bn-BD")}`}}function Pe(t){try{return new Intl.NumberFormat("en-US",{style:"currency",currency:"BDT",maximumFractionDigits:0}).format(t||0)}catch{return`${Number(t||0).toLocaleString("en-US")}`}}function sm(t){const s=t?new Date(t):new Date,n=String(s.getDate()).padStart(2,"0"),r=String(s.getMonth()+1).padStart(2,"0"),a=s.getFullYear();return`${n}.${r}.${a}`}const B={_normalizeDate(t){if(!t)return"";if(/^\d{4}-\d{2}-\d{2}/.test(t))return t.slice(0,10);const s=/^(\d{2})\/(\d{2})\/(\d{4})$/.exec(t);if(s)return`${s[3]}-${s[2]}-${s[1]}`;const n=new Date(t);if(!isNaN(n)){const r=String(n.getDate()).padStart(2,"0"),a=String(n.getMonth()+1).padStart(2,"0");return`${n.getFullYear()}-${a}-${r}`}return t},async login(t,s){const n=await Q(`${J()}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:s})}),r=await X(n,"Login failed");if(!r||typeof r!="object")throw new Error("Invalid login response");return r},async me(){const t=await Q(`${J()}/api/auth/me`),s=await X(t,"Auth check failed");if(!s||typeof s!="object")throw new Error("Invalid /me response");return s},async logout(){const t=await Q(`${J()}/api/auth/logout`,{method:"POST"});return X(t,"Logout failed")},async updateMe(t){const s=await Q(`${J()}/api/auth/me`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await X(s,"Update failed");if(!n||typeof n!="object")throw new Error("Invalid update response");return n},async listUsers(){const t=await Q(`${J()}/api/users`);return X(t,"Load users failed")},async listUsersPublic(){const t=await Q(`${J()}/api/users/list`,{credentials:"include"});return X(t,"Load public users failed")},async listAdmissionUsers(){const t=await Q(`${J()}/api/users/admission`,{credentials:"include"});return X(t,"Load admission users failed")},async createUser(t){const s=await Q(`${J()}/api/users`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create user failed")},async updateUser(t,s){const n=await Q(`${J()}/api/users/${t}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update user failed")},async deleteUser(t){const s=await Q(`${J()}/api/users/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete user failed")},async reorderUsers(t){const s=await Q(`${J()}/api/users/reorder`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({orders:t})});return X(s,"Reorder users failed")},async listAllTasks(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/tasks${s}`,{credentials:"include"});return X(n,"Load tasks failed")},async listMyTasks(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/tasks/my${s}`,{credentials:"include"});return X(n,"Load my tasks failed")},async assignTask(t){const s=await Q(`${J()}/api/tasks/assign`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Assign task failed")},async addSelfTask(t){const s=await Q(`${J()}/api/tasks/self`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Add self task failed")},async updateTaskStatus(t,s){const n=await Q(`${J()}/api/tasks/${t}/status`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})});return X(n,"Update task status failed")},async updateTask(t,s){const n=await Q(`${J()}/api/tasks/${t}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update task failed")},async deleteTask(t){const s=await Q(`${J()}/api/tasks/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete task failed")},async addTaskComment(t,s){const n=await Q(`${J()}/api/tasks/${t}/comments`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Add comment failed")},async addTaskAttachment(t,s){const n=await Q(`${J()}/api/tasks/${t}/attachments`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Add attachment failed")},async updateChecklistItem(t,s,n){const r=await Q(`${J()}/api/tasks/${t}/checklist/${s}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({completed:n})});return X(r,"Update checklist failed")},async updateBoardPosition(t,s){const n=await Q(`${J()}/api/tasks/${t}/board-position`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update board position failed")},async listCourses(){const t=await Q(`${J()}/api/courses`,{credentials:"include"});return X(t,"Load courses failed")},async createCourse(t){const s=await Q(`${J()}/api/courses`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create course failed")},async updateCourse(t,s){const n=await Q(`${J()}/api/courses/${t}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update course failed")},async deleteCourse(t){const s=await Q(`${J()}/api/courses/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete course failed")},async listLeads(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/leads${s}`,{credentials:"include"});return X(n,"Load leads failed")},async getTodayAssignments(){const t=await Q(`${J()}/api/leads/today-assignments`,{credentials:"include"});return X(t,"Load today assignments failed")},async getLeadHistory(t){const s=await Q(`${J()}/api/leads/${t}/history`,{credentials:"include"});return X(s,"Load lead history failed")},async assignLead(t,s){const n=await Q(`${J()}/api/leads/${t}/assign`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignedTo:s})});return X(n,"Assign lead failed")},async bulkAssignLeads(t,s){const n=await Q(`${J()}/api/leads/bulk-assign`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadIds:t,assignedTo:s})});return X(n,"Bulk assign failed")},async createLead(t){const s=await Q(`${J()}/api/leads`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create lead failed")},async bulkUploadLeads(t){const s=await Q(`${J()}/api/leads/bulk`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({csv:t})});return X(s,"Bulk upload failed")},async updateLead(t,s){const n=await Q(`${J()}/api/leads/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update lead failed")},async deleteLead(t){const s=await Q(`${J()}/api/leads/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete lead failed")},async listAdmissionLeads(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/admission/leads${s}`,{credentials:"include"});return X(n,"Load admission leads failed")},async updateLeadStatus(t,s,n,r,a,l){const o={status:s};n!=null&&(o.notes=n),r!=null&&(o.courseId=r),a!=null&&(o.batchId=a),l!=null&&l!==""&&(o.nextFollowUpDate=l);const i=await Q(`${J()}/api/admission/leads/${t}/status`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return X(i,"Update lead status failed")},async addLeadFollowUp(t,{note:s,nextFollowUpDate:n,priority:r}){const a=await Q(`${J()}/api/admission/leads/${t}/follow-up`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:s,nextFollowUpDate:n,priority:r})});return X(a,"Add follow-up failed")},async listAdmissionFees(){const t=await Q(`${J()}/api/admission/fees`,{credentials:"include"});return X(t,"Load fees failed")},async checkAdmissionFeeStatus(t){const s=await Q(`${J()}/api/admission/fees/status/${t}`,{credentials:"include"});return X(s,"Check fee status failed")},async createAdmissionFee(t){const s=await Q(`${J()}/api/admission/fees`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create fee failed")},async getAdmissionFollowUpNotifications(){const t=await Q(`${J()}/api/admission/follow-up-notifications`,{credentials:"include"});return X(t,"Load follow-up notifications failed")},async getAdmissionReports(t,s,n){const r=new URLSearchParams;t&&r.append("userId",t),s&&r.append("from",s),n&&r.append("to",n);const a=r.toString()?`?${r.toString()}`:"",l=await Q(`${J()}/api/admission/reports${a}`,{credentials:"include"});return X(l,"Load admission reports failed")},async getAdmissionMetrics(t,s,n){const r=new URLSearchParams;t&&r.append("userId",t),s&&r.append("from",s),n&&r.append("to",n);const a=r.toString()?`?${r.toString()}`:"",l=await Q(`${J()}/api/reports/admission-metrics${a}`,{credentials:"include"});return X(l,"Load admission metrics failed")},async downloadAdmissionMetricsCSV(t,s,n){const r=new URLSearchParams;t&&r.append("userId",t),s&&r.append("from",s),n&&r.append("to",n),r.append("format","csv");const a=r.toString()?`?${r.toString()}`:"",l=await Q(`${J()}/api/reports/admission-metrics${a}`,{credentials:"include"});if(!l.ok){let i={};try{i=await l.json()}catch{}const c=(i==null?void 0:i.message)||`Download failed (${l.status})`;throw new Error(c)}return await l.blob()},async listFeesForApproval(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/accounting/fees${s}`,{credentials:"include"});return X(n,"Load fees failed")},async approveFee(t){const s=await Q(`${J()}/api/accounting/fees/${t}/approve`,{method:"PATCH",credentials:"include"});return X(s,"Approve failed")},async rejectFee(t){const s=await Q(`${J()}/api/accounting/fees/${t}/reject`,{method:"PATCH",credentials:"include"});return X(s,"Reject failed")},async listIncome(){const t=await Q(`${J()}/api/accounting/income`,{credentials:"include"});return X(t,"Load income failed")},async addIncome(t){const s=await Q(`${J()}/api/accounting/income`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Add income failed")},async listExpenses(){const t=await Q(`${J()}/api/accounting/expense`,{credentials:"include"});return X(t,"Load expenses failed")},async addExpense(t){const s=await Q(`${J()}/api/accounting/expense`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Add expense failed")},async deleteExpense(t){const s=await Q(`${J()}/api/accounting/expense/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete expense failed")},async getDueCollections(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/accounting/due-collections${s}`,{credentials:"include"});return X(n,"Load due collections failed")},async approveDueCollection(t,s){const n=await Q(`${J()}/api/accounting/due-collections/${t}/approve`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewNote:s||""})});return X(n,"Approve due collection failed")},async rejectDueCollection(t,s){const n=await Q(`${J()}/api/accounting/due-collections/${t}/reject`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewNote:s||""})});return X(n,"Reject due collection failed")},async accountingSummary(t,s){const n=new URLSearchParams;t&&n.set("from",t),s&&n.set("to",s);const r=n.toString()?`?${n.toString()}`:"",a=await Q(`${J()}/api/accounting/summary${r}`,{credentials:"include"});return X(a,"Load summary failed")},async getRecruitmentStats(){const t=await Q(`${J()}/api/recruitment/stats`,{credentials:"include"});return X(t,"Load recruitment stats failed")},async getRecruitmentSummary(){return this.getRecruitmentStats()},async listEmployers(){const t=await Q(`${J()}/api/recruitment/employers`,{credentials:"include"});return X(t,"Load employers failed")},async createEmployer(t){const s=await Q(`${J()}/api/recruitment/employers`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create employer failed")},async updateEmployer(t,s){const n=await Q(`${J()}/api/recruitment/employers/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update employer failed")},async deleteEmployer(t){const s=await Q(`${J()}/api/recruitment/employers/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete employer failed")},async listJobs(){const t=await Q(`${J()}/api/recruitment/jobs`,{credentials:"include"});return X(t,"Load jobs failed")},async createJob(t){const s=await Q(`${J()}/api/recruitment/jobs`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create job failed")},async updateJob(t,s){const n=await Q(`${J()}/api/recruitment/jobs/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update job failed")},async deleteJob(t){const s=await Q(`${J()}/api/recruitment/jobs/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete job failed")},async listCandidates(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/recruitment/candidates${s}`,{credentials:"include"});return X(n,"Load candidates failed")},async createCandidate(t){const s=await Q(`${J()}/api/recruitment/candidates`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create candidate failed")},async updateCandidate(t,s){const n=await Q(`${J()}/api/recruitment/candidates/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update candidate failed")},async deleteCandidate(t){const s=await Q(`${J()}/api/recruitment/candidates/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete candidate failed")},async recruitCandidate(t,s){const n=await Q(`${J()}/api/recruitment/candidates/${t}/recruit`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Recruit candidate failed")},async listRecruited(){return this.listCandidates("recruited")},async listRecIncome(){const t=await Q(`${J()}/api/recruitment/income`,{credentials:"include"});return X(t,"Load recruitment income failed")},async addRecIncome(t){const s={...t,date:this._normalizeDate(t==null?void 0:t.date)},n=await Q(`${J()}/api/recruitment/income`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Add recruitment income failed")},async approveRecIncome(t){const s=await Q(`${J()}/api/recruitment/income/${t}/approve`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});return X(s,"Approve recruitment income failed")},async rejectRecIncome(t,s){const n=await Q(`${J()}/api/recruitment/income/${t}/reject`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:s})});return X(n,"Reject recruitment income failed")},async deleteRecIncome(t){const s=await Q(`${J()}/api/recruitment/income/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete recruitment income failed")},async updateRecIncome(){throw new Error("updateRecIncome is not supported by the backend (use add/delete).")},async listRecExpense(){const t=await Q(`${J()}/api/recruitment/expenses`,{credentials:"include"});return X(t,"Load recruitment expenses failed")},async addRecExpense(t){const s={...t,date:this._normalizeDate(t==null?void 0:t.date)},n=await Q(`${J()}/api/recruitment/expenses`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Add recruitment expense failed")},async deleteRecExpense(t){const s=await Q(`${J()}/api/recruitment/expenses/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete recruitment expense failed")},async updateRecExpense(){throw new Error("updateRecExpense is not supported by the backend (use add/delete).")},async listDMCosts(t,s){const n=new URLSearchParams;t&&n.set("date",this._normalizeDate(t)),s&&n.set("channel",s);const r=n.toString()?`?${n.toString()}`:"",a=await Q(`${J()}/api/dm/expense${r}`,{credentials:"include"});return X(a,"Load DM costs failed")},async addDMCost(t){const s={...t,date:this._normalizeDate(t==null?void 0:t.date)},n=await Q(`${J()}/api/dm/expense`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Add DM cost failed")},async deleteDMCost(t){const s=await Q(`${J()}/api/dm/expense/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete DM cost failed")},async listDMCampaigns(t,s,n){const r=new URLSearchParams;t&&r.append("platform",t),s&&r.append("from",s),n&&r.append("to",n);const a=r.toString()?`?${r.toString()}`:"",l=await Q(`${J()}/api/dm/campaigns${a}`,{credentials:"include"});return X(l,"Load DM campaigns failed")},async createDMCampaign(t){const s=await Q(`${J()}/api/dm/campaigns`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create DM campaign failed")},async updateDMCampaign(t,s){const n=await Q(`${J()}/api/dm/campaigns/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update DM campaign failed")},async deleteDMCampaign(t){const s=await Q(`${J()}/api/dm/campaigns/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete DM campaign failed")},async getDMCampaignsSummary(t,s,n){const r=new URLSearchParams;t&&r.append("platform",t),s&&r.append("from",s),n&&r.append("to",n);const a=r.toString()?`?${r.toString()}`:"",l=await Q(`${J()}/api/dm/campaigns/summary/metrics${a}`,{credentials:"include"});return X(l,"Load DM campaigns summary failed")},async listSocial(t){const s=t?`?date=${encodeURIComponent(this._normalizeDate(t))}`:"";let n=await Q(`${J()}/api/dm/social${s}`,{credentials:"include"});return!n.ok&&n.status===404&&(n=await Q(`${J()}/api/dm/social-metrics${s}`,{credentials:"include"})),X(n,"Load social metrics failed")},async addSocial(t){const s={...t};s.date&&delete s.date;const n={metrics:s};let r=await Q(`${J()}/api/dm/social`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return!r.ok&&r.status===404&&(r=await Q(`${J()}/api/dm/social-metrics`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})),X(r,"Add social metrics failed")},async deleteSocial(t){let s=await Q(`${J()}/api/dm/social/${t}`,{method:"DELETE",credentials:"include"});return!s.ok&&s.status===404&&(s=await Q(`${J()}/api/dm/social-metrics/${t}`,{method:"DELETE",credentials:"include"})),X(s,"Delete social metrics failed")},async listSEO(t){const s=t?`?date=${encodeURIComponent(this._normalizeDate(t))}`:"",n=await Q(`${J()}/api/dm/seo${s}`,{credentials:"include"});return X(n,"Load SEO reports failed")},async createSEO(t){const s={...t,date:this._normalizeDate(t==null?void 0:t.date)},n=await Q(`${J()}/api/dm/seo`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Create SEO report failed")},async deleteSEO(t){const s=await Q(`${J()}/api/dm/seo/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete SEO report failed")},async addEmployer(t){return this.createEmployer(t)},async editEmployer(t,s){return this.updateEmployer(t,s)},async removeEmployer(t){return this.deleteEmployer(t)},async addJob(t){return this.createJob(t)},async editJob(t,s){return this.updateJob(t,s)},async removeJob(t){return this.deleteJob(t)},async addCandidate(t){return this.createCandidate(t)},async editCandidate(t,s){return this.updateCandidate(t,s)},async removeCandidate(t){return this.deleteCandidate(t)},async removeRecIncome(t){return this.deleteRecIncome(t)},async removeRecExpense(t){return this.deleteRecExpense(t)},async createDMCost(t){return this.addDMCost(t)},async createSocial(t){return this.addSocial(t)},async updateSocial(t){return this.addSocial(t)},async mgStats(){const t=await Q(`${J()}/api/mg/stats`,{credentials:"include"});return X(t,"Load MG stats failed")},async listMGWorks(t={}){const s=new URLSearchParams;t.date&&s.set("date",t.date),t.status&&s.set("status",t.status);const n=s.toString()?`?${s.toString()}`:"",r=await Q(`${J()}/api/mg/works${n}`,{credentials:"include"});return X(r,"Load MG works failed")},async createMGWork(t){const s=await Q(`${J()}/api/mg/works`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create MG work failed")},async updateMGWork(t,s){const n=await Q(`${J()}/api/mg/works/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update MG work failed")},async deleteMGWork(t){const s=await Q(`${J()}/api/mg/works/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete MG work failed")},async reportsOverview(t,s){const n=new URLSearchParams;t&&n.set("from",t),s&&n.set("to",s);const r=n.toString()?`?${n.toString()}`:"",a=await Q(`${J()}/api/reports/overview${r}`,{credentials:"include"});return X(a,"Load consolidated report failed")},async getConversations(){const t=await Q(`${J()}/api/messages/conversations`,{credentials:"include"});return X(t,"Load conversations failed")},async getMessages(t,s={}){const n=new URLSearchParams;s.limit&&n.set("limit",s.limit),s.before&&n.set("before",s.before);const r=n.toString()?`?${n.toString()}`:"",a=await Q(`${J()}/api/messages/${t}${r}`,{credentials:"include"});return X(a,"Load messages failed")},async sendMessage(t){const s=await Q(`${J()}/api/messages/send`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Send message failed")},async markMessagesAsRead(t){const s=await Q(`${J()}/api/messages/${t}/read`,{method:"PATCH",credentials:"include"});return X(s,"Mark messages as read failed")},async deleteMessage(t){const s=await Q(`${J()}/api/messages/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete message failed")},async getUnreadMessageCount(){const t=await Q(`${J()}/api/messages/unread/count`,{credentials:"include"});return X(t,"Get unread count failed")},async setAdmissionTarget(t){const s=await Q(`${J()}/api/admission-targets`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Set admission target failed")},async getAdmissionTargets(t){const s=await Q(`${J()}/api/admission-targets?month=${t}`,{credentials:"include"});return X(s,"Get admission targets failed")},async getAllAdmissionTargets(){const t=await Q(`${J()}/api/admission-targets/all`,{credentials:"include"});return X(t,"Get all admission targets failed")},async deleteAdmissionTarget(t){const s=await Q(`${J()}/api/admission-targets/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete admission target failed")},async setTarget(t){const s=await Q(`${J()}/api/targets`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Set target failed")},async getTargets(t,s,n){let r=`${J()}/api/targets?month=${t}`;s&&(r+=`&targetType=${s}`),n&&(r+=`&assignedTo=${n}`);const a=await Q(r,{credentials:"include"});return X(a,"Get targets failed")},async getAllTargets(){const t=await Q(`${J()}/api/targets/all`,{credentials:"include"});return X(t,"Get all targets failed")},async deleteTarget(t){const s=await Q(`${J()}/api/targets/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete target failed")},async getTeamMembers(t){let s=`${J()}/api/targets/team-members`;t&&(s+=`?role=${t}`);const n=await Q(s,{credentials:"include"});return X(n,"Get team members failed")},async listBatches(t,s){let n=`${J()}/api/batches`;const r=new URLSearchParams;t&&r.append("status",t),s&&r.append("category",s),r.toString()&&(n+=`?${r.toString()}`);const a=await Q(n,{credentials:"include"});return X(a,"Load batches failed")},async getBatch(t){const s=await Q(`${J()}/api/batches/${t}`,{credentials:"include"});return X(s,"Load batch failed")},async getBatchReport(t){const s=await Q(`${J()}/api/batches/${t}/report`,{credentials:"include"});return X(s,"Load batch report failed")},async createBatch(t){const s=await Q(`${J()}/api/batches`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create batch failed")},async updateBatch(t,s){const n=await Q(`${J()}/api/batches/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update batch failed")},async deleteBatch(t){const s=await Q(`${J()}/api/batches/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete batch failed")},async addStudentToBatch(t,s){const n=await Q(`${J()}/api/batches/${t}/add-student`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:s})});return X(n,"Add student to batch failed")},async getStudentsWithDues(){const t=await Q(`${J()}/api/coordinator/students-with-dues`,{credentials:"include"});return X(t,"Load students with dues failed")},async getPaymentNotifications(){const t=await Q(`${J()}/api/coordinator/payment-notifications`,{credentials:"include"});return X(t,"Load payment notifications failed")},async getStudentHistory(t){const s=await Q(`${J()}/api/coordinator/student-history/${t}`,{credentials:"include"});return X(s,"Load student history failed")},async addFollowUp(t){const s=await Q(`${J()}/api/coordinator/add-follow-up`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Add follow-up failed")},async updatePaymentDate(t,s){const n=await Q(`${J()}/api/coordinator/update-payment-date/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({nextPaymentDate:s})});return X(n,"Update payment date failed")},async getCoordinatorDashboardStats(){const t=await Q(`${J()}/api/coordinator/dashboard-stats`,{credentials:"include"});return X(t,"Load dashboard stats failed")},async updateAdmissionFeePayment(t){const s=await Q(`${J()}/api/coordinator/collect-due`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Collect due payment failed")},async createLeaveApplication(t){const s=await Q(`${J()}/api/leave`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Submit leave application failed")},async getMyLeaveApplications(){const t=await Q(`${J()}/api/leave/my-applications`,{credentials:"include"});return X(t,"Load leave applications failed")},async getAllLeaveApplications(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/leave${s}`,{credentials:"include"});return X(n,"Load leave applications failed")},async approveLeaveApplication(t,s){const n=await Q(`${J()}/api/leave/${t}/approve`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewNote:s})});return X(n,"Approve leave failed")},async rejectLeaveApplication(t,s){const n=await Q(`${J()}/api/leave/${t}/reject`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewNote:s})});return X(n,"Reject leave failed")},async getHandoverRequests(){const t=await Q(`${J()}/api/leave/handover-requests`,{credentials:"include"});return X(t,"Load handover requests failed")},async acceptHandover(t,s){const n=await Q(`${J()}/api/leave/${t}/handover/accept`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({handoverNote:s})});return X(n,"Accept handover failed")},async denyHandover(t,s){const n=await Q(`${J()}/api/leave/${t}/handover/deny`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({handoverNote:s})});return X(n,"Deny handover failed")},async updateLeaveApplication(t,s){const n=await Q(`${J()}/api/leave/${t}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update leave application failed")},async deleteLeaveApplication(t){const s=await Q(`${J()}/api/leave/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete leave application failed")},async createTADAApplication(t){const s=await Q(`${J()}/api/tada`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Submit TA/DA application failed")},async getMyTADAApplications(){const t=await Q(`${J()}/api/tada/my-applications`,{credentials:"include"});return X(t,"Load TA/DA applications failed")},async getAdminTADAApplications(t){const s=t?`?adminStatus=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/tada/admin${s}`,{credentials:"include"});return X(n,"Load TA/DA applications failed")},async getAccountantTADAApplications(t){const s=t?`?paymentStatus=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/tada/accountant${s}`,{credentials:"include"});return X(n,"Load TA/DA applications failed")},async approveTADAApplication(t,s){const n=await Q(`${J()}/api/tada/${t}/approve`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminReviewNote:s})});return X(n,"Approve TA/DA failed")},async rejectTADAApplication(t,s){const n=await Q(`${J()}/api/tada/${t}/reject`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminReviewNote:s})});return X(n,"Reject TA/DA failed")},async payTADAApplication(t,s){const n=await Q(`${J()}/api/tada/${t}/pay`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentNote:s})});return X(n,"Process payment failed")},async updateTADAApplication(t,s){const n=await Q(`${J()}/api/tada/${t}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update TA/DA application failed")},async deleteTADAApplication(t){const s=await Q(`${J()}/api/tada/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete TA/DA application failed")},async getNotifications(t,s=50){const n=new URLSearchParams;t!==void 0&&n.append("isRead",t),n.append("limit",s);const r=await Q(`${J()}/api/notifications?${n}`,{credentials:"include"});return X(r,"Load notifications failed")},async getUnreadCount(){const t=await Q(`${J()}/api/notifications/unread-count`,{credentials:"include"});return X(t,"Load unread count failed")},async markNotificationRead(t){const s=await Q(`${J()}/api/notifications/${t}/read`,{method:"PATCH",credentials:"include"});return X(s,"Mark notification read failed")},async markAllNotificationsRead(){const t=await Q(`${J()}/api/notifications/mark-all-read`,{method:"PATCH",credentials:"include"});return X(t,"Mark all notifications read failed")},async deleteNotification(t){const s=await Q(`${J()}/api/notifications/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete notification failed")}},ip=d.createContext(null),fe=()=>d.useContext(ip);function Iy({children:t}){const[s,n]=d.useState(null),[r,a]=d.useState(!1);d.useEffect(()=>{let c=!0;return B.me().then(u=>{c&&(n((u==null?void 0:u.user)||null),a(!0))}).catch(()=>{c&&a(!0)}),()=>{c=!1}},[]);const l=async(c,u)=>{const x=await B.login(c,u);if(!(x!=null&&x.user))throw new Error("Invalid login response (no user)");return x.token&&localStorage.setItem("auth_token",x.token),n(x.user),x.user},o=async()=>{try{await B.logout()}catch{}localStorage.removeItem("auth_token"),n(null)},i=async c=>{const u=await B.updateMe(c);if(!(u!=null&&u.user))throw new Error("Invalid update response (no user)");return n(u.user),u.user};return e.jsx(ip.Provider,{value:{user:s,ready:r,login:l,logout:o,updateMe:i},children:t})}function Ry(){const{user:t,ready:s}=fe();return s?t?e.jsx(Ac,{}):e.jsx(wa,{to:"/login",replace:!0}):e.jsx("div",{className:"p-6 text-royal",children:"Loading..."})}function Pt({roles:t=[]}){const{user:s}=fe();return s?t.length&&!t.includes(s.role)?e.jsx(wa,{to:"/",replace:!0}):e.jsx(Ac,{}):e.jsx(wa,{to:"/login",replace:!0})}/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dp=(...t)=>t.filter((s,n,r)=>!!s&&r.indexOf(s)===n).join(" ");/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=d.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:o,...i},c)=>d.createElement("svg",{ref:c,...Oy,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:dp("lucide",a),...i},[...o.map(([u,x])=>d.createElement(u,x)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(t,s)=>{const n=d.forwardRef(({className:r,...a},l)=>d.createElement(Fy,{ref:l,iconNode:s,className:dp(`lucide-${$y(t)}`,r),...a}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=de("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=de("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=de("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=de("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=de("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=de("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=de("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=de("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=de("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=de("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=de("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=de("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=de("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=de("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=de("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=de("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=de("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=de("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=de("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=de("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=de("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=de("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=de("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=de("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=de("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=de("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=de("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=de("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=de("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=de("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=de("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=de("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=de("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=de("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=de("Kanban",[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=de("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=de("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=de("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=de("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=de("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=de("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=de("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=de("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=de("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=de("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=de("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=de("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=de("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=de("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=de("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=de("PlaneTakeoff",[["path",{d:"M2 22h20",key:"272qi7"}],["path",{d:"M6.36 17.4 4 17l-2-4 1.1-.55a2 2 0 0 1 1.8 0l.17.1a2 2 0 0 0 1.8 0L8 12 5 6l.9-.45a2 2 0 0 1 2.09.2l4.02 3a2 2 0 0 0 2.1.2l4.19-2.06a2.41 2.41 0 0 1 1.73-.17L21 7a1.4 1.4 0 0 1 .87 1.99l-.38.76c-.23.46-.6.84-1.07 1.08L7.58 17.2a2 2 0 0 1-1.22.18Z",key:"fkigj9"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=de("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=de("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=de("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=de("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=de("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=de("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=de("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=de("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=de("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=de("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=de("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=de("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=de("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=de("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=de("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),sl=t=>{if(!t)return"-";try{return new Date(t).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}};function pp({lead:t,onClose:s,onUpdate:n}){var w;const{user:r}=fe(),[a,l]=d.useState(""),[o,i]=d.useState(""),[c,u]=d.useState((t==null?void 0:t.priority)||"Interested"),[x,m]=d.useState(!1),[p,b]=d.useState(null),[k,g]=d.useState(null),N=(r==null?void 0:r.role)==="Admission",v=N&&t.status!=="Admitted"&&t.status!=="Not Admitted",h=async()=>{if(!a.trim()&&!o){g("Please add a note or select next follow-up date");return}try{m(!0),g(null),await B.addLeadFollowUp(t._id,{note:a.trim(),nextFollowUpDate:o||void 0,priority:c}),b("Follow-up added successfully"),l(""),i(""),setTimeout(()=>{b(null),n&&n()},1500)}catch(S){g(S.message||"Failed to add follow-up")}finally{m(!1)}},j=async()=>{if(confirm("Mark this lead as Admitted?"))try{m(!0),await B.updateLeadStatus(t._id,"Admitted"),b("Lead marked as Admitted"),setTimeout(()=>{n&&n(),s()},1e3)}catch(S){g(S.message),m(!1)}},y=async()=>{const S=prompt("Reason for not admitting (optional):");if(S!==null)try{m(!0),await B.updateLeadStatus(t._id,"Not Admitted",S),b("Lead marked as Not Admitted"),setTimeout(()=>{n&&n(),s()},1e3)}catch(A){g(A.message),m(!1)}};return t?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:s}),e.jsxs("div",{className:"bg-white rounded-xl p-6 z-10 w-full max-w-4xl shadow-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-navy",children:["Lead History  ",t.leadId]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded-lg text-sm",children:p}),k&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:k}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"})," ",e.jsx("strong",{children:t.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",e.jsx("strong",{children:t.phone||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"})," ",e.jsx("strong",{children:t.email||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Course:"})," ",e.jsx("strong",{children:t.interestedCourse||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"})," ",e.jsx("strong",{className:"text-indigo-600",children:t.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Assigned To:"})," ",e.jsx("strong",{children:((w=t.assignedTo)==null?void 0:w.name)||"-"})]})]})}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"border-l-4 border-blue-400 pl-4 py-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Assigned At"}),e.jsx("div",{className:"font-semibold",children:t.assignedAt?sl(t.assignedAt):e.jsx("span",{className:"text-gray-400",children:"Not recorded"})})]}),e.jsxs("div",{className:"border-l-4 border-purple-400 pl-4 py-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Counseling At"}),e.jsx("div",{className:"font-semibold",children:t.counselingAt?sl(t.counselingAt):e.jsx("span",{className:"text-gray-400",children:"Not yet"})})]}),e.jsxs("div",{className:"border-l-4 border-green-400 pl-4 py-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Admitted At"}),e.jsx("div",{className:"font-semibold",children:t.admittedAt?sl(t.admittedAt):e.jsx("span",{className:"text-gray-400",children:"Not admitted yet"})}),t.admittedToCourse&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Course: ",e.jsx("strong",{children:t.admittedToCourse.name})]}),t.admittedToBatch&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Batch: ",e.jsx("strong",{children:t.admittedToBatch.name})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"font-bold text-navy mb-2",children:["Follow-ups (",(t.followUps||[]).length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(t.followUps||[]).length===0?e.jsx("div",{className:"text-gray-500 text-sm bg-gray-50 p-3 rounded-lg",children:"No follow-ups recorded"}):(t.followUps||[]).map((S,A)=>{var D;return e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border-l-4 border-orange-400",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:sl(S.at)}),((D=S.by)==null?void 0:D.name)&&e.jsxs("div",{className:"text-xs text-gray-500",children:["by ",S.by.name]}),e.jsx("div",{className:"text-sm text-gray-800 mt-1",children:S.note||e.jsx("span",{className:"text-gray-400",children:"No note"})}),S.nextFollowUpDate&&e.jsxs("div",{className:"text-xs text-indigo-600 mt-1",children:["Next follow-up: ",new Date(S.nextFollowUpDate).toLocaleDateString("en-GB")]})]})})},A)})})]}),v&&e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-bold text-navy mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Add Follow-up Note"]}),e.jsx("textarea",{value:a,onChange:S=>l(S.target.value),className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2 mb-3 focus:outline-none focus:ring-2 focus:ring-indigo-500",rows:3,placeholder:"Enter follow-up note..."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Next Follow-up Date (Optional)"}),e.jsx("input",{type:"date",value:o,onChange:S=>i(S.target.value),className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:c,onChange:S=>u(S.target.value),className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"Very Interested",children:"Very Interested"}),e.jsx("option",{value:"Interested",children:"Interested"}),e.jsx("option",{value:"Few Interested",children:"Few Interested"}),e.jsx("option",{value:"Not Interested",children:"Not Interested"})]})]})]}),e.jsx("button",{onClick:h,disabled:x,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 font-medium",children:x?"Saving...":"Add Follow-up"})]}),t.notes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-bold text-navy mb-2",children:"Additional Notes"}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm",children:t.notes})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[N&&t.status!=="Admitted"&&t.status!=="Not Admitted"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:j,disabled:x,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:" Mark Admitted"}),e.jsx("button",{onClick:y,disabled:x,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:" Not Admitted"})]}),e.jsx("button",{onClick:s,className:"px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50",children:"Close"})]})]})]}):null}function nb({onMenuClick:t}){const{user:s,logout:n}=fe(),r=$n(),[a,l]=d.useState(!1),[o,i]=d.useState([]),[c,u]=d.useState([]),[x,m]=d.useState([]),[p,b]=d.useState([]),[k,g]=d.useState(0),[N,v]=d.useState([]),[h,j]=d.useState(0),[y,w]=d.useState(!1),[S,A]=d.useState(null),[D,T]=d.useState(!1);d.useEffect(()=>{const P=localStorage.getItem("readNotifications");if(P)try{b(JSON.parse(P))}catch(W){console.error("Failed to parse read notifications:",W)}},[]),d.useEffect(()=>{const P=async()=>{try{const W=await B.getUnreadMessageCount();g(W.count||0)}catch(W){console.error("Failed to load unread messages:",W)}};if(s){P();const W=setInterval(P,10*1e3);return()=>clearInterval(W)}},[s]),d.useEffect(()=>{const P=async()=>{try{const q=((["SuperAdmin","Admin"].includes(s==null?void 0:s.role)?await B.listAllTasks():await B.listMyTasks()).tasks||[]).filter(ee=>{if(ee.status==="Completed"||!ee.dueDate)return!1;const z=new Date,te=new Date(ee.dueDate);return Math.ceil((te-z)/(1e3*60*60*24))<=3}).sort((ee,z)=>new Date(ee.dueDate)-new Date(z.dueDate));i(q)}catch(W){console.error("Failed to load urgent tasks:",W)}};if(s){P();const W=setInterval(P,60*1e3);return()=>clearInterval(W)}},[s]),d.useEffect(()=>{const P=async()=>{try{if(["Coordinator","Admin","SuperAdmin"].includes(s==null?void 0:s.role)){const O=(await B.getPaymentNotifications()).notifications||[],U=new Date;U.setHours(0,0,0,0);const q=O.filter(ee=>{if(!ee.nextPaymentDate)return!1;const z=new Date(ee.nextPaymentDate);return z.setHours(0,0,0,0),z<=U}).sort((ee,z)=>new Date(ee.nextPaymentDate)-new Date(z.nextPaymentDate));u(q)}}catch(W){console.error("Failed to load payment notifications:",W)}};if(s){P();const W=setInterval(P,2*60*1e3);return()=>clearInterval(W)}},[s]),d.useEffect(()=>{const P=async()=>{try{if(["Admission","Admin","SuperAdmin"].includes(s==null?void 0:s.role)){const O=(await B.getAdmissionFollowUpNotifications()).notifications||[],U=new Date;U.setHours(0,0,0,0);const q=O.filter(ee=>{if(!ee.nextFollowUpDate)return!1;const z=new Date(ee.nextFollowUpDate);return z.setHours(0,0,0,0),z<=U}).sort((ee,z)=>new Date(ee.nextFollowUpDate)-new Date(z.nextFollowUpDate));m(q)}}catch(W){console.error("Failed to load follow-up notifications:",W)}};if(s){P();const W=setInterval(P,2*60*1e3);return()=>clearInterval(W)}},[s]),d.useEffect(()=>{const P=async()=>{var W;try{console.log(" [Topbar] Loading system notifications for user:",s==null?void 0:s.name,s==null?void 0:s.id);const O=await B.getNotifications(!1,20);console.log(" [Topbar] System notifications response:",O),console.log(" [Topbar] Notifications array length:",(W=O.notifications)==null?void 0:W.length),console.log(" [Topbar] Notifications:",JSON.stringify(O.notifications,null,2)),console.log(" [Topbar] Unread count:",O.unreadCount),v(O.notifications||[]),j(O.unreadCount||0)}catch(O){console.error(" [Topbar] Failed to load system notifications:",O),console.error(" [Topbar] Error details:",O.message)}};if(s){P();const W=setInterval(P,30*1e3);return()=>clearInterval(W)}},[s]),d.useEffect(()=>{(()=>{const W=Date.now()-6048e5,O=p.filter(U=>U.readAt>W);O.length!==p.length&&(b(O),localStorage.setItem("readNotifications",JSON.stringify(O)))})()},[p]);const R=(P,W)=>{if(!P||W==="Completed")return null;const O=new Date,q=new Date(P)-O,ee=Math.ceil(q/(1e3*60*60*24));return ee<0?{bg:"bg-red-100",text:"text-red-700",label:"Overdue"}:ee<=1?{bg:"bg-red-50",text:"text-red-600",label:ee===0?"Due Today":"Due Tomorrow"}:ee<=3?{bg:"bg-orange-50",text:"text-orange-600",label:`${ee} days left`}:{bg:"bg-gray-50",text:"text-gray-600",label:null}},_={Low:{bg:"bg-blue-100",text:"text-blue-600"},Medium:{bg:"bg-yellow-100",text:"text-yellow-600"},High:{bg:"bg-orange-100",text:"text-orange-600"},Critical:{bg:"bg-red-100",text:"text-red-600"}},I=P=>{const W=[...p.filter(O=>O.taskId!==P._id),{taskId:P._id,readAt:Date.now()}];b(W),localStorage.setItem("readNotifications",JSON.stringify(W)),l(!1),sessionStorage.setItem("openTaskId",P._id),sessionStorage.setItem("openTaskData",JSON.stringify(P)),r("/tasks-board")},E=P=>{const W=[...p.filter(O=>O.paymentId!==P._id),{paymentId:P._id,readAt:Date.now()}];b(W),localStorage.setItem("readNotifications",JSON.stringify(W)),l(!1),sessionStorage.setItem("openPaymentId",P._id),sessionStorage.setItem("openPaymentData",JSON.stringify(P)),r("/coordinator/due-fees")},V=async P=>{const W=[...p.filter(O=>O.leadId!==P._id),{leadId:P._id,readAt:Date.now()}];b(W),localStorage.setItem("readNotifications",JSON.stringify(W)),l(!1);try{T(!0);const O=await B.getLeadHistory(P._id),U=O.lead||O;A(U),w(!0)}catch(O){console.error("Failed to load lead history:",O),r("/admission/pipeline")}finally{T(!1)}},F=o.filter(P=>!p.some(W=>W.taskId===P._id)).length,M=c.filter(P=>!p.some(W=>W.paymentId===P._id)).length,C=x.filter(P=>!p.some(W=>W.leadId===P._id)).length,$=F+M+C+h;return e.jsxs("header",{className:"h-16 bg-navy text-white flex items-center justify-between px-4 shadow-soft",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:t,className:"md:hidden p-2 hover:bg-navy/80 rounded-lg transition",children:e.jsx(Qy,{size:20})}),e.jsx("div",{className:"px-2",children:e.jsx("img",{src:"https://primeacademy.org/logo-full.png",alt:"Prime Academy",className:"h-6 md:h-8 object-contain"})})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>r("/messages"),className:"relative p-2 hover:bg-navy/80 rounded-lg transition",title:"Messages",children:[e.jsx(ft,{size:20,className:"text-white"}),k>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold animate-pulse",children:k>99?"99+":k})]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>l(!a),className:"relative p-2 hover:bg-navy/80 rounded-lg transition",title:"Notifications",children:[e.jsx(Xt,{size:20,className:"text-white"}),$>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold animate-pulse",children:$})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border z-50 max-h-[32rem] overflow-y-auto",children:[e.jsxs("div",{className:"p-3 border-b bg-gray-50 flex items-center justify-between sticky top-0",children:[e.jsx("h3",{className:"font-semibold text-navy",children:"Notifications"}),$>0&&e.jsxs("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-1 rounded-full",children:[$," new"]})]}),["Coordinator","Admin","SuperAdmin"].includes(s==null?void 0:s.role)&&c.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-3 py-2 bg-orange-50 border-b border-orange-200",children:e.jsxs("h4",{className:"text-xs font-bold text-orange-700 uppercase flex items-center gap-1",children:[e.jsx(Xt,{size:12}),"Payment Due (",c.length,")"]})}),e.jsx("div",{className:"divide-y max-h-48 overflow-y-auto",children:c.map(P=>{var U,q;const W=!p.some(ee=>ee.paymentId===P._id),O=P.isOverdue;return e.jsxs("div",{onClick:()=>E(P),className:`p-3 hover:bg-gray-50 cursor-pointer relative ${W?"bg-orange-50":""}`,children:[W&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-orange-500"}),e.jsx("div",{className:"flex items-start gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:`text-sm ${W?"font-semibold text-navy":"font-medium text-gray-700"}`,children:[(U=P.lead)==null?void 0:U.leadId,"  ",(q=P.lead)==null?void 0:q.name]}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:P.courseName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:`text-xs px-2 py-1 rounded inline-flex items-center gap-1 ${O?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:[e.jsx(ge,{size:10}),new Date(P.nextPaymentDate).toLocaleDateString("en-GB")]}),e.jsx("span",{className:`text-xs font-bold ${O?"text-red-600":"text-orange-600"}`,children:O?"OVERDUE":"DUE TODAY"})]}),e.jsxs("p",{className:"text-xs text-orange-700 font-semibold mt-1",children:["Due:  ",P.dueAmount||0]})]})})]},P._id)})})]}),["Admission","Admin","SuperAdmin"].includes(s==null?void 0:s.role)&&x.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-3 py-2 bg-purple-50 border-b border-purple-200",children:e.jsxs("h4",{className:"text-xs font-bold text-purple-700 uppercase flex items-center gap-1",children:[e.jsx(Xt,{size:12}),"Follow-up Due (",x.length,")"]})}),e.jsx("div",{className:"divide-y max-h-48 overflow-y-auto",children:x.map(P=>{const W=!p.some(q=>q.leadId===P._id),O=P.isOverdue,U=["Admin","SuperAdmin"].includes(s==null?void 0:s.role);return e.jsxs("div",{onClick:()=>V(P),className:`p-3 hover:bg-gray-50 cursor-pointer relative ${W?"bg-purple-50":""}`,children:[W&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-purple-500"}),e.jsx("div",{className:"flex items-start gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("p",{className:`text-sm flex-1 ${W?"font-semibold text-navy":"font-medium text-gray-700"}`,children:[P.leadId,"  ",P.name]}),U&&P.assignedTo&&e.jsxs("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full whitespace-nowrap",children:[" ",P.assignedTo.name]})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:[P.interestedCourse||"No course","  ",P.status]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:`text-xs px-2 py-1 rounded inline-flex items-center gap-1 ${O?"bg-red-100 text-red-700":"bg-purple-100 text-purple-700"}`,children:[e.jsx(ge,{size:10}),new Date(P.nextFollowUpDate).toLocaleDateString("en-GB")]}),e.jsx("span",{className:`text-xs font-bold ${O?"text-red-600":"text-purple-600"}`,children:O?"OVERDUE":"DUE TODAY"})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[P.phone," ",P.email&&` ${P.email}`]})]})})]},P._id)})})]}),o.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-3 py-2 bg-blue-50 border-b border-blue-200",children:e.jsxs("h4",{className:"text-xs font-bold text-blue-700 uppercase flex items-center gap-1",children:[e.jsx(ge,{size:12}),"Urgent Tasks (",o.length,")"]})}),e.jsx("div",{className:"divide-y max-h-48 overflow-y-auto",children:o.map(P=>{var U,q;const W=R(P.dueDate,P.status),O=!p.some(ee=>ee.taskId===P._id);return e.jsxs("div",{onClick:()=>I(P),className:`p-3 hover:bg-gray-50 cursor-pointer relative ${O?"bg-blue-50":""}`,children:[O&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-blue-500"}),e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm ${O?"font-semibold text-navy":"font-medium text-gray-700"}`,children:P.title}),e.jsxs("div",{className:`text-xs mt-1 px-2 py-1 rounded inline-flex items-center gap-1 ${W==null?void 0:W.bg} ${W==null?void 0:W.text}`,children:[e.jsx(ge,{size:10}),new Date(P.dueDate).toLocaleDateString("en-GB"),(W==null?void 0:W.label)&&` - ${W.label}`]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${(U=_[P.priority])==null?void 0:U.bg} ${(q=_[P.priority])==null?void 0:q.text}`,children:P.priority})]})]},P._id)})})]}),N.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-3 py-2 bg-indigo-50 border-b border-indigo-200",children:e.jsxs("h4",{className:"text-xs font-bold text-indigo-700 uppercase flex items-center gap-1",children:[e.jsx(Xt,{size:12}),"System Notifications (",N.length,")"]})}),e.jsx("div",{className:"divide-y max-h-96 overflow-y-auto",children:N.map(P=>{const W=P.type==="LEAVE_HANDOVER_REQUEST";return e.jsxs("div",{onClick:async()=>{try{W?(console.log(" Handover notification clicked:",P),sessionStorage.setItem("openHandoverRequestId",P.relatedId),sessionStorage.setItem("handoverNotificationId",P._id),l(!1),r("/my-applications")):(await B.markNotificationRead(P._id),l(!1),P.link&&r(P.link));const O=await B.getNotifications(!1,20);v(O.notifications||[]),j(O.unreadCount||0)}catch(O){console.error("Failed to handle notification click:",O)}},className:`p-3 hover:bg-gray-50 cursor-pointer relative ${P.isRead?"":"bg-indigo-50"}`,children:[!P.isRead&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-indigo-500"}),e.jsx("div",{className:"flex items-start gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:`text-sm ${P.isRead?"font-medium text-gray-700":"font-semibold text-navy"}`,children:[P.title,W&&e.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full",children:"Action Required"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:P.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(P.createdAt).toLocaleString("en-GB",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]})})]},P._id)})})]}),o.length===0&&c.length===0&&x.length===0&&N.length===0&&e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(Xt,{size:32,className:"mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No notifications"})]}),(o.length>0||c.length>0||x.length>0||N.length>0)&&e.jsx("div",{className:"p-3 border-t bg-gray-50 sticky bottom-0",children:e.jsxs("button",{onClick:()=>{l(!1),r("/notifications")},className:"w-full py-2.5 px-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg font-medium hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(Xt,{size:16}),"See All Notifications"]})})]})]})]}),e.jsx("img",{src:s==null?void 0:s.avatar,alt:"avatar",className:"w-8 h-8 md:w-9 md:h-9 rounded-full border-2 border-gold object-cover"}),e.jsxs("div",{className:"hidden sm:block text-sm leading-tight",children:[e.jsx("div",{className:"font-semibold",children:s==null?void 0:s.name}),e.jsx("div",{className:"opacity-80 text-xs",children:s==null?void 0:s.designation})]}),e.jsxs("a",{href:"/profile",className:"hidden md:inline-flex items-center gap-1 bg-gold text-navy px-3 py-2 rounded-2xl hover:bg-lightgold transition text-sm",children:[e.jsx(fr,{size:16})," Profile"]}),e.jsx("a",{href:"/profile",className:"md:hidden p-2 bg-gold text-navy rounded-full hover:bg-lightgold transition",children:e.jsx(fr,{size:16})}),e.jsxs("button",{onClick:n,className:"hidden md:inline-flex items-center gap-1 bg-white text-navy px-3 py-2 rounded-2xl hover:bg-lightgold transition text-sm",children:[e.jsx(rm,{size:16})," Logout"]}),e.jsx("button",{onClick:n,className:"md:hidden p-2 bg-white text-navy rounded-full hover:bg-lightgold transition",children:e.jsx(rm,{size:16})})]}),y&&S&&e.jsx(pp,{lead:S,onClose:()=>{w(!1),A(null)},onUpdate:async()=>{try{const P=await B.getLeadHistory(S._id);A(P.lead||P)}catch(P){console.error("Failed to reload lead:",P)}}})]})}const am=({to:t,icon:s,label:n,onClick:r})=>e.jsxs(Ey,{to:t,onClick:r,className:({isActive:a})=>`flex items-center gap-2 px-4 py-2 rounded-xl mx-3 my-1 ${a?"bg-[#e6eeff] text-navy":"text-royal hover:bg-[#f3f6ff]"}`,children:[s,e.jsx("span",{children:n})]});function rb({isOpen:t,setIsOpen:s}){const{user:n}=fe(),r={SuperAdmin:[{to:"/",label:"Dashboard",icon:e.jsx(is,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(ft,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Os,{size:18})},{to:"/admin-task-report",label:"Task Report",icon:e.jsx(St,{size:18})},{to:"/admin/approvals",label:"Application Approvals",icon:e.jsx(Cd,{size:18})},{to:"/employees",label:"Employee ",icon:e.jsx(Me,{size:18})},{to:"/courses",label:"Courses ",icon:e.jsx(kn,{size:18})},{to:"/batches",label:"Batches",icon:e.jsx(pi,{size:18})},{to:"/leads-center-view",label:"Leads Center ",icon:e.jsx(et,{size:18})},{to:"/admission/dashboard",label:"Admission Reports",icon:e.jsx(et,{size:18})},{to:"/recruitment",label:"Recruitment Reports",icon:e.jsx(is,{size:18})},{to:"/accounting/dashboard",label:"Accounts Reports",icon:e.jsx(fs,{size:18})},{to:"/dm/dashboard",label:"Digital Marketing Reports",icon:e.jsx(us,{size:18})},{to:"/mg/dashboard",label:"Motion Graphics Report",icon:e.jsx(Kl,{size:18})}],Admin:[{to:"/",label:"Dashboard",icon:e.jsx(is,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(ft,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Us,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Os,{size:18})},{to:"/admin-task-report",label:"Task Report",icon:e.jsx(St,{size:18})},{to:"/admin/approvals",label:"Application Approvals",icon:e.jsx(Cd,{size:18})},{to:"/employees",label:"Employee",icon:e.jsx(Me,{size:18})},{to:"/leads-center-view",label:"Leads Center ",icon:e.jsx(et,{size:18})},{to:"/courses",label:"Courses ",icon:e.jsx(kn,{size:18})},{to:"/admission-targets",label:"Targets",icon:e.jsx(Wt,{size:18})},{to:"/batches",label:"Batches",icon:e.jsx(pi,{size:18})},{to:"/admission/dashboard",label:"Admission Reports",icon:e.jsx(et,{size:18})},{to:"/recruitment",label:"Recruitment Reports",icon:e.jsx(is,{size:18})},{to:"/accounting/dashboard",label:"Accounts Dashboard",icon:e.jsx(fs,{size:18})},{to:"/dm/dashboard",label:"Digital Marketing Reports",icon:e.jsx(us,{size:18})},{to:"/mg/dashboard",label:"Motion Graphics Report",icon:e.jsx(Kl,{size:18})}],DigitalMarketing:[{to:"/",label:"Dashboard",icon:e.jsx(is,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(ft,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Us,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Os,{size:18})},{to:"/task-report",label:"Task Report",icon:e.jsx(St,{size:18})},{to:"/courses",label:"Courses",icon:e.jsx(kn,{size:18})},{to:"/lead-entry",label:"Lead Entry / CSV",icon:e.jsx(et,{size:18})},{to:"/leads-center",label:"Leads Center",icon:e.jsx(et,{size:18})},{to:"/dm-metrics",label:"Cost / Social / SEO",icon:e.jsx(us,{size:18})}],Admission:[{to:"/",label:"Dashboard",icon:e.jsx(is,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(ft,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Us,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Os,{size:18})},{to:"/task-report",label:"Task Report",icon:e.jsx(St,{size:18})},{to:"/courses",label:"Courses",icon:e.jsx(kn,{size:18})},{to:"/batches",label:"Batches",icon:e.jsx(pi,{size:18})},{to:"/my-targets",label:"My Targets",icon:e.jsx(Wt,{size:18})},{to:"/admission/metrics",label:"My Metrics",icon:e.jsx(us,{size:18})},{to:"/admission/assigned",label:"Assigned Lead",icon:e.jsx(et,{size:18})},{to:"/admission/counseling",label:"Counseling",icon:e.jsx(et,{size:18})},{to:"/admission/follow-up",label:"In Follow-Up",icon:e.jsx(et,{size:18})},{to:"/admission/admitted",label:"Admitted",icon:e.jsx(et,{size:18})},{to:"/admission/not-admitted",label:"Not Admitted",icon:e.jsx(et,{size:18})},{to:"/admission/fees",label:"Admission Fees",icon:e.jsx(et,{size:18})}],Accountant:[{to:"/",label:"Dashboard",icon:e.jsx(is,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(ft,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Us,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Os,{size:18})},{to:"/task-report",label:"Task Report",icon:e.jsx(St,{size:18})},{to:"/accounting/fees",label:"Admission Fees Approval",icon:e.jsx(et,{size:18})},{to:"/accounting/due-collections",label:"Due Collection Approval",icon:e.jsx(et,{size:18})},{to:"/recruitment/income",label:"Recruitment Income Approval",icon:e.jsx(fs,{size:18})},{to:"/accounting/expense",label:"Expense",icon:e.jsx(et,{size:18})},{to:"/accounting/tada-payments",label:"TA/DA Payments",icon:e.jsx(He,{size:18})}],AccountantExtra:[{to:"/employee-accounts/bank",label:"Employee Bank Account",icon:e.jsx(Nd,{size:18})},{to:"/employee-accounts/salary",label:"Employee Salary",icon:e.jsx(fs,{size:18})}],Recruitment:[{to:"/",label:"Dashboard",icon:e.jsx(is,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(ft,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Us,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Os,{size:18})},{to:"/task-report",label:"Task Report",icon:e.jsx(St,{size:18})},{to:"/recruitment",label:"Recruitment",icon:e.jsx(Me,{size:18})},{to:"/recruitment/candidates",label:"Candidates",icon:e.jsx(Me,{size:18})},{to:"/recruitment/jobs",label:"Job Positions",icon:e.jsx(et,{size:18})},{to:"/recruitment/employers",label:"Employers",icon:e.jsx(et,{size:18})},{to:"/recruitment/income",label:"Recruitment Income",icon:e.jsx(fs,{size:18})},{to:"/recruitment/expenses",label:"Recruitment Expense",icon:e.jsx(fs,{size:18})}],MotionGraphics:[{to:"/",label:"Dashboard",icon:e.jsx(is,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(ft,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Us,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Os,{size:18})},{to:"/task-report",label:"Task Report",icon:e.jsx(St,{size:18})},{to:"/mg/production",label:"MG Production",icon:e.jsx(_y,{size:18})}],Coordinator:[{to:"/",label:"Dashboard",icon:e.jsx(is,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(ft,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Us,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Os,{size:18})},{to:"/task-report",label:"Task Report",icon:e.jsx(St,{size:18})},{to:"/admission/fees",label:"Admission Fees Collection",icon:e.jsx(fs,{size:18})},{to:"/coordinator/due-fees",label:"Due Fees Collection",icon:e.jsx(Nd,{size:18})},{to:"/coordinator/notifications",label:"Payment Reminders",icon:e.jsx(ft,{size:18})}]};let a=r[n==null?void 0:n.role]||[];(n==null?void 0:n.role)==="Accountant"&&Array.isArray(r.AccountantExtra)&&(a=[...a,...r.AccountantExtra]);const l=()=>s&&s(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("aside",{className:"w-72 hidden md:flex bg-white border-r min-h-screen sticky top-0 flex-col",children:[e.jsx("div",{className:"px-4 py-4",children:e.jsx("img",{src:"https://primeacademy.org/logo-full.png",alt:"Prime Academy",className:"w-40 object-contain"})}),e.jsx("nav",{className:"flex-1",children:a.map(o=>e.jsx(am,{...o},o.to))})]}),t&&e.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:l}),e.jsxs("aside",{className:"fixed left-0 top-0 h-full w-80 bg-white shadow-xl flex flex-col transform transition-transform",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("img",{src:"https://primeacademy.org/logo-full.png",alt:"Prime Academy",className:"w-32 object-contain"}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(Eo,{size:20,className:"text-gray-600"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto",children:a.map(o=>e.jsx(am,{...o,onClick:l},o.to))})]})]})]})}function gp(){const{user:t}=fe();if(!["Accountant","Admin","SuperAdmin"].includes(t==null?void 0:t.role))return e.jsx("div",{className:"text-royal",children:"Only Accountant, Admin or SuperAdmin can access this dashboard."});const[s,n]=d.useState({period:"monthly",from:new Date(new Date().getFullYear(),0,1).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)}),[r,a]=d.useState({totalIncome:0,totalExpense:0,profit:0}),[l,o]=d.useState(null),[i,c]=d.useState([]),[u,x]=d.useState([]),[m,p]=d.useState(!1),[b,k]=d.useState({incomes:[],expenses:[]}),g=async()=>{try{let j,y;if(s.period==="custom")j=s.from,y=s.to;else if(s.period==="lifetime")j=void 0,y=void 0;else{const D=new Date,T=new Date;s.period==="daily"?T.setDate(D.getDate()-1):s.period==="weekly"?T.setDate(D.getDate()-7):s.period==="monthly"?T.setMonth(D.getMonth()-1):s.period==="yearly"&&T.setFullYear(D.getFullYear()-1),j=T.toISOString().slice(0,10),y=D.toISOString().slice(0,10)}const[w,S,A]=await Promise.all([B.accountingSummary(j,y),B.listIncome().catch(()=>({income:[]})),B.listExpenses().catch(()=>({expenses:[]}))]);a(w||{totalIncome:0,totalExpense:0,profit:0}),c(Array.isArray(S)?S:(S==null?void 0:S.income)||[]),x(Array.isArray(A)?A:(A==null?void 0:A.expenses)||[])}catch(j){o(j.message)}};d.useEffect(()=>{g()},[]);const N=gn();d.useEffect(()=>{try{const j=localStorage.getItem("accountHeads");k(j?JSON.parse(j):{incomes:[],expenses:[]})}catch{k({incomes:[],expenses:[]})}try{const j=new URLSearchParams(N.search||"");(j.get("openHeads")||j.get("openHeadsModal"))&&p(!0)}catch{}},[N.search]);const v=(r.totalIncome||0)-(r.totalExpense||0);ab(i,u,s);const h=lb(u);return e.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Accounting Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Financial overview and metrics"})]})}),l&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium",children:l})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("select",{value:s.period,onChange:j=>n(y=>({...y,period:j.target.value})),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom"})]}),s.period==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:s.from,onChange:j=>n(y=>({...y,from:j.target.value})),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"}),e.jsx("span",{className:"text-gray-500 font-medium",children:"to"}),e.jsx("input",{type:"date",value:s.to,onChange:j=>n(y=>({...y,to:j.target.value})),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"})]}),e.jsx("button",{onClick:g,className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all font-medium shadow-lg",children:"Apply"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"group relative bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(_t,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Income"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Pe(r.totalIncome||0)})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-red-500 to-rose-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(hp,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Expense"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Pe(r.totalExpense||0)})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(He,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Profit"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Pe(r.profit||0)})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(fs,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Net Balance"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Pe(v)})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Income by Source"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Revenue distribution breakdown"})]}),e.jsx(Xl,{className:"w-5 h-5 text-gray-400"})]}),e.jsx(om,{data:[{label:"Admission Fees",value:r.admissionFeesIncome||0,color:"#10b981"},{label:"Recruitment",value:r.recruitmentIncome||0,color:"#3b82f6"},{label:"Due Collections",value:r.dueCollectionIncome||0,color:"#f59e0b"},{label:"Other",value:r.otherIncome||0,color:"#8b5cf6"}].filter(j=>j.value>0)})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Expense by Head"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Distribution breakdown"})]}),e.jsx(Xl,{className:"w-5 h-5 text-gray-400"})]}),e.jsx(om,{data:h})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>p(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-3xl w-full shadow-2xl transform transition-all",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Account Heads Management"}),e.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsx(lm,{kind:"incomes",heads:b.incomes,onChange:j=>k(y=>({...y,incomes:j}))}),e.jsx(lm,{kind:"expenses",heads:b.expenses,onChange:j=>k(y=>({...y,expenses:j}))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-6 py-2 rounded-xl border-2 border-gray-200 hover:bg-gray-50 transition-colors font-medium text-gray-700",children:"Close"}),e.jsx("button",{onClick:()=>{localStorage.setItem("accountHeads",JSON.stringify(b)),p(!1)},className:"px-6 py-2 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 transition-all font-medium shadow-lg hover:shadow-xl",children:"Save Changes"})]})]})})]})}function lm({kind:t,heads:s=[],onChange:n}){const[r,a]=d.useState(s||[]),[l,o]=d.useState("");d.useEffect(()=>{a(s||[])},[s]);const i=()=>{if(!l.trim())return;const p=[l.trim(),...r];a(p),o(""),n&&n(p)},c=p=>{const b=r.filter((k,g)=>g!==p);a(b),n&&n(b)},u=t==="incomes",x=u?"from-green-50 to-emerald-50":"from-red-50 to-rose-50",m=u?"from-green-600 to-emerald-600":"from-red-600 to-rose-600";return e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:`text-lg font-bold bg-gradient-to-r ${m} bg-clip-text text-transparent`,children:t==="incomes"?"Income Heads":"Expense Heads"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:l,onChange:p=>o(p.target.value),placeholder:u?"New income head":"New expense head",className:"border-2 border-gray-200 rounded-xl px-4 py-2 flex-1 focus:border-blue-500 focus:outline-none transition-colors",onKeyPress:p=>p.key==="Enter"&&i()}),e.jsx("button",{onClick:i,className:`px-4 py-2 bg-gradient-to-r ${m} text-white rounded-xl hover:opacity-90 transition-opacity font-medium shadow-lg`,children:"Add"})]}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:[r.map((p,b)=>e.jsxs("div",{className:`flex items-center justify-between bg-gradient-to-r ${x} rounded-xl px-4 py-3 hover:shadow-md transition-all`,children:[e.jsx("span",{className:"text-gray-800 font-medium",children:p}),e.jsx("button",{onClick:()=>c(b),className:"px-3 py-1 bg-red-100 text-red-600 text-sm rounded-lg hover:bg-red-200 transition-colors font-medium",children:"Remove"})]},p+b)),r.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(fs,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsxs("p",{children:["No ",t==="incomes"?"income":"expense"," heads defined"]})]})]})]})}function ab(t=[],s=[],n){let r,a;if(n.period==="custom")r=new Date(n.from),a=new Date(n.to);else{if(n.period==="lifetime")return[];{const i=new Date;r=new Date,n.period==="daily"?r.setDate(i.getDate()-1):n.period==="weekly"?r.setDate(i.getDate()-7):n.period==="monthly"?r.setMonth(i.getMonth()-1):n.period==="yearly"&&r.setFullYear(i.getFullYear()-1),a=i}}if(!r||!a)return[];const l=[],o=new Date(r);for(;o<=a;){const i=o.toISOString().slice(0,10),c=t.filter(x=>new Date(x.date).toISOString().slice(0,10)===i).reduce((x,m)=>x+(Number(m.amount)||0),0),u=s.filter(x=>new Date(x.date).toISOString().slice(0,10)===i).reduce((x,m)=>x+(Number(m.amount)||0),0);l.push({date:i,income:c,expense:u}),o.setDate(o.getDate()+1)}return l}function lb(t=[]){const s={};return(t||[]).forEach(n=>{const r=n.purpose||n.category||"Other";s[r]=(s[r]||0)+Number(n.amount||0)}),Object.entries(s).map(([n,r])=>({label:n,value:r}))}function om({data:t}){if(!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-52 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xl,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data available"})]})});const s=t.reduce((u,x)=>u+x.value,0);if(s===0)return e.jsx("div",{className:"flex items-center justify-center h-52 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xl,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No expense recorded"})]})});const n=[{base:"#3b82f6",gradient:"url(#gradient0)"},{base:"#8b5cf6",gradient:"url(#gradient1)"},{base:"#ec4899",gradient:"url(#gradient2)"},{base:"#f59e0b",gradient:"url(#gradient3)"},{base:"#10b981",gradient:"url(#gradient4)"},{base:"#ef4444",gradient:"url(#gradient5)"},{base:"#06b6d4",gradient:"url(#gradient6)"},{base:"#a855f7",gradient:"url(#gradient7)"}];let r=-90;const a=120,l=120,o=90,i=60,c=t.map((u,x)=>{const m=u.value/s*360,p=r*Math.PI/180,b=(r+m)*Math.PI/180,k=a+o*Math.cos(p),g=l+o*Math.sin(p),N=a+o*Math.cos(b),v=l+o*Math.sin(b),h=a+i*Math.cos(b),j=l+i*Math.sin(b),y=a+i*Math.cos(p),w=l+i*Math.sin(p),S=m>180?1:0,A=`M${k},${g} A${o},${o} 0 ${S},1 ${N},${v} L${h},${j} A${i},${i} 0 ${S},0 ${y},${w} Z`,D=(u.value/s*100).toFixed(1);return r+=m,{path:A,color:n[x%n.length],label:u.label,percentage:D,value:u.value}});return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("svg",{width:"240",height:"240",className:"mx-auto",children:[e.jsx("defs",{children:n.map((u,x)=>e.jsxs("linearGradient",{id:`gradient${x}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:u.base,stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:u.base,stopOpacity:"0.6"})]},x))}),c.map((u,x)=>e.jsx("path",{d:u.path,fill:u.color.gradient,stroke:"white",strokeWidth:"2",className:"hover:opacity-80 transition-opacity cursor-pointer"},x)),e.jsx("text",{x:a,y:l-5,textAnchor:"middle",fontSize:"12",fill:"#6b7280",fontWeight:"500",children:"Total"}),e.jsx("text",{x:a,y:l+10,textAnchor:"middle",fontSize:"18",fill:"#1f2937",fontWeight:"bold",children:Pe(s)})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 w-full",children:c.map((u,x)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n[x%n.length].base}}),e.jsx("span",{className:"text-gray-700 font-medium truncate",children:u.label}),e.jsxs("span",{className:"text-gray-500 ml-auto",children:[u.percentage,"%"]})]},x))})]})}function nl(){return new Date().toISOString().slice(0,10)}function im(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1).toISOString().slice(0,10)}function fp(){const[t,s]=d.useState([]),[n,r]=d.useState([]),[a,l]=d.useState([]),[o,i]=d.useState(!1),[c,u]=d.useState(""),[x,m]=d.useState([]),[p,b]=d.useState(!1),[k,g]=d.useState(""),[N,v]=d.useState("monthly"),[h,j]=d.useState(""),[y,w]=d.useState("");d.useEffect(()=>{S();const F=new Date,M=F.getFullYear(),C=String(F.getMonth()+1).padStart(2,"0"),$=`${M}-${C}`;g($),A($)},[]);async function S(){i(!0);try{const[F,M,C]=await Promise.all([B.listCandidates().catch(()=>({candidates:[]})),B.listJobs().catch(()=>({jobs:[]})),B.listEmployers().catch(()=>({employers:[]}))]);s((F==null?void 0:F.candidates)||F||[]),r((M==null?void 0:M.jobs)||M||[]),l((C==null?void 0:C.employers)||C||[]),u("")}catch(F){u(F.message||"Failed to load")}finally{i(!1)}}async function A(F){b(!0);try{const M=await B.getTargets(F,null,null),C=(M==null?void 0:M.targets)||[];console.log("All targets for month:",F,C);const $=C.filter(P=>P.targetType==="RecruitmentCandidate"||P.targetType==="RecruitmentRevenue");console.log("Filtered recruitment targets:",$),m($)}catch(M){console.error("Failed to load targets:",M)}finally{b(!1)}}const D=()=>{const F=[],M=new Date;for(let C=-12;C<=3;C++){const $=new Date(M.getFullYear(),M.getMonth()+C,1),P=$.getFullYear(),W=$.getMonth()+1,O=`${P}-${String(W).padStart(2,"0")}`,U=$.toLocaleDateString("en-US",{month:"long",year:"numeric"});F.push({value:O,label:U})}return F},T=F=>{g(F),A(F)},R=()=>{if(N==="lifetime")return{from:null,to:null};if(N==="custom"){if(h&&y){const C=new Date(h);C.setHours(0,0,0,0);const $=new Date(y);return $.setHours(23,59,59,999),{from:C,to:$}}return{from:null,to:null}}const F=new Date;let M=new Date;return N==="daily"?M.setDate(F.getDate()-1):N==="weekly"?M.setDate(F.getDate()-7):N==="monthly"?M.setMonth(F.getMonth()-1):N==="yearly"&&M.setFullYear(F.getFullYear()-1),{from:M,to:F}},_=(F,M,C)=>{if(!F)return!1;const $=new Date(F).getTime();return!(M&&$<M.getTime()||C&&$>C.getTime())},{from:I,to:E}=R(),V=ve.useMemo(()=>{const F=I?new Date(I):null,M=E?new Date(E):null,C=t.filter(ee=>_(ee.createdAt,F,M)||!F&&!M),$=n.filter(ee=>_(ee.createdAt,F,M)||!F&&!M),P=C.length,W=C.filter(ee=>ee.status==="pending").length,O=$.filter(ee=>ee.status==="active").length,U=a.length,q=[];if(M)for(let ee=5;ee>=0;ee--){const z=new Date(M);z.setMonth(z.getMonth()-ee);const te=new Date(z.getFullYear(),z.getMonth(),1),K=new Date(z.getFullYear(),z.getMonth()+1,0,23,59,59,999),G=te.toLocaleString("en-US",{month:"short",year:"numeric"}),oe=t.filter(Z=>_(Z.createdAt,te,K)).length,le=t.filter(Z=>Z.status==="recruited"&&_(Z.recruitedAt||Z.updatedAt,te,K)).length;q.push({month:G,candidates:oe,recruited:le})}return{totalRecruitment:P,pendingCandidate:W,activeJobPosition:O,totalEmployer:U,series:q}},[t,n,a,I,E]);return e.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Recruitment Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track candidates and job positions"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("select",{value:N,onChange:F=>v(F.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom"})]}),N==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:h,onChange:F=>j(F.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"}),e.jsx("span",{className:"text-gray-500 font-medium",children:"to"}),e.jsx("input",{type:"date",value:y,onChange:F=>w(F.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"})]})]})]}),c&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium",children:c})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Me,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Recruitment"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:V.totalRecruitment})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Bt,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Pending Candidate"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:V.pendingCandidate})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(cp,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Active Job Position"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:V.activeJobPosition})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(By,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Employer"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:V.totalEmployer})]})]})]}),e.jsx(ob,{}),!p&&e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg",children:e.jsx(Wt,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Team Targets"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Recruitment performance tracking"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5 text-gray-400"}),e.jsx("select",{value:k,onChange:F=>T(F.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-indigo-400 focus:border-indigo-500 focus:outline-none transition-colors font-medium text-gray-700",children:D().map(F=>e.jsx("option",{value:F.value,children:F.label},F.value))})]})]}),x.length===0?e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-12 border-2 border-dashed border-gray-300 text-center",children:[e.jsx(Wt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"No Targets Set"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Contact your admin to set recruitment targets for this month"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.map(F=>{var O;const M=F.targetType==="RecruitmentCandidate",C=F.achieved||0,$=F.targetValue||0,P=$>0?Math.round(C/$*100):0,W=((O=F.assignedTo)==null?void 0:O.name)||"Team";return e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-xl p-6 border-2 border-gray-200 hover:border-indigo-300 hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-lg shadow-md ${M?"bg-gradient-to-br from-blue-500 to-indigo-600":"bg-gradient-to-br from-green-500 to-emerald-600"}`,children:M?e.jsx(Me,{className:"w-6 h-6 text-white"}):e.jsx(He,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:M?"Candidates":"Revenue"}),e.jsx("p",{className:"text-gray-500 text-sm",children:W})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Achievement"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:M?C:es(C)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Target"}),e.jsx("p",{className:"text-xl font-semibold text-gray-600",children:M?$:es($)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Progress"}),e.jsxs("span",{className:`font-bold ${P>=100?"text-green-600":P>=75?"text-blue-600":P>=50?"text-orange-600":"text-red-600"}`,children:[P,"%"]})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${P>=100?"bg-gradient-to-r from-green-500 to-emerald-600":P>=75?"bg-gradient-to-r from-blue-500 to-indigo-600":P>=50?"bg-gradient-to-r from-orange-500 to-amber-600":"bg-gradient-to-r from-red-500 to-rose-600"}`,style:{width:`${Math.min(P,100)}%`}})})]}),F.note&&e.jsxs("p",{className:"text-gray-600 text-sm mt-3 italic bg-gray-50 p-2 rounded border-l-4 border-indigo-400",children:['"',F.note,'"']})]})]},F._id)})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Candidate vs Recruited"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Last 6 months performance"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Candidates"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Recruited"})]})]})]}),e.jsx(ib,{data:V.series})]})]})}function ob(){const[t,s]=d.useState("monthly"),[n,r]=d.useState(im()),[a,l]=d.useState(nl()),[o,i]=d.useState(!1),[c,u]=d.useState(""),[x,m]=d.useState(""),p=async()=>{i(!0),u(""),m("");try{let b,k;t==="daily"?(b=nl(),k=nl()):t==="monthly"?(b=im(),k=nl()):t==="custom"&&(b=n,k=a);const[g,N,v,h,j]=await Promise.all([B.listCandidates().catch(()=>({candidates:[]})),B.listJobs().catch(()=>({jobs:[]})),B.listEmployers().catch(()=>({employers:[]})),B.listRecIncome().catch(()=>({items:[]})),B.listRecExpense().catch(()=>({items:[]}))]),y=(g==null?void 0:g.candidates)||[],w=(N==null?void 0:N.jobs)||[],S=(v==null?void 0:v.employers)||[],A=Array.isArray(h)?h:(h==null?void 0:h.items)||(h==null?void 0:h.income)||[],D=Array.isArray(j)?j:(j==null?void 0:j.items)||(j==null?void 0:j.expenses)||[],T=new Date(b),R=new Date(k);R.setHours(23,59,59,999);const _=y.filter(K=>{const G=new Date(K.createdAt||K.date);return G>=T&&G<=R}),I=w.filter(K=>{const G=new Date(K.createdAt||K.date);return G>=T&&G<=R}),E=A.filter(K=>{const G=new Date(K.date);return G>=T&&G<=R}),V=D.filter(K=>{const G=new Date(K.date);return G>=T&&G<=R}),F=_.length,M={};_.forEach(K=>{const G=K.status||"Unknown";M[G]=(M[G]||0)+1});const C=I.length,$={};I.forEach(K=>{const G=K.status||"Unknown";$[G]=($[G]||0)+1});const P=E.reduce((K,G)=>K+(Number(G.amount)||0),0),W={};E.forEach(K=>{const G=K.source||"Others";W[G]=(W[G]||0)+(Number(K.amount)||0)});const O=V.reduce((K,G)=>K+(Number(G.amount)||0),0),U={};V.forEach(K=>{const G=K.purpose||"Others";U[G]=(U[G]||0)+(Number(K.amount)||0)});let q=`Recruitment Report
`;q+=`Period: ${b} to ${k}
`,q+=`Generated: ${new Date().toLocaleString()}

`,q+=`=== CANDIDATES ===
`,q+=`Total Candidates,${F}

`,q+=`Candidates by Status
`,q+=`Status,Count
`,Object.entries(M).sort((K,G)=>G[1]-K[1]).forEach(([K,G])=>{q+=`${K},${G}
`}),q+=`
`,_.length>0&&(q+=`Candidate Details
`,q+=`Name,Phone,Email,Status,Job Position,Company,Created Date
`,_.forEach(K=>{var se,me;const G=(K.name||"N/A").replace(/,/g,";"),oe=K.phone||"N/A",le=(K.email||"N/A").replace(/,/g,";"),Z=K.status||"N/A",L=(((se=K.jobId)==null?void 0:se.title)||"N/A").replace(/,/g,";"),H=(((me=K.employerId)==null?void 0:me.companyName)||"N/A").replace(/,/g,";"),re=K.createdAt?new Date(K.createdAt).toLocaleDateString():"N/A";q+=`"${G}",${oe},"${le}",${Z},"${L}","${H}",${re}
`}),q+=`
`),q+=`=== JOB POSITIONS ===
`,q+=`Total Jobs,${C}

`,q+=`Jobs by Status
`,q+=`Status,Count
`,Object.entries($).sort((K,G)=>G[1]-K[1]).forEach(([K,G])=>{q+=`${K},${G}
`}),q+=`
`,I.length>0&&(q+=`Job Position Details
`,q+=`Job Title,Company,Location,Status,Salary,Requirements,Created Date
`,I.forEach(K=>{var se;const G=(K.title||"N/A").replace(/,/g,";"),oe=(((se=K.employerId)==null?void 0:se.companyName)||"N/A").replace(/,/g,";"),le=(K.location||"N/A").replace(/,/g,";"),Z=K.status||"N/A",L=(K.salary||"N/A").replace(/,/g,";"),H=(K.requirements||"N/A").replace(/,/g,";").replace(/\n/g," "),re=K.createdAt?new Date(K.createdAt).toLocaleDateString():"N/A";q+=`"${G}","${oe}","${le}",${Z},"${L}","${H}",${re}
`}),q+=`
`),q+=`=== EMPLOYERS ===
`,q+=`Total Employers,${S.length}

`,S.length>0&&(q+=`Employer Details
`,q+=`Company Name,Contact Person,Phone,Email,Address,Industry
`,S.forEach(K=>{const G=(K.companyName||"N/A").replace(/,/g,";"),oe=(K.contactPerson||"N/A").replace(/,/g,";"),le=K.phone||"N/A",Z=(K.email||"N/A").replace(/,/g,";"),L=(K.address||"N/A").replace(/,/g,";").replace(/\n/g," "),H=(K.industry||"N/A").replace(/,/g,";");q+=`"${G}","${oe}",${le},"${Z}","${L}","${H}"
`}),q+=`
`),q+=`=== RECRUITMENT INCOME ===
`,q+=`Total Income,${P} BDT

`,q+=`Income by Source
`,q+=`Source Name,Amount (BDT)
`,Object.entries(W).sort((K,G)=>G[1]-K[1]).forEach(([K,G])=>{q+=`${K},${G}
`}),q+=`
`,E.length>0&&(q+=`Detailed Income
`,q+=`Date,Source Name,Amount (BDT),Status,Notes
`,E.forEach(K=>{const G=new Date(K.date).toLocaleDateString(),oe=(K.source||"N/A").replace(/,/g,";"),le=K.status||"N/A",Z=(K.notes||K.description||"N/A").replace(/,/g,";").replace(/\n/g," ");q+=`${G},"${oe}",${K.amount||0},${le},"${Z}"
`}),q+=`
`),q+=`=== RECRUITMENT EXPENSES ===
`,q+=`Total Expenses,${O} BDT

`,q+=`Expenses by Purpose Name
`,q+=`Purpose Name,Amount (BDT)
`,Object.entries(U).sort((K,G)=>G[1]-K[1]).forEach(([K,G])=>{q+=`${K},${G}
`}),q+=`
`,V.length>0&&(q+=`Detailed Expenses
`,q+=`Date,Purpose Name,Amount (BDT),Notes
`,V.forEach(K=>{const G=new Date(K.date).toLocaleDateString(),oe=(K.purpose||"N/A").replace(/,/g,";"),le=(K.notes||K.description||"N/A").replace(/,/g,";").replace(/\n/g," ");q+=`${G},"${oe}",${K.amount||0},"${le}"
`}),q+=`
`),q+=`=== FINANCIAL SUMMARY ===
`,q+=`Total Income,${P} BDT
`,q+=`Total Expenses,${O} BDT
`,q+=`Net Profit,${P-O} BDT
`;const ee=new Blob([q],{type:"text/csv;charset=utf-8;"}),z=URL.createObjectURL(ee),te=document.createElement("a");te.href=z,te.download=`Recruitment_Report_${b}_to_${k}.csv`,te.click(),URL.revokeObjectURL(z),u(" Report downloaded successfully!")}catch(b){m("Failed to download report: "+b.message)}finally{i(!1)}};return e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg shadow-md",children:e.jsx(Ht,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Download Comprehensive Reports"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Export detailed reports including candidates, jobs, employers, income, and expenses"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("select",{value:t,onChange:b=>s(b.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Today"}),e.jsx("option",{value:"monthly",children:"This Month"}),e.jsx("option",{value:"custom",children:"Custom Range"})]}),t==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:n,onChange:b=>r(b.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"}),e.jsx("span",{className:"text-gray-500 font-medium self-center",children:"to"}),e.jsx("input",{type:"date",value:a,onChange:b=>l(b.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"})]}),e.jsx("button",{onClick:p,disabled:o,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-bold hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-xl",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ht,{className:"w-4 h-4"}),"Download Report"]})})]})]}),c&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border-2 border-green-200 rounded-lg",children:e.jsx("p",{className:"text-green-700 font-medium text-sm",children:c})}),x&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border-2 border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium text-sm",children:x})})]})}function ib({data:t}){if(!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-52 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(us,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data available"})]})});const s=Math.max(...t.map(u=>Math.max(u.candidates||0,u.recruited||0)),1),n=40,r=10,a=n*2+r,l={left:50,right:30,top:30,bottom:60},o=l.left+l.right+(a+30)*t.length,i=300,c=i-l.top-l.bottom;return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("svg",{width:o,height:i,className:"min-w-full",children:[[0,.25,.5,.75,1].map((u,x)=>e.jsxs("g",{children:[e.jsx("line",{x1:l.left,y1:l.top+c*(1-u),x2:o-l.right,y2:l.top+c*(1-u),stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4,4"}),e.jsx("text",{x:l.left-10,y:l.top+c*(1-u)+4,textAnchor:"end",fontSize:"12",fill:"#6b7280",children:Math.round(s*u)})]},x)),t.map((u,x)=>{const m=l.left+x*(a+30),p=u.candidates/s*c,b=u.recruited/s*c;return e.jsxs("g",{children:[e.jsx("rect",{x:m,y:l.top+c-p,width:n,height:p,fill:"url(#candidatesGradient)",rx:"4"}),e.jsx("text",{x:m+n/2,y:l.top+c-p-5,textAnchor:"middle",fontSize:"12",fontWeight:"600",fill:"#3b82f6",children:u.candidates}),e.jsx("rect",{x:m+n+r,y:l.top+c-b,width:n,height:b,fill:"url(#recruitedGradient)",rx:"4"}),e.jsx("text",{x:m+n+r+n/2,y:l.top+c-b-5,textAnchor:"middle",fontSize:"12",fontWeight:"600",fill:"#10b981",children:u.recruited}),e.jsx("text",{x:m+a/2,y:i-l.bottom+20,textAnchor:"middle",fontSize:"12",fill:"#374151",fontWeight:"500",children:u.month})]},x)}),e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"candidatesGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:"0.6"})]}),e.jsxs("linearGradient",{id:"recruitedGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.6"})]})]})]})})}function rl(){return new Date().toISOString().slice(0,10)}function dm(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1).toISOString().slice(0,10)}function yp(){const[t,s]=d.useState([]),[n,r]=d.useState(""),[a,l]=d.useState(!1),[o,i]=d.useState("monthly"),[c,u]=d.useState(""),[x,m]=d.useState("");d.useEffect(()=>{p();const D=setInterval(p,3e4);return()=>clearInterval(D)},[]);async function p(){l(!0);try{const D=await B.listMGWorks().catch(()=>({works:[]})),T=(D==null?void 0:D.works)||D||[];s(Array.isArray(T)?T:[]),r("")}catch(D){r(D.message||"Failed to load")}finally{l(!1)}}const b=()=>{if(o==="lifetime")return{from:null,to:null};if(o==="custom"){if(c&&x){const R=new Date(c);R.setHours(0,0,0,0);const _=new Date(x);return _.setHours(23,59,59,999),{from:R,to:_}}return{from:null,to:null}}const D=new Date;let T=new Date;return o==="daily"?T.setDate(D.getDate()-1):o==="weekly"?T.setDate(D.getDate()-7):o==="monthly"?T.setMonth(D.getMonth()-1):o==="yearly"&&T.setFullYear(D.getFullYear()-1),{from:T,to:D}},k=(D,T,R)=>{if(!D)return!1;const _=new Date(D).getTime();return!(T&&_<T.getTime()||R&&_>R.getTime())},{from:g,to:N}=b(),v=d.useMemo(()=>{const D=g?new Date(g):null,T=N?new Date(N):null,R=t.filter(_=>k(_.createdAt,D,T)||!D&&!T);return{totalProduction:R.length,adDesign:R.filter(_=>_.type==="Ad").length,bannerDesign:R.filter(_=>_.type==="Banner").length,videoProduction:R.filter(_=>_.type==="Reel"||_.type==="Short"||_.type==="Explainer").length,other:R.filter(_=>_.type==="Other").length,queued:R.filter(_=>_.status==="Queued").length,inProgress:R.filter(_=>_.status==="InProgress"||_.status==="Review").length,done:R.filter(_=>_.status==="Done").length,hold:R.filter(_=>_.status==="Hold").length}},[t,g,N]),h=[{label:"Ad",value:v.adDesign,color:"#3b82f6"},{label:"Banner",value:v.bannerDesign,color:"#10b981"},{label:"Video (Reel/Short/Explainer)",value:v.videoProduction,color:"#f59e0b"},{label:"Other",value:v.other,color:"#6366f1"}].filter(D=>D.value>0),j=h.reduce((D,T)=>D+T.value,0),w=(()=>{if(j===0)return[];let D=-90;return h.map((T,R)=>{const _=T.value/j,I=_*360,E=D*Math.PI/180,V=(D+I)*Math.PI/180,F=50+40*Math.cos(E),M=50+40*Math.sin(E),C=50+40*Math.cos(V),$=50+40*Math.sin(V),P=I>180?1:0,W=["M 50 50",`L ${F} ${M}`,`A 40 40 0 ${P} 1 ${C} ${$}`,"Z"].join(" ");return D+=I,{...T,path:W,percentage:Math.round(_*100)}})})(),S=Math.max(v.queued,v.inProgress,v.done,1),A=[{label:"Queued",value:v.queued,color:"#ef4444",height:v.queued/S*100},{label:"In Progress",value:v.inProgress,color:"#3b82f6",height:v.inProgress/S*100},{label:"Done",value:v.done,color:"#10b981",height:v.done/S*100}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Motion Graphics Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Production analytics and performance metrics"})]}),a&&e.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-sm",children:"Updating..."})]})]}),n&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg",children:n}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-navy font-semibold mb-3",children:[e.jsx(ge,{size:20}),e.jsx("span",{children:"Time Period"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:o,onChange:D=>i(D.target.value),className:"border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom Range"})]}),o==="custom"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:c,onChange:D=>u(D.target.value),className:"border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"date",value:x,onChange:D=>m(D.target.value),className:"border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm mb-1",children:"Total Production"}),e.jsx("p",{className:"text-4xl font-bold",children:v.totalProduction})]}),e.jsx(Kl,{size:48,className:"text-purple-200 opacity-80"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm mb-1",children:"Ad"}),e.jsx("p",{className:"text-4xl font-bold",children:v.adDesign})]}),e.jsx(Gy,{size:48,className:"text-blue-200 opacity-80"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm mb-1",children:"Banner"}),e.jsx("p",{className:"text-4xl font-bold",children:v.bannerDesign})]}),e.jsx(Vy,{size:48,className:"text-green-200 opacity-80"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-100 text-sm mb-1",children:"Video (Reel/Short/Explainer)"}),e.jsx("p",{className:"text-4xl font-bold",children:v.videoProduction})]}),e.jsx(tb,{size:48,className:"text-orange-200 opacity-80"})]})})]}),e.jsx(db,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy mb-4",children:"Production Type Distribution"}),j===0?e.jsx("div",{className:"flex items-center justify-center h-64 text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Kl,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No production data available"})]})}):e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-64 h-64",children:[w.map((D,T)=>e.jsx("g",{children:e.jsx("path",{d:D.path,fill:D.color,stroke:"white",strokeWidth:"0.5",className:"hover:opacity-80 transition-opacity cursor-pointer"})},T)),e.jsx("circle",{cx:"50",cy:"50",r:"20",fill:"white"}),e.jsx("text",{x:"50",y:"47",textAnchor:"middle",fontSize:"4",fontWeight:"600",fill:"#1e3a8a",children:"Total"}),e.jsx("text",{x:"50",y:"55",textAnchor:"middle",fontSize:"8",fontWeight:"700",fill:"#1e3a8a",children:j})]})}),e.jsx("div",{className:"flex-1 space-y-3",children:w.map((D,T)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:D.color}}),e.jsx("span",{className:"text-sm text-gray-700",children:D.label})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-bold text-navy",children:D.value}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",D.percentage,"%)"]})]})]},T))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-navy mb-4 flex items-center gap-2",children:[e.jsx(_t,{size:20}),"Status Distribution"]}),v.totalProduction===0?e.jsx("div",{className:"flex items-center justify-center h-64 text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_t,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No status data available"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-end justify-around gap-4 h-64 px-4",children:A.map((D,T)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-sm font-bold text-navy",children:D.value}),e.jsx("div",{className:"w-full rounded-t-lg transition-all duration-500 hover:opacity-80",style:{backgroundColor:D.color,height:`${D.height}%`,minHeight:D.value>0?"20px":"0"}}),e.jsx("div",{className:"text-xs text-gray-600 text-center font-medium",children:D.label})]},T))}),e.jsx("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t",children:A.map((D,T)=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:D.color}}),e.jsx("span",{className:"text-sm text-gray-600",children:D.label})]}),e.jsx("p",{className:"text-xl font-bold text-navy",children:D.value}),e.jsx("p",{className:"text-xs text-gray-500",children:v.totalProduction>0?`${Math.round(D.value/v.totalProduction*100)}%`:"0%"})]},T))})]})]})]})]})}function db(){const[t,s]=d.useState("monthly"),[n,r]=d.useState(dm()),[a,l]=d.useState(rl()),[o,i]=d.useState(!1),[c,u]=d.useState(""),[x,m]=d.useState(""),p=async()=>{i(!0),u(""),m("");try{let b,k;t==="daily"?(b=rl(),k=rl()):t==="monthly"?(b=dm(),k=rl()):t==="custom"&&(b=n,k=a);const[g,N]=await Promise.all([B.listMGWorks().catch(()=>({works:[]})),B.listAllTasks().catch(()=>({tasks:[]}))]),v=(g==null?void 0:g.works)||g||[],h=(N==null?void 0:N.tasks)||[],j=new Date(b),y=new Date(k);y.setHours(23,59,59,999);const w=v.filter(O=>{const U=new Date(O.createdAt||O.date);return U>=j&&U<=y}),S=h.filter(O=>{var ee;const U=new Date(O.createdAt||O.deadline),q=(ee=O.assignedTo)==null?void 0:ee.some(z=>z.role==="MotionGraphics");return U>=j&&U<=y&&q}),A=w.length,D={todo:S.filter(O=>O.status==="To-Do").length,inProgress:S.filter(O=>O.status==="In Progress").length,completed:S.filter(O=>O.status==="Completed").length,total:S.length},T={};w.forEach(O=>{const U=O.type||"Unknown";T[U]=(T[U]||0)+1});const R={};w.forEach(O=>{const U=O.status||"Unknown";R[U]=(R[U]||0)+1});const _={};w.forEach(O=>{const U=O.priority||"Unknown";_[U]=(_[U]||0)+1});const I={};w.forEach(O=>{const U=O.platform||"Unknown";I[U]=(I[U]||0)+1});let E=`Motion Graphics Report
`;E+=`Period: ${b} to ${k}
`,E+=`Generated: ${new Date().toLocaleString()}

`,E+=`=== PRODUCTION SUMMARY ===
`,E+=`Total Production,${A}

`,E+=`=== TASKS ===
`,E+=`Status,Count
`,E+=`To-Do,${D.todo}
`,E+=`In Progress,${D.inProgress}
`,E+=`Completed,${D.completed}
`,E+=`Total,${D.total}

`,S.length>0&&(E+=`Task Details
`,E+=`Task Name,Status,Priority,Deadline,Assigned To
`,S.forEach(O=>{var K;const U=(O.title||"Untitled").replace(/,/g,";"),q=O.status||"N/A",ee=O.priority||"N/A",z=O.deadline?new Date(O.deadline).toLocaleDateString():"N/A",te=((K=O.assignedTo)==null?void 0:K.map(G=>G.name||"Unknown").join("; "))||"Unassigned";E+=`"${U}",${q},${ee},${z},"${te}"
`}),E+=`
`),E+=`Production by Type
`,E+=`Type Name,Count
`,Object.entries(T).sort((O,U)=>U[1]-O[1]).forEach(([O,U])=>{E+=`${O},${U}
`}),E+=`
`,E+=`Production by Status
`,E+=`Status,Count
`,Object.entries(R).sort((O,U)=>U[1]-O[1]).forEach(([O,U])=>{E+=`${O},${U}
`}),E+=`
`,E+=`Production by Priority
`,E+=`Priority,Count
`,Object.entries(_).sort((O,U)=>U[1]-O[1]).forEach(([O,U])=>{E+=`${O},${U}
`}),E+=`
`,E+=`Production by Platform
`,E+=`Platform,Count
`,Object.entries(I).sort((O,U)=>U[1]-O[1]).forEach(([O,U])=>{E+=`${O},${U}
`}),E+=`
`,w.length>0&&(E+=`=== DETAILED PRODUCTION LIST ===
`,E+=`Title,Type,Status,Priority,Platform,Assignee,Deadline,Created Date,Notes
`,w.forEach(O=>{var Z;const U=(O.title||"Untitled").replace(/,/g,";"),q=O.type||"N/A",ee=O.status||"N/A",z=O.priority||"N/A",te=O.platform||"N/A",K=((Z=O.assignedTo)==null?void 0:Z.name)||"Unassigned",G=O.deadline?new Date(O.deadline).toLocaleDateString():"N/A",oe=O.createdAt?new Date(O.createdAt).toLocaleDateString():"N/A",le=(O.notes||O.description||"N/A").replace(/,/g,";").replace(/\n/g," ");E+=`"${U}",${q},${ee},${z},${te},"${K}",${G},${oe},"${le}"
`}),E+=`
`);const V=w.filter(O=>O.status==="Done"),F=w.filter(O=>O.status==="InProgress"||O.status==="Review"),M=w.filter(O=>O.status==="Queued"),C=w.filter(O=>O.status==="Hold");E+=`=== PERFORMANCE METRICS ===
`,E+=`Metric,Value
`,E+=`Total Production,${A}
`,E+=`Completed Works,${V.length}
`,E+=`In Progress Works,${F.length}
`,E+=`Queued Works,${M.length}
`,E+=`On Hold Works,${C.length}
`,E+=`Production Completion Rate,${A>0?Math.round(V.length/A*100):0}%
`,E+=`Total Tasks,${D.total}
`,E+=`Completed Tasks,${D.completed}
`,E+=`In Progress Tasks,${D.inProgress}
`,E+=`Pending Tasks,${D.todo}
`,E+=`Task Completion Rate,${D.total>0?Math.round(D.completed/D.total*100):0}%
`;const $=new Blob([E],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL($),W=document.createElement("a");W.href=P,W.download=`MG_Report_${b}_to_${k}.csv`,W.click(),URL.revokeObjectURL(P),u(" Report downloaded successfully!")}catch(b){m("Failed to download report: "+b.message)}finally{i(!1)}};return e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border-2 border-gray-200 hover:border-purple-300 transition-colors",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg shadow-md",children:e.jsx(Ht,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Download Comprehensive Reports"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Export detailed reports including tasks, production works, status, types, and performance metrics"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("select",{value:t,onChange:b=>s(b.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-purple-400 focus:border-purple-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Today"}),e.jsx("option",{value:"monthly",children:"This Month"}),e.jsx("option",{value:"custom",children:"Custom Range"})]}),t==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:n,onChange:b=>r(b.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-purple-400 focus:border-purple-500 focus:outline-none transition-colors"}),e.jsx("span",{className:"text-gray-500 font-medium self-center",children:"to"}),e.jsx("input",{type:"date",value:a,onChange:b=>l(b.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-purple-400 focus:border-purple-500 focus:outline-none transition-colors"})]}),e.jsx("button",{onClick:p,disabled:o,className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-xl font-bold hover:from-purple-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-xl",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ht,{className:"w-4 h-4"}),"Download Report"]})})]})]}),c&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border-2 border-green-200 rounded-lg",children:e.jsx("p",{className:"text-green-700 font-medium text-sm",children:c})}),x&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border-2 border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium text-sm",children:x})})]})}function bp(){const{user:t}=fe();if((t==null?void 0:t.role)!=="Coordinator"&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin")return e.jsx("div",{className:"text-royal",children:"Access denied"});const[s,n]=d.useState(null),[r,a]=d.useState([]),[l,o]=d.useState(!0);if(d.useEffect(()=>{(async()=>{try{const[u,x]=await Promise.all([B.getCoordinatorDashboardStats(),B.getPaymentNotifications()]);n(u),a(x.notifications||[])}catch(u){console.error("Load failed:",u)}finally{o(!1)}})()},[]),l)return e.jsx("div",{className:"p-6",children:"Loading..."});const i=({icon:c,label:u,value:x,color:m,link:p})=>e.jsx(ln,{to:p,className:`bg-white rounded-2xl shadow-soft p-6 hover:shadow-lg transition-shadow border-l-4 ${m}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:u}),e.jsx("p",{className:"text-3xl font-bold text-navy",children:x})]}),e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center ${m.replace("border-","bg-").replace("-500","-100")}`,children:c})]})});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-navy",children:"Coordinator Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage due fees and payment collections"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(i,{icon:e.jsx(Me,{size:28,className:"text-blue-600"}),label:"Total Students with Dues",value:(s==null?void 0:s.totalWithDues)||0,color:"border-blue-500",link:"/coordinator/due-fees"}),e.jsx(i,{icon:e.jsx(Dt,{size:28,className:"text-red-600"}),label:"Overdue Payments",value:(s==null?void 0:s.overdue)||0,color:"border-red-500",link:"/coordinator/notifications"}),e.jsx(i,{icon:e.jsx(ge,{size:28,className:"text-orange-600"}),label:"Due This Week",value:(s==null?void 0:s.dueThisWeek)||0,color:"border-orange-500",link:"/coordinator/notifications"}),e.jsx(i,{icon:e.jsx(He,{size:28,className:"text-green-600"}),label:"Total Due Amount",value:` ${((s==null?void 0:s.totalDueAmount)||0).toLocaleString()}`,color:"border-green-500",link:"/coordinator/due-fees"})]}),(t==null?void 0:t.role)==="Coordinator"&&e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-2xl shadow-lg p-6 mb-6 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(_t,{size:40}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold",children:"Your Follow-ups Today"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:(s==null?void 0:s.myFollowUpsToday)||0})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy flex items-center gap-2",children:[e.jsx(ge,{className:"text-orange-500",size:24}),"Upcoming & Overdue Payments"]}),e.jsx(ln,{to:"/coordinator/notifications",className:"text-blue-600 hover:underline text-sm font-medium",children:"View All"})]}),r.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No upcoming or overdue payments"}):e.jsx("div",{className:"space-y-3",children:r.slice(0,5).map(c=>{var u,x,m,p;return e.jsxs(ln,{to:"/coordinator/due-fees",className:"flex items-center justify-between p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold text-navy",children:[(u=c.lead)==null?void 0:u.leadId,"  ",(x=c.lead)==null?void 0:x.name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[(m=c.lead)==null?void 0:m.phone," ",((p=c.lead)==null?void 0:p.email)&&` ${c.lead.email}`]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Course: ",c.courseName," | Due:  ",c.dueAmount||0]})]}),e.jsxs("div",{className:"text-right ml-4",children:[c.isOverdue?e.jsx("span",{className:"inline-block px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:"Overdue"}):e.jsxs("span",{className:"inline-block px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:[c.daysUntil," days left"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:new Date(c.nextPaymentDate).toLocaleDateString("en-GB")})]})]},c._id)})})]})]})}function cb(){return new Date().toISOString().slice(0,10)}function ub(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1).toISOString().slice(0,10)}function mb(){var z,te,K;const[t,s]=d.useState("monthly"),[n,r]=d.useState(ub()),[a,l]=d.useState(cb()),[o,i]=d.useState(null),[c,u]=d.useState([]),[x,m]=d.useState([]),[p,b]=d.useState([]),[k,g]=d.useState([]),[N,v]=d.useState([]),[h,j]=d.useState([]),[y,w]=d.useState([]),[S,A]=d.useState([]),[D,T]=d.useState("");function R(){if(t==="custom"&&n&&a)return{from:new Date(n),to:new Date(a)};if(t==="lifetime")return{from:null,to:null};const G=new Date;let oe=new Date;return t==="daily"?oe.setDate(G.getDate()-1):t==="weekly"?oe.setDate(G.getDate()-7):t==="monthly"?oe.setMonth(G.getMonth()-1):t==="yearly"&&oe.setFullYear(G.getFullYear()-1),{from:oe,to:G}}const _=async()=>{try{let G,oe;if(t==="custom")G=n,oe=a;else if(t==="lifetime")G=void 0,oe=void 0;else{const pe=new Date,De=new Date;t==="daily"?De.setDate(pe.getDate()-1):t==="weekly"?De.setDate(pe.getDate()-7):t==="monthly"?De.setMonth(pe.getMonth()-1):t==="yearly"&&De.setFullYear(pe.getFullYear()-1),G=De.toISOString().slice(0,10),oe=pe.toISOString().slice(0,10)}const le=new Date().toISOString().slice(0,7),[Z,L,H,re,se,me,he,ie,xe]=await Promise.all([B.reportsOverview(G,oe),B.listCourses().catch(()=>({courses:[]})),B.listLeads().catch(()=>({leads:[]})),B.listAdmissionLeads().catch(()=>({leads:[]})),B.listRecruited().catch(()=>[]),B.listAllTasks().catch(()=>({tasks:[]})),B.listIncome().catch(()=>[]),B.listExpenses().catch(()=>[]),B.getAdmissionTargets(le).catch(()=>({targets:[]}))]);i(Z),u((L==null?void 0:L.courses)||[]),m((H==null?void 0:H.leads)||[]),b((re==null?void 0:re.leads)||[]),g(Array.isArray(se)?se:(se==null?void 0:se.candidates)||[]),v((me==null?void 0:me.tasks)||[]),j(Array.isArray(he)?he:(he==null?void 0:he.income)||[]),w(Array.isArray(ie)?ie:(ie==null?void 0:ie.expenses)||[]),A((xe==null?void 0:xe.targets)||[]),T("")}catch(G){T(G.message||"Failed to load")}};d.useEffect(()=>{_()},[]);const{from:I,to:E}=R(),V=d.useMemo(()=>!I&&!E?x:x.filter(G=>{const oe=new Date(G.createdAt||G.date||G._id&&null);return oe&&(!I||oe>=I)&&(!E||oe<=E)}),[x,I,E]),F=d.useMemo(()=>!I&&!E?p:p.filter(G=>{const oe=new Date(G.createdAt||G.date||G._id&&null);return oe&&(!I||oe>=I)&&(!E||oe<=E)}),[p,I,E]);d.useMemo(()=>!I&&!E?N:N.filter(G=>{const oe=new Date(G.createdAt||G.deadline||null);return oe&&(!I||oe>=I)&&(!E||oe<=E)}),[N,I,E]);const M=((z=o==null?void 0:o.combined)==null?void 0:z.income)??0,C=((te=o==null?void 0:o.combined)==null?void 0:te.expense)??0,$=((K=o==null?void 0:o.combined)==null?void 0:K.net)??M-C,P=(c||[]).filter(G=>G.status==="Active").length,W=V.length,O=F.filter(G=>(G.status||"").toLowerCase()==="admitted").length,U=(k||[]).length,q=d.useMemo(()=>{if(!I||!E)return[];const G=[],oe=new Date(I);for(;oe<=E;){const le=oe.toISOString().slice(0,10),Z=(h||[]).filter(H=>new Date(H.date).toISOString().slice(0,10)===le).reduce((H,re)=>H+(Number(re.amount)||0),0),L=(y||[]).filter(H=>new Date(H.date).toISOString().slice(0,10)===le).reduce((H,re)=>H+(Number(re.amount)||0),0);G.push({date:le,income:Z,expense:L}),oe.setDate(oe.getDate()+1)}return G},[h,y,I,E]);d.useMemo(()=>{const G={};return(y||[]).forEach(oe=>{const le=oe.category||oe.purpose||"Other";G[le]=(G[le]||0)+Number(oe.amount||0)}),G},[y]);const ee=G=>{var oe;(oe=G==null?void 0:G.preventDefault)==null||oe.call(G),_()};return e.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's your business overview"})]}),e.jsxs("form",{onSubmit:ee,className:"flex flex-wrap items-center gap-2",children:[e.jsxs("select",{value:t,onChange:G=>s(G.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom"})]}),t==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",value:n,onChange:G=>r(G.target.value)}),e.jsx("span",{className:"text-gray-500 font-medium",children:"to"}),e.jsx("input",{type:"date",className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",value:a,onChange:G=>l(G.target.value)})]}),e.jsx("button",{className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-medium hover:shadow-lg transform hover:-translate-y-0.5 transition-all",children:"Apply"})]})]}),D&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium",children:D})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"group relative bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(_t,{className:"w-5 h-5 text-white"})}),e.jsx(Uy,{className:"w-4 h-4 text-white/70"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Income"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Pe(M)})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-red-500 to-pink-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(hp,{className:"w-5 h-5 text-white"})}),e.jsx(zy,{className:"w-4 h-4 text-white/70"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Expense"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Pe(C)})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(He,{className:"w-5 h-5 text-white"})}),e.jsx(us,{className:"w-4 h-4 text-white/70"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Net Balance"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Pe($)})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(kn,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-full text-xs text-white font-medium",children:"Active"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Active Courses"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:P})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Me,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-full text-xs text-white font-medium",children:"Leads"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Leads"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:W})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-cyan-500 to-teal-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(wd,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-full text-xs text-white font-medium",children:"Students"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Admitted Students"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:O})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-pink-500 to-rose-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(tr,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-full text-xs text-white font-medium",children:"Team"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Recruited People"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:U})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Income vs Expense"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Financial trend over time"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Income"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Expense"})]})]})]}),e.jsx(xb,{data:q})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg",children:e.jsx(Wt,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Admission Targets"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Current month performance (view only)"})]})]}),S.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-xl",children:[e.jsx(Wt,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"No targets set for this month"}),e.jsx("p",{className:"text-sm mt-1",children:"Admins can set targets from the Admission Targets page"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gradient-to-r from-purple-50 to-blue-50",children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Course Name"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Target"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Achieved"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Progress"})]})}),e.jsx("tbody",{children:S.map((G,oe)=>{var H;const le=G.percentage||0,Z=le>=100?"bg-green-500":le>=75?"bg-blue-500":le>=50?"bg-yellow-500":"bg-red-500",L=le>=100?"text-green-600":le>=75?"text-blue-600":le>=50?"text-yellow-600":"text-red-600";return e.jsxs("tr",{className:`border-b hover:bg-gray-50 transition-colors ${oe%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wd,{size:16,className:"text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:((H=G.course)==null?void 0:H.name)||"Unknown Course"})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-semibold",children:G.target})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-flex items-center justify-center px-3 py-1 ${Z} bg-opacity-10 ${L} rounded-full text-sm font-semibold`,children:G.achieved})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"flex-1 max-w-xs bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full ${Z} transition-all duration-500 ease-out`,style:{width:`${Math.min(le,100)}%`}})}),e.jsxs("span",{className:`text-sm font-bold ${L} min-w-[45px] text-right`,children:[le,"%"]})]})})]},G._id)})})]})})]})]})]})}function xb({data:t}){if(!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-52 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(us,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data available"})]})});const a=Math.max(...t.map(x=>Math.max(x.income||0,x.expense||0)),1),l=(600-40*2)/Math.max(1,t.length-1),o=t.map((x,m)=>`${40+m*l},${180-(a?x.income/a*(220-40*2):0)}`).join(" "),i=t.map((x,m)=>`${40+m*l},${180-(a?x.expense/a*(220-40*2):0)}`).join(" "),c=`${o} ${40+(t.length-1)*l},180 40,180`,u=`${i} ${40+(t.length-1)*l},180 40,180`;return e.jsx("div",{className:"relative",children:e.jsxs("svg",{viewBox:"0 0 600 220",className:"w-full h-56",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"incomeGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.05"})]}),e.jsxs("linearGradient",{id:"expenseGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ef4444",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#ef4444",stopOpacity:"0.05"})]})]}),[0,.25,.5,.75,1].map((x,m)=>e.jsx("line",{x1:40,y1:180-(220-40*2)*x,x2:560,y2:180-(220-40*2)*x,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4,4"},m)),e.jsx("polygon",{fill:"url(#incomeGradient)",points:c}),e.jsx("polygon",{fill:"url(#expenseGradient)",points:u}),e.jsx("polyline",{fill:"none",stroke:"#10b981",strokeWidth:"3",points:o,strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{fill:"none",stroke:"#ef4444",strokeWidth:"3",points:i,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((x,m)=>{const p=40+m*l,b=180-(a?x.income/a*(220-40*2):0),k=180-(a?x.expense/a*(220-40*2):0);return e.jsxs("g",{children:[e.jsx("circle",{cx:p,cy:b,r:"4",fill:"#10b981",stroke:"white",strokeWidth:"2"}),e.jsx("circle",{cx:p,cy:k,r:"4",fill:"#ef4444",stroke:"white",strokeWidth:"2"})]},m)})]})})}function hb({data:t}){if(!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-52 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(us,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data available"})]})});const a=Math.max(...t.map(x=>Math.max(x.leads||0,x.admitted||0)),1),l=(700-40*2)/Math.max(1,t.length-1),o=t.map((x,m)=>`${40+m*l},${180-(a?x.leads/a*(220-40*2):0)}`).join(" "),i=t.map((x,m)=>`${40+m*l},${180-(a?x.admitted/a*(220-40*2):0)}`).join(" "),c=`${o} ${40+(t.length-1)*l},180 40,180`,u=`${i} ${40+(t.length-1)*l},180 40,180`;return e.jsx("div",{className:"relative",children:e.jsxs("svg",{viewBox:"0 0 700 220",className:"w-full h-56",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"leadsGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:"0.05"})]}),e.jsxs("linearGradient",{id:"admittedGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.05"})]})]}),[0,.25,.5,.75,1].map((x,m)=>e.jsx("line",{x1:40,y1:180-(220-40*2)*x,x2:660,y2:180-(220-40*2)*x,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4,4"},m)),e.jsx("polygon",{fill:"url(#leadsGradient)",points:c}),e.jsx("polygon",{fill:"url(#admittedGradient)",points:u}),e.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"3",points:o,strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{fill:"none",stroke:"#10b981",strokeWidth:"3",points:i,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((x,m)=>{const p=40+m*l,b=180-(a?x.leads/a*(220-40*2):0),k=180-(a?x.admitted/a*(220-40*2):0);return e.jsxs("g",{children:[e.jsx("circle",{cx:p,cy:b,r:"4",fill:"#3b82f6",stroke:"white",strokeWidth:"2"}),e.jsx("circle",{cx:p,cy:k,r:"4",fill:"#10b981",stroke:"white",strokeWidth:"2"})]},m)})]})})}const cm=[{key:"Assigned",label:"Assigned"},{key:"Counseling",label:"Counseling"},{key:"In Follow Up",label:"In Follow-Up"},{key:"Admitted",label:"Admitted"},{key:"Not Admitted",label:"Not Admitted"}];function vp(){var W,O,U,q,ee,z,te,K,G,oe,le,Z;const{user:t}=fe(),[s,n]=d.useState(""),[r,a]=d.useState("monthly"),[l,o]=d.useState(""),[i,c]=d.useState(""),[u,x]=d.useState([]),[m,p]=d.useState([]),[b,k]=d.useState("All"),[g,N]=d.useState(!1),[v,h]=d.useState([]),[j,y]=d.useState("all"),[w,S]=d.useState(null),[A,D]=d.useState(!1),T=(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin";d.useEffect(()=>{R()},[]);async function R(){N(!0);try{const L=[B.listAdmissionLeads().catch(()=>({leads:[]})),B.listBatches().catch(()=>({batches:[]}))];T&&L.push(B.listAdmissionUsers().catch(()=>({users:[]})));const H=await Promise.all(L),[re,se,me]=H,he=(re==null?void 0:re.leads)||re||[];if(x(Array.isArray(he)?he:[]),p((se==null?void 0:se.batches)||[]),T&&me){const ie=(me==null?void 0:me.users)||[];h(Array.isArray(ie)?ie:[]),_()}n("")}catch(L){n(L.message||"Failed to load")}finally{N(!1)}}async function _(){if(T)try{const{from:L,to:H}=I(),re=L?L.toISOString().slice(0,10):void 0,se=H?H.toISOString().slice(0,10):void 0,me=j==="all"?void 0:j,he=await B.getAdmissionReports(me,re,se);S(he)}catch(L){console.error("Failed to load reports:",L)}}d.useEffect(()=>{T&&v.length>0&&_()},[j,r,l,i]);const I=()=>{if(r==="lifetime")return{from:null,to:null};if(r==="custom"){if(l&&i){const re=new Date(l);re.setHours(0,0,0,0);const se=new Date(i);return se.setHours(23,59,59,999),{from:re,to:se}}return{from:null,to:null}}const L=new Date;let H=new Date;return r==="daily"?H.setDate(L.getDate()-1):r==="weekly"?H.setDate(L.getDate()-7):r==="monthly"?H.setMonth(L.getMonth()-1):r==="yearly"&&H.setFullYear(L.getFullYear()-1),{from:H,to:L}},E=(L,H,re)=>{if(!L)return!1;const se=new Date(L).getTime();return!(H&&se<H.getTime()||re&&se>re.getTime())},{from:V,to:F}=I(),M=ve.useMemo(()=>{const L=V?new Date(V):null,H=F?new Date(F):null,re=u.filter(xe=>E(xe.createdAt,L,H)||!L&&!H),se={};se.Assigned=re.length,cm.forEach(xe=>{xe.key!=="Assigned"&&(se[xe.key]=re.filter(pe=>pe.status===xe.key).length)});const me=[];if(L&&H){const xe=new Date(L);for(;xe<=H;){const pe=xe.toISOString().slice(0,10),De=u.filter(Ie=>{const ke=new Date(Ie.createdAt);return ke&&ke.toISOString().slice(0,10)===pe}).length,gt=u.filter(Ie=>{const ke=Ie.admittedAt?new Date(Ie.admittedAt):null;return ke&&ke.toISOString().slice(0,10)===pe}).length;me.push({date:pe,leads:De,admitted:gt}),xe.setDate(xe.getDate()+1)}}const he={totalLeads:re.length,assigned:re.filter(xe=>xe.status==="Assigned").length,counseling:re.filter(xe=>xe.status==="Counseling").length,inFollowUp:re.filter(xe=>xe.status==="In Follow Up").length,admitted:re.filter(xe=>xe.status==="Admitted").length,notAdmitted:re.filter(xe=>xe.status==="Not Admitted").length},ie=he.totalLeads>0?(he.admitted/he.totalLeads*100).toFixed(2):"0.00";return{counts:se,series:me,reportMetrics:he,conversionRate:ie}},[u,V,F]),C=L=>({Assigned:e.jsx(Us,{className:"w-5 h-5 text-white"}),Counseling:e.jsx(Ky,{className:"w-5 h-5 text-white"}),"In Follow Up":e.jsx(Me,{className:"w-5 h-5 text-white"}),Admitted:e.jsx(wd,{className:"w-5 h-5 text-white"}),"Not Admitted":e.jsx(Wr,{className:"w-5 h-5 text-white"})})[L]||e.jsx(Me,{className:"w-5 h-5 text-white"}),$=L=>({Assigned:"from-blue-500 to-indigo-600",Counseling:"from-purple-500 to-violet-600","In Follow Up":"from-orange-500 to-amber-600",Admitted:"from-green-500 to-emerald-600","Not Admitted":"from-red-500 to-pink-600"})[L]||"from-gray-500 to-slate-600",P=()=>{var L,H,re,se,me,he;if(w){D(!0);try{let ie="";j==="all"?(ie=`ADMISSION TEAM REPORT
`,ie+=`Period: ${r==="custom"&&l&&i?`${l} to ${i}`:r}
`,ie+=`Generated: ${new Date().toLocaleString()}

`,ie+=`OVERALL TEAM SUMMARY
`,ie+=`Metric,Value
`,ie+=`Total Leads,${((L=M.reportMetrics)==null?void 0:L.totalLeads)||0}
`,ie+=`Assigned,${((H=M.reportMetrics)==null?void 0:H.assigned)||0}
`,ie+=`Counseling,${((re=M.reportMetrics)==null?void 0:re.counseling)||0}
`,ie+=`In Follow Up,${((se=M.reportMetrics)==null?void 0:se.inFollowUp)||0}
`,ie+=`Admitted,${((me=M.reportMetrics)==null?void 0:me.admitted)||0}
`,ie+=`Not Admitted,${((he=M.reportMetrics)==null?void 0:he.notAdmitted)||0}
`,ie+=`Conversion Rate,${M.conversionRate||"0.00"}%

`,w&&w.reports&&w.reports.length>0&&(ie+=`INDIVIDUAL REPORTS BY TEAM MEMBER

`,[...w.reports].sort((ke,ls)=>ke.user.name.localeCompare(ls.user.name)).forEach((ke,ls)=>{ie+=`${ls+1}. ${ke.user.name.toUpperCase()}
`,ie+=`Email: ${ke.user.email}
`,ie+=`Total Leads,${ke.stats.totalLeads}
`,ie+=`Assigned,${ke.stats.assigned}
`,ie+=`Counseling,${ke.stats.counseling}
`,ie+=`In Follow Up,${ke.stats.inFollowUp}
`,ie+=`Admitted,${ke.stats.admitted}
`,ie+=`Not Admitted,${ke.stats.notAdmitted}
`,ie+=`Conversion Rate,${ke.conversionRate}%

`}))):(ie=`Admission Report - ${w.user.name}
`,ie+=`Email: ${w.user.email}
`,ie+=`Period: ${r==="custom"&&l&&i?`${l} to ${i}`:r}
`,ie+=`Generated: ${new Date().toLocaleString()}

`,ie+=`SUMMARY
`,ie+=`Total Leads,${w.stats.totalLeads}
`,ie+=`Assigned,${w.stats.assigned}
`,ie+=`Counseling,${w.stats.counseling}
`,ie+=`In Follow Up,${w.stats.inFollowUp}
`,ie+=`Admitted,${w.stats.admitted}
`,ie+=`Not Admitted,${w.stats.notAdmitted}
`,ie+=`Conversion Rate,${w.conversionRate}%

`,ie+=`LEAD DETAILS
`,ie+=`Lead ID,Name,Phone,Email,Status,Course,Created At,Admitted At
`,w.leads&&w.leads.length>0&&w.leads.forEach(Ie=>{const ke=[Ie.leadId||"",Ie.name||"",Ie.phone||"",Ie.email||"",Ie.status||"",Ie.interestedCourse||"",Ie.createdAt?new Date(Ie.createdAt).toLocaleDateString():"",Ie.admittedAt?new Date(Ie.admittedAt).toLocaleDateString():""];ie+=ke.map(ls=>`"${ls}"`).join(",")+`
`}));const xe=new Blob([ie],{type:"text/csv;charset=utf-8;"}),pe=document.createElement("a"),De=URL.createObjectURL(xe);pe.setAttribute("href",De);const gt=j==="all"?`admission-report-all-${new Date().toISOString().slice(0,10)}.csv`:`admission-report-${w.user.name.replace(/\s+/g,"-")}-${new Date().toISOString().slice(0,10)}.csv`;pe.setAttribute("download",gt),pe.style.visibility="hidden",document.body.appendChild(pe),pe.click(),document.body.removeChild(pe)}catch(ie){console.error("Download failed:",ie),alert("Failed to download report. Please try again.")}finally{D(!1)}}};return e.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Admission Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track student admissions and pipeline"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("select",{value:r,onChange:L=>a(L.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom"})]}),r==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",value:l,onChange:L=>o(L.target.value)}),e.jsx("span",{className:"text-gray-500 font-medium",children:"to"}),e.jsx("input",{type:"date",className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",value:i,onChange:L=>c(L.target.value)})]})]})]}),"      ",s&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium",children:s})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:cm.map(L=>e.jsxs("div",{className:`group relative bg-gradient-to-br ${$(L.key)} rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:C(L.key)})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:L.label}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:M.counts[L.key]??0})]})]},L.key))}),m.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Active Batches Overview"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Track progress across all batches"})]}),e.jsxs("select",{value:b,onChange:L=>k(L.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors text-sm",children:[e.jsx("option",{value:"All",children:" All Categories"}),[...new Set(m.filter(L=>L.status==="Active").map(L=>L.category))].map(L=>e.jsxs("option",{value:L,children:[" ",L]},L))]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:m.filter(L=>L.status==="Active"&&(b==="All"||L.category===b)).map(L=>{var me;const H=((me=L.admittedStudents)==null?void 0:me.length)||0,re=L.targetedStudent||0,se=re>0?Math.round(H/re*100):0;return e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-3 border border-blue-100 hover:border-blue-300 hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h4",{className:"font-bold text-gray-800 text-sm mb-1 line-clamp-1",title:L.batchName,children:L.batchName}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"inline-block px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs font-medium",children:L.category}),e.jsx("span",{className:"text-xs font-mono text-gray-500",children:L.batchId.split("-").pop()})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"bg-white rounded p-2 flex-1 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Target"}),e.jsx("div",{className:"text-lg font-bold text-gray-800",children:re})]}),e.jsxs("div",{className:"bg-white rounded p-2 flex-1 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Admitted"}),e.jsx("div",{className:"text-lg font-bold text-blue-600",children:H})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`text-xs font-bold ${se>=100?"text-green-600":se>=75?"text-blue-600":se>=50?"text-yellow-600":"text-orange-600"}`,children:[se,"%"]}),se>=100&&e.jsx("span",{className:"text-xs",children:""})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${se>=100?"bg-gradient-to-r from-green-500 to-emerald-500":se>=75?"bg-gradient-to-r from-blue-500 to-indigo-500":se>=50?"bg-gradient-to-r from-yellow-500 to-amber-500":"bg-gradient-to-r from-orange-500 to-red-500"}`,style:{width:`${Math.min(se,100)}%`}})}),H<re&&e.jsxs("div",{className:"text-center text-xs text-gray-500",children:[re-H," left"]})]})]},L._id)})}),m.filter(L=>L.status==="Active"&&(b==="All"||L.category===b)).length===0&&e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(Me,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:b==="All"?"No active batches available":`No active batches in "${b}" category`})]})]}),T&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-xl border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Admission Team Reports"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Overall performance and individual metrics"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(To,{className:"w-5 h-5 text-gray-500"}),e.jsxs("select",{value:j,onChange:L=>y(L.target.value),className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"all",children:" Overall Team Report"}),v.map(L=>e.jsxs("option",{value:L._id,children:[" ",L.name," - Individual Report"]},L._id))]})]}),e.jsxs("button",{onClick:P,disabled:(j==="all"?!M.reportMetrics:!w)||A,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl font-medium hover:shadow-lg transform hover:-translate-y-0.5 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[e.jsx(Ht,{size:18}),A?"Downloading...":j==="all"?"Download All Team Reports":"Download Individual Report"]})]}),j==="all"&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Me,{size:18,className:"text-purple-600"}),"Overall Team Performance"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 text-center border border-blue-200",children:[e.jsx("div",{className:"text-xs text-blue-600 mb-1 font-medium",children:"Total Leads"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:((W=M.reportMetrics)==null?void 0:W.totalLeads)||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 text-center border border-green-200",children:[e.jsx("div",{className:"text-xs text-green-600 mb-1 font-medium",children:"Admitted"}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:((O=M.reportMetrics)==null?void 0:O.admitted)||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4 text-center border border-orange-200",children:[e.jsx("div",{className:"text-xs text-orange-600 mb-1 font-medium",children:"In Progress"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700",children:(((U=M.reportMetrics)==null?void 0:U.counseling)||0)+(((q=M.reportMetrics)==null?void 0:q.inFollowUp)||0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4 text-center border border-red-200",children:[e.jsx("div",{className:"text-xs text-red-600 mb-1 font-medium",children:"Not Admitted"}),e.jsx("div",{className:"text-2xl font-bold text-red-700",children:((ee=M.reportMetrics)==null?void 0:ee.notAdmitted)||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 text-center border border-purple-200",children:[e.jsx("div",{className:"text-xs text-purple-600 mb-1 font-medium",children:"Conversion Rate"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-700",children:[M.conversionRate||"0.00","%"]})]})]})]}),w&&j!=="all"&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(tr,{size:18,className:"text-blue-600"}),"Individual Report - ",(z=w.user)==null?void 0:z.name,e.jsxs("span",{className:"text-xs font-normal text-gray-500 ml-2",children:["(",(te=w.user)==null?void 0:te.email,")"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total Leads"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:((K=w.stats)==null?void 0:K.totalLeads)||0})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Admitted"}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:((G=w.stats)==null?void 0:G.admitted)||0})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"In Progress"}),e.jsx("div",{className:"text-xl font-bold text-orange-600",children:(((oe=w.stats)==null?void 0:oe.counseling)||0)+(((le=w.stats)==null?void 0:le.inFollowUp)||0)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Not Admitted"}),e.jsx("div",{className:"text-xl font-bold text-red-600",children:((Z=w.stats)==null?void 0:Z.notAdmitted)||0})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Conversion Rate"}),e.jsxs("div",{className:"text-xl font-bold text-purple-600",children:[w.conversionRate||0,"%"]})]})]}),w.leads&&w.leads.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h5",{className:"font-semibold text-gray-700 mb-2 text-sm",children:["Lead Details (",w.leads.length," total)"]}),e.jsxs("div",{className:"max-h-64 overflow-y-auto bg-white rounded-lg border border-gray-200",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-600",children:"Lead ID"}),e.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-600",children:"Name"}),e.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-600",children:"Status"}),e.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-600",children:"Course"}),e.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-600",children:"Created"})]})}),e.jsx("tbody",{children:w.leads.slice(0,10).map((L,H)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 text-xs font-mono",children:L.leadId}),e.jsx("td",{className:"px-3 py-2 text-xs",children:L.name}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${L.status==="Admitted"?"bg-green-100 text-green-700":L.status==="Not Admitted"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:L.status})}),e.jsx("td",{className:"px-3 py-2 text-xs",children:L.interestedCourse||"-"}),e.jsx("td",{className:"px-3 py-2 text-xs",children:L.createdAt?new Date(L.createdAt).toLocaleDateString():"-"})]},L._id||H))})]}),w.leads.length>10&&e.jsxs("div",{className:"text-center py-2 text-xs text-gray-500 bg-gray-50",children:["Showing 10 of ",w.leads.length," leads. Download report for complete list."]})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Leads vs Admitted"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Conversion tracking over time"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Leads"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Admitted"})]})]})]}),e.jsx(hb,{data:M.series})]})]})}function al(){return new Date().toISOString().slice(0,10)}function um(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1).toISOString().slice(0,10)}function jp(){const[t,s]=d.useState(""),[n,r]=d.useState("monthly"),[a,l]=d.useState(""),[o,i]=d.useState(""),[c,u]=d.useState([]),[x,m]=d.useState([]),[p,b]=d.useState([]),[k,g]=d.useState(!1);d.useEffect(()=>{v()},[]);const N=()=>{if(n==="lifetime")return{from:null,to:null};if(n==="custom"&&a&&o)return{from:new Date(a),to:new Date(o)};const S=new Date;let A=new Date;return n==="daily"?A.setDate(S.getDate()-1):n==="weekly"?A.setDate(S.getDate()-7):n==="monthly"?A.setMonth(S.getMonth()-1):n==="yearly"&&A.setFullYear(S.getFullYear()-1),{from:A,to:S}};async function v(){g(!0);try{const[S,A,D]=await Promise.all([B.listLeads().catch(()=>({leads:[]})),B.listMyTasks().catch(()=>({tasks:[]})),B.listDMCosts().catch(()=>({items:[]}))]);u((S==null?void 0:S.leads)||[]),m((A==null?void 0:A.tasks)||[]);const T=Array.isArray(D)?D:(D==null?void 0:D.items)||(D==null?void 0:D.costs)||[];b(T||[]),s("")}catch(S){s(S.message||"Failed to load dashboard data")}finally{g(!1)}}const h=(S,A,D)=>{if(!S)return!1;const T=new Date(S).getTime();return!(A&&T<A.getTime()||D&&T>D.getTime())},{from:j,to:y}=N(),w=d.useMemo(()=>{const S=j?new Date(j):null,A=y?new Date(y):null,D=c.filter(C=>h(C.createdAt||C.date||C._id&&null,S,A)||!S&&!A),T=D.length,R={meta:0,linkedin:0,manual:0,others:0};D.forEach(C=>{const $=(C.source||"").toLowerCase();$.includes("meta")?R.meta++:$.includes("linkedin")||$.includes("linked in")?R.linkedin++:$.includes("manual")?R.manual++:R.others++});const _=x.filter(C=>h(C.createdAt||C.createdAt,S,A)||!S&&!A),I=_.filter(C=>(C.status||"").toLowerCase()==="completed").length,V=p.filter(C=>h(C.date||C.createdAt,S,A)||!S&&!A).reduce((C,$)=>C+(Number($.amount)||0),0),F=[];if(S&&A){const C=new Date(S);for(;C<=A;){const $=C.toISOString().slice(0,10),P=c.filter(W=>{const O=new Date(W.createdAt||W.date||W._id&&null);return O&&O.toISOString().slice(0,10)===$}).length;F.push({date:$,value:P}),C.setDate(C.getDate()+1)}}const M=_.filter(C=>{const $=(C.category||"").toLowerCase();return($.includes("content")||$.includes("published"))&&(C.status||"").toLowerCase()==="completed"}).length;return{totalLeads:T,sourceCounts:R,totalTasksCompleted:I,totalExpense:V,series:F,contentPublished:M}},[c,x,p,j,y]);return e.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Digital Marketing Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your marketing performance"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("select",{value:n,onChange:S=>r(S.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom"})]}),n==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:a,onChange:S=>l(S.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"}),e.jsx("span",{className:"text-gray-500 font-medium",children:"to"}),e.jsx("input",{type:"date",value:o,onChange:S=>i(S.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"})]})]})]}),t&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium",children:t})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Me,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Leads"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:w.totalLeads})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Tc,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Meta Leads"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:w.sourceCounts.meta})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-cyan-500 to-teal-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Ec,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"LinkedIn Leads"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:w.sourceCounts.linkedin})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(St,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Manual Leads"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:w.sourceCounts.manual})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-red-500 to-pink-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(He,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Expense"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:es(w.totalExpense)})]})]})]}),e.jsx(pb,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Leads Over Time"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Daily lead generation trend"})]})}),e.jsx(gb,{data:w.series})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Lead Sources"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Distribution by channel"})]}),e.jsx(fb,{parts:w.sourceCounts})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 shadow-xl",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Wt,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-sm font-medium",children:"Total Content Published"}),e.jsx("h3",{className:"text-4xl font-bold text-white mt-1",children:w.contentPublished}),e.jsx("p",{className:"text-white/60 text-xs mt-2",children:"Completed content tasks"})]})]})})]})}function pb(){const[t,s]=d.useState("monthly"),[n,r]=d.useState(um()),[a,l]=d.useState(al()),[o,i]=d.useState(!1),[c,u]=d.useState(""),[x,m]=d.useState(""),p=async()=>{i(!0),u(""),m("");try{let b,k;t==="daily"?(b=al(),k=al()):t==="monthly"?(b=um(),k=al()):t==="custom"&&(b=n,k=a);const[g,N,v,h,j]=await Promise.all([B.listLeads().catch(()=>({leads:[]})),B.listAllTasks().catch(()=>({tasks:[]})),B.listDMCosts().catch(()=>({items:[]})),B.listSocial().catch(()=>({metrics:{}})),B.listSEO().catch(()=>({items:[]}))]),y=(g==null?void 0:g.leads)||[],w=(N==null?void 0:N.tasks)||[],S=Array.isArray(v)?v:(v==null?void 0:v.items)||(v==null?void 0:v.costs)||[],A=(h==null?void 0:h.metrics)||{},D=Array.isArray(j)?j:(j==null?void 0:j.items)||(j==null?void 0:j.seo)||[],T=new Date(b),R=new Date(k);R.setHours(23,59,59,999);const _=y.filter(z=>{const te=new Date(z.createdAt||z.date);return te>=T&&te<=R}),I=w.filter(z=>{var K;const te=new Date(z.createdAt||z.deadline);return te>=T&&te<=R&&((K=z.assignedTo)==null?void 0:K.some(G=>G.role==="DigitalMarketing"))}),E=S.filter(z=>{const te=new Date(z.date);return te>=T&&te<=R}),V=D.filter(z=>{const te=new Date(z.date);return te>=T&&te<=R}),F=_.length,M={};_.forEach(z=>{const te=z.source||"Unknown";M[te]=(M[te]||0)+1});const C={todo:I.filter(z=>z.status==="To-Do").length,inProgress:I.filter(z=>z.status==="In Progress").length,completed:I.filter(z=>z.status==="Completed").length,total:I.length},$=E.reduce((z,te)=>z+(Number(te.amount)||0),0),P={};E.forEach(z=>{const te=z.purpose||"Others";P[te]=(P[te]||0)+(Number(z.amount)||0)});const W={};V.forEach(z=>{const te=z.typeOfWork||"Others";W[te]=(W[te]||0)+1});let O=`Digital Marketing Report
`;O+=`Period: ${b} to ${k}
`,O+=`Generated: ${new Date().toLocaleString()}

`,O+=`=== LEADS ===
`,O+=`Total Leads,${F}

`,O+=`Leads by Source
`,O+=`Source Name,Number of Leads
`,Object.entries(M).sort((z,te)=>te[1]-z[1]).forEach(([z,te])=>{O+=`${z},${te}
`}),O+=`
`,O+=`=== TASKS ===
`,O+=`Status,Count
`,O+=`To-Do,${C.todo}
`,O+=`In Progress,${C.inProgress}
`,O+=`Completed,${C.completed}
`,O+=`Total,${C.total}

`,I.length>0&&(O+=`Task Details
`,O+=`Task Name,Status,Priority,Deadline,Assigned To
`,I.forEach(z=>{var Z;const te=(z.title||"Untitled").replace(/,/g,";"),K=z.status||"N/A",G=z.priority||"N/A",oe=z.deadline?new Date(z.deadline).toLocaleDateString():"N/A",le=((Z=z.assignedTo)==null?void 0:Z.map(L=>L.name||"Unknown").join("; "))||"Unassigned";O+=`"${te}",${K},${G},${oe},"${le}"
`}),O+=`
`),O+=`=== MARKETING EXPENSES ===
`,O+=`Total Cost,${$} BDT

`,O+=`Cost by Purpose Name
`,O+=`Purpose Name,Amount (BDT)
`,Object.entries(P).sort((z,te)=>te[1]-z[1]).forEach(([z,te])=>{O+=`${z},${te}
`}),O+=`
`,O+=`=== SOCIAL MEDIA METRICS ===
`,O+=`Platform,Value
`,O+=`Facebook Followers,${A.facebookFollowers||0}
`,O+=`Instagram Followers,${A.instagramFollowers||0}
`,O+=`Facebook Group Members,${A.facebookGroupMembers||0}
`,O+=`YouTube Subscribers,${A.youtubeSubscribers||0}
`,O+=`LinkedIn Followers,${A.linkedInFollowers||0}
`,O+=`X (Twitter) Followers,${A.xFollowers||0}
`,O+=`Pinterest Views,${A.pinterestView||0}
`,O+=`Blogger Impressions,${A.bloggerImpression||0}
`,O+=`Total Reach,${A.totalReach||0}

`,O+=`=== SEO ACTIVITIES ===
`,O+=`Total Activities,${V.length}

`,O+=`Activities by Type
`,O+=`Type,Count
`,Object.entries(W).forEach(([z,te])=>{O+=`${z},${te}
`}),O+=`
`,V.length>0&&(O+=`SEO Activity Details
`,O+=`Date,Type,Challenge,Details
`,V.forEach(z=>{const te=new Date(z.date).toLocaleDateString(),K=(z.typeOfWork||"").replace(/,/g,";"),G=(z.challenge||"").replace(/,/g,";").replace(/\n/g," "),oe=(z.details||"").replace(/,/g,";").replace(/\n/g," ");O+=`${te},"${K}","${G}","${oe}"
`}),O+=`
`),E.length>0&&(O+=`=== DETAILED EXPENSES ===
`,O+=`Date,Purpose Name,Amount (BDT),Notes
`,E.forEach(z=>{const te=new Date(z.date).toLocaleDateString(),K=(z.purpose||"N/A").replace(/,/g,";"),G=(z.notes||z.description||"N/A").replace(/,/g,";").replace(/\n/g," ");O+=`${te},"${K}",${z.amount||0},"${G}"
`}));const U=new Blob([O],{type:"text/csv;charset=utf-8;"}),q=URL.createObjectURL(U),ee=document.createElement("a");ee.href=q,ee.download=`DM_Report_${b}_to_${k}.csv`,ee.click(),URL.revokeObjectURL(q),u(" Report downloaded successfully!")}catch(b){m("Failed to download report: "+b.message)}finally{i(!1)}};return e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg shadow-md",children:e.jsx(Ht,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Download Comprehensive Reports"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Export detailed reports including leads, tasks, costs, social metrics, and SEO activities"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("select",{value:t,onChange:b=>s(b.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Today"}),e.jsx("option",{value:"monthly",children:"This Month"}),e.jsx("option",{value:"custom",children:"Custom Range"})]}),t==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:n,onChange:b=>r(b.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"}),e.jsx("span",{className:"text-gray-500 font-medium self-center",children:"to"}),e.jsx("input",{type:"date",value:a,onChange:b=>l(b.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"})]}),e.jsx("button",{onClick:p,disabled:o,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-bold hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-xl",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ht,{className:"w-4 h-4"}),"Download Report"]})})]})]}),c&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border-2 border-green-200 rounded-lg",children:e.jsx("p",{className:"text-green-700 font-medium text-sm",children:c})}),x&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border-2 border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium text-sm",children:x})})]})}function gb({data:t}){if(!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-52 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(us,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data available"})]})});const a=Math.max(...t.map(c=>c.value),1),l=(600-40*2)/Math.max(1,t.length-1),o=t.map((c,u)=>{const x=40+u*l,m=180-(a?c.value/a*(220-40*2):0);return`${x},${m}`}).join(" "),i=`${o} ${40+(t.length-1)*l},180 40,180`;return e.jsx("div",{className:"relative",children:e.jsxs("svg",{viewBox:"0 0 600 220",className:"w-full h-56",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:"0.05"})]})}),[0,.25,.5,.75,1].map((c,u)=>e.jsx("line",{x1:40,y1:180-(220-40*2)*c,x2:560,y2:180-(220-40*2)*c,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4,4"},u)),e.jsx("polygon",{fill:"url(#lineGradient)",points:i}),e.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"3",points:o,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((c,u)=>{const x=40+u*l,m=180-(a?c.value/a*(220-40*2):0);return e.jsx("circle",{cx:x,cy:m,r:"4",fill:"#3b82f6",stroke:"white",strokeWidth:"2"},u)})]})})}function fb({parts:t}){const s=Object.values(t||{}).reduce((x,m)=>x+(m||0),0),n=Object.entries(t||{});if(s===0)return e.jsx("div",{className:"flex items-center justify-center h-48 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(us,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data"})]})});let r=0;const a=160,l=a/2,o=a/2,i=a/2-4,c=i*.6,u=["#3b82f6","#8b5cf6","#06b6d4","#f59e0b"];return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsxs("svg",{width:a,height:a,viewBox:`0 0 ${a} ${a}`,className:"drop-shadow-md",children:[n.map(([x,m],p)=>{const b=r/s*Math.PI*2;r+=m||0;const k=r/s*Math.PI*2,g=l+i*Math.cos(b-Math.PI/2),N=o+i*Math.sin(b-Math.PI/2),v=l+i*Math.cos(k-Math.PI/2),h=o+i*Math.sin(k-Math.PI/2),j=l+c*Math.cos(b-Math.PI/2),y=o+c*Math.sin(b-Math.PI/2),w=l+c*Math.cos(k-Math.PI/2),S=o+c*Math.sin(k-Math.PI/2),A=k-b>Math.PI?1:0,D=`
              M ${g} ${N}
              A ${i} ${i} 0 ${A} 1 ${v} ${h}
              L ${w} ${S}
              A ${c} ${c} 0 ${A} 0 ${j} ${y}
              Z
            `;return e.jsx("path",{d:D,fill:u[p%u.length],stroke:"#fff",strokeWidth:"2",className:"hover:opacity-80 transition-opacity cursor-pointer"},x)}),e.jsx("circle",{cx:l,cy:o,r:c,fill:"white"}),e.jsx("text",{x:l,y:o-5,textAnchor:"middle",fontSize:"12",fontWeight:"600",fill:"#6b7280",children:"Total"}),e.jsx("text",{x:l,y:o+10,textAnchor:"middle",fontSize:"16",fontWeight:"700",fill:"#1f2937",children:s})]})}),e.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.map(([x,m],p)=>{const b=(m/s*100).toFixed(1);return e.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{style:{background:u[p%u.length]},className:"w-3 h-3 rounded-full shadow-sm"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:x})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[b,"%"]}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:m})]})]},x)})})]})}function yb(){const[t,s]=d.useState(0);return d.useEffect(()=>{(async()=>{const n=await B.listMyTasks().catch(()=>[]);s((n||[]).filter(r=>(r.status||"").toLowerCase()!=="done").length)})()},[]),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-xl font-bold text-navy",children:"My Dashboard"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("div",{className:"text-royal text-sm",children:"My Open Tasks"}),e.jsx("div",{className:"text-3xl font-extrabold",children:t})]})})]})}function bb(){const{user:t}=fe(),s=t==null?void 0:t.role;return s==="SuperAdmin"||s==="Admin"?e.jsx(mb,{}):s==="Accountant"?e.jsx(gp,{}):s==="Recruitment"?e.jsx(fp,{}):s==="MotionGraphics"?e.jsx(yp,{}):s==="Admission"?e.jsx(vp,{}):s==="DigitalMarketing"?e.jsx(jp,{}):s==="Coordinator"?e.jsx(bp,{}):e.jsx(yb,{})}function vb(){const{user:t,updateMe:s}=fe(),[n,r]=d.useState((t==null?void 0:t.name)||""),[a,l]=d.useState((t==null?void 0:t.avatar)||""),[o,i]=d.useState(""),[c,u]=d.useState(""),[x,m]=d.useState(null),[p,b]=d.useState(null),k=async g=>{g.preventDefault(),m(null),b(null);try{const N={name:n,avatar:a};c&&(N.currentPassword=o,N.newPassword=c),await s(N),m("Profile updated"),i(""),u("")}catch(N){b((N==null?void 0:N.message)||"Update failed")}};return e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy mb-4",children:"Edit Profile"}),x&&e.jsx("div",{className:"mb-3 text-green-700",children:x}),p&&e.jsx("div",{className:"mb-3 text-red-600",children:p}),e.jsxs("form",{onSubmit:k,className:"bg-white shadow-soft rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:a,alt:"avatar",className:"w-20 h-20 rounded-full object-cover border-2 border-gold"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Avatar URL"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:a,onChange:g=>l(g.target.value)})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Full Name"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:n,onChange:g=>r(g.target.value)})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Current Password"}),e.jsx("input",{type:"password",className:"w-full border rounded-xl px-3 py-2",value:o,onChange:g=>i(g.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"New Password"}),e.jsx("input",{type:"password",className:"w-full border rounded-xl px-3 py-2",value:c,onChange:g=>u(g.target.value)})]})]}),e.jsx("button",{className:"mt-6 bg-gold text-navy rounded-xl px-5 py-2 font-semibold hover:bg-lightgold",children:"Save Changes"})]})]})}const Np=t=>new Date(t).toISOString().slice(0,16),ll=(t=3)=>{const s=new Date;return s.setDate(s.getDate()+t),Np(s)};function jb(){const{user:t}=fe(),[s,n]=d.useState([]),[r,a]=d.useState([]),[l,o]=d.useState("InProgress"),[i,c]=d.useState(!1),[u,x]=d.useState({title:"",description:"",category:"",assignedTo:"",deadline:ll(3)}),[m,p]=d.useState(null),[b,k]=d.useState(null),[g,N]=d.useState(null),v=(t==null?void 0:t.role)==="SuperAdmin"||(t==null?void 0:t.role)==="Admin",h=async()=>{try{const{users:T}=await B.listUsers();n(T)}catch{}},j=async()=>{try{const{tasks:T}=await B.listAllTasks(l);a(T)}catch{}};d.useEffect(()=>{v&&h()},[v]),d.useEffect(()=>{v&&j()},[l,v]);const y=d.useMemo(()=>s.filter(T=>T.role!=="SuperAdmin"),[s]),w=async T=>{T.preventDefault(),k(null),N(null);try{m?(await B.updateTask(m._id,{...u}),N("Task updated")):(await B.assignTask({...u}),N("Task assigned")),c(!1),p(null),x({title:"",description:"",category:"",assignedTo:"",deadline:ll(3)}),j()}catch(R){k((R==null?void 0:R.message)||"Failed to save task")}},S=T=>{var R,_;p(T),x({title:T.title,description:T.description||"",category:T.category||"",assignedTo:Array.isArray(T.assignedTo)?(R=T.assignedTo[0])==null?void 0:R._id:((_=T.assignedTo)==null?void 0:_._id)||"",deadline:T.dueDate?Np(T.dueDate):ll(3)}),c(!0)},A=async T=>{if(confirm("Are you sure you want to delete this task?")){k(null),N(null);try{await B.deleteTask(T),N("Task deleted"),j()}catch(R){k((R==null?void 0:R.message)||"Failed to delete task")}}},D=()=>{c(!1),p(null),x({title:"",description:"",category:"",assignedTo:"",deadline:ll(3)})};return v?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Assign Task"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:l,onChange:T=>o(T.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"InProgress",children:"In Progress"}),e.jsx("option",{value:"Completed",children:"Completed"})]}),e.jsx("button",{onClick:()=>c(!0),className:"bg-gold text-navy rounded-xl px-4 py-2 font-semibold hover:bg-lightgold",children:"+ Assign Task"})]})]}),g&&e.jsx("div",{className:"mb-2 text-green-700",children:g}),b&&e.jsx("div",{className:"mb-2 text-red-600",children:b}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Task"}),e.jsx("th",{className:"text-left p-3",children:"Assignee"}),e.jsx("th",{className:"text-left p-3",children:"Assigned By"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Deadline"}),e.jsx("th",{className:"text-center p-3",children:"Actions"})]})}),e.jsxs("tbody",{children:[r.map(T=>{var _,I,E,V,F,M;const R=((_=T.assignedBy)==null?void 0:_._id)===(t==null?void 0:t.id);return e.jsxs("tr",{className:"border-t",children:[e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"font-semibold text-navy",children:T.title}),T.description&&e.jsx("div",{className:"text-royal/80",children:T.description}),T.category&&e.jsxs("div",{className:"text-xs text-royal/70 mt-1",children:["Category: ",T.category]})]}),e.jsxs("td",{className:"p-3",children:[Array.isArray(T.assignedTo)?T.assignedTo.map(C=>C.name).join(", "):(I=T.assignedTo)==null?void 0:I.name," ",e.jsxs("span",{className:"text-xs text-royal/70",children:["(",Array.isArray(T.assignedTo)?(E=T.assignedTo[0])==null?void 0:E.role:(V=T.assignedTo)==null?void 0:V.role,")"]})]}),e.jsxs("td",{className:"p-3",children:[(F=T.assignedBy)==null?void 0:F.name," ",e.jsxs("span",{className:"text-xs text-royal/70",children:["(",(M=T.assignedBy)==null?void 0:M.role,")"]})]}),e.jsx("td",{className:"p-3",children:T.status==="InProgress"||T.status==="In Progress"?"In Progress":T.status==="Completed"?"Completed":T.status}),e.jsx("td",{className:"p-3",children:T.dueDate?new Date(T.dueDate).toLocaleString():T.deadline?new Date(T.deadline).toLocaleString():"-"}),e.jsx("td",{className:"p-3 text-center",children:R?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>S(T),className:"text-blue-600 hover:text-blue-800 px-2 py-1 hover:bg-blue-50 rounded transition-colors text-xs font-medium",title:"Edit Task",children:"Edit"}),e.jsx("button",{onClick:()=>A(T._id),className:"text-red-600 hover:text-red-800 px-2 py-1 hover:bg-red-50 rounded transition-colors text-xs font-medium",title:"Delete Task",children:"Delete"})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"-"})})]},T._id)}),r.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:"6",children:"No tasks"})})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("form",{onSubmit:w,className:"bg-white rounded-2xl shadow-soft p-4 w-full max-w-xl",children:[e.jsx("h2",{className:"text-xl font-bold text-navy mb-3",children:m?"Edit Task":"Assign Task"}),e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Title *"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2 mb-3",value:u.title,onChange:T=>x(R=>({...R,title:T.target.value})),required:!0}),e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2 mb-3",rows:"3",value:u.description,onChange:T=>x(R=>({...R,description:T.target.value}))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Category"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:u.category,onChange:T=>x(R=>({...R,category:T.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Assign To *"}),e.jsxs("select",{className:"w-full border rounded-xl px-3 py-2",value:u.assignedTo,onChange:T=>x(R=>({...R,assignedTo:T.target.value})),required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select user"}),y.map(T=>e.jsxs("option",{value:T._id,children:[T.name,"  ",T.role]},T._id))]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Deadline *"}),e.jsx("input",{type:"datetime-local",className:"w-full border rounded-xl px-3 py-2",value:u.deadline,onChange:T=>x(R=>({...R,deadline:T.target.value})),required:!0})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 rounded-xl border hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded-xl bg-gold text-navy font-semibold hover:bg-lightgold",children:m?"Update":"Assign"})]})]})})]}):e.jsx("div",{className:"text-royal",children:"You do not have permission to view this page."})}const Nb=3,mm=t=>new Date(t).toLocaleString(),wb=t=>new Date(t).toISOString().slice(0,16),xm=(t=3)=>{const s=new Date;return s.setDate(s.getDate()+t),wb(s)},Sb=(t,s,n)=>{if(s==="Completed")return n&&new Date(n)<=new Date(t)?"bg-green-50":"bg-red-50";const r=new Date,a=new Date(t),l=Math.floor((a-r)/(1e3*60*60*24));return l<=0?"bg-red-50":l<=Nb?"bg-yellow-50":""};function kb(){const{user:t}=fe(),[s,n]=d.useState([]),[r,a]=d.useState("InProgress"),[l,o]=d.useState(!1),[i,c]=d.useState(null),[u,x]=d.useState(null),[m,p]=d.useState({title:"",description:"",category:"",deadline:xm(3)}),b=t&&t.role!=="SuperAdmin",k=async()=>{try{const{tasks:v}=await B.listMyTasks(r);n(v)}catch{}};d.useEffect(()=>{b&&k()},[r,b]);const g=async v=>{try{const h=v.status==="InProgress"?"Completed":"InProgress";await B.updateTaskStatus(v._id,h),x("Status updated"),k()}catch(h){c((h==null?void 0:h.message)||"Failed to update")}},N=async v=>{v.preventDefault(),c(null),x(null);try{await B.addSelfTask({...m}),o(!1),p({title:"",description:"",category:"",deadline:xm(3)}),x("Task added"),k()}catch(h){c((h==null?void 0:h.message)||"Failed to add")}};return b?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"My Task"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:r,onChange:v=>a(v.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"InProgress",children:"In Progress"}),e.jsx("option",{value:"Completed",children:"Completed"})]}),e.jsx("button",{onClick:()=>o(!0),className:"bg-gold text-navy rounded-xl px-4 py-2 font-semibold hover:bg-lightgold",children:"+ Add My Task"})]})]}),u&&e.jsx("div",{className:"mb-2 text-green-700",children:u}),i&&e.jsx("div",{className:"mb-2 text-red-600",children:i}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Task"}),e.jsx("th",{className:"text-left p-3",children:"Assigned By"})," ",e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Deadline"}),e.jsx("th",{className:"text-left p-3",children:"Completed"}),e.jsx("th",{className:"text-left p-3",children:"Action"})]})}),e.jsxs("tbody",{children:[s.map(v=>{var h,j;return e.jsxs("tr",{className:`border-t ${Sb(v.deadline,v.status,v.completedAt)}`,children:[e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"font-semibold text-navy",children:v.title}),v.description&&e.jsx("div",{className:"text-royal/80",children:v.description}),v.category&&e.jsxs("div",{className:"text-xs text-royal/70 mt-1",children:["Category: ",v.category]})]}),e.jsxs("td",{className:"p-3",children:[(h=v.assignedBy)==null?void 0:h.name,e.jsxs("span",{className:"text-xs text-royal/70",children:[" (",(j=v.assignedBy)==null?void 0:j.role,")"]})]}),e.jsx("td",{className:"p-3",children:v.status==="InProgress"?"In Progress":"Completed"}),e.jsx("td",{className:"p-3",children:mm(v.deadline)}),e.jsx("td",{className:"p-3",children:v.completedAt?mm(v.completedAt):"-"}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>g(v),className:"px-3 py-1 rounded-lg border hover:bg-[#f3f6ff]",children:v.status==="InProgress"?"Mark Completed":"Mark In-Progress"})})]},v._id)}),s.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:"6",children:"No tasks"})})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:e.jsxs("form",{onSubmit:N,className:"bg-white rounded-2xl shadow-soft p-4 w-full max-w-xl",children:[e.jsx("h2",{className:"text-xl font-bold text-navy mb-3",children:"Add My Task"}),e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Title *"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2 mb-3",value:m.title,onChange:v=>p(h=>({...h,title:v.target.value})),required:!0}),e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2 mb-3",rows:"3",value:m.description,onChange:v=>p(h=>({...h,description:v.target.value}))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Category"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:m.category,onChange:v=>p(h=>({...h,category:v.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Deadline *"}),e.jsx("input",{type:"datetime-local",className:"w-full border rounded-xl px-3 py-2",value:m.deadline,onChange:v=>p(h=>({...h,deadline:v.target.value})),required:!0})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded-xl bg-gold text-navy font-semibold hover:bg-lightgold",children:"Add"})]})]})})]}):e.jsx("div",{className:"text-royal",children:"Super Admin has no My Task."})}function Cb(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return d.useMemo(()=>r=>{s.forEach(a=>a(r))},s)}const Mo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function wr(t){const s=Object.prototype.toString.call(t);return s==="[object Window]"||s==="[object global]"}function Lc(t){return"nodeType"in t}function pt(t){var s,n;return t?wr(t)?t:Lc(t)&&(s=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?s:window:window}function Pc(t){const{Document:s}=pt(t);return t instanceof s}function La(t){return wr(t)?!1:t instanceof pt(t).HTMLElement}function wp(t){return t instanceof pt(t).SVGElement}function Sr(t){return t?wr(t)?t.document:Lc(t)?Pc(t)?t:La(t)||wp(t)?t.ownerDocument:document:document:document}const ns=Mo?d.useLayoutEffect:d.useEffect;function Lo(t){const s=d.useRef(t);return ns(()=>{s.current=t}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return s.current==null?void 0:s.current(...r)},[])}function Ab(){const t=d.useRef(null),s=d.useCallback((r,a)=>{t.current=setInterval(r,a)},[]),n=d.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[s,n]}function Sa(t,s){s===void 0&&(s=[t]);const n=d.useRef(t);return ns(()=>{n.current!==t&&(n.current=t)},s),n}function Pa(t,s){const n=d.useRef();return d.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...s])}function to(t){const s=Lo(t),n=d.useRef(null),r=d.useCallback(a=>{a!==n.current&&(s==null||s(a,n.current)),n.current=a},[]);return[n,r]}function so(t){const s=d.useRef();return d.useEffect(()=>{s.current=t},[t]),s.current}let bi={};function Ia(t,s){return d.useMemo(()=>{if(s)return s;const n=bi[t]==null?0:bi[t]+1;return bi[t]=n,t+"-"+n},[t,s])}function Sp(t){return function(s){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((l,o)=>{const i=Object.entries(o);for(const[c,u]of i){const x=l[c];x!=null&&(l[c]=x+t*u)}return l},{...s})}}const ir=Sp(1),no=Sp(-1);function Db(t){return"clientX"in t&&"clientY"in t}function Po(t){if(!t)return!1;const{KeyboardEvent:s}=pt(t.target);return s&&t instanceof s}function Tb(t){if(!t)return!1;const{TouchEvent:s}=pt(t.target);return s&&t instanceof s}function ro(t){if(Tb(t)){if(t.touches&&t.touches.length){const{clientX:s,clientY:n}=t.touches[0];return{x:s,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:s,clientY:n}=t.changedTouches[0];return{x:s,y:n}}}return Db(t)?{x:t.clientX,y:t.clientY}:null}const un=Object.freeze({Translate:{toString(t){if(!t)return;const{x:s,y:n}=t;return"translate3d("+(s?Math.round(s):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:s,scaleY:n}=t;return"scaleX("+s+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[un.Translate.toString(t),un.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:s,duration:n,easing:r}=t;return s+" "+n+"ms "+r}}}),hm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Eb(t){return t.matches(hm)?t:t.querySelector(hm)}const Mb={display:"none"};function Lb(t){let{id:s,value:n}=t;return ve.createElement("div",{id:s,style:Mb},n)}function Pb(t){let{id:s,announcement:n,ariaLiveType:r="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ve.createElement("div",{id:s,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function Ib(){const[t,s]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&s(r)},[]),announcement:t}}const kp=d.createContext(null);function Rb(t){const s=d.useContext(kp);d.useEffect(()=>{if(!s)throw new Error("useDndMonitor must be used within a children of <DndContext>");return s(t)},[t,s])}function $b(){const[t]=d.useState(()=>new Set),s=d.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[d.useCallback(r=>{let{type:a,event:l}=r;t.forEach(o=>{var i;return(i=o[a])==null?void 0:i.call(o,l)})},[t]),s]}const Ob={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Fb={onDragStart(t){let{active:s}=t;return"Picked up draggable item "+s.id+"."},onDragOver(t){let{active:s,over:n}=t;return n?"Draggable item "+s.id+" was moved over droppable area "+n.id+".":"Draggable item "+s.id+" is no longer over a droppable area."},onDragEnd(t){let{active:s,over:n}=t;return n?"Draggable item "+s.id+" was dropped over droppable area "+n.id:"Draggable item "+s.id+" was dropped."},onDragCancel(t){let{active:s}=t;return"Dragging was cancelled. Draggable item "+s.id+" was dropped."}};function _b(t){let{announcements:s=Fb,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=Ob}=t;const{announce:l,announcement:o}=Ib(),i=Ia("DndLiveRegion"),[c,u]=d.useState(!1);if(d.useEffect(()=>{u(!0)},[]),Rb(d.useMemo(()=>({onDragStart(m){let{active:p}=m;l(s.onDragStart({active:p}))},onDragMove(m){let{active:p,over:b}=m;s.onDragMove&&l(s.onDragMove({active:p,over:b}))},onDragOver(m){let{active:p,over:b}=m;l(s.onDragOver({active:p,over:b}))},onDragEnd(m){let{active:p,over:b}=m;l(s.onDragEnd({active:p,over:b}))},onDragCancel(m){let{active:p,over:b}=m;l(s.onDragCancel({active:p,over:b}))}}),[l,s])),!c)return null;const x=ve.createElement(ve.Fragment,null,ve.createElement(Lb,{id:r,value:a.draggable}),ve.createElement(Pb,{id:i,announcement:o}));return n?Zn.createPortal(x,n):x}var Ve;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ve||(Ve={}));function ao(){}function zb(t,s){return d.useMemo(()=>({sensor:t,options:s??{}}),[t,s])}function Ub(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return d.useMemo(()=>[...s].filter(r=>r!=null),[...s])}const rs=Object.freeze({x:0,y:0});function Bb(t,s){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function Hb(t,s){const n=ro(t);if(!n)return"0 0";const r={x:(n.x-s.left)/s.width*100,y:(n.y-s.top)/s.height*100};return r.x+"% "+r.y+"%"}function Wb(t,s){let{data:{value:n}}=t,{data:{value:r}}=s;return n-r}function Vb(t,s){let{data:{value:n}}=t,{data:{value:r}}=s;return r-n}function pm(t){let{left:s,top:n,height:r,width:a}=t;return[{x:s,y:n},{x:s+a,y:n},{x:s,y:n+r},{x:s+a,y:n+r}]}function qb(t,s){if(!t||t.length===0)return null;const[n]=t;return n[s]}const Gb=t=>{let{collisionRect:s,droppableRects:n,droppableContainers:r}=t;const a=pm(s),l=[];for(const o of r){const{id:i}=o,c=n.get(i);if(c){const u=pm(c),x=a.reduce((p,b,k)=>p+Bb(u[k],b),0),m=Number((x/4).toFixed(4));l.push({id:i,data:{droppableContainer:o,value:m}})}}return l.sort(Wb)};function Yb(t,s){const n=Math.max(s.top,t.top),r=Math.max(s.left,t.left),a=Math.min(s.left+s.width,t.left+t.width),l=Math.min(s.top+s.height,t.top+t.height),o=a-r,i=l-n;if(r<a&&n<l){const c=s.width*s.height,u=t.width*t.height,x=o*i,m=x/(c+u-x);return Number(m.toFixed(4))}return 0}const Jb=t=>{let{collisionRect:s,droppableRects:n,droppableContainers:r}=t;const a=[];for(const l of r){const{id:o}=l,i=n.get(o);if(i){const c=Yb(i,s);c>0&&a.push({id:o,data:{droppableContainer:l,value:c}})}}return a.sort(Vb)};function Qb(t,s,n){return{...t,scaleX:s&&n?s.width/n.width:1,scaleY:s&&n?s.height/n.height:1}}function Cp(t,s){return t&&s?{x:t.left-s.left,y:t.top-s.top}:rs}function Xb(t){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return a.reduce((o,i)=>({...o,top:o.top+t*i.y,bottom:o.bottom+t*i.y,left:o.left+t*i.x,right:o.right+t*i.x}),{...n})}}const Kb=Xb(1);function Ap(t){if(t.startsWith("matrix3d(")){const s=t.slice(9,-1).split(/, /);return{x:+s[12],y:+s[13],scaleX:+s[0],scaleY:+s[5]}}else if(t.startsWith("matrix(")){const s=t.slice(7,-1).split(/, /);return{x:+s[4],y:+s[5],scaleX:+s[0],scaleY:+s[3]}}return null}function Zb(t,s,n){const r=Ap(s);if(!r)return t;const{scaleX:a,scaleY:l,x:o,y:i}=r,c=t.left-o-(1-a)*parseFloat(n),u=t.top-i-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),x=a?t.width/a:t.width,m=l?t.height/l:t.height;return{width:x,height:m,top:u,right:c+x,bottom:u+m,left:c}}const ev={ignoreTransform:!1};function kr(t,s){s===void 0&&(s=ev);let n=t.getBoundingClientRect();if(s.ignoreTransform){const{transform:u,transformOrigin:x}=pt(t).getComputedStyle(t);u&&(n=Zb(n,u,x))}const{top:r,left:a,width:l,height:o,bottom:i,right:c}=n;return{top:r,left:a,width:l,height:o,bottom:i,right:c}}function gm(t){return kr(t,{ignoreTransform:!0})}function tv(t){const s=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:s,bottom:n,width:s,height:n}}function sv(t,s){return s===void 0&&(s=pt(t).getComputedStyle(t)),s.position==="fixed"}function nv(t,s){s===void 0&&(s=pt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const l=s[a];return typeof l=="string"?n.test(l):!1})}function Ic(t,s){const n=[];function r(a){if(s!=null&&n.length>=s||!a)return n;if(Pc(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!La(a)||wp(a)||n.includes(a))return n;const l=pt(t).getComputedStyle(a);return a!==t&&nv(a,l)&&n.push(a),sv(a,l)?n:r(a.parentNode)}return t?r(t):n}function Dp(t){const[s]=Ic(t,1);return s??null}function vi(t){return!Mo||!t?null:wr(t)?t:Lc(t)?Pc(t)||t===Sr(t).scrollingElement?window:La(t)?t:null:null}function Tp(t){return wr(t)?t.scrollX:t.scrollLeft}function Ep(t){return wr(t)?t.scrollY:t.scrollTop}function Ad(t){return{x:Tp(t),y:Ep(t)}}var Qe;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Qe||(Qe={}));function Mp(t){return!Mo||!t?!1:t===document.scrollingElement}function Lp(t){const s={x:0,y:0},n=Mp(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},a=t.scrollTop<=s.y,l=t.scrollLeft<=s.x,o=t.scrollTop>=r.y,i=t.scrollLeft>=r.x;return{isTop:a,isLeft:l,isBottom:o,isRight:i,maxScroll:r,minScroll:s}}const rv={x:.2,y:.2};function av(t,s,n,r,a){let{top:l,left:o,right:i,bottom:c}=n;r===void 0&&(r=10),a===void 0&&(a=rv);const{isTop:u,isBottom:x,isLeft:m,isRight:p}=Lp(t),b={x:0,y:0},k={x:0,y:0},g={height:s.height*a.y,width:s.width*a.x};return!u&&l<=s.top+g.height?(b.y=Qe.Backward,k.y=r*Math.abs((s.top+g.height-l)/g.height)):!x&&c>=s.bottom-g.height&&(b.y=Qe.Forward,k.y=r*Math.abs((s.bottom-g.height-c)/g.height)),!p&&i>=s.right-g.width?(b.x=Qe.Forward,k.x=r*Math.abs((s.right-g.width-i)/g.width)):!m&&o<=s.left+g.width&&(b.x=Qe.Backward,k.x=r*Math.abs((s.left+g.width-o)/g.width)),{direction:b,speed:k}}function lv(t){if(t===document.scrollingElement){const{innerWidth:l,innerHeight:o}=window;return{top:0,left:0,right:l,bottom:o,width:l,height:o}}const{top:s,left:n,right:r,bottom:a}=t.getBoundingClientRect();return{top:s,left:n,right:r,bottom:a,width:t.clientWidth,height:t.clientHeight}}function Pp(t){return t.reduce((s,n)=>ir(s,Ad(n)),rs)}function ov(t){return t.reduce((s,n)=>s+Tp(n),0)}function iv(t){return t.reduce((s,n)=>s+Ep(n),0)}function Ip(t,s){if(s===void 0&&(s=kr),!t)return;const{top:n,left:r,bottom:a,right:l}=s(t);Dp(t)&&(a<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const dv=[["x",["left","right"],ov],["y",["top","bottom"],iv]];class Rc{constructor(s,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ic(n),a=Pp(r);this.rect={...s},this.width=s.width,this.height=s.height;for(const[l,o,i]of dv)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=i(r),x=a[l]-u;return this.rect[c]+x},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ta{constructor(s){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=s}add(s,n,r){var a;(a=this.target)==null||a.addEventListener(s,n,r),this.listeners.push([s,n,r])}}function cv(t){const{EventTarget:s}=pt(t);return t instanceof s?t:Sr(t)}function ji(t,s){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof s=="number"?Math.sqrt(n**2+r**2)>s:"x"in s&&"y"in s?n>s.x&&r>s.y:"x"in s?n>s.x:"y"in s?r>s.y:!1}var It;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(It||(It={}));function fm(t){t.preventDefault()}function uv(t){t.stopPropagation()}var Ne;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Ne||(Ne={}));const Rp={start:[Ne.Space,Ne.Enter],cancel:[Ne.Esc],end:[Ne.Space,Ne.Enter,Ne.Tab]},mv=(t,s)=>{let{currentCoordinates:n}=s;switch(t.code){case Ne.Right:return{...n,x:n.x+25};case Ne.Left:return{...n,x:n.x-25};case Ne.Down:return{...n,y:n.y+25};case Ne.Up:return{...n,y:n.y-25}}};class $p{constructor(s){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=s;const{event:{target:n}}=s;this.props=s,this.listeners=new ta(Sr(n)),this.windowListeners=new ta(pt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(It.Resize,this.handleCancel),this.windowListeners.add(It.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(It.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:s,onStart:n}=this.props,r=s.node.current;r&&Ip(r),n(rs)}handleKeyDown(s){if(Po(s)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:l=Rp,coordinateGetter:o=mv,scrollBehavior:i="smooth"}=a,{code:c}=s;if(l.end.includes(c)){this.handleEnd(s);return}if(l.cancel.includes(c)){this.handleCancel(s);return}const{collisionRect:u}=r.current,x=u?{x:u.left,y:u.top}:rs;this.referenceCoordinates||(this.referenceCoordinates=x);const m=o(s,{active:n,context:r.current,currentCoordinates:x});if(m){const p=no(m,x),b={x:0,y:0},{scrollableAncestors:k}=r.current;for(const g of k){const N=s.code,{isTop:v,isRight:h,isLeft:j,isBottom:y,maxScroll:w,minScroll:S}=Lp(g),A=lv(g),D={x:Math.min(N===Ne.Right?A.right-A.width/2:A.right,Math.max(N===Ne.Right?A.left:A.left+A.width/2,m.x)),y:Math.min(N===Ne.Down?A.bottom-A.height/2:A.bottom,Math.max(N===Ne.Down?A.top:A.top+A.height/2,m.y))},T=N===Ne.Right&&!h||N===Ne.Left&&!j,R=N===Ne.Down&&!y||N===Ne.Up&&!v;if(T&&D.x!==m.x){const _=g.scrollLeft+p.x,I=N===Ne.Right&&_<=w.x||N===Ne.Left&&_>=S.x;if(I&&!p.y){g.scrollTo({left:_,behavior:i});return}I?b.x=g.scrollLeft-_:b.x=N===Ne.Right?g.scrollLeft-w.x:g.scrollLeft-S.x,b.x&&g.scrollBy({left:-b.x,behavior:i});break}else if(R&&D.y!==m.y){const _=g.scrollTop+p.y,I=N===Ne.Down&&_<=w.y||N===Ne.Up&&_>=S.y;if(I&&!p.x){g.scrollTo({top:_,behavior:i});return}I?b.y=g.scrollTop-_:b.y=N===Ne.Down?g.scrollTop-w.y:g.scrollTop-S.y,b.y&&g.scrollBy({top:-b.y,behavior:i});break}}this.handleMove(s,ir(no(m,this.referenceCoordinates),b))}}}handleMove(s,n){const{onMove:r}=this.props;s.preventDefault(),r(n)}handleEnd(s){const{onEnd:n}=this.props;s.preventDefault(),this.detach(),n()}handleCancel(s){const{onCancel:n}=this.props;s.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}$p.activators=[{eventName:"onKeyDown",handler:(t,s,n)=>{let{keyboardCodes:r=Rp,onActivation:a}=s,{active:l}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const i=l.activatorNode.current;return i&&t.target!==i?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function ym(t){return!!(t&&"distance"in t)}function bm(t){return!!(t&&"delay"in t)}class $c{constructor(s,n,r){var a;r===void 0&&(r=cv(s.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=s,this.events=n;const{event:l}=s,{target:o}=l;this.props=s,this.events=n,this.document=Sr(o),this.documentListeners=new ta(this.document),this.listeners=new ta(r),this.windowListeners=new ta(pt(o)),this.initialCoordinates=(a=ro(l))!=null?a:rs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:s,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(s.move.name,this.handleMove,{passive:!1}),this.listeners.add(s.end.name,this.handleEnd),s.cancel&&this.listeners.add(s.cancel.name,this.handleCancel),this.windowListeners.add(It.Resize,this.handleCancel),this.windowListeners.add(It.DragStart,fm),this.windowListeners.add(It.VisibilityChange,this.handleCancel),this.windowListeners.add(It.ContextMenu,fm),this.documentListeners.add(It.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(bm(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(ym(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(s,n){const{active:r,onPending:a}=this.props;a(r,s,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:s}=this,{onStart:n}=this.props;s&&(this.activated=!0,this.documentListeners.add(It.Click,uv,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(It.SelectionChange,this.removeTextSelection),n(s))}handleMove(s){var n;const{activated:r,initialCoordinates:a,props:l}=this,{onMove:o,options:{activationConstraint:i}}=l;if(!a)return;const c=(n=ro(s))!=null?n:rs,u=no(a,c);if(!r&&i){if(ym(i)){if(i.tolerance!=null&&ji(u,i.tolerance))return this.handleCancel();if(ji(u,i.distance))return this.handleStart()}if(bm(i)&&ji(u,i.tolerance))return this.handleCancel();this.handlePending(i,u);return}s.cancelable&&s.preventDefault(),o(c)}handleEnd(){const{onAbort:s,onEnd:n}=this.props;this.detach(),this.activated||s(this.props.active),n()}handleCancel(){const{onAbort:s,onCancel:n}=this.props;this.detach(),this.activated||s(this.props.active),n()}handleKeydown(s){s.code===Ne.Esc&&this.handleCancel()}removeTextSelection(){var s;(s=this.document.getSelection())==null||s.removeAllRanges()}}const xv={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Oc extends $c{constructor(s){const{event:n}=s,r=Sr(n.target);super(s,xv,r)}}Oc.activators=[{eventName:"onPointerDown",handler:(t,s)=>{let{nativeEvent:n}=t,{onActivation:r}=s;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const hv={move:{name:"mousemove"},end:{name:"mouseup"}};var Dd;(function(t){t[t.RightClick=2]="RightClick"})(Dd||(Dd={}));class pv extends $c{constructor(s){super(s,hv,Sr(s.event.target))}}pv.activators=[{eventName:"onMouseDown",handler:(t,s)=>{let{nativeEvent:n}=t,{onActivation:r}=s;return n.button===Dd.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ni={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class gv extends $c{constructor(s){super(s,Ni)}static setup(){return window.addEventListener(Ni.move.name,s,{capture:!1,passive:!1}),function(){window.removeEventListener(Ni.move.name,s)};function s(){}}}gv.activators=[{eventName:"onTouchStart",handler:(t,s)=>{let{nativeEvent:n}=t,{onActivation:r}=s;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var sa;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(sa||(sa={}));var lo;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(lo||(lo={}));function fv(t){let{acceleration:s,activator:n=sa.Pointer,canScroll:r,draggingRect:a,enabled:l,interval:o=5,order:i=lo.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:x,delta:m,threshold:p}=t;const b=bv({delta:m,disabled:!l}),[k,g]=Ab(),N=d.useRef({x:0,y:0}),v=d.useRef({x:0,y:0}),h=d.useMemo(()=>{switch(n){case sa.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case sa.DraggableRect:return a}},[n,a,c]),j=d.useRef(null),y=d.useCallback(()=>{const S=j.current;if(!S)return;const A=N.current.x*v.current.x,D=N.current.y*v.current.y;S.scrollBy(A,D)},[]),w=d.useMemo(()=>i===lo.TreeOrder?[...u].reverse():u,[i,u]);d.useEffect(()=>{if(!l||!u.length||!h){g();return}for(const S of w){if((r==null?void 0:r(S))===!1)continue;const A=u.indexOf(S),D=x[A];if(!D)continue;const{direction:T,speed:R}=av(S,D,h,s,p);for(const _ of["x","y"])b[_][T[_]]||(R[_]=0,T[_]=0);if(R.x>0||R.y>0){g(),j.current=S,k(y,o),N.current=R,v.current=T;return}}N.current={x:0,y:0},v.current={x:0,y:0},g()},[s,y,r,g,l,o,JSON.stringify(h),JSON.stringify(b),k,u,w,x,JSON.stringify(p)])}const yv={x:{[Qe.Backward]:!1,[Qe.Forward]:!1},y:{[Qe.Backward]:!1,[Qe.Forward]:!1}};function bv(t){let{delta:s,disabled:n}=t;const r=so(s);return Pa(a=>{if(n||!r||!a)return yv;const l={x:Math.sign(s.x-r.x),y:Math.sign(s.y-r.y)};return{x:{[Qe.Backward]:a.x[Qe.Backward]||l.x===-1,[Qe.Forward]:a.x[Qe.Forward]||l.x===1},y:{[Qe.Backward]:a.y[Qe.Backward]||l.y===-1,[Qe.Forward]:a.y[Qe.Forward]||l.y===1}}},[n,s,r])}function vv(t,s){const n=s!=null?t.get(s):void 0,r=n?n.node.current:null;return Pa(a=>{var l;return s==null?null:(l=r??a)!=null?l:null},[r,s])}function jv(t,s){return d.useMemo(()=>t.reduce((n,r)=>{const{sensor:a}=r,l=a.activators.map(o=>({eventName:o.eventName,handler:s(o.handler,r)}));return[...n,...l]},[]),[t,s])}var ka;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ka||(ka={}));var Td;(function(t){t.Optimized="optimized"})(Td||(Td={}));const vm=new Map;function Nv(t,s){let{dragging:n,dependencies:r,config:a}=s;const[l,o]=d.useState(null),{frequency:i,measure:c,strategy:u}=a,x=d.useRef(t),m=N(),p=Sa(m),b=d.useCallback(function(v){v===void 0&&(v=[]),!p.current&&o(h=>h===null?v:h.concat(v.filter(j=>!h.includes(j))))},[p]),k=d.useRef(null),g=Pa(v=>{if(m&&!n)return vm;if(!v||v===vm||x.current!==t||l!=null){const h=new Map;for(let j of t){if(!j)continue;if(l&&l.length>0&&!l.includes(j.id)&&j.rect.current){h.set(j.id,j.rect.current);continue}const y=j.node.current,w=y?new Rc(c(y),y):null;j.rect.current=w,w&&h.set(j.id,w)}return h}return v},[t,l,n,m,c]);return d.useEffect(()=>{x.current=t},[t]),d.useEffect(()=>{m||b()},[n,m]),d.useEffect(()=>{l&&l.length>0&&o(null)},[JSON.stringify(l)]),d.useEffect(()=>{m||typeof i!="number"||k.current!==null||(k.current=setTimeout(()=>{b(),k.current=null},i))},[i,m,b,...r]),{droppableRects:g,measureDroppableContainers:b,measuringScheduled:l!=null};function N(){switch(u){case ka.Always:return!1;case ka.BeforeDragging:return n;default:return!n}}}function Fc(t,s){return Pa(n=>t?n||(typeof s=="function"?s(t):t):null,[s,t])}function wv(t,s){return Fc(t,s)}function Sv(t){let{callback:s,disabled:n}=t;const r=Lo(s),a=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,n]);return d.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Io(t){let{callback:s,disabled:n}=t;const r=Lo(s),a=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[n]);return d.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function kv(t){return new Rc(kr(t),t)}function jm(t,s,n){s===void 0&&(s=kv);const[r,a]=d.useState(null);function l(){a(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const x=s(t);return JSON.stringify(c)===JSON.stringify(x)?c:x})}const o=Sv({callback(c){if(t)for(const u of c){const{type:x,target:m}=u;if(x==="childList"&&m instanceof HTMLElement&&m.contains(t)){l();break}}}}),i=Io({callback:l});return ns(()=>{l(),t?(i==null||i.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),o==null||o.disconnect())},[t]),r}function Cv(t){const s=Fc(t);return Cp(t,s)}const Nm=[];function Av(t){const s=d.useRef(t),n=Pa(r=>t?r&&r!==Nm&&t&&s.current&&t.parentNode===s.current.parentNode?r:Ic(t):Nm,[t]);return d.useEffect(()=>{s.current=t},[t]),n}function Dv(t){const[s,n]=d.useState(null),r=d.useRef(t),a=d.useCallback(l=>{const o=vi(l.target);o&&n(i=>i?(i.set(o,Ad(o)),new Map(i)):null)},[]);return d.useEffect(()=>{const l=r.current;if(t!==l){o(l);const i=t.map(c=>{const u=vi(c);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,Ad(u)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=t}return()=>{o(t),o(l)};function o(i){i.forEach(c=>{const u=vi(c);u==null||u.removeEventListener("scroll",a)})}},[a,t]),d.useMemo(()=>t.length?s?Array.from(s.values()).reduce((l,o)=>ir(l,o),rs):Pp(t):rs,[t,s])}function wm(t,s){s===void 0&&(s=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},s),d.useEffect(()=>{const r=t!==rs;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?no(t,n.current):rs}function Tv(t){d.useEffect(()=>{if(!Mo)return;const s=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of s)n==null||n()}},t.map(s=>{let{sensor:n}=s;return n}))}function Ev(t,s){return d.useMemo(()=>t.reduce((n,r)=>{let{eventName:a,handler:l}=r;return n[a]=o=>{l(o,s)},n},{}),[t,s])}function Op(t){return d.useMemo(()=>t?tv(t):null,[t])}const Sm=[];function Mv(t,s){s===void 0&&(s=kr);const[n]=t,r=Op(n?pt(n):null),[a,l]=d.useState(Sm);function o(){l(()=>t.length?t.map(c=>Mp(c)?r:new Rc(s(c),c)):Sm)}const i=Io({callback:o});return ns(()=>{i==null||i.disconnect(),o(),t.forEach(c=>i==null?void 0:i.observe(c))},[t]),a}function Fp(t){if(!t)return null;if(t.children.length>1)return t;const s=t.children[0];return La(s)?s:t}function Lv(t){let{measure:s}=t;const[n,r]=d.useState(null),a=d.useCallback(u=>{for(const{target:x}of u)if(La(x)){r(m=>{const p=s(x);return m?{...m,width:p.width,height:p.height}:p});break}},[s]),l=Io({callback:a}),o=d.useCallback(u=>{const x=Fp(u);l==null||l.disconnect(),x&&(l==null||l.observe(x)),r(x?s(x):null)},[s,l]),[i,c]=to(o);return d.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const Pv=[{sensor:Oc,options:{}},{sensor:$p,options:{}}],Iv={current:{}},Sl={draggable:{measure:gm},droppable:{measure:gm,strategy:ka.WhileDragging,frequency:Td.Optimized},dragOverlay:{measure:kr}};class na extends Map{get(s){var n;return s!=null&&(n=super.get(s))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(s=>{let{disabled:n}=s;return!n})}getNodeFor(s){var n,r;return(n=(r=this.get(s))==null?void 0:r.node.current)!=null?n:void 0}}const Rv={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new na,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ao},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Sl,measureDroppableContainers:ao,windowRect:null,measuringScheduled:!1},_p={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ao,draggableNodes:new Map,over:null,measureDroppableContainers:ao},Ra=d.createContext(_p),zp=d.createContext(Rv);function $v(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new na}}}function Ov(t,s){switch(s.type){case Ve.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:s.initialCoordinates,active:s.active}};case Ve.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:s.coordinates.x-t.draggable.initialCoordinates.x,y:s.coordinates.y-t.draggable.initialCoordinates.y}}};case Ve.DragEnd:case Ve.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ve.RegisterDroppable:{const{element:n}=s,{id:r}=n,a=new na(t.droppable.containers);return a.set(r,n),{...t,droppable:{...t.droppable,containers:a}}}case Ve.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=s,l=t.droppable.containers.get(n);if(!l||r!==l.key)return t;const o=new na(t.droppable.containers);return o.set(n,{...l,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case Ve.UnregisterDroppable:{const{id:n,key:r}=s,a=t.droppable.containers.get(n);if(!a||r!==a.key)return t;const l=new na(t.droppable.containers);return l.delete(n),{...t,droppable:{...t.droppable,containers:l}}}default:return t}}function Fv(t){let{disabled:s}=t;const{active:n,activatorEvent:r,draggableNodes:a}=d.useContext(Ra),l=so(r),o=so(n==null?void 0:n.id);return d.useEffect(()=>{if(!s&&!r&&l&&o!=null){if(!Po(l)||document.activeElement===l.target)return;const i=a.get(o);if(!i)return;const{activatorNode:c,node:u}=i;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const x of[c.current,u.current]){if(!x)continue;const m=Eb(x);if(m){m.focus();break}}})}},[r,s,a,o,l]),null}function Up(t,s){let{transform:n,...r}=s;return t!=null&&t.length?t.reduce((a,l)=>l({transform:a,...r}),n):n}function _v(t){return d.useMemo(()=>({draggable:{...Sl.draggable,...t==null?void 0:t.draggable},droppable:{...Sl.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Sl.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function zv(t){let{activeNode:s,measure:n,initialRect:r,config:a=!0}=t;const l=d.useRef(!1),{x:o,y:i}=typeof a=="boolean"?{x:a,y:a}:a;ns(()=>{if(!o&&!i||!s){l.current=!1;return}if(l.current||!r)return;const u=s==null?void 0:s.node.current;if(!u||u.isConnected===!1)return;const x=n(u),m=Cp(x,r);if(o||(m.x=0),i||(m.y=0),l.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const p=Dp(u);p&&p.scrollBy({top:m.y,left:m.x})}},[s,o,i,r,n])}const Ro=d.createContext({...rs,scaleX:1,scaleY:1});var Ws;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ws||(Ws={}));const Uv=d.memo(function(s){var n,r,a,l;let{id:o,accessibility:i,autoScroll:c=!0,children:u,sensors:x=Pv,collisionDetection:m=Jb,measuring:p,modifiers:b,...k}=s;const g=d.useReducer(Ov,void 0,$v),[N,v]=g,[h,j]=$b(),[y,w]=d.useState(Ws.Uninitialized),S=y===Ws.Initialized,{draggable:{active:A,nodes:D,translate:T},droppable:{containers:R}}=N,_=A!=null?D.get(A):null,I=d.useRef({initial:null,translated:null}),E=d.useMemo(()=>{var Ge;return A!=null?{id:A,data:(Ge=_==null?void 0:_.data)!=null?Ge:Iv,rect:I}:null},[A,_]),V=d.useRef(null),[F,M]=d.useState(null),[C,$]=d.useState(null),P=Sa(k,Object.values(k)),W=Ia("DndDescribedBy",o),O=d.useMemo(()=>R.getEnabled(),[R]),U=_v(p),{droppableRects:q,measureDroppableContainers:ee,measuringScheduled:z}=Nv(O,{dragging:S,dependencies:[T.x,T.y],config:U.droppable}),te=vv(D,A),K=d.useMemo(()=>C?ro(C):null,[C]),G=zo(),oe=wv(te,U.draggable.measure);zv({activeNode:A!=null?D.get(A):null,config:G.layoutShiftCompensation,initialRect:oe,measure:U.draggable.measure});const le=jm(te,U.draggable.measure,oe),Z=jm(te?te.parentElement:null),L=d.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:q,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),H=R.getNodeFor((n=L.current.over)==null?void 0:n.id),re=Lv({measure:U.dragOverlay.measure}),se=(r=re.nodeRef.current)!=null?r:te,me=S?(a=re.rect)!=null?a:le:null,he=!!(re.nodeRef.current&&re.rect),ie=Cv(he?null:le),xe=Op(se?pt(se):null),pe=Av(S?H??te:null),De=Mv(pe),gt=Up(b,{transform:{x:T.x-ie.x,y:T.y-ie.y,scaleX:1,scaleY:1},activatorEvent:C,active:E,activeNodeRect:le,containerNodeRect:Z,draggingNodeRect:me,over:L.current.over,overlayNodeRect:re.rect,scrollableAncestors:pe,scrollableAncestorRects:De,windowRect:xe}),Ie=K?ir(K,T):null,ke=Dv(pe),ls=wm(ke),fn=wm(ke,[le]),hs=ir(gt,ls),rt=me?Kb(me,gt):null,Es=E&&rt?m({active:E,collisionRect:rt,droppableRects:q,droppableContainers:O,pointerCoordinates:Ie}):null,Ms=qb(Es,"id"),[Mt,Ls]=d.useState(null),$a=he?gt:ir(gt,fn),Oo=Qb($a,(l=Mt==null?void 0:Mt.rect)!=null?l:null,le),Cr=d.useRef(null),On=d.useCallback((Ge,Ke)=>{let{sensor:ct,options:Vt}=Ke;if(V.current==null)return;const Y=D.get(V.current);if(!Y)return;const ae=Ge.nativeEvent,ye=new ct({active:V.current,activeNode:Y,event:ae,options:Vt,context:L,onAbort(Ce){if(!D.get(Ce))return;const{onDragAbort:Ye}=P.current,Lt={id:Ce};Ye==null||Ye(Lt),h({type:"onDragAbort",event:Lt})},onPending(Ce,Ze,Ye,Lt){if(!D.get(Ce))return;const{onDragPending:Is}=P.current,Rs={id:Ce,constraint:Ze,initialCoordinates:Ye,offset:Lt};Is==null||Is(Rs),h({type:"onDragPending",event:Rs})},onStart(Ce){const Ze=V.current;if(Ze==null)return;const Ye=D.get(Ze);if(!Ye)return;const{onDragStart:Lt}=P.current,Ps={activatorEvent:ae,active:{id:Ze,data:Ye.data,rect:I}};Zn.unstable_batchedUpdates(()=>{Lt==null||Lt(Ps),w(Ws.Initializing),v({type:Ve.DragStart,initialCoordinates:Ce,active:Ze}),h({type:"onDragStart",event:Ps}),M(Cr.current),$(ae)})},onMove(Ce){v({type:Ve.DragMove,coordinates:Ce})},onEnd:_e(Ve.DragEnd),onCancel:_e(Ve.DragCancel)});Cr.current=ye;function _e(Ce){return async function(){const{active:Ye,collisions:Lt,over:Ps,scrollAdjustedTranslate:Is}=L.current;let Rs=null;if(Ye&&Is){const{cancelDrop:Ar}=P.current;Rs={activatorEvent:ae,active:Ye,collisions:Lt,delta:Is,over:Ps},Ce===Ve.DragEnd&&typeof Ar=="function"&&await Promise.resolve(Ar(Rs))&&(Ce=Ve.DragCancel)}V.current=null,Zn.unstable_batchedUpdates(()=>{v({type:Ce}),w(Ws.Uninitialized),Ls(null),M(null),$(null),Cr.current=null;const Ar=Ce===Ve.DragEnd?"onDragEnd":"onDragCancel";if(Rs){const Uo=P.current[Ar];Uo==null||Uo(Rs),h({type:Ar,event:Rs})}})}}},[D]),Fo=d.useCallback((Ge,Ke)=>(ct,Vt)=>{const Y=ct.nativeEvent,ae=D.get(Vt);if(V.current!==null||!ae||Y.dndKit||Y.defaultPrevented)return;const ye={active:ae};Ge(ct,Ke.options,ye)===!0&&(Y.dndKit={capturedBy:Ke.sensor},V.current=Vt,On(ct,Ke))},[D,On]),Fn=jv(x,Fo);Tv(x),ns(()=>{le&&y===Ws.Initializing&&w(Ws.Initialized)},[le,y]),d.useEffect(()=>{const{onDragMove:Ge}=P.current,{active:Ke,activatorEvent:ct,collisions:Vt,over:Y}=L.current;if(!Ke||!ct)return;const ae={active:Ke,activatorEvent:ct,collisions:Vt,delta:{x:hs.x,y:hs.y},over:Y};Zn.unstable_batchedUpdates(()=>{Ge==null||Ge(ae),h({type:"onDragMove",event:ae})})},[hs.x,hs.y]),d.useEffect(()=>{const{active:Ge,activatorEvent:Ke,collisions:ct,droppableContainers:Vt,scrollAdjustedTranslate:Y}=L.current;if(!Ge||V.current==null||!Ke||!Y)return;const{onDragOver:ae}=P.current,ye=Vt.get(Ms),_e=ye&&ye.rect.current?{id:ye.id,rect:ye.rect.current,data:ye.data,disabled:ye.disabled}:null,Ce={active:Ge,activatorEvent:Ke,collisions:ct,delta:{x:Y.x,y:Y.y},over:_e};Zn.unstable_batchedUpdates(()=>{Ls(_e),ae==null||ae(Ce),h({type:"onDragOver",event:Ce})})},[Ms]),ns(()=>{L.current={activatorEvent:C,active:E,activeNode:te,collisionRect:rt,collisions:Es,droppableRects:q,draggableNodes:D,draggingNode:se,draggingNodeRect:me,droppableContainers:R,over:Mt,scrollableAncestors:pe,scrollAdjustedTranslate:hs},I.current={initial:me,translated:rt}},[E,te,Es,rt,D,se,me,q,R,Mt,pe,hs]),fv({...G,delta:T,draggingRect:rt,pointerCoordinates:Ie,scrollableAncestors:pe,scrollableAncestorRects:De});const Oa=d.useMemo(()=>({active:E,activeNode:te,activeNodeRect:le,activatorEvent:C,collisions:Es,containerNodeRect:Z,dragOverlay:re,draggableNodes:D,droppableContainers:R,droppableRects:q,over:Mt,measureDroppableContainers:ee,scrollableAncestors:pe,scrollableAncestorRects:De,measuringConfiguration:U,measuringScheduled:z,windowRect:xe}),[E,te,le,C,Es,Z,re,D,R,q,Mt,ee,pe,De,U,z,xe]),_o=d.useMemo(()=>({activatorEvent:C,activators:Fn,active:E,activeNodeRect:le,ariaDescribedById:{draggable:W},dispatch:v,draggableNodes:D,over:Mt,measureDroppableContainers:ee}),[C,Fn,E,le,v,W,D,Mt,ee]);return ve.createElement(kp.Provider,{value:j},ve.createElement(Ra.Provider,{value:_o},ve.createElement(zp.Provider,{value:Oa},ve.createElement(Ro.Provider,{value:Oo},u)),ve.createElement(Fv,{disabled:(i==null?void 0:i.restoreFocus)===!1})),ve.createElement(_b,{...i,hiddenTextDescribedById:W}));function zo(){const Ge=(F==null?void 0:F.autoScrollEnabled)===!1,Ke=typeof c=="object"?c.enabled===!1:c===!1,ct=S&&!Ge&&!Ke;return typeof c=="object"?{...c,enabled:ct}:{enabled:ct}}}),Bv=d.createContext(null),km="button",Hv="Draggable";function Wv(t){let{id:s,data:n,disabled:r=!1,attributes:a}=t;const l=Ia(Hv),{activators:o,activatorEvent:i,active:c,activeNodeRect:u,ariaDescribedById:x,draggableNodes:m,over:p}=d.useContext(Ra),{role:b=km,roleDescription:k="draggable",tabIndex:g=0}=a??{},N=(c==null?void 0:c.id)===s,v=d.useContext(N?Ro:Bv),[h,j]=to(),[y,w]=to(),S=Ev(o,s),A=Sa(n);ns(()=>(m.set(s,{id:s,key:l,node:h,activatorNode:y,data:A}),()=>{const T=m.get(s);T&&T.key===l&&m.delete(s)}),[m,s]);const D=d.useMemo(()=>({role:b,tabIndex:g,"aria-disabled":r,"aria-pressed":N&&b===km?!0:void 0,"aria-roledescription":k,"aria-describedby":x.draggable}),[r,b,g,N,k,x.draggable]);return{active:c,activatorEvent:i,activeNodeRect:u,attributes:D,isDragging:N,listeners:r?void 0:S,node:h,over:p,setNodeRef:j,setActivatorNodeRef:w,transform:v}}function Bp(){return d.useContext(zp)}const Vv="Droppable",qv={timeout:25};function Gv(t){let{data:s,disabled:n=!1,id:r,resizeObserverConfig:a}=t;const l=Ia(Vv),{active:o,dispatch:i,over:c,measureDroppableContainers:u}=d.useContext(Ra),x=d.useRef({disabled:n}),m=d.useRef(!1),p=d.useRef(null),b=d.useRef(null),{disabled:k,updateMeasurementsFor:g,timeout:N}={...qv,...a},v=Sa(g??r),h=d.useCallback(()=>{if(!m.current){m.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{u(Array.isArray(v.current)?v.current:[v.current]),b.current=null},N)},[N]),j=Io({callback:h,disabled:k||!o}),y=d.useCallback((D,T)=>{j&&(T&&(j.unobserve(T),m.current=!1),D&&j.observe(D))},[j]),[w,S]=to(y),A=Sa(s);return d.useEffect(()=>{!j||!w.current||(j.disconnect(),m.current=!1,j.observe(w.current))},[w,j]),d.useEffect(()=>(i({type:Ve.RegisterDroppable,element:{id:r,key:l,disabled:n,node:w,rect:p,data:A}}),()=>i({type:Ve.UnregisterDroppable,key:l,id:r})),[r]),d.useEffect(()=>{n!==x.current.disabled&&(i({type:Ve.SetDroppableDisabled,id:r,key:l,disabled:n}),x.current.disabled=n)},[r,l,n,i]),{active:o,rect:p,isOver:(c==null?void 0:c.id)===r,node:w,over:c,setNodeRef:S}}function Yv(t){let{animation:s,children:n}=t;const[r,a]=d.useState(null),[l,o]=d.useState(null),i=so(n);return!n&&!r&&i&&a(i),ns(()=>{if(!l)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){a(null);return}Promise.resolve(s(u,l)).then(()=>{a(null)})},[s,r,l]),ve.createElement(ve.Fragment,null,n,r?d.cloneElement(r,{ref:o}):null)}const Jv={x:0,y:0,scaleX:1,scaleY:1};function Qv(t){let{children:s}=t;return ve.createElement(Ra.Provider,{value:_p},ve.createElement(Ro.Provider,{value:Jv},s))}const Xv={position:"fixed",touchAction:"none"},Kv=t=>Po(t)?"transform 250ms ease":void 0,Zv=d.forwardRef((t,s)=>{let{as:n,activatorEvent:r,adjustScale:a,children:l,className:o,rect:i,style:c,transform:u,transition:x=Kv}=t;if(!i)return null;const m=a?u:{...u,scaleX:1,scaleY:1},p={...Xv,width:i.width,height:i.height,top:i.top,left:i.left,transform:un.Transform.toString(m),transformOrigin:a&&r?Hb(r,i):void 0,transition:typeof x=="function"?x(r):x,...c};return ve.createElement(n,{className:o,style:p,ref:s},l)}),ej=t=>s=>{let{active:n,dragOverlay:r}=s;const a={},{styles:l,className:o}=t;if(l!=null&&l.active)for(const[i,c]of Object.entries(l.active))c!==void 0&&(a[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(l!=null&&l.dragOverlay)for(const[i,c]of Object.entries(l.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(a))n.node.style.setProperty(c,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},tj=t=>{let{transform:{initial:s,final:n}}=t;return[{transform:un.Transform.toString(s)},{transform:un.Transform.toString(n)}]},sj={duration:250,easing:"ease",keyframes:tj,sideEffects:ej({styles:{active:{opacity:"0"}}})};function nj(t){let{config:s,draggableNodes:n,droppableContainers:r,measuringConfiguration:a}=t;return Lo((l,o)=>{if(s===null)return;const i=n.get(l);if(!i)return;const c=i.node.current;if(!c)return;const u=Fp(o);if(!u)return;const{transform:x}=pt(o).getComputedStyle(o),m=Ap(x);if(!m)return;const p=typeof s=="function"?s:rj(s);return Ip(c,a.draggable.measure),p({active:{id:l,data:i.data,node:c,rect:a.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:o,rect:a.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:a,transform:m})})}function rj(t){const{duration:s,easing:n,sideEffects:r,keyframes:a}={...sj,...t};return l=>{let{active:o,dragOverlay:i,transform:c,...u}=l;if(!s)return;const x={x:i.rect.left-o.rect.left,y:i.rect.top-o.rect.top},m={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/i.rect.height:1},p={x:c.x-x.x,y:c.y-x.y,...m},b=a({...u,active:o,dragOverlay:i,transform:{initial:c,final:p}}),[k]=b,g=b[b.length-1];if(JSON.stringify(k)===JSON.stringify(g))return;const N=r==null?void 0:r({active:o,dragOverlay:i,...u}),v=i.node.animate(b,{duration:s,easing:n,fill:"forwards"});return new Promise(h=>{v.onfinish=()=>{N==null||N(),h()}})}}let Cm=0;function aj(t){return d.useMemo(()=>{if(t!=null)return Cm++,Cm},[t])}const lj=ve.memo(t=>{let{adjustScale:s=!1,children:n,dropAnimation:r,style:a,transition:l,modifiers:o,wrapperElement:i="div",className:c,zIndex:u=999}=t;const{activatorEvent:x,active:m,activeNodeRect:p,containerNodeRect:b,draggableNodes:k,droppableContainers:g,dragOverlay:N,over:v,measuringConfiguration:h,scrollableAncestors:j,scrollableAncestorRects:y,windowRect:w}=Bp(),S=d.useContext(Ro),A=aj(m==null?void 0:m.id),D=Up(o,{activatorEvent:x,active:m,activeNodeRect:p,containerNodeRect:b,draggingNodeRect:N.rect,over:v,overlayNodeRect:N.rect,scrollableAncestors:j,scrollableAncestorRects:y,transform:S,windowRect:w}),T=Fc(p),R=nj({config:r,draggableNodes:k,droppableContainers:g,measuringConfiguration:h}),_=T?N.setRef:void 0;return ve.createElement(Qv,null,ve.createElement(Yv,{animation:R},m&&A?ve.createElement(Zv,{key:A,id:m.id,ref:_,as:i,activatorEvent:x,adjustScale:s,className:c,transition:l,rect:T,style:{zIndex:u,...a},transform:D},n):null))});function Hp(t,s,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(s,1)[0]),r}function oj(t,s){return t.reduce((n,r,a)=>{const l=s.get(r);return l&&(n[a]=l),n},Array(t.length))}function ol(t){return t!==null&&t>=0}function ij(t,s){if(t===s)return!0;if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==s[n])return!1;return!0}function dj(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Wp=t=>{let{rects:s,activeIndex:n,overIndex:r,index:a}=t;const l=Hp(s,r,n),o=s[a],i=l[a];return!i||!o?null:{x:i.left-o.left,y:i.top-o.top,scaleX:i.width/o.width,scaleY:i.height/o.height}},il={scaleX:1,scaleY:1},cj=t=>{var s;let{activeIndex:n,activeNodeRect:r,index:a,rects:l,overIndex:o}=t;const i=(s=l[n])!=null?s:r;if(!i)return null;if(a===n){const u=l[o];return u?{x:0,y:n<o?u.top+u.height-(i.top+i.height):u.top-i.top,...il}:null}const c=uj(l,a,n);return a>n&&a<=o?{x:0,y:-i.height-c,...il}:a<n&&a>=o?{x:0,y:i.height+c,...il}:{x:0,y:0,...il}};function uj(t,s,n){const r=t[s],a=t[s-1],l=t[s+1];return r?n<s?a?r.top-(a.top+a.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const Vp="Sortable",qp=ve.createContext({activeIndex:-1,containerId:Vp,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Wp,disabled:{draggable:!1,droppable:!1}});function mj(t){let{children:s,id:n,items:r,strategy:a=Wp,disabled:l=!1}=t;const{active:o,dragOverlay:i,droppableRects:c,over:u,measureDroppableContainers:x}=Bp(),m=Ia(Vp,n),p=i.rect!==null,b=d.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),k=o!=null,g=o?b.indexOf(o.id):-1,N=u?b.indexOf(u.id):-1,v=d.useRef(b),h=!ij(b,v.current),j=N!==-1&&g===-1||h,y=dj(l);ns(()=>{h&&k&&x(b)},[h,b,k,x]),d.useEffect(()=>{v.current=b},[b]);const w=d.useMemo(()=>({activeIndex:g,containerId:m,disabled:y,disableTransforms:j,items:b,overIndex:N,useDragOverlay:p,sortedRects:oj(b,c),strategy:a}),[g,m,y.draggable,y.droppable,j,b,N,c,p,a]);return ve.createElement(qp.Provider,{value:w},s)}const xj=t=>{let{id:s,items:n,activeIndex:r,overIndex:a}=t;return Hp(n,r,a).indexOf(s)},hj=t=>{let{containerId:s,isSorting:n,wasDragging:r,index:a,items:l,newIndex:o,previousItems:i,previousContainerId:c,transition:u}=t;return!u||!r||i!==l&&a===o?!1:n?!0:o!==a&&s===c},pj={duration:200,easing:"ease"},Gp="transform",gj=un.Transition.toString({property:Gp,duration:0,easing:"linear"}),fj={roleDescription:"sortable"};function yj(t){let{disabled:s,index:n,node:r,rect:a}=t;const[l,o]=d.useState(null),i=d.useRef(n);return ns(()=>{if(!s&&n!==i.current&&r.current){const c=a.current;if(c){const u=kr(r.current,{ignoreTransform:!0}),x={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(x.x||x.y)&&o(x)}}n!==i.current&&(i.current=n)},[s,n,r,a]),d.useEffect(()=>{l&&o(null)},[l]),l}function Yp(t){let{animateLayoutChanges:s=hj,attributes:n,disabled:r,data:a,getNewIndex:l=xj,id:o,strategy:i,resizeObserverConfig:c,transition:u=pj}=t;const{items:x,containerId:m,activeIndex:p,disabled:b,disableTransforms:k,sortedRects:g,overIndex:N,useDragOverlay:v,strategy:h}=d.useContext(qp),j=bj(r,b),y=x.indexOf(o),w=d.useMemo(()=>({sortable:{containerId:m,index:y,items:x},...a}),[m,a,y,x]),S=d.useMemo(()=>x.slice(x.indexOf(o)),[x,o]),{rect:A,node:D,isOver:T,setNodeRef:R}=Gv({id:o,data:w,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:_,activatorEvent:I,activeNodeRect:E,attributes:V,setNodeRef:F,listeners:M,isDragging:C,over:$,setActivatorNodeRef:P,transform:W}=Wv({id:o,data:w,attributes:{...fj,...n},disabled:j.draggable}),O=Cb(R,F),U=!!_,q=U&&!k&&ol(p)&&ol(N),ee=!v&&C,z=ee&&q?W:null,K=q?z??(i??h)({rects:g,activeNodeRect:E,activeIndex:p,overIndex:N,index:y}):null,G=ol(p)&&ol(N)?l({id:o,items:x,activeIndex:p,overIndex:N}):y,oe=_==null?void 0:_.id,le=d.useRef({activeId:oe,items:x,newIndex:G,containerId:m}),Z=x!==le.current.items,L=s({active:_,containerId:m,isDragging:C,isSorting:U,id:o,index:y,items:x,newIndex:le.current.newIndex,previousItems:le.current.items,previousContainerId:le.current.containerId,transition:u,wasDragging:le.current.activeId!=null}),H=yj({disabled:!L,index:y,node:D,rect:A});return d.useEffect(()=>{U&&le.current.newIndex!==G&&(le.current.newIndex=G),m!==le.current.containerId&&(le.current.containerId=m),x!==le.current.items&&(le.current.items=x)},[U,G,m,x]),d.useEffect(()=>{if(oe===le.current.activeId)return;if(oe!=null&&le.current.activeId==null){le.current.activeId=oe;return}const se=setTimeout(()=>{le.current.activeId=oe},50);return()=>clearTimeout(se)},[oe]),{active:_,activeIndex:p,attributes:V,data:w,rect:A,index:y,newIndex:G,items:x,isOver:T,isSorting:U,isDragging:C,listeners:M,node:D,overIndex:N,over:$,setNodeRef:O,setActivatorNodeRef:P,setDroppableNodeRef:R,setDraggableNodeRef:F,transform:H??K,transition:re()};function re(){if(H||Z&&le.current.newIndex===y)return gj;if(!(ee&&!Po(I)||!u)&&(U||L))return un.Transition.toString({...u,property:Gp})}}function bj(t,s){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:s.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:s.droppable}}Ne.Down,Ne.Right,Ne.Up,Ne.Left;const Jp=6048e5,vj=864e5,Am=Symbol.for("constructDateFrom");function mn(t,s){return typeof t=="function"?t(s):t&&typeof t=="object"&&Am in t?t[Am](s):t instanceof Date?new t.constructor(s):new Date(s)}function as(t,s){return mn(s||t,t)}let jj={};function $o(){return jj}function Ca(t,s){var i,c,u,x;const n=$o(),r=(s==null?void 0:s.weekStartsOn)??((c=(i=s==null?void 0:s.locale)==null?void 0:i.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((x=(u=n.locale)==null?void 0:u.options)==null?void 0:x.weekStartsOn)??0,a=as(t,s==null?void 0:s.in),l=a.getDay(),o=(l<r?7:0)+l-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function oo(t,s){return Ca(t,{...s,weekStartsOn:1})}function Qp(t,s){const n=as(t,s==null?void 0:s.in),r=n.getFullYear(),a=mn(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const l=oo(a),o=mn(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const i=oo(o);return n.getTime()>=l.getTime()?r+1:n.getTime()>=i.getTime()?r:r-1}function Dm(t){const s=as(t),n=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return n.setUTCFullYear(s.getFullYear()),+t-+n}function Nj(t,...s){const n=mn.bind(null,s.find(r=>typeof r=="object"));return s.map(n)}function Tm(t,s){const n=as(t,s==null?void 0:s.in);return n.setHours(0,0,0,0),n}function wj(t,s,n){const[r,a]=Nj(n==null?void 0:n.in,t,s),l=Tm(r),o=Tm(a),i=+l-Dm(l),c=+o-Dm(o);return Math.round((i-c)/vj)}function Sj(t,s){const n=Qp(t,s),r=mn(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),oo(r)}function kj(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Cj(t){return!(!kj(t)&&typeof t!="number"||isNaN(+as(t)))}function Aj(t,s){const n=as(t,s==null?void 0:s.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Dj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Tj=(t,s,n)=>{let r;const a=Dj[t];return typeof a=="string"?r=a:s===1?r=a.one:r=a.other.replace("{{count}}",s.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function wi(t){return(s={})=>{const n=s.width?String(s.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Ej={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Mj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Lj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pj={date:wi({formats:Ej,defaultWidth:"full"}),time:wi({formats:Mj,defaultWidth:"full"}),dateTime:wi({formats:Lj,defaultWidth:"full"})},Ij={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Rj=(t,s,n,r)=>Ij[t];function $r(t){return(s,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,i=n!=null&&n.width?String(n.width):o;a=t.formattingValues[i]||t.formattingValues[o]}else{const o=t.defaultWidth,i=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[i]||t.values[o]}const l=t.argumentCallback?t.argumentCallback(s):s;return a[l]}}const $j={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Oj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Fj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_j={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Uj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Bj=(t,s)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Hj={ordinalNumber:Bj,era:$r({values:$j,defaultWidth:"wide"}),quarter:$r({values:Oj,defaultWidth:"wide",argumentCallback:t=>t-1}),month:$r({values:Fj,defaultWidth:"wide"}),day:$r({values:_j,defaultWidth:"wide"}),dayPeriod:$r({values:zj,defaultWidth:"wide",formattingValues:Uj,defaultFormattingWidth:"wide"})};function Or(t){return(s,n={})=>{const r=n.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],l=s.match(a);if(!l)return null;const o=l[0],i=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(i)?Vj(i,m=>m.test(o)):Wj(i,m=>m.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const x=s.slice(o.length);return{value:u,rest:x}}}function Wj(t,s){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&s(t[n]))return n}function Vj(t,s){for(let n=0;n<t.length;n++)if(s(t[n]))return n}function qj(t){return(s,n={})=>{const r=s.match(t.matchPattern);if(!r)return null;const a=r[0],l=s.match(t.parsePattern);if(!l)return null;let o=t.valueCallback?t.valueCallback(l[0]):l[0];o=n.valueCallback?n.valueCallback(o):o;const i=s.slice(a.length);return{value:o,rest:i}}}const Gj=/^(\d+)(th|st|nd|rd)?/i,Yj=/\d+/i,Jj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Qj={any:[/^b/i,/^(a|c)/i]},Xj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Kj={any:[/1/i,/2/i,/3/i,/4/i]},Zj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},eN={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tN={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},sN={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nN={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rN={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},aN={ordinalNumber:qj({matchPattern:Gj,parsePattern:Yj,valueCallback:t=>parseInt(t,10)}),era:Or({matchPatterns:Jj,defaultMatchWidth:"wide",parsePatterns:Qj,defaultParseWidth:"any"}),quarter:Or({matchPatterns:Xj,defaultMatchWidth:"wide",parsePatterns:Kj,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Or({matchPatterns:Zj,defaultMatchWidth:"wide",parsePatterns:eN,defaultParseWidth:"any"}),day:Or({matchPatterns:tN,defaultMatchWidth:"wide",parsePatterns:sN,defaultParseWidth:"any"}),dayPeriod:Or({matchPatterns:nN,defaultMatchWidth:"any",parsePatterns:rN,defaultParseWidth:"any"})},lN={code:"en-US",formatDistance:Tj,formatLong:Pj,formatRelative:Rj,localize:Hj,match:aN,options:{weekStartsOn:0,firstWeekContainsDate:1}};function oN(t,s){const n=as(t,s==null?void 0:s.in);return wj(n,Aj(n))+1}function iN(t,s){const n=as(t,s==null?void 0:s.in),r=+oo(n)-+Sj(n);return Math.round(r/Jp)+1}function Xp(t,s){var x,m,p,b;const n=as(t,s==null?void 0:s.in),r=n.getFullYear(),a=$o(),l=(s==null?void 0:s.firstWeekContainsDate)??((m=(x=s==null?void 0:s.locale)==null?void 0:x.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((b=(p=a.locale)==null?void 0:p.options)==null?void 0:b.firstWeekContainsDate)??1,o=mn((s==null?void 0:s.in)||t,0);o.setFullYear(r+1,0,l),o.setHours(0,0,0,0);const i=Ca(o,s),c=mn((s==null?void 0:s.in)||t,0);c.setFullYear(r,0,l),c.setHours(0,0,0,0);const u=Ca(c,s);return+n>=+i?r+1:+n>=+u?r:r-1}function dN(t,s){var i,c,u,x;const n=$o(),r=(s==null?void 0:s.firstWeekContainsDate)??((c=(i=s==null?void 0:s.locale)==null?void 0:i.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((x=(u=n.locale)==null?void 0:u.options)==null?void 0:x.firstWeekContainsDate)??1,a=Xp(t,s),l=mn((s==null?void 0:s.in)||t,0);return l.setFullYear(a,0,r),l.setHours(0,0,0,0),Ca(l,s)}function cN(t,s){const n=as(t,s==null?void 0:s.in),r=+Ca(n,s)-+dN(n,s);return Math.round(r/Jp)+1}function we(t,s){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(s,"0");return n+r}const Fs={y(t,s){const n=t.getFullYear(),r=n>0?n:1-n;return we(s==="yy"?r%100:r,s.length)},M(t,s){const n=t.getMonth();return s==="M"?String(n+1):we(n+1,2)},d(t,s){return we(t.getDate(),s.length)},a(t,s){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,s){return we(t.getHours()%12||12,s.length)},H(t,s){return we(t.getHours(),s.length)},m(t,s){return we(t.getMinutes(),s.length)},s(t,s){return we(t.getSeconds(),s.length)},S(t,s){const n=s.length,r=t.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return we(a,s.length)}},zn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Em={G:function(t,s,n){const r=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,s,n){if(s==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Fs.y(t,s)},Y:function(t,s,n,r){const a=Xp(t,r),l=a>0?a:1-a;if(s==="YY"){const o=l%100;return we(o,2)}return s==="Yo"?n.ordinalNumber(l,{unit:"year"}):we(l,s.length)},R:function(t,s){const n=Qp(t);return we(n,s.length)},u:function(t,s){const n=t.getFullYear();return we(n,s.length)},Q:function(t,s,n){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(r);case"QQ":return we(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,s,n){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(r);case"qq":return we(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,s,n){const r=t.getMonth();switch(s){case"M":case"MM":return Fs.M(t,s);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,s,n){const r=t.getMonth();switch(s){case"L":return String(r+1);case"LL":return we(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,s,n,r){const a=cN(t,r);return s==="wo"?n.ordinalNumber(a,{unit:"week"}):we(a,s.length)},I:function(t,s,n){const r=iN(t);return s==="Io"?n.ordinalNumber(r,{unit:"week"}):we(r,s.length)},d:function(t,s,n){return s==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Fs.d(t,s)},D:function(t,s,n){const r=oN(t);return s==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):we(r,s.length)},E:function(t,s,n){const r=t.getDay();switch(s){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,s,n,r){const a=t.getDay(),l=(a-r.weekStartsOn+8)%7||7;switch(s){case"e":return String(l);case"ee":return we(l,2);case"eo":return n.ordinalNumber(l,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,s,n,r){const a=t.getDay(),l=(a-r.weekStartsOn+8)%7||7;switch(s){case"c":return String(l);case"cc":return we(l,s.length);case"co":return n.ordinalNumber(l,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,s,n){const r=t.getDay(),a=r===0?7:r;switch(s){case"i":return String(a);case"ii":return we(a,s.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,s,n){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,s,n){const r=t.getHours();let a;switch(r===12?a=zn.noon:r===0?a=zn.midnight:a=r/12>=1?"pm":"am",s){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,s,n){const r=t.getHours();let a;switch(r>=17?a=zn.evening:r>=12?a=zn.afternoon:r>=4?a=zn.morning:a=zn.night,s){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,s,n){if(s==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Fs.h(t,s)},H:function(t,s,n){return s==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Fs.H(t,s)},K:function(t,s,n){const r=t.getHours()%12;return s==="Ko"?n.ordinalNumber(r,{unit:"hour"}):we(r,s.length)},k:function(t,s,n){let r=t.getHours();return r===0&&(r=24),s==="ko"?n.ordinalNumber(r,{unit:"hour"}):we(r,s.length)},m:function(t,s,n){return s==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Fs.m(t,s)},s:function(t,s,n){return s==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Fs.s(t,s)},S:function(t,s){return Fs.S(t,s)},X:function(t,s,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(s){case"X":return Lm(r);case"XXXX":case"XX":return vn(r);case"XXXXX":case"XXX":default:return vn(r,":")}},x:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"x":return Lm(r);case"xxxx":case"xx":return vn(r);case"xxxxx":case"xxx":default:return vn(r,":")}},O:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+Mm(r,":");case"OOOO":default:return"GMT"+vn(r,":")}},z:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+Mm(r,":");case"zzzz":default:return"GMT"+vn(r,":")}},t:function(t,s,n){const r=Math.trunc(+t/1e3);return we(r,s.length)},T:function(t,s,n){return we(+t,s.length)}};function Mm(t,s=""){const n=t>0?"-":"+",r=Math.abs(t),a=Math.trunc(r/60),l=r%60;return l===0?n+String(a):n+String(a)+s+we(l,2)}function Lm(t,s){return t%60===0?(t>0?"-":"+")+we(Math.abs(t)/60,2):vn(t,s)}function vn(t,s=""){const n=t>0?"-":"+",r=Math.abs(t),a=we(Math.trunc(r/60),2),l=we(r%60,2);return n+a+s+l}const Pm=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},Kp=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},uN=(t,s)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return Pm(t,s);let l;switch(r){case"P":l=s.dateTime({width:"short"});break;case"PP":l=s.dateTime({width:"medium"});break;case"PPP":l=s.dateTime({width:"long"});break;case"PPPP":default:l=s.dateTime({width:"full"});break}return l.replace("{{date}}",Pm(r,s)).replace("{{time}}",Kp(a,s))},mN={p:Kp,P:uN},xN=/^D+$/,hN=/^Y+$/,pN=["D","DD","YY","YYYY"];function gN(t){return xN.test(t)}function fN(t){return hN.test(t)}function yN(t,s,n){const r=bN(t,s,n);if(console.warn(r),pN.includes(t))throw new RangeError(r)}function bN(t,s,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const vN=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jN=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,NN=/^'([^]*?)'?$/,wN=/''/g,SN=/[a-zA-Z]/;function Fr(t,s,n){var x,m,p,b;const r=$o(),a=r.locale??lN,l=r.firstWeekContainsDate??((m=(x=r.locale)==null?void 0:x.options)==null?void 0:m.firstWeekContainsDate)??1,o=r.weekStartsOn??((b=(p=r.locale)==null?void 0:p.options)==null?void 0:b.weekStartsOn)??0,i=as(t,n==null?void 0:n.in);if(!Cj(i))throw new RangeError("Invalid time value");let c=s.match(jN).map(k=>{const g=k[0];if(g==="p"||g==="P"){const N=mN[g];return N(k,a.formatLong)}return k}).join("").match(vN).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const g=k[0];if(g==="'")return{isToken:!1,value:kN(k)};if(Em[g])return{isToken:!0,value:k};if(g.match(SN))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:k}});a.localize.preprocessor&&(c=a.localize.preprocessor(i,c));const u={firstWeekContainsDate:l,weekStartsOn:o,locale:a};return c.map(k=>{if(!k.isToken)return k.value;const g=k.value;(fN(g)||gN(g))&&yN(g,s,String(t));const N=Em[g[0]];return N(i,g,a.localize,u)}).join("")}function kN(t){const s=t.match(NN);return s?s[1].replace(wN,"'"):t}const CN={Low:"#60A5FA",Medium:"#FBBF24",High:"#F97316",Critical:"#EF4444"},AN={"To Do":"#9CA3AF","In Progress":"#3B82F6","In Review":"#8B5CF6",Completed:"#22C55E",Backlog:"#6B7280"},DN=["Admission","Accounting","Recruitment","Digital Marketing","Motion Graphics","SEO","Social Media","Content Creation","Administration","Management"],TN=["Low","Medium","High","Critical"],EN=["To Do","In Progress","In Review","Completed"];function MN({task:t,taskId:s,isOpen:n,onClose:r,onUpdate:a}){var V,F,M,C,$,P,W,O,U,q,ee;const{user:l}=fe(),[o,i]=d.useState(t||null),[c,u]=d.useState(!t),[x,m]=d.useState(!1),[p,b]=d.useState({}),[k,g]=d.useState(""),[N,v]=d.useState(""),[h,j]=d.useState([]);d.useEffect(()=>{var z;t&&(i(t),b({title:t.title,description:t.description,status:t.status,priority:t.priority,dueDate:t.dueDate?t.dueDate.split("T")[0]:"",tags:t.tags||[],assignedTo:((z=t.assignedTo)==null?void 0:z.map(te=>te._id||te))||[]}),u(!1))},[t]),d.useEffect(()=>{n&&(s||t)&&(t||y(),w())},[n,s,t]);const y=async()=>{var z;if(s)try{u(!0);const G=((["SuperAdmin","Admin"].includes(l==null?void 0:l.role)?await B.listAllTasks():await B.listMyTasks()).tasks||[]).find(oe=>oe._id===s);G&&(i(G),b({title:G.title,description:G.description,status:G.status,priority:G.priority,dueDate:G.dueDate?G.dueDate.split("T")[0]:"",tags:G.tags||[],assignedTo:((z=G.assignedTo)==null?void 0:z.map(oe=>oe._id||oe))||[]}))}catch(te){console.error("Error loading task:",te)}finally{u(!1)}},w=async()=>{try{const z=await B.listUsers(),te=z.users||z.data||[];j(te)}catch(z){console.error("Error loading users:",z)}},S=async()=>{try{await B.updateTask(s,p),await y(),m(!1),a&&a()}catch(z){console.error("Error updating task:",z),alert("Failed to update task")}},A=async()=>{if(k.trim())try{await B.addTaskComment(s,{text:k}),g(""),await y()}catch(z){console.error("Error adding comment:",z),alert("Failed to add comment")}},D=async(z,te)=>{try{await B.updateChecklistItem(s,z,te),await y()}catch(K){console.error("Error updating checklist:",K)}},T=async()=>{if(N.trim())try{const z=[...o.checklist||[],{text:N,completed:!1}];await B.updateTask(s,{checklist:z}),v(""),await y()}catch(z){console.error("Error adding checklist item:",z)}},R=async()=>{if(confirm("Are you sure you want to delete this task?"))try{await B.deleteTask(s),a&&a(),r()}catch(z){console.error("Error deleting task:",z),alert("Failed to delete task")}},_=(l==null?void 0:l.role)==="SuperAdmin"||(l==null?void 0:l.role)==="Admin",I=(V=o==null?void 0:o.assignedTo)==null?void 0:V.some(z=>z._id===(l==null?void 0:l._id)),E=_||((F=o==null?void 0:o.assignedBy)==null?void 0:F._id)===(l==null?void 0:l._id)||I;return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Task Details"}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(Eo,{size:20})})]}),c?e.jsx("div",{className:"p-8 text-center",children:"Loading..."}):o?e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),x?e.jsx("input",{type:"text",value:p.title,onChange:z=>b({...p,title:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:o.title})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(nm,{size:16})," Status"]}),x?e.jsx("select",{value:p.status,onChange:z=>b({...p,status:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:EN.map(z=>e.jsx("option",{value:z,children:z},z))}):e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-white text-sm font-medium",style:{backgroundColor:AN[o.status]},children:o.status})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(nm,{size:16})," Priority"]}),x?e.jsx("select",{value:p.priority,onChange:z=>b({...p,priority:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:TN.map(z=>e.jsx("option",{value:z,children:z},z))}):e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-white text-sm font-medium",style:{backgroundColor:CN[o.priority]},children:o.priority})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(ge,{size:16})," Due Date"]}),x?e.jsx("input",{type:"date",value:p.dueDate,onChange:z=>b({...p,dueDate:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}):o.dueDate?e.jsx("p",{className:"text-gray-900",children:Fr(new Date(o.dueDate),"MMM dd, yyyy")}):e.jsx("p",{className:"text-gray-400",children:"No due date"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),x?e.jsx("textarea",{value:p.description,onChange:z=>b({...p,description:z.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:o.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Me,{size:16})," Assigned To"]}),x?e.jsx("select",{multiple:!0,value:p.assignedTo,onChange:z=>b({...p,assignedTo:Array.from(z.target.selectedOptions,te=>te.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",size:5,children:h.map(z=>e.jsx("option",{value:z._id,children:z.name||z.fullName},z._id))}):e.jsx("div",{className:"flex flex-wrap gap-2",children:(M=o.assignedTo)==null?void 0:M.map(z=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[e.jsx(fr,{size:14}),z.name||z.fullName]},z._id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Mc,{size:16})," Tags"]}),x?e.jsx("div",{className:"flex flex-wrap gap-2",children:DN.map(z=>e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:p.tags.includes(z),onChange:te=>{te.target.checked?b({...p,tags:[...p.tags,z]}):b({...p,tags:p.tags.filter(K=>K!==z)})},className:"mr-2"}),e.jsx("span",{className:"text-sm",children:z})]},z))}):e.jsx("div",{className:"flex flex-wrap gap-2",children:(C=o.tags)==null?void 0:C.map(z=>e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm",children:z},z))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Cd,{size:16})," Checklist",(($=o.checklist)==null?void 0:$.length)>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",o.checklist.filter(z=>z.completed).length,"/",o.checklist.length," completed)"]})]}),e.jsxs("div",{className:"space-y-2",children:[(P=o.checklist)==null?void 0:P.map(z=>e.jsxs("div",{className:"flex items-start gap-2 p-2 hover:bg-gray-50 rounded",children:[e.jsx("input",{type:"checkbox",checked:z.completed,onChange:te=>D(z._id,te.target.checked),disabled:!E,className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm ${z.completed?"line-through text-gray-500":"text-gray-900"}`,children:z.text}),z.completed&&z.completedBy&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Completed by ",z.completedBy.name||z.completedBy.fullName," on ",Fr(new Date(z.completedAt),"MMM dd, yyyy")]})]})]},z._id)),E&&e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("input",{type:"text",value:N,onChange:z=>v(z.target.value),onKeyPress:z=>z.key==="Enter"&&T(),placeholder:"Add checklist item...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:e.jsx(ss,{size:16})})]})]})]}),((W=o.attachments)==null?void 0:W.length)>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Sd,{size:16})," Attachments"]}),e.jsx("div",{className:"space-y-2",children:o.attachments.map(z=>{var te,K;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-md",children:[e.jsx(Sd,{size:16,className:"text-gray-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:z.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded by ",((te=z.uploadedBy)==null?void 0:te.name)||((K=z.uploadedBy)==null?void 0:K.fullName)," on ",Fr(new Date(z.uploadedAt),"MMM dd, yyyy")]})]}),e.jsx("a",{href:z.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-200 rounded transition-colors",children:e.jsx(Ht,{size:16})})]},z._id)})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(jn,{size:16})," Comments (",((O=o.comments)==null?void 0:O.length)||0,")"]}),e.jsx("div",{className:"space-y-4 mb-4",children:(U=o.comments)==null?void 0:U.map(z=>{var te,K,G;return e.jsxs("div",{className:"bg-gray-50 rounded-md p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(fr,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"font-medium text-sm text-gray-900",children:((te=z.author)==null?void 0:te.name)||((K=z.author)==null?void 0:K.fullName)}),e.jsx("span",{className:"text-xs text-gray-500",children:Fr(new Date(z.createdAt),"MMM dd, yyyy HH:mm")})]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:z.text}),((G=z.mentions)==null?void 0:G.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:z.mentions.map(oe=>e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["@",oe.name||oe.fullName]},oe._id))})]},z._id)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{value:k,onChange:z=>g(z.target.value),placeholder:"Add a comment...",rows:2,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:A,disabled:!k.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(eo,{size:16})})]})]}),e.jsx("div",{className:"border-t pt-4 mt-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Assigned By:"})," ",((q=o.assignedBy)==null?void 0:q.name)||((ee=o.assignedBy)==null?void 0:ee.fullName)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",Fr(new Date(o.createdAt),"MMM dd, yyyy")]})]})})]}):e.jsx("div",{className:"p-8 text-center",children:"Task not found"}),!c&&o&&e.jsxs("div",{className:"border-t p-4 flex items-center justify-between bg-gray-50",children:[e.jsx("div",{className:"flex gap-2",children:_&&e.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[e.jsx(cn,{size:16}),"Delete Task"]})}),e.jsx("div",{className:"flex gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{var z;m(!1),b({title:o.title,description:o.description,status:o.status,priority:o.priority,dueDate:o.dueDate?o.dueDate.split("T")[0]:"",tags:o.tags||[],assignedTo:((z=o.assignedTo)==null?void 0:z.map(te=>te._id))||[]})},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]}):e.jsxs(e.Fragment,{children:[E&&e.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Edit Task"}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:"Close"})]})})]})]})}):null}const LN=["Admission","Accounting","Recruitment","Digital Marketing","Motion Graphics","SEO","Social Media","Content Creation","Administration","Management"],PN=["Low","Medium","High","Critical"];function IN({isOpen:t,onClose:s,onCreated:n}){const{user:r}=fe(),[a,l]=d.useState([]),[o,i]=d.useState(!1),[c,u]=d.useState(!1),[x,m]=d.useState({title:"",description:"",assignedTo:[],dueDate:"",priority:"Medium",tags:[],checklist:[]}),[p,b]=d.useState(""),k=(r==null?void 0:r.role)==="SuperAdmin"||(r==null?void 0:r.role)==="Admin";d.useEffect(()=>{t&&(g(),m({title:"",description:"",assignedTo:[],dueDate:"",priority:"Medium",tags:[],checklist:[]}),b(""))},[t]);const g=async()=>{try{const y=await B.listUsers();console.log("Loaded users:",y);const w=y.data||y.users||[];console.log("Users list:",w);const S=w.filter(A=>A.role!=="SuperAdmin");console.log("Filtered users (excluding SuperAdmin):",S),l(S)}catch(y){console.error("Error loading users:",y)}},N=()=>{p.trim()&&(m({...x,checklist:[...x.checklist,{text:p,completed:!1}]}),b(""))},v=y=>{m({...x,checklist:x.checklist.filter((w,S)=>S!==y)})},h=y=>{x.tags.includes(y)?m({...x,tags:x.tags.filter(w=>w!==y)}):m({...x,tags:[...x.tags,y]})},j=async y=>{if(y.preventDefault(),!x.title.trim()){alert("Please enter a task title");return}if(x.assignedTo.length===0){alert("Please assign the task to at least one user");return}i(!0);try{await B.assignTask({title:x.title,description:x.description,assignedTo:x.assignedTo,dueDate:x.dueDate||void 0,priority:x.priority,tags:x.tags,checklist:x.checklist.filter(w=>w.text.trim())}),n&&n(),s()}catch(w){console.error("Error creating task:",w),alert("Failed to create task. Please try again.")}finally{i(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:k?"Assign New Task":"Create New Task"}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",disabled:o,children:e.jsx(Eo,{size:20})})]}),e.jsxs("form",{onSubmit:j,className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Task Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:x.title,onChange:y=>m({...x,title:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task title...",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:y=>m({...x,description:y.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task description..."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[k?"Assign To Employee(s)":"Assign To"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),!k&&e.jsx("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:y=>{const w=y.target.checked;u(w),w&&(r!=null&&r._id)?m({...x,assignedTo:[r._id]}):m({...x,assignedTo:[]})},className:"mr-2 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Assign this task to myself"})]})}),(k||!c)&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{multiple:!0,value:x.assignedTo,onChange:y=>m({...x,assignedTo:Array.from(y.target.selectedOptions,w=>w.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",size:6,required:!c,disabled:!k&&c,children:[e.jsxs("option",{value:"",disabled:!0,className:"text-gray-400",children:["-- Select ",k?"Employee(s)":"User(s)"," --"]}),a.length===0?e.jsx("option",{disabled:!0,children:"Loading users..."}):a.map(y=>e.jsxs("option",{value:y._id,children:[y.name||y.fullName||"Unknown"," (",y.role,")"]},y._id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl (Windows) or Cmd (Mac) to select multiple users"}),k&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Note: SuperAdmins are excluded from the list"})]}),!k&&c&&r&&e.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded",children:e.jsxs("p",{className:"text-sm text-green-900",children:[" Task will be assigned to: ",e.jsx("strong",{children:r.name||r.fullName})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsx("select",{value:x.priority,onChange:y=>m({...x,priority:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:PN.map(y=>e.jsx("option",{value:y,children:y},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),e.jsx("input",{type:"date",value:x.dueDate,onChange:y=>m({...x,dueDate:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:LN.map(y=>e.jsx("button",{type:"button",onClick:()=>h(y),className:`px-3 py-1 rounded-full text-sm transition-colors ${x.tags.includes(y)?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:y},y))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Checklist"}),e.jsx("div",{className:"space-y-2 mb-2",children:x.checklist.map((y,w)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"flex-1 text-sm text-gray-900",children:y.text}),e.jsx("button",{type:"button",onClick:()=>v(w),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:e.jsx(Xy,{size:16,className:"text-red-600"})})]},w))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:p,onChange:y=>b(y.target.value),onKeyPress:y=>y.key==="Enter"&&(y.preventDefault(),N()),placeholder:"Add checklist item...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:e.jsx(ss,{size:16})})]})]})]}),e.jsxs("div",{className:"border-t p-4 flex items-center justify-end gap-2 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:s,disabled:o,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",onClick:j,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:o?"Creating...":"Create Task"})]})]})}):null}const Gs={Backlog:{bg:"bg-gray-100",text:"text-gray-600",border:"border-gray-300",dot:"bg-gray-400"},"To Do":{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300",dot:"bg-gray-500"},"In Progress":{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300",dot:"bg-blue-500"},"In Review":{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300",dot:"bg-purple-500"},Completed:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",dot:"bg-green-500"},Overdue:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",dot:"bg-red-600"}},Im={Low:{bg:"bg-blue-100",text:"text-blue-600",dot:"bg-blue-400"},Medium:{bg:"bg-yellow-100",text:"text-yellow-600",dot:"bg-yellow-500"},High:{bg:"bg-orange-100",text:"text-orange-600",dot:"bg-orange-500"},Critical:{bg:"bg-red-100",text:"text-red-600",dot:"bg-red-500"}},RN=["Admission","Accounting","Recruitment","Digital Marketing","Motion Graphics","SEO","Social Media","Content Creation","Administration","Management"],$N=["Backlog","To Do","In Progress","In Review","Completed"];function ON(t,s){if(!t||s==="Completed")return null;const n=new Date,a=new Date(t)-n,l=Math.ceil(a/(1e3*60*60*24));return l<0?{bg:"bg-red-100",text:"text-red-700",icon:"text-red-600",label:"Overdue"}:l<=1?{bg:"bg-red-50",text:"text-red-600",icon:"text-red-500",label:l===0?"Due Today":"Due Tomorrow"}:l<=3?{bg:"bg-orange-50",text:"text-orange-600",icon:"text-orange-500",label:`${l} days left`}:l<=7?{bg:"bg-yellow-50",text:"text-yellow-600",icon:"text-yellow-500",label:`${l} days left`}:{bg:"bg-gray-50",text:"text-gray-600",icon:"text-gray-500",label:null}}function Zp({task:t,onClick:s,isDragging:n,onStatusChange:r,onDeadlineRequest:a}){var S,A,D,T,R,_,I;if(!t)return null;const[l,o]=d.useState(!1),[i,c]=d.useState(!1),{attributes:u,listeners:x,setNodeRef:m,transform:p,transition:b}=Yp({id:t._id}),k={transform:un.Transform.toString(p),transition:b,opacity:n?.5:1},g=t.dueDate&&t.status!=="Completed"&&new Date(t.dueDate)<new Date,N=g?Gs.Overdue:Gs[t.status]||Gs["To Do"],v=Im[t.priority]||Im.Medium,h=ON(t.dueDate,t.status),j=((S=t.checklist)==null?void 0:S.length)>0?`${t.checklist.filter(E=>E.completed).length}/${t.checklist.length}`:null,w={Backlog:["To Do"],"To Do":["In Progress","Completed"],"In Progress":["In Review","Completed"],"In Review":["Completed","To Do"],Completed:["To Do","In Progress"]}[t.status]||[];return e.jsxs("div",{ref:m,style:k,className:`bg-white rounded-lg shadow-md border-l-4 ${((A=v==null?void 0:v.dot)==null?void 0:A.replace("bg-","border-"))||"border-gray-400"} p-4 mb-2.5 hover:shadow-lg transition-all cursor-pointer group`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full ${(v==null?void 0:v.bg)||"bg-gray-100"} ${(v==null?void 0:v.text)||"text-gray-700"} font-bold uppercase tracking-wide`,children:t.priority||"Medium"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:E=>{E.stopPropagation(),c(!i)},className:"p-1.5 opacity-0 group-hover:opacity-100 hover:bg-gray-100 rounded-lg transition",children:e.jsx(Wy,{size:16,className:"text-gray-600"})}),i&&e.jsx("div",{className:"absolute right-0 top-8 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsx("button",{onClick:E=>{E.stopPropagation(),a==null||a(),c(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:" Request Deadline Change"})})]}),g&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-600 font-semibold flex items-center gap-1 animate-pulse",children:[e.jsx(Dt,{size:12})," Overdue"]})]}),e.jsx("h3",{className:"font-bold text-navy mb-3 text-sm leading-tight cursor-pointer hover:text-blue-600",onClick:s,children:t.title}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-2.5 mb-3 space-y-1.5",children:[t.assignedBy&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-blue-700 font-medium",children:[e.jsx(fr,{size:13,className:"text-blue-600"}),e.jsx("span",{className:"text-gray-600",children:"From:"})]}),e.jsx("span",{className:"font-semibold text-blue-900",children:t.assignedBy.name||t.assignedBy.fullName})]}),((D=t.assignedTo)==null?void 0:D.length)>0&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-purple-700 font-medium",children:[e.jsx(Me,{size:13,className:"text-purple-600"}),e.jsx("span",{className:"text-gray-600",children:"To:"})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.assignedTo.map((E,V)=>e.jsx("span",{className:"font-semibold text-purple-900 bg-white px-2 py-0.5 rounded",children:E.name||E.fullName||"Unknown"},E._id||V))})]})]}),t.description&&e.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2 italic",children:t.description}),((T=t.tags)==null?void 0:T.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:t.tags.map(E=>e.jsxs("span",{className:"text-xs px-2.5 py-1 rounded-full bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 font-medium border border-gray-300",children:[e.jsx(Mc,{size:10,className:"inline mr-1"}),E]},E))}),e.jsxs("div",{className:"space-y-2 text-xs pt-3 border-t border-gray-200",children:[t.dueDate&&e.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-2 rounded-lg ${(h==null?void 0:h.bg)||"bg-gray-50"} border ${((R=h==null?void 0:h.bg)==null?void 0:R.replace("bg-","border-").replace("-100","-200"))||"border-gray-200"}`,children:[e.jsx(ge,{size:14,className:`${(h==null?void 0:h.icon)||"text-gray-500"} flex-shrink-0`}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:`font-semibold ${(h==null?void 0:h.text)||"text-gray-600"}`,children:new Date(t.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(h==null?void 0:h.label)&&e.jsx("span",{className:`px-2 py-0.5 rounded-full font-bold ${h.bg} ${h.text}`,children:h.label})]})]}),e.jsx("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[j&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-white rounded border border-green-200",children:[e.jsx(Dc,{size:13,className:"text-green-600"}),e.jsx("span",{className:"font-semibold text-green-700",children:j})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-white rounded border border-blue-200 cursor-pointer hover:bg-blue-50 transition",onClick:s,title:"Click to view comments",children:[e.jsx(jn,{size:13,className:"text-blue-600"}),e.jsx("span",{className:"font-semibold text-blue-700",children:((_=t.comments)==null?void 0:_.length)||0})]}),((I=t.attachments)==null?void 0:I.length)>0&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-white rounded border border-purple-200",children:[e.jsx(Sd,{size:13,className:"text-purple-600"}),e.jsx("span",{className:"font-semibold text-purple-700",children:t.attachments.length})]})]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:E=>{E.stopPropagation(),o(!l)},className:`w-full py-2.5 px-3 rounded-lg font-semibold text-sm border-2 transition-all flex items-center justify-between ${N==null?void 0:N.bg} ${N==null?void 0:N.text} ${N==null?void 0:N.border}`,children:[e.jsxs("span",{children:["Status: ",t.status]}),e.jsx("span",{className:"text-lg",children:""})]}),l&&e.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white border-2 border-gray-300 rounded-lg shadow-lg z-50",children:w.map(E=>{var V,F;return e.jsxs("button",{onClick:M=>{M.stopPropagation(),r==null||r(t._id,E),o(!1)},className:`w-full text-left px-4 py-2.5 text-sm font-semibold border-b border-gray-200 hover:${(V=Gs[E])==null?void 0:V.bg} transition ${(F=Gs[E])==null?void 0:F.text}`,children:[" Move to ",E]},E)})})]})]})]})}function FN({column:t,tasks:s,onCardClick:n,onAddTask:r,activeId:a,isAdmin:l,onStatusChange:o,onDeadlineRequest:i}){var b,k,g;const c=s.filter(N=>N.boardColumn===t),u=c.length,x=c.map(N=>N._id),{setNodeRef:m,isOver:p}=Yp({id:t,data:{type:"column",accepts:["task"]}});return e.jsxs("div",{ref:m,className:`flex-1 min-w-[260px] max-w-[280px] bg-gradient-to-b from-gray-50 to-gray-100 rounded-xl p-3 transition-all ${p?"bg-gradient-to-b from-blue-50 to-blue-100 border-2 border-blue-400 shadow-lg":"border-2 border-gray-200"}`,children:[e.jsx("div",{className:"mb-4 pb-3 border-b-2 border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${((b=Gs[t])==null?void 0:b.dot)||"bg-gray-400"} shadow-md`}),e.jsx("h2",{className:"font-bold text-navy text-base",children:t}),e.jsx("span",{className:`text-xs font-bold px-2.5 py-1 rounded-full ${((k=Gs[t])==null?void 0:k.bg)||"bg-gray-200"} ${((g=Gs[t])==null?void 0:g.text)||"text-gray-700"}`,children:u})]}),e.jsx("button",{onClick:()=>r(t),className:"p-2 hover:bg-white rounded-lg transition shadow-sm border border-gray-300 hover:border-blue-400 hover:shadow-md",title:l?"Assign task":"Create task",children:e.jsx(ss,{size:18,className:"text-gray-600"})})]})}),e.jsx(mj,{items:x,strategy:cj,children:e.jsxs("div",{className:"space-y-3 max-h-[calc(100vh-250px)] overflow-y-auto",children:[c.map(N=>e.jsx(Zp,{task:N,onClick:v=>n(N,v),isDragging:a===N._id,onStatusChange:o,onDeadlineRequest:i},N._id)),u===0&&e.jsx("div",{className:"text-center text-gray-400 text-sm py-8",children:"No tasks"})]})})]})}function _N(){var F,M;const{user:t}=fe(),[s,n]=d.useState([]),[r,a]=d.useState(!0),[l,o]=d.useState(""),[i,c]=d.useState(""),[u,x]=d.useState([]),[m,p]=d.useState(""),[b,k]=d.useState(""),[g,N]=d.useState(null),[v,h]=d.useState(!1),[j,y]=d.useState(null),w=Ub(zb(Oc,{activationConstraint:{distance:8}})),S=async()=>{try{a(!0);const $=["SuperAdmin","Admin"].includes(t==null?void 0:t.role)?await B.listAllTasks():await B.listMyTasks();n($.tasks||[])}catch(C){console.error("Failed to load tasks:",C)}finally{a(!1)}};d.useEffect(()=>{S()},[]),d.useEffect(()=>{const C=sessionStorage.getItem("openTaskId"),$=sessionStorage.getItem("openTaskData");if(C){if(s.length>0){const P=s.find(W=>W._id===C);if(P){N(P),sessionStorage.removeItem("openTaskId"),sessionStorage.removeItem("openTaskData");return}}if($)try{const P=JSON.parse($);N(P),sessionStorage.removeItem("openTaskId"),sessionStorage.removeItem("openTaskData")}catch(P){console.error("Failed to parse task data:",P),sessionStorage.removeItem("openTaskId"),sessionStorage.removeItem("openTaskData")}}},[s]);const A=ve.useMemo(()=>{const C=new Map;return s.forEach($=>{var P;$.assignedBy&&C.set($.assignedBy._id,$.assignedBy),(P=$.assignedTo)==null||P.forEach(W=>{W&&C.set(W._id,W)})}),Array.from(C.values()).sort(($,P)=>($.name||$.fullName||"").localeCompare(P.name||P.fullName||""))},[s]),D=s.filter(C=>{var $,P;return!(l&&!C.title.toLowerCase().includes(l.toLowerCase())||i&&C.priority!==i||u.length>0&&!u.some(W=>{var O;return(O=C.tags)==null?void 0:O.includes(W)})||m&&(($=C.assignedBy)==null?void 0:$._id)!==m||b&&!((P=C.assignedTo)!=null&&P.some(W=>W._id===b)))}),T=(C,$)=>{$!=null&&$.defaultPrevented||N(C)},R=async(C,$)=>{try{await B.updateTaskStatus(C,$),await S()}catch(P){console.error("Error updating task status:",P),alert("Failed to update task status")}},_=()=>{const C=s.find($=>$._id===(g==null?void 0:g._id));C&&N(C)},I=C=>{h(!0)},E=C=>{y(C.active.id)},V=async C=>{const{active:$,over:P}=C;if(y(null),!P)return;const W=$.id,O=P.id,U=s.find(q=>q._id===W);if(!(!U||U.boardColumn===O))try{await B.updateBoardPosition(W,{boardColumn:O,boardPosition:0}),await S()}catch(q){console.error("Error moving task:",q),alert("Failed to move task")}};return r?e.jsx("div",{className:"p-6 text-center text-royal",children:"Loading tasks..."}):e.jsxs(e.Fragment,{children:[e.jsxs(Uv,{sensors:w,collisionDetection:Gb,onDragStart:E,onDragEnd:V,children:[e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Task Board"}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm",children:["SuperAdmin","Admin"].includes(t==null?void 0:t.role)?`Manage and track all team tasks  ${D.length} tasks`:`Your assigned tasks  ${D.length} tasks`})]}),e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl font-semibold",children:[e.jsx(ss,{size:20}),["SuperAdmin","Admin"].includes(t==null?void 0:t.role)?"Assign Task":"New Task"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Dn,{size:18,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search tasks by title...",value:l,onChange:C=>o(C.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[e.jsxs("select",{value:i,onChange:C=>c(C.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-sm",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"Low",children:" Low"}),e.jsx("option",{value:"Medium",children:" Medium"}),e.jsx("option",{value:"High",children:" High"}),e.jsx("option",{value:"Critical",children:" Critical"})]}),e.jsxs("select",{value:u[0]||"",onChange:C=>x(C.target.value?[C.target.value]:[]),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-sm",children:[e.jsx("option",{value:"",children:"All Tags"}),RN.map(C=>e.jsx("option",{value:C,children:C},C))]}),["SuperAdmin","Admin"].includes(t==null?void 0:t.role)&&e.jsxs("select",{value:m,onChange:C=>p(C.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-sm",children:[e.jsx("option",{value:"",children:" Assigned By: All"}),A.filter(C=>s.some($=>{var P;return((P=$.assignedBy)==null?void 0:P._id)===C._id})).map(C=>e.jsx("option",{value:C._id,children:C.name||C.fullName},C._id))]}),["SuperAdmin","Admin"].includes(t==null?void 0:t.role)&&e.jsxs("select",{value:b,onChange:C=>k(C.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-sm",children:[e.jsx("option",{value:"",children:" Assigned To: All"}),A.filter(C=>s.some($=>{var P;return(P=$.assignedTo)==null?void 0:P.some(W=>W._id===C._id)})).map(C=>e.jsx("option",{value:C._id,children:C.name||C.fullName},C._id))]}),(l||i||u.length>0||m||b)&&e.jsx("button",{onClick:()=>{o(""),c(""),x([]),p(""),k("")},className:"px-4 py-2.5 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors font-medium text-sm",children:"Clear Filters"})]}),(i||u.length>0||m||b)&&e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Active Filters:"}),i&&e.jsxs("span",{className:"text-xs px-2.5 py-1 bg-blue-100 text-blue-700 rounded-full font-medium",children:["Priority: ",i]}),u.map(C=>e.jsxs("span",{className:"text-xs px-2.5 py-1 bg-purple-100 text-purple-700 rounded-full font-medium",children:["Tag: ",C]},C)),m&&e.jsxs("span",{className:"text-xs px-2.5 py-1 bg-green-100 text-green-700 rounded-full font-medium",children:["From: ",((F=A.find(C=>C._id===m))==null?void 0:F.name)||"Unknown"]}),b&&e.jsxs("span",{className:"text-xs px-2.5 py-1 bg-orange-100 text-orange-700 rounded-full font-medium",children:["To: ",((M=A.find(C=>C._id===b))==null?void 0:M.name)||"Unknown"]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-x-auto",children:e.jsx("div",{className:"flex gap-4 min-w-max pb-4",children:$N.map(C=>e.jsx(FN,{column:C,tasks:D,onCardClick:T,onAddTask:I,activeId:j,isAdmin:["SuperAdmin","Admin"].includes(t==null?void 0:t.role),onStatusChange:R,onDeadlineRequest:_},C))})})]}),e.jsx(lj,{children:j?e.jsx(Zp,{task:s.find(C=>C._id===j),onClick:()=>{},isDragging:!0,onStatusChange:R,onDeadlineRequest:()=>_()}):null})]}),g&&e.jsx(MN,{task:g,taskId:g._id,isOpen:!!g,onClose:()=>N(null),onUpdate:S}),e.jsx(IN,{isOpen:v,onClose:()=>h(!1),onCreated:S})]})}function zN(){const{user:t}=fe(),[s,n]=d.useState([]),[r,a]=d.useState(!1),[l,o]=d.useState(null),[i,c]=d.useState({name:"",email:"",role:"Admission",department:"",designation:"",phone:"",avatar:"",displayOrder:0}),[u,x]=d.useState(null),[m,p]=d.useState(null),b=(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin";console.log("DEBUG Employee Page - User:",t),console.log("DEBUG Employee Page - canEdit:",b);const k=async()=>{try{const{users:y}=await B.listUsers();n(y)}catch(y){x((y==null?void 0:y.message)||"Failed to load")}};d.useEffect(()=>{k()},[]);const g=d.useMemo(()=>[...s].sort((y,w)=>{const S=y.displayOrder||0,A=w.displayOrder||0;return S===A?(y.name||"").localeCompare(w.name||""):S-A}),[s]),N=()=>{o(null),c({name:"",email:"",role:"Admission",department:"",designation:"",phone:"",avatar:"",displayOrder:0}),a(!0)},v=y=>{o(y._id),c({name:y.name||"",email:y.email||"",role:y.role||"Admission",department:y.department||"",designation:y.designation||"",phone:y.phone||"",avatar:y.avatar||"",displayOrder:y.displayOrder||0}),a(!0)},h=async y=>{y.preventDefault(),x(null),p(null);try{l?(await B.updateUser(l,i),p("Employee updated")):(await B.createUser({...i,password:"password123"}),p("Employee created (default password: password123)")),a(!1),k()}catch(w){x((w==null?void 0:w.message)||"Failed")}},j=async y=>{if(confirm("Delete this employee?"))try{await B.deleteUser(y),p("Employee deleted"),k()}catch(w){x((w==null?void 0:w.message)||"Delete failed")}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Employee List"}),b&&e.jsx("button",{onClick:N,className:"bg-gold text-navy rounded-xl px-4 py-2 font-semibold hover:bg-lightgold",children:"+ Add Employee"})]}),m&&e.jsx("div",{className:"mb-2 text-green-700",children:m}),u&&e.jsx("div",{className:"mb-2 text-red-600",children:u}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Order"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Role"}),e.jsx("th",{className:"text-left p-3",children:"Department"}),e.jsx("th",{className:"text-left p-3",children:"Designation"}),e.jsx("th",{className:"text-left p-3",children:"Email"}),e.jsx("th",{className:"text-left p-3",children:"Phone"}),b&&e.jsx("th",{className:"text-left p-3",children:"Action"})]})}),e.jsxs("tbody",{children:[g.map((y,w)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 text-navy font-semibold",children:y.displayOrder||0}),e.jsxs("td",{className:"p-3 flex items-center gap-2",children:[e.jsx("img",{src:y.avatar,className:"w-8 h-8 rounded-full border",alt:y.name}),e.jsx("div",{children:e.jsx("div",{className:"font-semibold text-navy",children:y.name})})]}),e.jsx("td",{className:"p-3",children:y.role}),e.jsx("td",{className:"p-3",children:y.department||"-"}),e.jsx("td",{className:"p-3",children:y.designation||"-"}),e.jsx("td",{className:"p-3",children:y.email}),e.jsx("td",{className:"p-3",children:y.phone||"-"}),b&&e.jsxs("td",{className:"p-3",children:[e.jsx("button",{onClick:()=>v(y),className:"px-3 py-1 rounded-lg border mr-2",children:"Edit"}),((t==null?void 0:t.role)==="SuperAdmin"||y.role!=="SuperAdmin")&&e.jsx("button",{onClick:()=>j(y._id),className:"px-3 py-1 rounded-lg border hover:bg-red-50",children:"Delete"})]})]},y._id)),g.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:b?8:7,children:"No employees"})})]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:e.jsxs("form",{onSubmit:h,className:"bg-white rounded-2xl shadow-soft p-4 w-full max-w-xl",children:[e.jsx("h2",{className:"text-xl font-bold text-navy mb-3",children:l?"Edit Employee":"Add Employee"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Display Order *"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",type:"number",min:"0",required:!0,value:i.displayOrder,onChange:y=>c(w=>({...w,displayOrder:parseInt(y.target.value)||0})),placeholder:"e.g., 1, 2, 3..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers appear first (1, 2, 3...)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Name *"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",required:!0,value:i.name,onChange:y=>c(w=>({...w,name:y.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Email *"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",required:!0,type:"email",value:i.email,onChange:y=>c(w=>({...w,email:y.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Role *"}),e.jsxs("select",{className:"w-full border rounded-xl px-3 py-2",value:i.role,onChange:y=>c(w=>({...w,role:y.target.value})),children:[(t==null?void 0:t.role)==="SuperAdmin"&&e.jsx("option",{children:"SuperAdmin"}),e.jsx("option",{children:"Admin"}),e.jsx("option",{children:"Accountant"}),e.jsx("option",{children:"Admission"}),e.jsx("option",{children:"Recruitment"}),e.jsx("option",{children:"DigitalMarketing"}),e.jsx("option",{children:"MotionGraphics"}),e.jsx("option",{children:"Coordinator"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Department"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:i.department,onChange:y=>c(w=>({...w,department:y.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Designation"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:i.designation,onChange:y=>c(w=>({...w,designation:y.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Phone"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:i.phone,onChange:y=>c(w=>({...w,phone:y.target.value}))})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Avatar URL"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:i.avatar,onChange:y=>c(w=>({...w,avatar:y.target.value}))})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),b&&e.jsx("button",{className:"px-4 py-2 rounded-xl bg-gold text-navy font-semibold hover:bg-lightgold",children:l?"Save":"Create"})]})]})})]})}function UN(){const{user:t}=fe(),[s,n]=d.useState([]),[r,a]=d.useState("All"),[l,o]=d.useState(!1),[i,c]=d.useState(!1),[u,x]=d.useState(null),[m,p]=d.useState(null),[b,k]=d.useState({name:"",category:"",duration:"",regularFee:0,discountFee:0,teacher:"",details:"",status:"Active"}),[g,N]=d.useState(null),[v,h]=d.useState(null),j=(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin",y=["All",...new Set(s.map(I=>I.category).filter(Boolean))],w=r==="All"?s:s.filter(I=>I.category===r),S=async()=>{try{const{courses:I}=await B.listCourses();n(I)}catch(I){N((I==null?void 0:I.message)||"Failed to load")}};d.useEffect(()=>{S()},[]);const A=()=>{p(null),k({name:"",category:"",duration:"",regularFee:0,discountFee:0,teacher:"",details:"",status:"Active"}),o(!0)},D=I=>{x(I),c(!0)},T=I=>{p(I._id),k({name:I.name,category:I.category,duration:I.duration,regularFee:I.regularFee,discountFee:I.discountFee,teacher:I.teacher,details:I.details,status:I.status}),o(!0)},R=async I=>{I.preventDefault(),N(null),h(null);try{m?(await B.updateCourse(m,{...b}),h("Course updated")):(await B.createCourse({...b}),h("Course created")),o(!1),S()}catch(E){N((E==null?void 0:E.message)||"Failed")}},_=async I=>{if(confirm("Delete this course?"))try{await B.deleteCourse(I),h("Course deleted"),S()}catch(E){N((E==null?void 0:E.message)||"Delete failed")}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Courses"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("select",{value:r,onChange:I=>a(I.target.value),className:"border rounded-xl px-4 py-2 text-sm",children:y.map(I=>e.jsx("option",{value:I,children:I==="All"?" All Categories":` ${I}`},I))}),j&&e.jsx("button",{onClick:A,className:"bg-gold text-navy rounded-xl px-4 py-2 font-semibold hover:bg-lightgold",children:"+ Add Course"})]})]}),v&&e.jsx("div",{className:"mb-2 p-3 bg-green-100 text-green-700 rounded-xl",children:v}),g&&e.jsx("div",{className:"mb-2 p-3 bg-red-100 text-red-600 rounded-xl",children:g}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Course ID"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Category"}),e.jsx("th",{className:"text-left p-3",children:"Duration"}),e.jsx("th",{className:"text-left p-3",children:"Regular Fee"}),e.jsx("th",{className:"text-left p-3",children:"Discount Fee"}),e.jsx("th",{className:"text-left p-3",children:"Teacher"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Action"})]})}),e.jsxs("tbody",{children:[w.map(I=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:I.courseId}),e.jsx("td",{className:"p-3 font-semibold text-navy",children:I.name}),e.jsx("td",{className:"p-3",children:I.category?e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-medium",children:I.category}):"-"}),e.jsx("td",{className:"p-3",children:I.duration||"-"}),e.jsxs("td",{className:"p-3",children:[" ",I.regularFee]}),e.jsxs("td",{className:"p-3",children:[" ",I.discountFee]}),e.jsx("td",{className:"p-3",children:I.teacher||"-"}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${I.status==="Active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:I.status})}),e.jsxs("td",{className:"p-3",children:[e.jsx("button",{onClick:()=>D(I),className:"px-3 py-1 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 mr-2",children:"View"}),j&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>T(I),className:"px-3 py-1 rounded-lg border mr-2",children:"Edit"}),e.jsx("button",{onClick:()=>_(I._id),className:"px-3 py-1 rounded-lg border hover:bg-red-50",children:"Delete"})]})]})]},I._id)),w.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70 text-center",colSpan:"9",children:s.length===0?"No courses":"No courses in this category"})})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:e.jsxs("form",{onSubmit:R,className:"bg-white rounded-2xl shadow-soft p-4 w-full max-w-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-navy mb-3",children:m?"Edit Course":"Add Course"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Course Name *"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",required:!0,value:b.name,onChange:I=>k(E=>({...E,name:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Category"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:b.category,onChange:I=>k(E=>({...E,category:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Duration"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:b.duration,onChange:I=>k(E=>({...E,duration:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Regular Fee"}),e.jsx("input",{type:"number",className:"w-full border rounded-xl px-3 py-2",value:b.regularFee,onChange:I=>k(E=>({...E,regularFee:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Discount Fee"}),e.jsx("input",{type:"number",className:"w-full border rounded-xl px-3 py-2",value:b.discountFee,onChange:I=>k(E=>({...E,discountFee:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Teacher"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:b.teacher,onChange:I=>k(E=>({...E,teacher:I.target.value}))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Details"}),e.jsx("textarea",{rows:"3",className:"w-full border rounded-xl px-3 py-2",value:b.details,onChange:I=>k(E=>({...E,details:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border rounded-xl px-3 py-2",value:b.status,onChange:I=>k(E=>({...E,status:I.target.value})),children:[e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Inactive"})]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),j&&e.jsx("button",{className:"px-4 py-2 rounded-xl bg-gold text-navy font-semibold hover:bg-lightgold",children:m?"Save":"Create"})]})]})}),i&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-soft p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy",children:"Course Details"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Course ID"}),e.jsx("div",{className:"text-lg font-semibold text-navy",children:u.courseId})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Status"}),e.jsx("div",{className:`text-lg font-semibold ${u.status==="Active"?"text-green-600":"text-gray-600"}`,children:u.status})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-blue-600 mb-1",children:"Course Name"}),e.jsx("div",{className:"text-xl font-bold text-navy",children:u.name})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Category"}),e.jsx("div",{className:"text-lg font-semibold text-navy",children:u.category||"Not specified"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Duration"}),e.jsx("div",{className:"text-lg font-semibold text-navy",children:u.duration||"Not specified"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl border-2 border-yellow-200",children:[e.jsx("div",{className:"text-sm text-yellow-700 mb-1",children:"Regular Fee"}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-800",children:[" ",u.regularFee.toLocaleString()]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border-2 border-green-200",children:[e.jsx("div",{className:"text-sm text-green-700 mb-1",children:"Discount Fee"}),e.jsxs("div",{className:"text-2xl font-bold text-green-800",children:[" ",u.discountFee.toLocaleString()]}),u.regularFee>u.discountFee&&e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Save ",(u.regularFee-u.discountFee).toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Teacher/Instructor"}),e.jsx("div",{className:"text-lg font-semibold text-purple-800",children:u.teacher||"Not assigned"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Course Details"}),e.jsx("div",{className:"text-gray-800 whitespace-pre-wrap",children:u.details||"No details provided"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Created:"})," ",new Date(u.createdAt).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Updated:"})," ",new Date(u.updatedAt).toLocaleString()]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 rounded-xl bg-navy text-white font-semibold hover:bg-navy/90",children:"Close"})})]})})]})}function BN(){return new Date().toISOString().slice(0,10)}function HN(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1).toISOString().slice(0,10)}function WN(t){const s=Object.keys(t[0]||{});return[s.join(","),...t.map(r=>s.map(a=>JSON.stringify(r[a]??"")).join(","))].join(`
`)}function VN(){const[t,s]=d.useState(HN()),[n,r]=d.useState(BN()),[a,l]=d.useState(null),[o,i]=d.useState(!0),[c,u]=d.useState(""),x=async()=>{i(!0);try{const k=await B.reportsOverview(t,n);l(k),u("")}catch(k){u(k.message||"Failed to load")}finally{i(!1)}};d.useEffect(()=>{x()},[]);const m=k=>{k.preventDefault(),x()},p=d.useMemo(()=>a?[{title:"Accounting  Income",val:a.accounting.income},{title:"Accounting  Expense",val:a.accounting.expense},{title:"Accounting  Net",val:a.accounting.net},{title:"Admission  Collected",val:a.admission.collected},{title:"Recruitment  Income",val:a.recruitment.income},{title:"Recruitment  Expense",val:a.recruitment.expense},{title:"Recruitment  Net",val:a.recruitment.net},{title:"Digital Marketing  Cost",val:a.dm.cost},{title:"Combined  Income",val:a.combined.income},{title:"Combined  Expense",val:a.combined.expense},{title:"Combined  Net",val:a.combined.net}]:[],[a]),b=d.useMemo(()=>{if(!a)return"";const k=[{Section:"Accounting",Metric:"Income",Amount:a.accounting.income},{Section:"Accounting",Metric:"Expense",Amount:a.accounting.expense},{Section:"Accounting",Metric:"Net",Amount:a.accounting.net},{Section:"Admission",Metric:"Collected",Amount:a.admission.collected},{Section:"Recruitment",Metric:"Income",Amount:a.recruitment.income},{Section:"Recruitment",Metric:"Expense",Amount:a.recruitment.expense},{Section:"Recruitment",Metric:"Net",Amount:a.recruitment.net},{Section:"Digital Marketing",Metric:"Cost",Amount:a.dm.cost},{Section:"Combined",Metric:"Income",Amount:a.combined.income},{Section:"Combined",Metric:"Expense",Amount:a.combined.expense},{Section:"Combined",Metric:"Net",Amount:a.combined.net}],g=new Blob([WN(k)],{type:"text/csv;charset=utf-8;"});return URL.createObjectURL(g)},[a]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-bold text-navy",children:"Consolidated Reports"}),e.jsxs("form",{onSubmit:m,className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",className:"input",value:t,onChange:k=>s(k.target.value)}),e.jsx("span",{className:"text-royal",children:"to"}),e.jsx("input",{type:"date",className:"input",value:n,onChange:k=>r(k.target.value)}),e.jsx("button",{className:"btn btn-primary",children:"Apply"}),b&&e.jsx("a",{className:"btn",href:b,download:`reports_${t}_to_${n}.csv`,children:"Export CSV"})]})]}),c&&e.jsx("div",{className:"text-red-600",children:c}),o&&e.jsx("div",{children:"Loading"}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:p.map((k,g)=>e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("div",{className:"text-royal text-sm",children:k.title}),e.jsx("div",{className:`text-2xl font-extrabold ${k.title.includes("Net")?k.val>=0?"text-green-600":"text-red-600":"text-navy"}`,children:es(k.val)})]},g))}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("div",{className:"font-semibold text-navy mb-2",children:"Summary"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-royal",children:[e.jsx("th",{className:"py-2",children:"Section"}),e.jsx("th",{children:"Metric"}),e.jsx("th",{children:"Amount"})]})}),e.jsxs("tbody",{children:[e.jsx(Gt,{s:"Accounting",m:"Income",a:a.accounting.income}),e.jsx(Gt,{s:"Accounting",m:"Expense",a:a.accounting.expense}),e.jsx(Gt,{s:"Accounting",m:"Net",a:a.accounting.net}),e.jsx(Gt,{s:"Admission",m:"Collected",a:a.admission.collected}),e.jsx(Gt,{s:"Recruitment",m:"Income",a:a.recruitment.income}),e.jsx(Gt,{s:"Recruitment",m:"Expense",a:a.recruitment.expense}),e.jsx(Gt,{s:"Recruitment",m:"Net",a:a.recruitment.net}),e.jsx(Gt,{s:"Digital Marketing",m:"Cost",a:a.dm.cost}),e.jsx(Gt,{s:"Combined",m:"Income",a:a.combined.income}),e.jsx(Gt,{s:"Combined",m:"Expense",a:a.combined.expense}),e.jsx(Gt,{s:"Combined",m:"Net",a:a.combined.net})]})]})})]})]})]})}function Gt({s:t,m:s,a:n}){return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:t}),e.jsx("td",{children:s}),e.jsx("td",{className:"font-semibold",children:es(n)})]})}function dl(t){if(!t)return"-";try{return new Date(t).toLocaleString()}catch{return t}}function qN(){const{user:t}=fe(),[s,n]=d.useState("All Leads"),[r,a]=d.useState("All"),[l,o]=d.useState([]),[i,c]=d.useState([]),[u,x]=d.useState(null),[m,p]=d.useState(!1),[b,k]=d.useState(null),[g,N]=d.useState(!1),v=async()=>{try{let j=s==="All Leads"?void 0:s;s==="Unassigned"&&(j="Assigned");const[y,w]=await Promise.all([B.listLeads(j),B.listAdmissionUsers().catch(()=>({users:[]}))]);let S=(y==null?void 0:y.leads)||[];s==="Unassigned"&&(S=S.filter(A=>!A.assignedTo)),o(S),c((w==null?void 0:w.users)||[]),x(null)}catch(j){x(j.message)}};d.useEffect(()=>{v()},[s]);const h=ve.useMemo(()=>r==="All"?l:r==="Unassigned"?l.filter(j=>!j.assignedTo):l.filter(j=>{var y;return((y=j.assignedTo)==null?void 0:y._id)===r}),[l,r]);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Leads Center (View-only)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:r,onChange:j=>a(j.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"All",children:" All Members"}),e.jsx("option",{value:"Unassigned",children:" Unassigned"}),i.map(j=>e.jsxs("option",{value:j._id,children:[" ",j.name]},j._id))]}),e.jsxs("select",{value:s,onChange:j=>n(j.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{children:"All Leads"}),e.jsx("option",{children:"Unassigned"}),e.jsx("option",{children:"Assigned"}),e.jsx("option",{children:"Counseling"}),e.jsx("option",{children:"In Follow Up"}),e.jsx("option",{children:"Admitted"}),e.jsx("option",{children:"Not Admitted"})]})]})]}),u&&e.jsx("div",{className:"mb-2 text-red-600",children:u}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Lead ID"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Phone / Email"}),e.jsx("th",{className:"text-left p-3",children:"Interested Course"}),e.jsx("th",{className:"text-left p-3",children:"Source"}),e.jsx("th",{className:"text-left p-3",children:"Lead Status"}),e.jsx("th",{className:"text-left p-3",children:"Assigned To"}),((t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin"||(t==null?void 0:t.role)==="Admission")&&e.jsx("th",{className:"text-left p-3",children:"History"})]})}),e.jsxs("tbody",{children:[h.map(j=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:j.leadId}),e.jsx("td",{className:"p-3",children:j.name}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{children:j.phone}),e.jsx("div",{className:"text-xs text-royal/70",children:j.email||"-"})]}),e.jsx("td",{className:"p-3",children:j.interestedCourse||"-"}),e.jsx("td",{className:"p-3",children:j.source}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j.status==="Admitted"?"bg-green-100 text-green-700":j.status==="Not Admitted"?"bg-red-100 text-red-700":j.status==="Counseling"?"bg-blue-100 text-blue-700":j.status==="In Follow Up"?"bg-yellow-100 text-yellow-700":j.status==="Assigned"&&j.assignedTo?"bg-purple-100 text-purple-700":j.status==="Assigned"&&!j.assignedTo?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:j.status==="Assigned"&&!j.assignedTo?"Unassigned":j.status||"New"})}),e.jsx("td",{className:"p-3",children:j.assignedTo?`${j.assignedTo.name} (${j.assignedTo.role})`:"-"}),((t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin"||(t==null?void 0:t.role)==="Admission")&&e.jsx("td",{className:"p-3",children:e.jsx("button",{disabled:g,onClick:async()=>{try{x(null),N(!0);const y=await B.getLeadHistory(j._id);k(y.lead||y),p(!0)}catch(y){x(y.message)}finally{N(!1)}},className:"px-3 py-1 rounded-xl border hover:bg-[#f3f6ff]",children:g?"Loading":"History"})})]},j._id)),h.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:7,children:"No leads for selected filters"})})]})]})}),m&&b&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>p(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-2xl shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Lead History  ",b.leadId]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{children:["Assigned At: ",e.jsx("strong",{children:dl(b.assignedAt||b.updatedAt)})]}),e.jsxs("div",{children:["Counseling At: ",e.jsx("strong",{children:dl(b.counselingAt||b.updatedAt)})]}),e.jsxs("div",{children:["Admitted At: ",e.jsx("strong",{children:dl(b.admittedAt||b.updatedAt)})]}),e.jsxs("div",{children:["Follow-ups (",(b.followUps||[]).length,"):"]}),e.jsx("div",{className:"pl-2",children:(b.followUps||[]).length===0?e.jsx("div",{className:"text-royal/70",children:"No follow-ups"}):(b.followUps||[]).map((j,y)=>{var w;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"text-sm font-medium",children:[dl(j.at)," ",(w=j.by)!=null&&w.name?`  ${j.by.name}`:""]}),e.jsx("div",{className:"text-royal/70",children:j.note||"-"})]},y)})})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{onClick:()=>p(!1),className:"px-3 py-2 rounded-xl border",children:"Close"})})]})]})]})}function GN(){const{user:t}=fe(),[s,n]=d.useState({name:"",phone:"",email:"",interestedCourse:"",source:"Manually Generated Lead"}),[r,a]=d.useState(""),[l,o]=d.useState(null),[i,c]=d.useState(null),[u,x]=d.useState(null),[m,p]=d.useState(!1),[b,k]=d.useState([]),[g,N]=d.useState(null),v=(t==null?void 0:t.role)==="DigitalMarketing";d.useEffect(()=>{(async()=>{try{const A=await B.listCourses();k((A==null?void 0:A.courses)||[])}catch(A){console.error("Failed to load courses:",A)}})();const S=new URLSearchParams(window.location.search);if(S.has("edit")){const A=S.get("edit"),D=sessionStorage.getItem("editLead");if(D){const T=JSON.parse(D);n({name:T.name||"",phone:T.phone||"",email:T.email||"",interestedCourse:T.interestedCourse||"",source:T.source||"Manually Generated Lead"}),N(A)}}},[]);const h=async w=>{w.preventDefault(),o(null),c(null),p(!0);try{g?(await B.updateLead(g,s),o("Lead updated successfully! "),setTimeout(()=>{window.location.href="/leads-center"},1500)):(await B.createLead(s),o("Lead added successfully! "),n({name:"",phone:"",email:"",interestedCourse:"",source:"Manually Generated Lead"}))}catch(S){c(S.message)}finally{p(!1)}},j=async w=>{w.preventDefault(),o(null),c(null),p(!0);try{const{created:S,skipped:A,errors:D}=await B.bulkUploadLeads(r);let T=`Bulk upload completed!  Created: ${S} leads |  Skipped: ${A}`;D&&D.length>0&&(T+=`

Errors:
${D.join(`
`)}`),o(T),a("")}catch(S){c(S.message)}finally{p(!1)}},y=w=>w.includes("Meta")?Tc:w.includes("LinkedIn")?Ec:w.includes("Manual")?gi:qy;return v?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:g?" Edit Lead":"Lead Entry"}),e.jsx("p",{className:"text-gray-600 mt-1",children:g?"Update lead details":"Add new leads individually or upload in bulk via CSV"})]}),l&&e.jsxs("div",{className:"p-4 bg-green-50 border-l-4 border-green-500 rounded-lg flex items-start gap-3",children:[e.jsx(it,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-green-800 font-medium",children:l})})]}),i&&e.jsxs("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 rounded-lg flex items-start gap-3",children:[e.jsx(Dt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-red-800 font-medium",children:i})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("form",{onSubmit:h,className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:`bg-gradient-to-r ${g?"from-green-500 to-teal-600":"from-blue-500 to-purple-600"} p-5`,children:e.jsxs("div",{className:"flex items-center gap-3 text-white",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:g?e.jsx(gi,{className:"w-6 h-6"}):e.jsx(yi,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:g?"Update Lead":"Add Single Lead"}),e.jsx("p",{className:"text-sm text-white/80",children:g?"Modify lead details":"Enter lead details manually"})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(yi,{className:"w-4 h-4 text-blue-600"}),"Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full border-2 border-gray-200 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:outline-none transition-colors",placeholder:"Enter lead's full name",required:!0,value:s.name,onChange:w=>n(S=>({...S,name:w.target.value}))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(wl,{className:"w-4 h-4 text-green-600"}),"Phone Number"]}),e.jsx("input",{type:"tel",className:"w-full border-2 border-gray-200 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:outline-none transition-colors",placeholder:"+880 1XXX-XXXXXX",value:s.phone,onChange:w=>n(S=>({...S,phone:w.target.value}))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(xp,{className:"w-4 h-4 text-purple-600"}),"Email Address"]}),e.jsx("input",{type:"email",className:"w-full border-2 border-gray-200 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:outline-none transition-colors",placeholder:"email@example.com",value:s.email,onChange:w=>n(S=>({...S,email:w.target.value}))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(kn,{className:"w-4 h-4 text-orange-600"}),"Interested Course"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:outline-none transition-colors appearance-none bg-white pr-10",value:s.interestedCourse,onChange:w=>n(S=>({...S,interestedCourse:w.target.value})),children:[e.jsx("option",{value:"",children:"Select a course"}),b.map(w=>e.jsx("option",{value:w.name,children:w.name},w._id))]}),e.jsx(kn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]}),b.length===0&&e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:" No courses available. Contact admin."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Mc,{className:"w-4 h-4 text-pink-600"}),"Lead Source"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:outline-none transition-colors appearance-none bg-white pr-10",value:s.source,onChange:w=>n(S=>({...S,source:w.target.value})),children:[e.jsx("option",{children:"Meta Lead"}),e.jsx("option",{children:"LinkedIn Lead"}),e.jsx("option",{children:"Manually Generated Lead"}),e.jsx("option",{children:"Others"})]}),ve.createElement(y(s.source),{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]})]}),e.jsx("button",{type:"submit",disabled:m,className:`w-full bg-gradient-to-r ${g?"from-green-500 to-teal-600":"from-blue-500 to-purple-600"} text-white rounded-lg px-6 py-3 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),g?"Updating Lead...":"Adding Lead..."]}):e.jsx(e.Fragment,{children:g?e.jsxs(e.Fragment,{children:[e.jsx(gi,{className:"w-5 h-5"}),"Update Lead"]}):e.jsxs(e.Fragment,{children:[e.jsx(yi,{className:"w-5 h-5"}),"Add Lead"]})})})]})]}),!g&&e.jsxs("form",{onSubmit:j,className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-pink-600 p-5",children:e.jsxs("div",{className:"flex items-center gap-3 text-white",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(fi,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Bulk Upload (CSV)"}),e.jsx("p",{className:"text-sm text-white/80",children:"Import multiple leads at once"})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(St,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Required CSV Format"}),e.jsx("p",{className:"text-xs text-blue-700 mb-2",children:"Your CSV file must have these exact headers:"}),e.jsx("code",{className:"block bg-white px-3 py-2 rounded border border-blue-300 text-xs text-gray-800 font-mono",children:"Name,Phone,Email,InterestedCourse,Source"}),e.jsx("p",{className:"text-xs text-blue-600 mt-2",children:" First row should be headers, data starts from second row"})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(fi,{className:"w-4 h-4 text-orange-600"}),"Upload CSV File"]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"file",accept:".csv,text/csv",className:"w-full border-2 border-dashed border-gray-300 rounded-lg px-4 py-8 text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-gradient-to-r file:from-orange-500 file:to-pink-600 file:text-white file:font-semibold hover:file:shadow-lg file:cursor-pointer cursor-pointer hover:border-orange-400 transition-colors",onChange:async w=>{x(null),c(null),o(null);const S=w.target.files&&w.target.files[0];if(!S)return;const A=(S.name||"").toLowerCase();if(!(S.type==="text/csv"||A.endsWith(".csv"))){x("Please select a valid CSV file (.csv)");return}try{const T=await S.text();a(T),o(`File loaded: ${S.name} (${(S.size/1024).toFixed(1)} KB)`)}catch{x("Unable to read file. Please try again.")}}})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-300"}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"OR"}),e.jsx("div",{className:"flex-1 h-px bg-gray-300"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(St,{className:"w-4 h-4 text-pink-600"}),"Paste CSV Content"]}),e.jsx("textarea",{rows:"8",className:"w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-orange-500 focus:outline-none transition-colors font-mono text-sm resize-none",placeholder:`Name,Phone,Email,InterestedCourse,Source
John Doe,01712345678,john@example.com,Graphic Design,Meta Lead
Jane Smith,01798765432,jane@example.com,Web Development,LinkedIn Lead`,value:r,onChange:w=>a(w.target.value)}),r&&e.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:[" ",r.split(`
`).filter(w=>w.trim()).length-1," leads detected"]})]}),u&&e.jsx("div",{className:"p-3 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsx("p",{className:"text-red-800 text-sm",children:u})}),e.jsx("button",{type:"submit",disabled:m||!r,className:"w-full bg-gradient-to-r from-orange-500 to-pink-600 text-white rounded-lg px-6 py-3 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fi,{className:"w-5 h-5"}),"Upload CSV"]})})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-xl text-gray-600",children:"Only Digital Marketing can add or upload leads."})]})})}function YN(){const{user:t}=fe(),[s,n]=d.useState("Assigned"),[r,a]=d.useState("All"),[l,o]=d.useState("All"),[i,c]=d.useState("date-desc"),[u,x]=d.useState([]),[m,p]=d.useState([]),[b,k]=d.useState([]),[g,N]=d.useState([]),[v,h]=d.useState(null),[j,y]=d.useState(null),[w,S]=d.useState(!1),[A,D]=d.useState(null),[T,R]=d.useState(!1),[_,I]=d.useState(!1),[E,V]=d.useState(""),[F,M]=d.useState(null),[C,$]=d.useState(0),[P,W]=d.useState([]),[O,U]=d.useState(!1),q=(t==null?void 0:t.role)==="DigitalMarketing",ee=async()=>{try{const H=s==="Unassigned"?"Assigned":s,re=[s==="All Leads"?B.listLeads():B.listLeads(H),B.listCourses()];q&&(re.push(B.listAdmissionUsers()),re.push(B.getTodayAssignments()));const se=await Promise.all(re),me=se[0],he=se[1],ie=q?se[2]:{users:[]},xe=q?se[3]:null;let pe=(me==null?void 0:me.leads)||[];s==="Unassigned"&&(pe=pe.filter(De=>!De.assignedTo)),p(pe),x((he==null?void 0:he.courses)||[]),k((ie==null?void 0:ie.users)||[]),N([]),xe&&(M(xe.grouped||{}),$(xe.total||0)),y(null)}catch(H){y(H.message)}};d.useEffect(()=>{ee()},[s]);const z=async(H,re)=>{h(null),y(null);try{await B.assignLead(H,re),h("Lead assigned"),ee()}catch(se){y(se.message)}},te=H=>{sessionStorage.setItem("editLead",JSON.stringify(H)),window.location.href="/lead-entry?edit="+H._id},K=async H=>{if(window.confirm("Are you sure you want to delete this lead? This action cannot be undone.")){h(null),y(null);try{await B.deleteLead(H),h("Lead deleted successfully"),ee()}catch(re){y(re.message)}}},G=async()=>{if(g.length===0||P.length===0){alert("Please select leads and at least one member");return}h(null),y(null),I(!0);try{const H=Math.floor(g.length/P.length),re=g.length%P.length;let se=0,me=[];for(let he=0;he<P.length;he++){const ie=P[he],xe=H+(he<re?1:0),pe=g.slice(se,se+xe);pe.length>0&&me.push(B.bulkAssignLeads(pe,ie)),se+=xe}await Promise.all(me),h(` Successfully distributed ${g.length} leads among ${P.length} members equally${re>0?` (${re} remainder lead(s))`:""}`),W([]),N([]),U(!1),ee()}catch(H){y(H.message)}finally{I(!1)}},oe=async()=>{if(!(g.length===0||!E)){h(null),y(null),I(!0);try{const H=await B.bulkAssignLeads(g,E);h(H.message||`${g.length} lead(s) assigned`),V(""),ee()}catch(H){y(H.message)}finally{I(!1)}}},le=()=>{g.length===L.length?N([]):N(L.map(H=>H._id))},Z=H=>{N(re=>re.includes(H)?re.filter(se=>se!==H):[...re,H])},L=d.useMemo(()=>{let H=m;return r!=="All"&&(H=H.filter(se=>se.interestedCourse===r)),l!=="All"&&(l==="Unassigned"?H=H.filter(se=>!se.assignedTo):H=H.filter(se=>{var me;return((me=se.assignedTo)==null?void 0:me._id)===l})),[...H].sort((se,me)=>{var he,ie,xe,pe;if(i==="date-desc")return new Date(me.createdAt)-new Date(se.createdAt);if(i==="date-asc")return new Date(se.createdAt)-new Date(me.createdAt);if(i==="member-asc"){const De=((he=se.assignedTo)==null?void 0:he.name)||"Unassigned",gt=((ie=me.assignedTo)==null?void 0:ie.name)||"Unassigned";return De.localeCompare(gt)}else if(i==="member-desc"){const De=((xe=se.assignedTo)==null?void 0:xe.name)||"Unassigned";return(((pe=me.assignedTo)==null?void 0:pe.name)||"Unassigned").localeCompare(De)}return 0})},[m,r,l,i]);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Leads Center"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:i,onChange:H=>c(H.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"date-desc",children:" Newest First"}),e.jsx("option",{value:"date-asc",children:" Oldest First"}),e.jsx("option",{value:"member-asc",children:" Member (A-Z)"}),e.jsx("option",{value:"member-desc",children:" Member (Z-A)"})]}),e.jsxs("select",{value:l,onChange:H=>o(H.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"All",children:" All Members"}),e.jsx("option",{value:"Unassigned",children:" Unassigned"}),b.map(H=>e.jsxs("option",{value:H._id,children:[" ",H.name]},H._id))]}),e.jsxs("select",{value:r,onChange:H=>a(H.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"All",children:" All Courses"}),u.map(H=>e.jsx("option",{value:H.name,children:H.name},H._id))]}),e.jsxs("select",{value:s,onChange:H=>n(H.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{children:"All Leads"}),e.jsx("option",{children:"Unassigned"}),e.jsx("option",{children:"Assigned"}),e.jsx("option",{children:"Counseling"}),e.jsx("option",{children:"In Follow Up"}),e.jsx("option",{children:"Admitted"}),e.jsx("option",{children:"Not Admitted"})]})]})]}),v&&e.jsx("div",{className:"mb-2 p-3 bg-green-100 text-green-700 rounded-xl",children:v}),j&&e.jsx("div",{className:"mb-2 p-3 bg-red-100 text-red-600 rounded-xl",children:j}),q&&F&&Object.keys(F).length>0&&e.jsxs("div",{className:"mb-4 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 rounded-2xl p-5 shadow-lg border border-blue-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:" Today's Lead Assignments"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:new Date().toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-xl shadow-md",children:[e.jsx("div",{className:"text-xs font-medium opacity-90",children:"Total Assigned"}),e.jsx("div",{className:"text-3xl font-bold",children:C})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(F).map(([H,re])=>{const se=Object.values(re).reduce((me,he)=>me+he,0);return e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-200 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white text-sm font-bold",children:H.charAt(0).toUpperCase()}),H]}),e.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-lg text-sm font-bold",children:se})]}),e.jsx("div",{className:"space-y-2",children:Object.entries(re).map(([me,he])=>e.jsxs("div",{className:"flex items-center justify-between text-sm bg-gray-50 rounded-lg px-3 py-2",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:me}),e.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-0.5 rounded-md font-bold text-xs",children:he})]},me))})]},H)})})]}),q&&g.length>0&&e.jsx("div",{className:"mb-3 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200 space-y-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-medium text-blue-900",children:[g.length," lead(s) selected"]}),e.jsxs("select",{value:E,onChange:H=>V(H.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Admission Member"}),b.map(H=>e.jsx("option",{value:H._id,children:H.name},H._id))]}),e.jsx("button",{onClick:oe,disabled:_||!E,className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:_?"Assigning...":"Assign to One"}),e.jsx("button",{onClick:()=>U(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700 font-medium",title:"Distribute leads equally among selected members",children:" Distribute Equally"}),e.jsx("button",{onClick:()=>N([]),className:"px-3 py-2 text-royal hover:text-red-600",children:"Clear Selection"})]})}),O&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>U(!1)}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 z-10 w-full max-w-md shadow-lg",children:[e.jsxs("h3",{className:"text-xl font-bold text-navy mb-4",children:[" Distribute ",g.length," Leads Equally"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Select admission members to distribute leads equally among them"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto mb-4",children:b.map(H=>e.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.includes(H._id),onChange:re=>{re.target.checked?W([...P,H._id]):W(P.filter(se=>se!==H._id))},className:"w-4 h-4 cursor-pointer"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-800",children:H.name}),e.jsx("div",{className:"text-xs text-gray-500",children:H.email})]})]},H._id))}),P.length>0&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[e.jsx("div",{className:"text-sm text-blue-900 font-medium",children:"Distribution plan:"}),e.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:[Math.floor(g.length/P.length)," leads per member",g.length%P.length>0&&` + ${g.length%P.length} remainder`]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>U(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:G,disabled:P.length===0||_,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:_?"Distributing...":"Confirm Distribution"})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[q&&e.jsx("th",{className:"p-3",children:e.jsx("input",{type:"checkbox",checked:L.length>0&&g.length===L.length,onChange:le,className:"w-4 h-4 cursor-pointer"})}),e.jsx("th",{className:"text-left p-3",children:"Lead ID"}),e.jsx("th",{className:"text-left p-3",children:"Added Date"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Phone / Email"}),e.jsx("th",{className:"text-left p-3",children:"Interested Course"}),e.jsx("th",{className:"text-left p-3",children:"Source"}),e.jsx("th",{className:"text-left p-3",children:"Lead Status"}),e.jsx("th",{className:"text-left p-3",children:"Assigned To"}),((t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin"||(t==null?void 0:t.role)==="Admission"||(t==null?void 0:t.role)==="DigitalMarketing")&&e.jsx("th",{className:"text-left p-3",children:"History"}),q&&e.jsx("th",{className:"text-left p-3",children:"Action"})]})}),e.jsxs("tbody",{children:[L.map(H=>{var re;return e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[q&&e.jsx("td",{className:"p-3",children:e.jsx("input",{type:"checkbox",checked:g.includes(H._id),onChange:()=>Z(H._id),className:"w-4 h-4 cursor-pointer"})}),e.jsx("td",{className:"p-3",children:H.leadId}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"text-sm",children:new Date(H.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),e.jsx("div",{className:"text-xs text-royal/70",children:new Date(H.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("td",{className:"p-3",children:H.name}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{children:H.phone}),e.jsx("div",{className:"text-xs text-royal/70",children:H.email||"-"})]}),e.jsx("td",{className:"p-3",children:H.interestedCourse||"-"}),e.jsx("td",{className:"p-3",children:H.source}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H.status==="Admitted"?"bg-green-100 text-green-700":H.status==="Not Admitted"?"bg-red-100 text-red-700":H.status==="Counseling"?"bg-blue-100 text-blue-700":H.status==="In Follow Up"?"bg-yellow-100 text-yellow-700":H.status==="Assigned"&&H.assignedTo?"bg-purple-100 text-purple-700":H.status==="Assigned"&&!H.assignedTo?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:H.status==="Assigned"&&!H.assignedTo?"Unassigned":H.status||"New"})}),e.jsx("td",{className:"p-3",children:H.assignedTo?`${H.assignedTo.name} (${H.assignedTo.role})`:"-"}),((t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin"||(t==null?void 0:t.role)==="Admission"||(t==null?void 0:t.role)==="DigitalMarketing")&&e.jsx("td",{className:"p-3",children:e.jsx("button",{disabled:T,onClick:async()=>{try{y(null),R(!0);const se=await B.getLeadHistory(H._id);D(se.lead||se),S(!0)}catch(se){y(se.message)}finally{R(!1)}},className:"px-3 py-1 rounded-xl border hover:bg-[#f3f6ff]",children:T?"Loading":"History"})}),q&&e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>te(H),className:"px-2 py-1 text-sm rounded-lg border border-blue-300 bg-blue-50 text-blue-700 hover:bg-blue-100 transition",title:"Edit lead",children:" Edit"}),e.jsx("button",{onClick:()=>K(H._id),className:"px-2 py-1 text-sm rounded-lg border border-red-300 bg-red-50 text-red-700 hover:bg-red-100 transition",title:"Delete lead",children:" Delete"}),H.assignedTo?e.jsxs("span",{className:"text-sm px-2 py-1 rounded-lg bg-green-50 text-green-700 font-medium whitespace-nowrap",children:[" Assigned to ",(re=H.assignedTo)==null?void 0:re.name]}):e.jsx(JN,{current:"",options:b,onChange:se=>z(H._id,se)})]})})]},H._id)}),L.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70 text-center",colSpan:q?11:9,children:m.length===0?"No leads":"No leads match the selected filters"})})]})]})}),w&&A&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>S(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-2xl shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Lead History  ",A.leadId]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-royal/70 min-w-[140px]",children:"Created At:"}),e.jsx("strong",{children:A.createdAt?new Date(A.createdAt).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"-"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-royal/70 min-w-[140px]",children:"Assigned At:"}),e.jsx("strong",{children:A.assignedAt?new Date(A.assignedAt).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):e.jsx("span",{className:"text-royal/50",children:"Not yet assigned"})})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-royal/70 min-w-[140px]",children:"Counseling At:"}),e.jsx("strong",{children:A.counselingAt?new Date(A.counselingAt).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):e.jsx("span",{className:"text-royal/50",children:"Not yet in counseling"})})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-royal/70 min-w-[140px]",children:"Admitted At:"}),e.jsx("strong",{children:A.admittedAt?new Date(A.admittedAt).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):e.jsx("span",{className:"text-royal/50",children:"Not yet admitted"})})]}),e.jsxs("div",{className:"border-t pt-3 mt-2",children:[e.jsxs("div",{className:"font-medium mb-2",children:["Follow-ups (",(A.followUps||[]).length,")"]}),e.jsx("div",{className:"pl-2",children:(A.followUps||[]).length===0?e.jsx("div",{className:"text-royal/70 italic",children:"No follow-ups yet"}):(A.followUps||[]).map((H,re)=>{var se;return e.jsxs("div",{className:"mb-3 p-2 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium text-royal",children:[new Date(H.at).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),((se=H.by)==null?void 0:se.name)&&e.jsxs("span",{className:"ml-2 text-blue-600",children:[" ",H.by.name]})]}),e.jsx("div",{className:"text-sm text-royal/70 mt-1",children:H.note||"No notes"})]},re)})})]})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-royal text-white rounded-xl hover:bg-royal/90",children:"Close"})})]})]})]})}function JN({current:t,options:s,onChange:n}){const[r,a]=d.useState(t||"");return d.useEffect(()=>a(t||""),[t]),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{className:"border rounded-xl px-3 py-2",value:r,onChange:l=>a(l.target.value),children:[e.jsx("option",{value:"",children:"Select Admission Member"}),s.map(l=>e.jsx("option",{value:l._id,children:l.name},l._id))]}),e.jsx("button",{disabled:!r,onClick:()=>n(r),className:"px-3 py-1 rounded-lg border hover:bg-[#f3f6ff]",children:"Assign"})]})}function QN(){const{user:t}=fe(),[s,n]=d.useState(()=>{const a=new Date;return new Date(a.getFullYear(),a.getMonth()).toISOString().slice(0,7)}),r=()=>{const a=[],l=new Date(2025,10),o=new Date;let i=new Date(l);for(;i<=o;){const c=i.toISOString().slice(0,7);a.push(c),i.setMonth(i.getMonth()+1)}return a.reverse()};try{return(t==null?void 0:t.role)!=="DigitalMarketing"?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-xl text-gray-600",children:"Only Digital Marketing can access this page."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Digital Marketing Metrics"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track expenses, social media performance, SEO activities, and ad campaigns"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5 text-blue-600"}),e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Filter by Month:"})]}),e.jsx("select",{value:s,onChange:a=>n(a.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-lg bg-white font-medium text-gray-700 focus:border-blue-500 focus:outline-none transition-colors hover:border-gray-300",children:r().map(a=>{const[l,o]=a.split("-"),i=new Date(l,o-1).toLocaleDateString("en-US",{month:"long",year:"numeric"});return e.jsx("option",{value:a,children:i},a)})})]})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsx(XN,{selectedMonth:s}),e.jsx(KN,{selectedMonth:s}),e.jsx(ZN,{selectedMonth:s})]}),e.jsx(ew,{selectedMonth:s})]})}catch(a){return console.error("DMMetrics error:",a),e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center bg-red-50 p-6 rounded-lg border border-red-200",children:[e.jsx(Dt,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),e.jsx("p",{className:"text-red-700 font-semibold",children:"Error loading DM Metrics"}),e.jsx("p",{className:"text-red-600 text-sm mt-2",children:a.message})]})})}}function XN({selectedMonth:t}){const[s,n]=d.useState([]),[r,a]=d.useState({date:new Date().toISOString().slice(0,10),purpose:"Meta Ads",amount:0}),[l,o]=d.useState(null),[i,c]=d.useState(null),u=async()=>{try{const g=await B.listDMCosts();let N=[];Array.isArray(g)?N=g:Array.isArray(g==null?void 0:g.costs)?N=g.costs:Array.isArray(g==null?void 0:g.items)?N=g.items:N=[],n(Array.isArray(N)?N:[]),c(null)}catch(g){console.error("Failed to load DM costs:",g),c(g.message||"Failed to load costs"),n([])}},x=d.useMemo(()=>t?(Array.isArray(s)?s:[]).filter(g=>new Date(g.date).toISOString().slice(0,7)===t):s,[s,t]);d.useEffect(()=>{u()},[]);const m=async g=>{g.preventDefault(),o(null),c(null);try{await B.createDMCost(r),o("Cost added successfully!"),a({date:new Date().toISOString().slice(0,10),purpose:"Meta Ads",amount:0}),await u()}catch(N){console.error("Failed to add cost:",N),c(N.message||"Failed to add cost")}},p=async g=>{if(confirm("Are you sure you want to delete this cost entry?"))try{await B.deleteDMCost(g),await u()}catch(N){console.error("Failed to delete cost:",N),c(N.message||"Failed to delete")}},b=d.useMemo(()=>{try{const g=(Array.isArray(x)?x:[]).reduce((v,h)=>{const j=Number(h==null?void 0:h.amount)||0;return v+(isNaN(j)?0:j)},0),N={};return(Array.isArray(x)?x:[]).forEach(v=>{if(v&&v.purpose){const h=Number(v.amount)||0;N[v.purpose]=(N[v.purpose]||0)+(isNaN(h)?0:h)}}),{total:g,byPurpose:N}}catch(g){return console.error("Error calculating stats:",g),{total:0,byPurpose:{}}}},[x]),k={"Meta Ads":"bg-blue-100 text-blue-800","LinkedIn Ads":"bg-cyan-100 text-cyan-800","Software Purchase":"bg-purple-100 text-purple-800",Subscription:"bg-orange-100 text-orange-800",Others:"bg-gray-100 text-gray-800"};return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 p-5",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(He,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Marketing Expenses"}),e.jsx("p",{className:"text-sm text-white/80",children:"Track your advertising costs"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/80",children:"Total Spent"}),e.jsx("p",{className:"text-2xl font-bold",children:Pe(b.total)})]})]})}),e.jsxs("div",{className:"p-5",children:[l&&e.jsxs("div",{className:"mb-3 p-3 bg-green-50 border-l-4 border-green-500 text-green-700 rounded-lg",children:[" ",l]}),i&&e.jsxs("div",{className:"mb-3 p-3 bg-red-50 border-l-4 border-red-500 text-red-700 rounded-lg",children:[" ",i]}),Object.keys(b.byPurpose).length>0&&e.jsx("div",{className:"mb-4 grid grid-cols-2 gap-2",children:Object.entries(b.byPurpose).map(([g,N])=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600",children:g}),e.jsx("div",{className:"text-sm font-bold text-gray-800",children:Pe(N)})]},g))}),e.jsxs("form",{onSubmit:m,className:"mb-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ss,{className:"w-4 h-4 text-gray-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Add New Expense"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Date"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-pink-500 focus:outline-none transition-colors",value:r.date,onChange:g=>a(N=>({...N,date:g.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Purpose"}),e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-pink-500 focus:outline-none transition-colors",value:r.purpose,onChange:g=>a(N=>({...N,purpose:g.target.value})),required:!0,children:[e.jsx("option",{children:"Meta Ads"}),e.jsx("option",{children:"LinkedIn Ads"}),e.jsx("option",{children:"Software Purchase"}),e.jsx("option",{children:"Subscription"}),e.jsx("option",{children:"Others"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Amount (BDT)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-pink-500 focus:outline-none transition-colors",value:r.amount,onChange:g=>a(N=>({...N,amount:g.target.value})),placeholder:"0.00",required:!0})]}),e.jsxs("button",{className:"w-full bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-lg px-4 py-2.5 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(ss,{className:"w-4 h-4"}),"Add Expense"]})]})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:x.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(He,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No expenses recorded for this month"})]}):x.map(g=>e.jsx("div",{className:"group bg-gray-50 hover:bg-gray-100 rounded-lg p-3 border border-gray-200 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ge,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600",children:new Date(g.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${k[g.purpose]||k.Others}`,children:g.purpose}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:Pe(g.amount)})]})]}),e.jsx("button",{onClick:()=>p(g._id),className:"opacity-0 group-hover:opacity-100 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete",children:e.jsx(cn,{className:"w-4 h-4"})})]})},g._id))})]})]})}function KN({selectedMonth:t}){const[s,n]=d.useState([]),[r,a]=d.useState({date:new Date().toISOString().slice(0,10),facebookFollowers:0,instagramFollowers:0,facebookGroupMembers:0,youtubeSubscribers:0,linkedInFollowers:0,xFollowers:0,pinterestView:0,bloggerImpression:0,totalReach:0}),[l,o]=d.useState(null),[i,c]=d.useState(null),u=async()=>{try{const k=await B.listSocial(),g=(k==null?void 0:k.metrics)||(k==null?void 0:k.social)||{};if(g&&typeof g=="object"&&Object.keys(g).length>0){const N={facebookFollowers:Number(g.facebookFollowers)||0,instagramFollowers:Number(g.instagramFollowers)||0,facebookGroupMembers:Number(g.facebookGroupMembers)||0,youtubeSubscribers:Number(g.youtubeSubscribers)||0,linkedInFollowers:Number(g.linkedInFollowers)||0,xFollowers:Number(g.xFollowers)||0,pinterestView:Number(g.pinterestView)||0,bloggerImpression:Number(g.bloggerImpression)||0,totalReach:Number(g.totalReach)||0};a(v=>({...v,...N})),n([{_id:(k==null?void 0:k.updatedAt)||"latest",date:(k==null?void 0:k.updatedAt)||r.date,...N}]),c(null)}else n([]),c(null)}catch(k){console.error("Failed to load social metrics:",k),c(k.message||"Failed to load social metrics"),n([])}},x=d.useMemo(()=>t?(Array.isArray(s)?s:[]).filter(k=>new Date(k.date).toISOString().slice(0,7)===t):s,[s,t]);d.useEffect(()=>{u()},[]);const m=async k=>{k.preventDefault(),o(null),c(null);try{await B.createSocial(r),o("Social metrics updated successfully!"),await u()}catch(g){console.error("Failed to save social metrics:",g),c(g.message||"Failed to save social metrics")}},p=[{key:"facebookFollowers",label:"Facebook",icon:Tc,color:"from-blue-500 to-blue-600"},{key:"instagramFollowers",label:"Instagram",icon:Yy,color:"from-pink-500 to-purple-600"},{key:"facebookGroupMembers",label:"FB Group",icon:Me,color:"from-blue-400 to-blue-500"},{key:"youtubeSubscribers",label:"YouTube",icon:sb,color:"from-red-500 to-red-600"},{key:"linkedInFollowers",label:"LinkedIn",icon:Ec,color:"from-cyan-500 to-cyan-600"},{key:"xFollowers",label:"X (Twitter)",icon:eb,color:"from-gray-700 to-gray-800"},{key:"pinterestView",label:"Pinterest",icon:Do,color:"from-red-600 to-red-700"},{key:"bloggerImpression",label:"Blogger",icon:St,color:"from-orange-500 to-orange-600"},{key:"totalReach",label:"Total Reach",icon:Wt,color:"from-green-500 to-green-600"}],b=d.useMemo(()=>r.facebookFollowers+r.instagramFollowers+r.facebookGroupMembers+r.youtubeSubscribers+r.linkedInFollowers+r.xFollowers,[r]);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 p-5",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(_t,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Social Media Metrics"}),e.jsx("p",{className:"text-sm text-white/80",children:"Track your social presence"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/80",children:"Total Followers"}),e.jsx("p",{className:"text-2xl font-bold",children:b.toLocaleString()})]})]})}),e.jsxs("div",{className:"p-5",children:[l&&e.jsxs("div",{className:"mb-3 p-3 bg-green-50 border-l-4 border-green-500 text-green-700 rounded-lg",children:[" ",l]}),i&&e.jsxs("div",{className:"mb-3 p-3 bg-red-50 border-l-4 border-red-500 text-red-700 rounded-lg",children:[" ",i]}),x.length>0&&e.jsx("div",{className:"mb-4 grid grid-cols-2 gap-2",children:p.map(k=>{const g=k.icon,N=r[k.key];return e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-lg p-3 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`p-1.5 bg-gradient-to-r ${k.color} rounded-lg`,children:e.jsx(g,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:k.label})]}),e.jsx("div",{className:"text-lg font-bold text-gray-800",children:N.toLocaleString()})]},k.key)})}),e.jsxs("form",{onSubmit:m,className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(_t,{className:"w-4 h-4 text-purple-600"}),e.jsx("h3",{className:"text-sm font-semibold text-purple-900",children:"Update Metrics"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Date"}),e.jsx("input",{type:"date",className:"w-full border-2 border-purple-200 rounded-lg px-3 py-2 focus:border-purple-500 focus:outline-none transition-colors bg-white",value:r.date,onChange:k=>a(g=>({...g,date:k.target.value})),required:!0})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:p.map(k=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 mb-1 flex items-center gap-1",children:[e.jsx(k.icon,{className:"w-3 h-3"}),k.label]}),e.jsx("input",{type:"number",min:"0",className:"w-full border-2 border-purple-200 rounded-lg px-3 py-2 focus:border-purple-500 focus:outline-none transition-colors bg-white text-sm",value:r[k.key],onChange:g=>a(N=>({...N,[k.key]:Number(g.target.value)}))})]},k.key))}),e.jsxs("button",{className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 text-white rounded-lg px-4 py-2.5 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(_t,{className:"w-4 h-4"}),"Update Metrics"]})]}),x.length>0&&e.jsxs("div",{className:"mt-3 text-xs text-gray-500 text-center",children:["Last updated: ",new Date(x[0].date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})]})]})}function ZN({selectedMonth:t}){const[s,n]=d.useState([]),[r,a]=d.useState(!1),[l,o]=d.useState({date:new Date().toISOString().slice(0,10),typeOfWork:"Blogpost",challenge:"",details:""}),[i,c]=d.useState(null),[u,x]=d.useState(null),m=async()=>{try{const N=await B.listSEO();let v=[];Array.isArray(N)?v=N:Array.isArray(N==null?void 0:N.seo)?v=N.seo:Array.isArray(N==null?void 0:N.items)&&(v=N.items),n(v)}catch(N){x(N.message)}},p=d.useMemo(()=>t?(Array.isArray(s)?s:[]).filter(N=>new Date(N.date).toISOString().slice(0,7)===t):s,[s,t]);d.useEffect(()=>{m()},[]);const b=async N=>{N.preventDefault(),c(null),x(null);try{await B.createSEO(l),c("SEO report added successfully!"),o({date:new Date().toISOString().slice(0,10),typeOfWork:"Blogpost",challenge:"",details:""}),a(!1),m()}catch(v){x(v.message)}},k={Blogpost:"bg-green-100 text-green-800",Backlink:"bg-blue-100 text-blue-800","Social Bookmarking":"bg-purple-100 text-purple-800","Keyword Research":"bg-orange-100 text-orange-800",Others:"bg-gray-100 text-gray-800"},g=d.useMemo(()=>{const N={};return p.forEach(v=>{N[v.typeOfWork]=(N[v.typeOfWork]||0)+1}),{total:p.length,byType:N}},[p]);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-teal-600 p-5",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Dn,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"SEO Activities"}),e.jsx("p",{className:"text-sm text-white/80",children:"Track your SEO work"})]})]}),e.jsxs("button",{onClick:()=>a(!0),className:"bg-white text-green-600 rounded-lg px-4 py-2 font-semibold hover:bg-green-50 transition-colors flex items-center gap-2",children:[e.jsx(ss,{className:"w-4 h-4"}),"Add Report"]})]})}),e.jsxs("div",{className:"p-5",children:[i&&e.jsxs("div",{className:"mb-3 p-3 bg-green-50 border-l-4 border-green-500 text-green-700 rounded-lg",children:[" ",i]}),u&&e.jsxs("div",{className:"mb-3 p-3 bg-red-50 border-l-4 border-red-500 text-red-700 rounded-lg",children:[" ",u]}),g.total>0&&e.jsxs("div",{className:"mb-4 bg-gradient-to-br from-green-50 to-teal-50 rounded-xl p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-green-900",children:"Summary"}),e.jsxs("span",{className:"bg-green-600 text-white px-3 py-1 rounded-lg text-sm font-bold",children:[g.total," Reports"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(g.byType).map(([N,v])=>e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-green-200",children:[e.jsx("div",{className:"text-xs text-gray-600",children:N}),e.jsx("div",{className:"text-lg font-bold text-gray-800",children:v})]},N))})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:p.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Dn,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No SEO reports for this month"}),e.jsx("button",{onClick:()=>a(!0),className:"mt-3 text-green-600 hover:text-green-700 font-medium text-sm",children:"Add your first report "})]}):p.map(N=>e.jsxs("div",{className:"bg-gray-50 hover:bg-gray-100 rounded-lg p-3 border border-gray-200 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600",children:new Date(N.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${k[N.typeOfWork]||k.Others}`,children:N.typeOfWork})]}),N.challenge&&e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Challenge:"}),e.jsx("p",{className:"text-sm text-gray-700 mt-0.5",children:N.challenge})]}),N.details&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Details:"}),e.jsx("p",{className:"text-sm text-gray-700 mt-0.5",children:N.details})]})]},N._id))})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("form",{onSubmit:b,className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-teal-600 rounded-lg",children:e.jsx(Dn,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Add SEO Report"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-green-500 focus:outline-none transition-colors",value:l.date,onChange:N=>o(v=>({...v,date:N.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type of Work"}),e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-green-500 focus:outline-none transition-colors",value:l.typeOfWork,onChange:N=>o(v=>({...v,typeOfWork:N.target.value})),required:!0,children:[e.jsx("option",{children:"Blogpost"}),e.jsx("option",{children:"Backlink"}),e.jsx("option",{children:"Social Bookmarking"}),e.jsx("option",{children:"Keyword Research"}),e.jsx("option",{children:"Others"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Challenge"}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-green-500 focus:outline-none transition-colors",value:l.challenge,onChange:N=>o(v=>({...v,challenge:N.target.value})),placeholder:"What challenges did you face?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Details"}),e.jsx("textarea",{rows:"4",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-green-500 focus:outline-none transition-colors resize-none",value:l.details,onChange:N=>o(v=>({...v,details:N.target.value})),placeholder:"Describe the work you did..."})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-5 py-2.5 rounded-lg border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-5 py-2.5 rounded-lg bg-gradient-to-r from-green-500 to-teal-600 text-white font-semibold hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx(ss,{className:"w-4 h-4"}),"Save Report"]})]})]})})]})}function ew({selectedMonth:t}){const[s,n]=d.useState("Meta Ads"),[r,a]=d.useState([]),[l,o]=d.useState(null),[i,c]=d.useState(!1),[u,x]=d.useState(!1),[m,p]=d.useState(null),[b,k]=d.useState(null),[g,N]=d.useState({campaignName:"",platform:"Meta Ads",boostType:"Leads",cost:"",leads:"",postEngagements:"",thruPlays:"",impressions:"",reach:"",notes:"",campaignDate:new Date().toISOString().slice(0,7)}),v=d.useMemo(()=>t?(Array.isArray(r)?r:[]).filter(T=>new Date(T.campaignDate||T.createdAt).toISOString().slice(0,7)===t):r,[r,t]),h=d.useMemo(()=>{if(!v.length||!l)return l;let T=0,R=0,_=0;return v.forEach(I=>{T+=Number(I.cost)||0,R+=Number(I.leads)||0,_+=Number(I.impressions)||0}),{totalCost:T,totalLeads:R,avgCostPerLead:R>0?T/R:0,totalImpressions:_}},[v,l]);d.useEffect(()=>{j()},[s]);async function j(){c(!0),k(null);try{const[T,R]=await Promise.all([B.listDMCampaigns(s).catch(E=>(console.warn("Campaigns fetch failed",E),{campaigns:[]})),B.getDMCampaignsSummary(s).catch(E=>(console.warn("Summary fetch failed",E),{summary:null}))]),_=Array.isArray(T==null?void 0:T.campaigns)?T.campaigns:[];a(_);const I=R!=null&&R.summary&&typeof R.summary=="object"?R.summary:null;o(I)}catch(T){console.error("Failed to fetch campaigns:",T),k(T.message||"Failed to load campaigns"),a([]),o(null)}finally{c(!1)}}function y(T){const{name:R,value:_}=T.target;N(I=>({...I,[R]:_}))}async function w(T){T.preventDefault();try{const R={...g,cost:Number(g.cost),leads:Number(g.leads)||0,postEngagements:Number(g.postEngagements)||0,thruPlays:Number(g.thruPlays)||0,impressions:Number(g.impressions)||0,reach:Number(g.reach)||0};m?await B.updateDMCampaign(m,R):await B.createDMCampaign(R),N({campaignName:"",platform:"Meta Ads",boostType:"Leads",cost:"",leads:"",postEngagements:"",thruPlays:"",impressions:"",reach:"",notes:"",campaignDate:new Date().toISOString().slice(0,7)}),x(!1),p(null),await j()}catch(R){alert("Error: "+(R.message||"Failed to save campaign"))}}async function S(T){if(window.confirm("Are you sure you want to delete this campaign?"))try{await B.deleteDMCampaign(T),await j()}catch(R){alert("Error: "+(R.message||"Failed to delete"))}}function A(T){N({campaignName:T.campaignName||"",platform:T.platform||"Meta Ads",boostType:T.boostType||"Leads",cost:(T.cost||0).toString(),leads:(T.leads||0).toString(),postEngagements:(T.postEngagements||0).toString(),thruPlays:(T.thruPlays||0).toString(),impressions:(T.impressions||0).toString(),reach:(T.reach||0).toString(),notes:T.notes||"",campaignDate:T.campaignDate||new Date().toISOString().slice(0,7)}),p(T._id),x(!0)}function D(){if(v.length===0){alert("No campaigns to export for this month");return}const[T,R]=t.split("-"),_=new Date(T,R-1).toLocaleDateString("en-US",{month:"long",year:"numeric"}),I=["Campaign Name","Platform","Type","Cost ()","Leads","Engagements","ThruPlays","Impressions","Reach","CPL ()","Notes"],E=v.map(P=>[P.campaignName||"",P.platform||"",P.boostType||"",(P.cost||0).toFixed(2),P.leads||0,P.postEngagements||0,P.thruPlays||0,P.impressions||0,P.reach||0,P.costPerLead?P.costPerLead.toFixed(2):"0",P.notes||""]),V=[[],["SUMMARY"],["Total Cost",(Number(h==null?void 0:h.totalCost)||0).toFixed(2)],["Total Leads",Number(h==null?void 0:h.totalLeads)||0],["Average CPL",(Number(h==null?void 0:h.avgCostPerLead)||0).toFixed(2)],["Total Impressions",Number(h==null?void 0:h.totalImpressions)||0]],F=[[`Campaign Report - ${_}`],[],[I.join(",")],...E.map(P=>P.map(W=>`"${W}"`).join(",")),...V.map(P=>P.map(W=>`"${W}"`).join(","))].join(`
`),M=new Blob([F],{type:"text/csv;charset=utf-8;"}),C=document.createElement("a"),$=URL.createObjectURL(M);C.setAttribute("href",$),C.setAttribute("download",`Campaign-Report-${_.replace(/ /g,"-")}.csv`),C.style.visibility="hidden",document.body.appendChild(C),C.click(),document.body.removeChild(C)}return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Wt,{className:"w-5 h-5 text-blue-600"}),"Ad Campaigns"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm font-medium",title:"Download monthwise report",children:[e.jsx(Ht,{className:"w-4 h-4"})," Download Report"]}),e.jsxs("button",{onClick:()=>{x(!u),p(null),N({campaignName:"",platform:"Meta Ads",boostType:"Leads",cost:"",leads:"",postEngagements:"",thruPlays:"",impressions:"",reach:"",notes:"",campaignDate:new Date().toISOString().slice(0,7)})},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm",children:[e.jsx(ss,{className:"w-4 h-4"})," ",u?"Cancel":"Add Campaign"]})]})]}),b&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700 rounded-lg text-sm",children:[" ",b]}),e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Platform:"}),e.jsxs("select",{value:s,onChange:T=>n(T.target.value),className:"px-3 py-2 border rounded-lg bg-white text-sm",children:[e.jsx("option",{value:"Meta Ads",children:"Meta Ads"}),e.jsx("option",{value:"LinkedIn Ads",children:"LinkedIn Ads"})]})]}),h&&typeof h=="object"&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-3 border border-blue-200",children:[e.jsx("div",{className:"text-xs text-blue-600 font-semibold uppercase",children:"Total Cost"}),e.jsxs("div",{className:"text-xl font-bold text-blue-900 mt-1",children:["",(Number(h.totalCost)||0).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-3 border border-green-200",children:[e.jsx("div",{className:"text-xs text-green-600 font-semibold uppercase",children:"Total Leads"}),e.jsx("div",{className:"text-xl font-bold text-green-900 mt-1",children:Number(h.totalLeads)||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-3 border border-purple-200",children:[e.jsx("div",{className:"text-xs text-purple-600 font-semibold uppercase",children:"Avg CPL"}),e.jsxs("div",{className:"text-xl font-bold text-purple-900 mt-1",children:["",(Number(h.avgCostPerLead)||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-3 border border-orange-200",children:[e.jsx("div",{className:"text-xs text-orange-600 font-semibold uppercase",children:"Impressions"}),e.jsxs("div",{className:"text-xl font-bold text-orange-900 mt-1",children:[((Number(h.totalImpressions)||0)/1e3).toFixed(1),"K"]})]})]}),u&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:m?"Edit Campaign":"Add New Campaign"}),e.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Campaign Name *"}),e.jsx("input",{type:"text",name:"campaignName",value:g.campaignName,onChange:y,required:!0,className:"w-full px-3 py-2 border rounded text-sm",placeholder:"e.g., AI For Personal Camp"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Campaign Month *"}),e.jsx("select",{name:"campaignDate",value:g.campaignDate,onChange:y,className:"w-full px-3 py-2 border rounded text-sm",children:Array.from({length:24},(T,R)=>{const _=new Date(2025,10+R),I=_.toISOString().slice(0,7),E=_.toLocaleDateString("en-US",{month:"long",year:"numeric"});return e.jsx("option",{value:I,children:E},I)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Platform *"}),e.jsxs("select",{name:"platform",value:g.platform,onChange:y,className:"w-full px-3 py-2 border rounded text-sm",children:[e.jsx("option",{value:"Meta Ads",children:"Meta Ads"}),e.jsx("option",{value:"LinkedIn Ads",children:"LinkedIn Ads"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Boost Type *"}),e.jsxs("select",{name:"boostType",value:g.boostType,onChange:y,className:"w-full px-3 py-2 border rounded text-sm",children:[e.jsx("option",{value:"Leads",children:"Leads"}),e.jsx("option",{value:"Engagements",children:"Engagements"}),e.jsx("option",{value:"ThruPlays",children:"ThruPlays"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Cost () *"}),e.jsx("input",{type:"number",name:"cost",value:g.cost,onChange:y,required:!0,step:"0.01",className:"w-full px-3 py-2 border rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Leads"}),e.jsx("input",{type:"number",name:"leads",value:g.leads,onChange:y,className:"w-full px-3 py-2 border rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Engagements"}),e.jsx("input",{type:"number",name:"postEngagements",value:g.postEngagements,onChange:y,className:"w-full px-3 py-2 border rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"ThruPlays"}),e.jsx("input",{type:"number",name:"thruPlays",value:g.thruPlays,onChange:y,className:"w-full px-3 py-2 border rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Impressions"}),e.jsx("input",{type:"number",name:"impressions",value:g.impressions,onChange:y,className:"w-full px-3 py-2 border rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Reach"}),e.jsx("input",{type:"number",name:"reach",value:g.reach,onChange:y,className:"w-full px-3 py-2 border rounded text-sm"})]}),e.jsxs("div",{className:"lg:col-span-3 flex gap-2",children:[e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700 font-medium",children:[m?"Update":"Add"," Campaign"]}),e.jsx("button",{type:"button",onClick:()=>{x(!1),p(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded text-sm hover:bg-gray-400",children:"Cancel"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:i&&v.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500 text-sm",children:"Loading campaigns..."}):v.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500 text-sm",children:"No campaigns for this month. Add one to get started!"}):e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100 border-b border-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Campaign"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Type"}),e.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Cost ()"}),e.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Leads"}),e.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Eng"}),e.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Impressions"}),e.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Reach"}),e.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"CPL"}),e.jsx("th",{className:"px-3 py-2 text-center font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:v.map((T,R)=>e.jsxs("tr",{className:`border-b border-gray-200 ${R%2===0?"bg-white":"bg-gray-50"} hover:bg-blue-50`,children:[e.jsx("td",{className:"px-3 py-2",children:T.campaignName||""}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium",children:T.boostType||"N/A"})}),e.jsx("td",{className:"px-3 py-2 text-right font-semibold",children:(T.cost||0).toLocaleString("en-IN")}),e.jsx("td",{className:"px-3 py-2 text-right",children:T.leads||0}),e.jsx("td",{className:"px-3 py-2 text-right",children:T.postEngagements||0}),e.jsxs("td",{className:"px-3 py-2 text-right",children:[((T.impressions||0)/1e3).toFixed(1),"K"]}),e.jsxs("td",{className:"px-3 py-2 text-right",children:[((T.reach||0)/1e3).toFixed(1),"K"]}),e.jsx("td",{className:"px-3 py-2 text-right font-semibold text-green-700",children:T.costPerLead?`${Number(T.costPerLead).toFixed(2)}`:""}),e.jsxs("td",{className:"px-3 py-2 text-center",children:[e.jsx("button",{onClick:()=>A(T),className:"text-blue-600 hover:text-blue-800 inline-block mr-2",title:"Edit",children:e.jsx(kd,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(T._id),className:"text-red-600 hover:text-red-800 inline-block",title:"Delete",children:e.jsx(cn,{className:"w-4 h-4"})})]})]},T._id))})]})})]})}function _s(t){if(!t)return"-";try{return new Date(t).toLocaleString()}catch{return t}}const Rm=[{key:"Assigned",path:"/admission/assigned",label:"Assigned Lead"},{key:"Counseling",path:"/admission/counseling",label:"Counseling"},{key:"In Follow Up",path:"/admission/follow-up",label:"In Follow-Up"},{key:"Admitted",path:"/admission/admitted",label:"Admitted"},{key:"Not Admitted",path:"/admission/not-admitted",label:"Not Admitted"}];function _r(){const{user:t}=fe(),s=gn(),n=d.useMemo(()=>{const r=Rm.find(a=>a.path===s.pathname);return r?r.key:"Assigned"},[s.pathname]);return(t==null?void 0:t.role)!=="Admission"&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin"?e.jsx("div",{className:"text-royal",children:"Access denied"}):e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-navy mb-3",children:"Admission Pipeline"}),e.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[Rm.map(r=>e.jsx(ln,{to:r.path,className:`px-3 py-1.5 rounded-xl border ${n===r.key?"bg-gold text-navy border-gold":"hover:bg-[#f3f6ff]"}`,children:r.label},r.key)),n==="Admitted"&&(t==null?void 0:t.role)==="Admission"&&e.jsx(ln,{to:"/admission/fees",className:"ml-auto px-3 py-1.5 rounded-xl bg-gold text-navy font-semibold",children:"Admission Fees"})]}),e.jsx(tw,{status:n,canAct:(t==null?void 0:t.role)==="Admission"})]})}function tw({status:t,canAct:s}){var Vt;const[n,r]=d.useState([]),[a,l]=d.useState(""),[o,i]=d.useState(null),[c,u]=d.useState(null),[x,m]=d.useState(!1),[p,b]=d.useState(""),[k,g]=d.useState(null),[N,v]=d.useState(""),[h,j]=d.useState("Interested"),[y,w]=d.useState(!1),[S,A]=d.useState(""),[D,T]=d.useState(null),[R,_]=d.useState(!1),[I,E]=d.useState(null),[V,F]=d.useState(!1),[M,C]=d.useState(!1),[$,P]=d.useState(null),[W,O]=d.useState(""),[U,q]=d.useState(""),[ee,z]=d.useState([]),[te,K]=d.useState([]),[G,oe]=d.useState(!1),[le,Z]=d.useState(null),[L,H]=d.useState(!1),[re,se]=d.useState(!1),[me,he]=d.useState(null),[ie,xe]=d.useState({leadId:"",courseName:"",totalAmount:"",nowPaying:"",method:"Bkash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""}),[pe,De]=d.useState(null),[gt,Ie]=d.useState(null),[ke,ls]=d.useState(!1),[fn,hs]=d.useState(""),[rt,Es]=d.useState("all"),[Ms,Mt]=d.useState(""),[Ls,$a]=d.useState("all"),[Oo,Cr]=d.useState([]),On=async()=>{try{const{leads:Y}=await B.listAdmissionLeads(t);r(Y||[]);const ae=new Set((Y==null?void 0:Y.filter(ye=>ye.interestedCourse).map(ye=>ye.interestedCourse))||[]);Cr(Array.from(ae).sort()),u(null)}catch(Y){u(Y.message)}},Fo=async()=>{oe(!0);try{const[Y,ae]=await Promise.all([B.listCourses(),B.listBatches("Active")]);z((Y==null?void 0:Y.courses)||[]),K((ae==null?void 0:ae.batches)||[])}catch(Y){console.error("Failed to load courses/batches:",Y),u("Failed to load courses/batches: "+Y.message)}finally{oe(!1)}};d.useEffect(()=>{On()},[t]);const Fn=async(Y,ae,ye="",_e="",Ce="",Ze="")=>{i(null),u(null);try{await B.updateLeadStatus(Y,ae,ye,_e,Ce,Ze),i(`Status updated to ${ae}`),m(!1),b(""),g(null),v(""),w(!1),A(""),T(null),C(!1),P(null),O(""),q(""),_(!1),E(null),F(!1),On()}catch(Ye){u(Ye.message)}},Oa=Y=>{P(Y),O(""),q(""),Z(null),C(!0),Fo(),_o(Y)},_o=async Y=>{H(!0);try{const ae=await B.checkAdmissionFeeStatus(Y);Z(ae)}catch(ae){console.error("Failed to check fee status:",ae),Z({hasApprovedFee:!1,message:ae.message})}finally{H(!1)}},zo=Y=>{he(Y),xe({leadId:Y._id,courseName:Y.interestedCourse||"",totalAmount:"",nowPaying:"",method:"Bkash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""}),De(null),Ie(null),se(!0)},Ge=async Y=>{Y.preventDefault(),De(null),Ie(null),ls(!0);try{const ae=Number(ie.totalAmount)||0,ye=Number(ie.nowPaying)||0,_e={...ie,amount:ye,totalAmount:ae,dueAmount:ae-ye};await B.createAdmissionFee(_e),De("Fee submitted for review"),setTimeout(()=>{se(!1),he(null),xe({leadId:"",courseName:"",totalAmount:"",nowPaying:"",method:"Bkash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""}),De(null)},1500)}catch(ae){Ie(ae.message)}finally{ls(!1)}},Ke=d.useMemo(()=>{let Y=n;if(a.trim()){const ae=a.toLowerCase();Y=Y.filter(ye=>{var _e,Ce,Ze,Ye,Lt,Ps,Is;return((_e=ye.leadId)==null?void 0:_e.toLowerCase().includes(ae))||((Ce=ye.name)==null?void 0:Ce.toLowerCase().includes(ae))||((Ze=ye.phone)==null?void 0:Ze.includes(ae))||((Ye=ye.email)==null?void 0:Ye.toLowerCase().includes(ae))||((Lt=ye.interestedCourse)==null?void 0:Lt.toLowerCase().includes(ae))||((Is=(Ps=ye.assignedTo)==null?void 0:Ps.name)==null?void 0:Is.toLowerCase().includes(ae))})}if(fn&&(Y=Y.filter(ae=>ae.interestedCourse===fn)),Ls!=="all"&&(Y=Y.filter(ae=>ae.priority===Ls)),t==="In Follow Up"&&rt!=="all"){const ae=new Date;ae.setHours(0,0,0,0),Y=Y.filter(ye=>{if(!ye.nextFollowUpDate)return!1;const _e=new Date(ye.nextFollowUpDate);_e.setHours(0,0,0,0);const Ce=new Date(ae);Ce.setDate(Ce.getDate()-1);const Ze=new Date(ae);if(Ze.setDate(Ze.getDate()+1),rt==="today")return _e.getTime()===ae.getTime();if(rt==="yesterday")return _e.getTime()===Ce.getTime();if(rt==="nextday")return _e.getTime()===Ze.getTime();if(rt==="bydate"&&Ms){const Ye=new Date(Ms);return Ye.setHours(0,0,0,0),_e.getTime()===Ye.getTime()}return!1})}return Y},[n,a,fn,Ls,t,rt,Ms]),ct=Y=>s?t==="Assigned"?e.jsx(ps,{onClick:()=>Fn(Y._id,"Counseling"),children:"Start Counseling"}):t==="Counseling"?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ps,{onClick:()=>Oa(Y._id),children:"Admitted"}),e.jsx(ps,{onClick:()=>{g(Y._id),b(""),v(""),j(Y.priority||"Interested"),m(!0)},children:"Follow-Up"}),e.jsx(ps,{variant:"danger",onClick:()=>{T(Y._id),A(""),w(!0)},children:"Not Admitted"}),e.jsx(ps,{onClick:async()=>{try{u(null),F(!0);const ae=await B.getLeadHistory(Y._id);E(ae.lead||ae),_(!0)}catch(ae){u(ae.message)}finally{F(!1)}},children:V?"Loading":"History"})]}):t==="In Follow Up"?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ps,{onClick:()=>Oa(Y._id),children:"Admitted"}),e.jsx(ps,{onClick:()=>{g(Y._id),b(""),v(""),j(Y.priority||"Interested"),m(!0)},children:"Follow-Up Again"}),e.jsx(ps,{variant:"danger",onClick:()=>{T(Y._id),A(""),w(!0)},children:"Not Admitted"}),e.jsx(ps,{onClick:async()=>{try{u(null),F(!0);const ae=await B.getLeadHistory(Y._id);E(ae.lead||ae),_(!0)}catch(ae){u(ae.message)}finally{F(!1)}},children:V?"Loading":"History"})]}):e.jsx("span",{className:"text-royal/60",children:""}):null;return e.jsxs("div",{children:[o&&e.jsx("div",{className:"mb-2 text-green-700",children:o}),c&&e.jsx("div",{className:"mb-2 text-red-600",children:c}),e.jsxs("div",{className:"mb-4 bg-white rounded-xl shadow-soft p-4 flex flex-wrap gap-3 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Course:"}),e.jsxs("select",{value:fn,onChange:Y=>hs(Y.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[e.jsx("option",{value:"",children:"All Courses"}),Oo.map(Y=>e.jsx("option",{value:Y,children:Y},Y))]})]}),t==="In Follow Up"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Priority:"}),e.jsxs("select",{value:Ls,onChange:Y=>$a(Y.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"Very Interested",children:"Very Interested"}),e.jsx("option",{value:"Interested",children:"Interested"}),e.jsx("option",{value:"Few Interested",children:"Few Interested"}),e.jsx("option",{value:"Not Interested",children:"Not Interested"})]})]}),t==="In Follow Up"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Follow-up Date:"}),e.jsxs("select",{value:rt,onChange:Y=>{Es(Y.target.value),Y.target.value!=="bydate"&&Mt("")},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[e.jsx("option",{value:"all",children:"All Dates"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"yesterday",children:"Yesterday"}),e.jsx("option",{value:"nextday",children:"Next Day"}),e.jsx("option",{value:"bydate",children:"By Date"})]})]}),rt==="bydate"&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"date",value:Ms,onChange:Y=>Mt(Y.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"})})]}),(fn||Ls!=="all"||rt!=="all"||Ms)&&e.jsx("button",{onClick:()=>{hs(""),$a("all"),Es("all"),Mt("")},className:"ml-auto px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:"Reset Filters"})]}),e.jsxs("div",{className:"mb-4 bg-white rounded-xl shadow-soft p-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:" Search by Lead ID, Name, Phone, Email, Course, or Assigned Member...",className:"w-full border border-blue-300 rounded-lg px-4 py-3 pl-10 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 bg-blue-50",value:a,onChange:Y=>l(Y.target.value)}),e.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),a&&e.jsx("button",{type:"button",onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 bg-white rounded-full p-1",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&e.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:[" Showing ",Ke.length," of ",n.length," lead(s)"]})]}),M&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>C(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-6 z-10 w-full max-w-md shadow-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-navy mb-4",children:"Admit Student"}),L?e.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin",children:""}),e.jsx("p",{className:"text-sm text-blue-700 ml-2",children:"Checking admission fees..."})]})}):le!=null&&le.hasApprovedFee?e.jsx("div",{className:"mb-4 p-4 bg-green-50 rounded-lg border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-green-800",children:"Admission Fees Approved"}),e.jsx("p",{className:"text-sm text-green-700",children:"You can proceed with admission."})]})]})}):e.jsx("div",{className:"mb-4 p-4 bg-red-50 rounded-lg border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-red-800 mb-1",children:"Admission Fees Not Collected or Not Approved"}),e.jsx("p",{className:"text-sm text-red-700 mb-3",children:"Please collect and get approval for admission fees before marking student as admitted."}),e.jsx("button",{type:"button",onClick:()=>{C(!1);const Y=n.find(ae=>ae._id===$);Y&&zo(Y)},className:"inline-block px-3 py-1.5 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition",children:" Collect Admission Fees"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Course ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:W,onChange:Y=>O(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-gold",disabled:G||!(le!=null&&le.hasApprovedFee),required:!0,children:[e.jsx("option",{value:"",children:G?"Loading...":"Select a course"}),ee.map(Y=>e.jsxs("option",{value:Y._id,children:[Y.name," (",Y.courseId,")"]},Y._id))]}),ee.length===0&&!G&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"No courses available"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Batch ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:U,onChange:Y=>q(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-gold",disabled:G||!(le!=null&&le.hasApprovedFee),required:!0,children:[e.jsx("option",{value:"",children:G?"Loading...":"Select a batch"}),te.map(Y=>{var ae;return e.jsxs("option",{value:Y._id,children:[Y.batchName," - ",Y.category," (",((ae=Y.admittedStudents)==null?void 0:ae.length)||0,"/",Y.targetedStudent,")"]},Y._id)})]}),te.length===0&&!G&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"No active batches available. Contact admin to create a batch."})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{C(!1),P(null),O(""),q(""),Z(null)},className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>Fn($,"Admitted","",W,U),className:"px-4 py-2 rounded-xl bg-gold text-navy font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!W||!U||G||!(le!=null&&le.hasApprovedFee),children:"Confirm Admission"})]})]})]}),re&&me&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:e.jsxs("form",{onSubmit:Ge,className:"bg-white rounded-2xl shadow-2xl p-5 w-full max-w-lg transform transition-all max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[#053867]",children:"Collect Admission Fees"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Student: ",e.jsx("span",{className:"font-semibold",children:me.name})," (",me.leadId,")"]})]}),e.jsx("button",{type:"button",onClick:()=>{se(!1),he(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),pe&&e.jsxs("div",{className:"mb-3 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:[" ",pe]}),gt&&e.jsxs("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[" ",gt]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Lead ID"}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm bg-gray-50",value:me.leadId,disabled:!0})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Student Name"}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm bg-gray-50",value:me.name,disabled:!0})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Course Name *"}),e.jsx("input",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0,placeholder:"e.g., Graphics Design Professional",value:ie.courseName,onChange:Y=>xe(ae=>({...ae,courseName:Y.target.value}))})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Total Amount *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:""}),e.jsx("input",{type:"number",className:"w-full border border-green-300 rounded-lg pl-7 pr-3 py-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-green-400 bg-green-50",required:!0,placeholder:"0",min:"0",value:ie.totalAmount||"",onChange:Y=>xe(ae=>({...ae,totalAmount:Y.target.value}))})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Now Paying *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:""}),e.jsx("input",{type:"number",className:"w-full border border-orange-300 rounded-lg pl-7 pr-3 py-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-orange-400 bg-orange-50",required:!0,placeholder:"0",min:"0",value:ie.nowPaying||"",onChange:Y=>xe(ae=>({...ae,nowPaying:Y.target.value}))})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Payment Method *"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white",value:ie.method,onChange:Y=>xe(ae=>({...ae,method:Y.target.value})),children:[e.jsx("option",{children:"Bkash"}),e.jsx("option",{children:"Nagad"}),e.jsx("option",{children:"Rocket"}),e.jsx("option",{children:"Bank Transfer"}),e.jsx("option",{children:"Cash on Hand"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Payment Date *"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0,value:ie.paymentDate,onChange:Y=>xe(ae=>({...ae,paymentDate:Y.target.value}))})]})})]}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Next Payment Date (Optional)"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",value:ie.nextPaymentDate||"",onChange:Y=>xe(ae=>({...ae,nextPaymentDate:Y.target.value}))})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Additional Note"}),e.jsx("textarea",{rows:"2",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 resize-none",placeholder:"Add any additional information...",value:ie.note||"",onChange:Y=>xe(ae=>({...ae,note:Y.target.value}))})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 mt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{se(!1),he(null)},className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 text-sm font-medium hover:bg-gray-200 transition-colors",disabled:ke,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:ke,className:"px-4 py-2 rounded-lg bg-gradient-to-r from-[#F7BA23] to-[#f5a623] text-[#053867] text-sm font-bold hover:shadow-lg transition-all flex items-center gap-1.5 disabled:opacity-50 disabled:cursor-not-allowed",children:ke?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Submit Fee"]})})]})]})}),x&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>m(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-lg shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Add Follow-Up Note"}),e.jsx("textarea",{rows:4,className:"w-full border rounded-xl px-3 py-2 mb-3",value:p,onChange:Y=>b(Y.target.value),placeholder:"Enter follow-up note (optional)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Next Follow-Up Date"}),e.jsx("input",{type:"date",value:N,onChange:Y=>v(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsxs("select",{value:h,onChange:Y=>j(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-gold",children:[e.jsx("option",{value:"Very Interested",children:"Very Interested"}),e.jsx("option",{value:"Interested",children:"Interested"}),e.jsx("option",{value:"Few Interested",children:"Few Interested"}),e.jsx("option",{value:"Not Interested",children:"Not Interested"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),b(""),g(null),v(""),j("Interested")},className:"px-3 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{type:"button",onClick:async()=>{try{u(null),await B.addLeadFollowUp(k,{note:p,nextFollowUpDate:N,priority:h}),i("Follow-up added successfully"),m(!1),b(""),g(null),v(""),j("Interested"),On()}catch(Y){u(Y.message)}},className:"px-3 py-2 rounded-xl bg-gold text-navy",children:"Save Follow-Up"})]})]})]}),R&&I&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>_(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-6 z-10 w-full max-w-3xl shadow-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 text-navy",children:["Lead History  ",I.leadId]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"})," ",e.jsx("strong",{children:I.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",e.jsx("strong",{children:I.phone||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"})," ",e.jsx("strong",{children:I.email||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Course:"})," ",e.jsx("strong",{children:I.interestedCourse||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"})," ",e.jsx("strong",{className:"text-indigo-600",children:I.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Assigned To:"})," ",e.jsx("strong",{children:((Vt=I.assignedTo)==null?void 0:Vt.name)||"-"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border-l-4 border-blue-400 pl-4 py-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Assigned At"}),e.jsx("div",{className:"font-semibold",children:I.assignedAt?_s(I.assignedAt):e.jsx("span",{className:"text-gray-400",children:"Not recorded"})})]}),e.jsxs("div",{className:"border-l-4 border-purple-400 pl-4 py-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Counseling At"}),e.jsx("div",{className:"font-semibold",children:I.counselingAt?_s(I.counselingAt):e.jsx("span",{className:"text-gray-400",children:"Not yet"})})]}),e.jsxs("div",{className:"border-l-4 border-green-400 pl-4 py-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Admitted At"}),e.jsx("div",{className:"font-semibold",children:I.admittedAt?_s(I.admittedAt):e.jsx("span",{className:"text-gray-400",children:"Not admitted yet"})}),I.admittedToCourse&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Course: ",e.jsx("strong",{children:I.admittedToCourse.name})]}),I.admittedToBatch&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Batch: ",e.jsx("strong",{children:I.admittedToBatch.name})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"font-bold text-navy mb-2",children:["Follow-ups (",(I.followUps||[]).length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(I.followUps||[]).length===0?e.jsx("div",{className:"text-gray-500 text-sm bg-gray-50 p-3 rounded-lg",children:"No follow-ups recorded"}):(I.followUps||[]).map((Y,ae)=>{var ye;return e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border-l-4 border-orange-400",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:_s(Y.at)}),((ye=Y.by)==null?void 0:ye.name)&&e.jsxs("div",{className:"text-xs text-gray-500",children:["by ",Y.by.name]}),e.jsx("div",{className:"text-sm text-gray-800 mt-1",children:Y.note||e.jsx("span",{className:"text-gray-400",children:"No note"})}),Y.nextFollowUpDate&&e.jsxs("div",{className:"text-xs text-indigo-600 mt-1",children:["Next follow-up: ",new Date(Y.nextFollowUpDate).toLocaleDateString("en-GB")]})]})})},ae)})})]}),I.notes&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-bold text-navy mb-2",children:"Additional Notes"}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm",children:I.notes})]}),e.jsx("div",{className:"mt-6 flex justify-end gap-2",children:e.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50",children:"Close"})})]})]}),y&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>w(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-lg shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Reason for Not Admitted"}),e.jsx("textarea",{rows:6,className:"w-full border rounded-xl px-3 py-2 mb-3",value:S,onChange:Y=>A(Y.target.value),placeholder:"Enter reason (optional)"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{w(!1),A(""),T(null)},className:"px-3 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>Fn(D,"Not Admitted",S),className:"px-3 py-2 rounded-xl bg-red-600 text-white",children:"Save"})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Lead ID"}),e.jsx("th",{className:"p-3 text-left",children:"Name"}),e.jsx("th",{className:"p-3 text-left",children:"Phone / Email"}),e.jsx("th",{className:"p-3 text-left",children:"Course"}),e.jsx("th",{className:"p-3 text-left",children:"Source"}),e.jsx("th",{className:"p-3 text-left",children:"Assigned To"}),t==="Assigned"&&e.jsx("th",{className:"p-3 text-left",children:"Assigned At"}),t==="Counseling"&&e.jsx("th",{className:"p-3 text-left",children:"Counseling At"}),t==="In Follow Up"&&e.jsx("th",{className:"p-3 text-left",children:"Follow-Ups"}),t==="In Follow Up"&&e.jsx("th",{className:"p-3 text-left",children:"Priority"}),t==="In Follow Up"&&e.jsx("th",{className:"p-3 text-left",children:"Next Follow-Up Date"}),t==="Admitted"&&e.jsx("th",{className:"p-3 text-left",children:"Admitted At"}),e.jsx("th",{className:"p-3 text-left",children:"Action"})]})}),e.jsxs("tbody",{children:[Ke.map(Y=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{children:Y.leadId}),(Y.followUps||[]).length>0&&e.jsxs("div",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full",children:[(Y.followUps||[]).length," FU"]})]})}),e.jsx("td",{className:"p-3",children:Y.name}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{children:Y.phone}),e.jsx("div",{className:"text-xs text-royal/70",children:Y.email||"-"})]}),e.jsx("td",{className:"p-3",children:Y.interestedCourse||"-"}),e.jsx("td",{className:"p-3",children:Y.source}),e.jsx("td",{className:"p-3",children:Y.assignedTo?Y.assignedTo.name:"-"}),t==="Assigned"&&e.jsx("td",{className:"p-3",children:_s(Y.assignedAt||Y.updatedAt)}),t==="Counseling"&&e.jsx("td",{className:"p-3",children:_s(Y.counselingAt||Y.updatedAt)}),t==="In Follow Up"&&e.jsx("td",{className:"p-3",children:(Y.followUps||[]).length===0?e.jsx("div",{className:"text-royal/70",children:"No follow-ups"}):e.jsx("div",{className:"flex flex-col gap-1",children:(Y.followUps||[]).map((ae,ye)=>{var _e;return e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium",children:_s(ae.at)}),e.jsxs("div",{className:"text-royal/70",children:[ae.note||"-"," ",(_e=ae.by)!=null&&_e.name?`  ${ae.by.name}`:""]})]},ye)})})}),t==="In Follow Up"&&e.jsx("td",{className:"p-3",children:e.jsx("div",{className:`text-xs font-semibold px-2 py-1 rounded-lg inline-block ${Y.priority==="Very Interested"?"text-green-800 bg-green-100":Y.priority==="Interested"?"text-blue-800 bg-blue-100":Y.priority==="Few Interested"?"text-yellow-800 bg-yellow-100":Y.priority==="Not Interested"?"text-red-800 bg-red-100":"text-gray-800 bg-gray-100"}`,children:Y.priority||"Interested"})}),t==="In Follow Up"&&e.jsx("td",{className:"p-3",children:Y.nextFollowUpDate?e.jsx("div",{className:`text-sm font-semibold px-2 py-1 rounded-lg ${(()=>{if(!Y.nextFollowUpDate)return"text-gray-600 bg-gray-50";const ae=new Date(Y.nextFollowUpDate),ye=new Date;return ye.setHours(0,0,0,0),ae.setHours(0,0,0,0),ae.getTime()<ye.getTime()?"text-red-700 bg-red-50":ae.getTime()===ye.getTime()?"text-orange-700 bg-orange-50":"text-green-700 bg-green-50"})()}`,children:new Date(Y.nextFollowUpDate).toLocaleDateString()}):e.jsx("div",{className:"text-royal/70 text-xs",children:"-"})}),t==="Admitted"&&e.jsx("td",{className:"p-3",children:_s(Y.admittedAt||Y.updatedAt)}),e.jsx("td",{className:"p-3",children:ct(Y)})]},Y._id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:t==="In Follow Up"?"10":"8",children:"No leads"})}),n.length>0&&Ke.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70 text-center",colSpan:t==="In Follow Up"?"10":"8",children:"No leads found matching your filters"})})]})]})})]})}function ps({children:t,onClick:s,variant:n="default"}){const r=n==="danger"?"px-3 py-1 rounded-lg border text-red-700 hover:bg-red-50":"px-3 py-1 rounded-lg border hover:bg-[#f3f6ff]";return e.jsx("button",{onClick:s,className:r,children:t})}function sw(){var A,D,T,R;const{user:t}=fe();if((t==null?void 0:t.role)!=="Admission"&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin"&&(t==null?void 0:t.role)!=="Accountant"&&(t==null?void 0:t.role)!=="Coordinator")return e.jsx("div",{className:"text-royal",children:"Access denied"});const[s,n]=d.useState([]),[r,a]=d.useState([]),[l,o]=d.useState(""),[i,c]=d.useState(!1),[u,x]=d.useState(!1),[m,p]=d.useState(null),[b,k]=d.useState(null),[g,N]=d.useState(null),[v,h]=d.useState({leadId:"",courseName:"",totalAmount:"",nowPaying:"",method:"Bkash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""}),j=(t==null?void 0:t.role)==="Admission",y=async()=>{try{const[{fees:_},I]=await Promise.all([B.listAdmissionFees(),B.listAdmissionLeads()]);n(_||[]);const E=((I==null?void 0:I.leads)||[]).filter(V=>V.status!=="Admitted"&&V.status!=="Not Admitted");a(E)}catch(_){N(_.message)}};d.useEffect(()=>{y()},[]);const w=async _=>{_.preventDefault(),k(null),N(null);try{const I=Number(v.totalAmount)||0,E=Number(v.nowPaying)||0,V={...v,amount:E,totalAmount:I,dueAmount:I-E};await B.createAdmissionFee(V),k("Fee submitted for review"),c(!1),h({leadId:"",courseName:"",totalAmount:"",nowPaying:"",method:"Bkash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""}),o(""),y()}catch(I){N(I.message)}},S=ve.useMemo(()=>{if(!l.trim())return r;const _=l.toLowerCase();return r.filter(I=>{var E,V,F,M;return((E=I.leadId)==null?void 0:E.toLowerCase().includes(_))||((V=I.name)==null?void 0:V.toLowerCase().includes(_))||((F=I.phone)==null?void 0:F.includes(_))||((M=I.email)==null?void 0:M.toLowerCase().includes(_))})},[r,l]);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Admission Fees Collection"}),j&&e.jsx("button",{onClick:()=>c(!0),className:"bg-gold text-navy rounded-xl px-4 py-2 font-semibold",children:"Collect Admission Fees"})]}),b&&e.jsx("div",{className:"mb-2 text-green-700",children:b}),g&&e.jsx("div",{className:"mb-2 text-red-600",children:g}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Lead"}),e.jsx("th",{className:"p-3 text-left",children:"Course"}),e.jsx("th",{className:"p-3 text-left",children:"Total Amount"}),e.jsx("th",{className:"p-3 text-left",children:"Paid"}),e.jsx("th",{className:"p-3 text-left",children:"Due"}),e.jsx("th",{className:"p-3 text-left",children:"Method"}),e.jsx("th",{className:"p-3 text-left",children:"Payment Date"}),e.jsx("th",{className:"p-3 text-left",children:"Status"}),e.jsx("th",{className:"p-3 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[s.map(_=>{var I,E,V,F;return e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsxs("td",{className:"p-3",children:[(I=_.lead)==null?void 0:I.leadId,"  ",(E=_.lead)==null?void 0:E.name,e.jsxs("div",{className:"text-xs text-royal/70",children:[(V=_.lead)==null?void 0:V.phone," ",(F=_.lead)!=null&&F.email?` ${_.lead.email}`:""]})]}),e.jsx("td",{className:"p-3",children:_.courseName}),e.jsxs("td",{className:"p-3 font-semibold",children:[" ",_.totalAmount||0]}),e.jsxs("td",{className:"p-3 text-green-600 font-semibold",children:[" ",_.amount||0]}),e.jsxs("td",{className:"p-3 text-orange-600 font-semibold",children:[" ",_.dueAmount||0]}),e.jsx("td",{className:"p-3",children:_.method}),e.jsx("td",{className:"p-3",children:new Date(_.paymentDate).toLocaleDateString()}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_.status==="Approved"?"bg-green-100 text-green-700":_.status==="Rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:_.status})}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("button",{onClick:()=>{p(_),x(!0)},className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-500 text-white rounded-lg text-xs font-medium hover:bg-blue-600 transition-colors",children:[e.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Details"]})})]},_._id)}),s.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:"9",children:"No fees yet"})})]})]})}),i&&j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:e.jsxs("form",{onSubmit:w,className:"bg-white rounded-2xl shadow-2xl p-5 w-full max-w-lg transform transition-all max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[#053867]",children:"Collect Admission Fees"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Fill in the payment details"})]}),e.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsxs("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Select Student (Your Assigned Leads - Not Admitted) *"]}),e.jsxs("div",{className:"relative mb-2",children:[e.jsx("input",{type:"text",placeholder:" Search by Lead ID, Name, Phone, or Email...",className:"w-full border border-blue-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 bg-blue-50",value:l,onChange:_=>o(_.target.value)}),l&&e.jsx("button",{type:"button",onClick:()=>o(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white max-h-48",required:!0,size:"5",value:v.leadId,onChange:_=>h(I=>({...I,leadId:_.target.value})),children:[e.jsx("option",{value:"",children:"Choose student..."}),S.length===0&&l&&e.jsxs("option",{value:"",disabled:!0,children:['No leads found matching "',l,'"']}),S.length===0&&!l&&e.jsx("option",{value:"",disabled:!0,children:"No eligible leads assigned to you"}),S.map(_=>e.jsxs("option",{value:_._id,children:[_.leadId,"  ",_.name," (",_.phone,")  Status: ",_.status]},_._id))]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" Showing ",S.length," of ",r.length," eligible lead(s)"]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Course Name *"}),e.jsx("input",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0,placeholder:"e.g., Graphics Design Professional",value:v.courseName,onChange:_=>h(I=>({...I,courseName:_.target.value}))})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Total Amount *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:""}),e.jsx("input",{type:"number",className:"w-full border border-green-300 rounded-lg pl-7 pr-3 py-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-green-400 bg-green-50",required:!0,placeholder:"0",min:"0",value:v.totalAmount||"",onChange:_=>h(I=>({...I,totalAmount:_.target.value}))})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Now Paying *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:""}),e.jsx("input",{type:"number",className:"w-full border border-orange-300 rounded-lg pl-7 pr-3 py-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-orange-400 bg-orange-50",required:!0,placeholder:"0",min:"0",value:v.nowPaying||"",onChange:_=>h(I=>({...I,nowPaying:_.target.value}))})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Payment Method *"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white",value:v.method,onChange:_=>h(f={...f,method:_.target.value}),children:[e.jsx("option",{children:"Bkash"}),e.jsx("option",{children:"Nagad"}),e.jsx("option",{children:"Rocket"}),e.jsx("option",{children:"Bank Transfer"}),e.jsx("option",{children:"Cash on Hand"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Payment Date *"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0,value:v.paymentDate,onChange:_=>h(f={...f,paymentDate:_.target.value})})]})})]}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Next Payment Date (Optional)"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",value:v.nextPaymentDate||"",onChange:_=>h(I=>({...I,nextPaymentDate:_.target.value}))})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Additional Note"}),e.jsx("textarea",{rows:"2",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 resize-none",placeholder:"Add any additional information...",value:v.note||"",onChange:_=>h(I=>({...I,note:_.target.value}))})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 mt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 text-sm font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-gradient-to-r from-[#F7BA23] to-[#f5a623] text-[#053867] text-sm font-bold hover:shadow-lg transition-all flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Submit"]})]})]})}),u&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-4 mb-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[#053867]",children:"Fee Collection Details"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Complete information about this payment"})]}),e.jsx("button",{type:"button",onClick:()=>{x(!1),p(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Student Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Lead ID:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:(A=m.lead)==null?void 0:A.leadId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:(D=m.lead)==null?void 0:D.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:(T=m.lead)==null?void 0:T.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:((R=m.lead)==null?void 0:R.email)||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Payment Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Course:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:m.courseName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:m.method})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("p",{className:"font-bold text-lg text-[#053867]",children:[" ",m.totalAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Amount Paid:"}),e.jsxs("p",{className:"font-bold text-lg text-green-600",children:[" ",m.amount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Due Amount:"}),e.jsxs("p",{className:"font-bold text-lg text-orange-600",children:[" ",m.dueAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("p",{children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${m.status==="Approved"?"bg-green-100 text-green-700":m.status==="Rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:m.status})})]})]})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Important Dates"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Date:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:new Date(m.paymentDate).toLocaleDateString("en-GB")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Next Payment Date:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:m.nextPaymentDate?new Date(m.nextPaymentDate).toLocaleDateString("en-GB"):"Not set"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Submitted At:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:new Date(m.createdAt).toLocaleString("en-GB")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Last Updated:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:new Date(m.updatedAt).toLocaleString("en-GB")})]})]})]}),m.note&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-2 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Additional Notes"]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:m.note})]})]}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{x(!1),p(null)},className:"px-6 py-2 rounded-lg bg-gray-100 text-gray-700 text-sm font-medium hover:bg-gray-200 transition-colors",children:"Close"})})]})})]})}function zs(t){if(!t)return"";try{return new Date(t).toISOString().slice(0,10)}catch{return""}}function nw(){const{user:t}=fe(),[s,n]=d.useState("daily"),[r,a]=d.useState(""),[l,o]=d.useState(""),[i,c]=d.useState(null),[u,x]=d.useState(!1),[m,p]=d.useState([]),[b,k]=d.useState((t==null?void 0:t._id)||"me"),[g,N]=d.useState(!1),v=(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin",h=(t==null?void 0:t.role)==="Admission",j=v||h,[y,w]=d.useState(!1);d.useEffect(()=>{v&&B.listAdmissionUsers().then(R=>{p((R==null?void 0:R.users)||[])}).catch(()=>{})},[v]),d.useEffect(()=>{A()},[s,r,l,b]);function S(){if(s==="custom")return r&&l?{from:zs(r),to:zs(l)}:{from:null,to:null};const R=new Date;if(s==="daily"){const _=new Date(R);_.setHours(0,0,0,0);const I=new Date(R);return I.setHours(23,59,59,999),{from:zs(_),to:zs(I)}}if(s==="weekly"){const _=new Date(R);return _.setDate(R.getDate()-7),_.setHours(0,0,0,0),{from:zs(_),to:zs(R)}}if(s==="monthly"){const _=new Date(R);return _.setMonth(R.getMonth()-1),_.setHours(0,0,0,0),{from:zs(_),to:zs(R)}}return{from:null,to:null}}async function A(){x(!0);try{const R=S(),_=v?b==="me"?t._id:b==="all"?void 0:b:t._id,I=B.getAdmissionMetrics(_,R.from,R.to).catch(M=>(console.warn("getAdmissionMetrics failed",M),null)),E=B.getAdmissionReports(_,R.from,R.to).catch(M=>(console.warn("getAdmissionReports failed",M),null)),[V,F]=await Promise.all([I,E]);c({metricsResp:V,reportsResp:F})}catch(R){console.error("Failed to load metrics",R),c(null)}finally{x(!1)}}const D={counselingCount:0,followUpCount:0,admittedCount:0,interestedCount:0,notInterestedCount:0};if(i){const{metricsResp:R,reportsResp:_}=i;if(R&&(R.stats?(D.counselingCount=R.stats.counseling||0,D.followUpCount=R.stats.followUps||R.stats.followUp||0):(D.counselingCount=R.counselingCount||R.counseling||0,D.followUpCount=R.followUpCount||R.followUps||0)),_){const I=_.stats||{};D.admittedCount=I.admitted||0;let E=[];Array.isArray(_.leads)?E=_.leads:Array.isArray(_.reports)&&(E=[].concat(..._.reports.map(C=>C.leads||[])));const V=new Set(["Very Interested","Interested","Few Interested"]);let F=0,M=0;E.forEach(C=>{const $=C.priority;$&&V.has($)?F++:$==="Not Interested"&&M++}),F+M===0&&(I.interested!==void 0||I.notInterested!==void 0)&&(F=I.interested||0,M=I.notInterested||0),D.interestedCount=F,D.notInterestedCount=M}}async function T(){var R;N(!0);try{const _=S(),I=v?b==="all"?"all":b==="me"?t.name:((R=m.find(P=>P._id===b))==null?void 0:R.name)||"user":t.name,E=[];E.push(["Report For",I]),E.push(["Period",s==="custom"&&r&&l?`${r} to ${l}`:s]),E.push([]),E.push(["Metric","Value"]),E.push(["Total Counseling Calls",D.counselingCount]),E.push(["Total Follow-up Calls",D.followUpCount]),E.push(["Total Admitted",D.admittedCount]),E.push(["Total Interested",D.interestedCount]),E.push(["Total Not Interested",D.notInterestedCount]);const V=E.map(P=>P.map(W=>`"${String(W??"")}"`).join(",")).join(`
`),F=new Blob([V],{type:"text/csv;charset=utf-8;"}),M=URL.createObjectURL(F),C=document.createElement("a"),$=`admission-brief-${I.replace(/\s+/g,"-")}-${new Date().toISOString().slice(0,10)}.csv`;C.href=M,C.download=$,document.body.appendChild(C),C.click(),C.remove(),URL.revokeObjectURL(M)}catch(_){console.error("Download failed",_),alert(_.message||"Download failed")}finally{N(!1)}}return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Admission Metrics"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Counseling and Follow-up counts (today / weekly / monthly / custom)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:s,onChange:R=>n(R.target.value),className:"px-3 py-2 border rounded-lg bg-white",children:[e.jsx("option",{value:"daily",children:"Today"}),e.jsx("option",{value:"weekly",children:"Last 7 days"}),e.jsx("option",{value:"monthly",children:"Last 30 days"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom"})]}),s==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:r,onChange:R=>a(R.target.value),className:"px-3 py-2 border rounded-lg bg-white"}),e.jsx("span",{className:"text-sm text-gray-500",children:"to"}),e.jsx("input",{type:"date",value:l,onChange:R=>o(R.target.value),className:"px-3 py-2 border rounded-lg bg-white"})]})]})]}),j&&e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[v&&e.jsxs("select",{value:b||"all",onChange:R=>k(R.target.value),className:"px-3 py-2 border rounded-lg bg-white",children:[e.jsx("option",{value:"all",children:"Overall Team"}),e.jsx("option",{value:"me",children:"My Metrics"}),m.map(R=>e.jsxs("option",{value:R._id,children:[R.name," (",R.email,")"]},R._id))]}),e.jsx("button",{onClick:A,disabled:u,className:"px-3 py-2 border rounded-lg bg-white",children:"Refresh"}),e.jsxs("button",{onClick:T,disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg",children:[e.jsx(Ht,{className:"w-4 h-4"})," ",g?"Downloading...":"Download CSV"]}),e.jsxs("label",{className:"ml-2 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:R=>w(R.target.checked)})," Show raw data"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Counseling (New Calls)"}),e.jsx("div",{className:"text-3xl font-bold mt-2",children:u?"":D.counselingCount??0}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"New counseling calls in selected period"})]}),e.jsx("div",{className:"text-gray-300",children:e.jsx(ge,{className:"w-10 h-10"})})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Follow-up Calls"}),e.jsx("div",{className:"text-3xl font-bold mt-2",children:u?"":D.followUpCount??0}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Follow-up events (notes) in selected period"})]}),e.jsx("div",{className:"text-gray-300",children:e.jsx(ge,{className:"w-10 h-10"})})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Admitted"}),e.jsx("div",{className:"text-3xl font-bold mt-2",children:u?"":D.admittedCount??0}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Total admitted in period"})]}),e.jsx("div",{className:"text-gray-300",children:e.jsx(ge,{className:"w-10 h-10"})})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Interested"}),e.jsx("div",{className:"text-3xl font-bold mt-2",children:u?"":D.interestedCount??0}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Leads marked interested in period"})]}),e.jsx("div",{className:"text-gray-300",children:e.jsx(ge,{className:"w-10 h-10"})})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Not Interested"}),e.jsx("div",{className:"text-3xl font-bold mt-2",children:u?"":D.notInterestedCount??0}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Leads marked not interested in period"})]}),e.jsx("div",{className:"text-gray-300",children:e.jsx(ge,{className:"w-10 h-10"})})]})})]}),y&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-100",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Raw Data (debug)"}),e.jsx("pre",{className:"text-xs text-gray-600 max-h-60 overflow-auto",children:u?"Loading...":i?JSON.stringify(i,null,2):"No data"})]}),i&&!i.reportsResp&&e.jsx("div",{className:"mt-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-100 rounded p-3",children:"Detailed report data is not available for this request. The summary metrics above are shown from aggregated data. If you expect non-zero values, try adjusting the date range or click Refresh."})]})}function rw(){var N,v,h,j,y;const{user:t}=fe();if((t==null?void 0:t.role)!=="Accountant")return e.jsx("div",{className:"text-royal",children:"Only Accountant can approve fees."});const[s,n]=d.useState("Pending"),[r,a]=d.useState([]),[l,o]=d.useState(!1),[i,c]=d.useState(null),[u,x]=d.useState(null),[m,p]=d.useState(null),b=async()=>{try{const{fees:w}=await B.listFeesForApproval(s);a(w||[]),p(null)}catch(w){p(w.message)}};d.useEffect(()=>{b()},[s]);const k=async w=>{x(null),p(null);try{await B.approveFee(w),x("Approved"),b()}catch(S){p(S.message)}},g=async w=>{x(null),p(null);try{await B.rejectFee(w),x("Rejected"),b()}catch(S){p(S.message)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Fees Approval"}),e.jsxs("select",{value:s,onChange:w=>n(w.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{children:"Pending"}),e.jsx("option",{children:"Approved"}),e.jsx("option",{children:"Rejected"})]})]}),u&&e.jsx("div",{className:"mb-2 text-green-700",children:u}),m&&e.jsx("div",{className:"mb-2 text-red-600",children:m}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Lead"}),e.jsx("th",{className:"p-3 text-left",children:"Course"}),e.jsx("th",{className:"p-3 text-left",children:"Total Amount"}),e.jsx("th",{className:"p-3 text-left",children:"Paid"}),e.jsx("th",{className:"p-3 text-left",children:"Due"}),e.jsx("th",{className:"p-3 text-left",children:"Method"}),e.jsx("th",{className:"p-3 text-left",children:"Payment Date"}),e.jsx("th",{className:"p-3 text-left",children:"Submitted By"}),e.jsx("th",{className:"p-3 text-left",children:"Status"}),e.jsx("th",{className:"p-3 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[r.map(w=>{var S,A,D,T,R;return e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsxs("td",{className:"p-3",children:[(S=w.lead)==null?void 0:S.leadId,"  ",(A=w.lead)==null?void 0:A.name,e.jsxs("div",{className:"text-xs text-royal/70",children:[(D=w.lead)==null?void 0:D.phone," ",(T=w.lead)!=null&&T.email?` ${w.lead.email}`:""]})]}),e.jsx("td",{className:"p-3",children:w.courseName}),e.jsxs("td",{className:"p-3 font-semibold",children:[" ",w.totalAmount||0]}),e.jsxs("td",{className:"p-3 text-green-600 font-semibold",children:[" ",w.amount||0]}),e.jsxs("td",{className:"p-3 text-orange-600 font-semibold",children:[" ",w.dueAmount||0]}),e.jsx("td",{className:"p-3",children:w.method}),e.jsx("td",{className:"p-3",children:new Date(w.paymentDate).toLocaleDateString()}),e.jsx("td",{className:"p-3",children:((R=w.submittedBy)==null?void 0:R.name)||"-"}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.status==="Approved"?"bg-green-100 text-green-700":w.status==="Rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:w.status})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("button",{onClick:()=>{c(w),o(!0)},className:"inline-flex items-center gap-1 px-2.5 py-1.5 bg-blue-500 text-white rounded-lg text-xs font-medium hover:bg-blue-600 transition-colors",children:[e.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Details"]}),s==="Pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>k(w._id),className:"px-2.5 py-1.5 rounded-lg text-xs font-medium bg-green-500 text-white hover:bg-green-600 transition-colors",children:"Approve"}),e.jsx("button",{onClick:()=>g(w._id),className:"px-2.5 py-1.5 rounded-lg text-xs font-medium bg-red-500 text-white hover:bg-red-600 transition-colors",children:"Reject"})]})]})})]},w._id)}),r.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:"10",children:"No items"})})]})]})}),l&&i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-4 mb-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[#053867]",children:"Fee Collection Details"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Complete information about this payment"})]}),e.jsx("button",{type:"button",onClick:()=>{o(!1),c(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Student Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Lead ID:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:(N=i.lead)==null?void 0:N.leadId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:(v=i.lead)==null?void 0:v.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:(h=i.lead)==null?void 0:h.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:((j=i.lead)==null?void 0:j.email)||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Payment Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Course:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:i.courseName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:i.method})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("p",{className:"font-bold text-lg text-[#053867]",children:[" ",i.totalAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Amount Paid:"}),e.jsxs("p",{className:"font-bold text-lg text-green-600",children:[" ",i.amount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Due Amount:"}),e.jsxs("p",{className:"font-bold text-lg text-orange-600",children:[" ",i.dueAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("p",{children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${i.status==="Approved"?"bg-green-100 text-green-700":i.status==="Rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:i.status})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Submitted By:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:((y=i.submittedBy)==null?void 0:y.name)||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Important Dates"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Date:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:new Date(i.paymentDate).toLocaleDateString("en-GB")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Next Payment Date:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:i.nextPaymentDate?new Date(i.nextPaymentDate).toLocaleDateString("en-GB"):"Not set"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Submitted At:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:new Date(i.createdAt).toLocaleString("en-GB")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Last Updated:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:new Date(i.updatedAt).toLocaleString("en-GB")})]})]})]}),i.note&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-2 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Additional Notes"]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:i.note})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t border-gray-200",children:[s==="Pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{k(i._id),o(!1),c(null)},className:"px-5 py-2 rounded-lg bg-green-500 text-white text-sm font-medium hover:bg-green-600 transition-colors",children:"Approve"}),e.jsx("button",{onClick:()=>{g(i._id),o(!1),c(null)},className:"px-5 py-2 rounded-lg bg-red-500 text-white text-sm font-medium hover:bg-red-600 transition-colors",children:"Reject"})]}),e.jsx("button",{onClick:()=>{o(!1),c(null)},className:"px-6 py-2 rounded-lg bg-gray-100 text-gray-700 text-sm font-medium hover:bg-gray-200 transition-colors",children:"Close"})]})]})})]})}function aw(){var _,I,E,V,F,M,C;const{user:t}=fe(),[s,n]=d.useState([]),[r,a]=d.useState("Pending"),[l,o]=d.useState(!1),[i,c]=d.useState(null),[u,x]=d.useState(null),[m,p]=d.useState(!1),[b,k]=d.useState(null),[g,N]=d.useState(""),[v,h]=d.useState(!1),y=(t==null?void 0:t.role)==="Accountant",w=async()=>{o(!0),c(null);try{const $=await B.getDueCollections(r);n($.dueCollections||[])}catch($){c($.message)}finally{o(!1)}};d.useEffect(()=>{w()},[r]);const S=async $=>{h(!0),c(null),x(null);try{await B.approveDueCollection($,g),x("Due collection approved successfully!"),p(!1),N(""),w()}catch(P){c(P.message)}finally{h(!1)}},A=async $=>{if(!g.trim()){c("Please provide a reason for rejection");return}h(!0),c(null),x(null);try{await B.rejectDueCollection($,g),x("Due collection rejected"),p(!1),N(""),w()}catch(P){c(P.message)}finally{h(!1)}},D=$=>{k($),N($.reviewNote||""),p(!0),c(null)},T=$=>$?new Date($).toLocaleDateString("en-GB"):"",R=$=>$==="Approved"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-green-100 text-green-700 text-xs font-semibold",children:[e.jsx(it,{className:"w-3 h-3"})," Approved"]}):$==="Rejected"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-red-100 text-red-700 text-xs font-semibold",children:[e.jsx(js,{className:"w-3 h-3"})," Rejected"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-yellow-100 text-yellow-700 text-xs font-semibold",children:[e.jsx(Bt,{className:"w-3 h-3"})," Pending"]});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy",children:"Due Collection Approval"}),e.jsx("p",{className:"text-royal/60 mt-1",children:"Review and approve due fee collections from coordinators"})]})}),u&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-green-700 font-medium",children:u})}),i&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium",children:i})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft p-2 inline-flex gap-2",children:["Pending","Approved","Rejected","All"].map($=>e.jsx("button",{onClick:()=>a($==="All"?"":$),className:`px-4 py-2 rounded-xl font-medium transition-all ${r===($==="All"?"":$)?"bg-gradient-to-r from-gold to-yellow-500 text-navy shadow-md":"text-royal/60 hover:text-royal hover:bg-gray-50"}`,children:$},$))}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-hidden",children:l?e.jsx("div",{className:"p-8 text-center text-royal/60",children:"Loading..."}):s.length===0?e.jsx("div",{className:"p-8 text-center text-royal/60",children:"No due collections found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Lead ID"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Student Name"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Amount"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Payment Date"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Coordinator"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Submitted"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:s.map(($,P)=>{var W,O,U;return e.jsxs("tr",{className:`border-t border-gray-100 hover:bg-gray-50 transition-colors ${P%2===0?"bg-white":"bg-gray-50/30"}`,children:[e.jsx("td",{className:"p-3 text-sm font-medium text-royal",children:((W=$.lead)==null?void 0:W.leadId)||""}),e.jsx("td",{className:"p-3 text-sm text-royal",children:((O=$.lead)==null?void 0:O.name)||""}),e.jsx("td",{className:"p-3 text-sm font-bold text-green-600",children:Pe($.amount||0)}),e.jsx("td",{className:"p-3 text-sm text-royal",children:T($.paymentDate)}),e.jsx("td",{className:"p-3 text-sm text-royal",children:((U=$.coordinator)==null?void 0:U.name)||""}),e.jsx("td",{className:"p-3 text-sm",children:R($.status)}),e.jsx("td",{className:"p-3 text-sm text-royal/60",children:T($.submittedAt)}),e.jsx("td",{className:"p-3",children:e.jsxs("button",{onClick:()=>D($),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-royal/10 text-royal hover:bg-royal/20 transition-colors text-sm font-medium",children:[e.jsx(Do,{className:"w-4 h-4"}),"View"]})})]},$._id)})})]})})}),m&&b&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>p(!1)}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl z-10 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-navy to-royal p-6 text-white",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Due Collection Details"}),e.jsx("p",{className:"text-white/80 mt-1",children:"Review and take action on this due collection"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-navy flex items-center gap-2",children:[e.jsx(fr,{className:"w-5 h-5"}),"Student Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Lead ID:"}),e.jsx("p",{className:"font-semibold text-royal",children:((_=b.lead)==null?void 0:_.leadId)||""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Name:"}),e.jsx("p",{className:"font-semibold text-royal",children:((I=b.lead)==null?void 0:I.name)||""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Phone:"}),e.jsx("p",{className:"font-semibold text-royal",children:((E=b.lead)==null?void 0:E.phone)||""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Email:"}),e.jsx("p",{className:"font-semibold text-royal",children:((V=b.lead)==null?void 0:V.email)||""})]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-navy flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5"}),"Payment Details"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Amount Collected:"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:Pe(b.amount||0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Payment Method:"}),e.jsxs("p",{className:"font-semibold text-royal flex items-center gap-1",children:[e.jsx(Nd,{className:"w-4 h-4"}),b.paymentMethod||"Cash"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Payment Date:"}),e.jsxs("p",{className:"font-semibold text-royal flex items-center gap-1",children:[e.jsx(ge,{className:"w-4 h-4"}),T(b.paymentDate)]})]}),b.nextPaymentDate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Next Payment Date:"}),e.jsxs("p",{className:"font-semibold text-royal flex items-center gap-1",children:[e.jsx(ge,{className:"w-4 h-4"}),T(b.nextPaymentDate)]})]})]}),b.note&&e.jsxs("div",{className:"pt-2 border-t border-green-200",children:[e.jsx("span",{className:"text-royal/60 text-sm",children:"Coordinator Note:"}),e.jsx("p",{className:"text-royal mt-1",children:b.note})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-navy",children:"Collected By"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold text-royal",children:((F=b.coordinator)==null?void 0:F.name)||""}),e.jsx("p",{className:"text-royal/60",children:((M=b.coordinator)==null?void 0:M.email)||""}),e.jsxs("p",{className:"text-royal/60 text-xs mt-1",children:["Submitted: ",T(b.submittedAt)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-4",children:[e.jsx("span",{className:"text-sm font-medium text-royal",children:"Current Status:"}),R(b.status)]}),b.status==="Pending"&&y&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Review Note (Optional for approval, required for rejection)"}),e.jsx("textarea",{value:g,onChange:$=>N($.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-gold",placeholder:"Add your review comments..."})]}),b.status!=="Pending"&&b.reviewedBy&&e.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-navy",children:"Review Information"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-royal/60",children:"Reviewed By:"})," ",e.jsx("span",{className:"font-semibold text-royal",children:((C=b.reviewedBy)==null?void 0:C.name)||""})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-royal/60",children:"Reviewed At:"})," ",e.jsx("span",{className:"font-semibold text-royal",children:T(b.reviewedAt)})]}),b.reviewNote&&e.jsxs("div",{className:"pt-2 border-t border-purple-200",children:[e.jsx("span",{className:"text-royal/60",children:"Review Note:"}),e.jsx("p",{className:"text-royal mt-1",children:b.reviewNote})]})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 p-6 flex justify-end gap-3 border-t",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-6 py-2.5 rounded-xl border border-gray-300 hover:bg-gray-100 transition-colors font-medium",disabled:v,children:"Close"}),b.status==="Pending"&&y&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>A(b._id),className:"px-6 py-2.5 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-colors font-medium disabled:opacity-50",disabled:v,children:v?"Processing...":"Reject"}),e.jsx("button",{type:"button",onClick:()=>S(b._id),className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 transition-colors font-medium shadow-lg disabled:opacity-50",disabled:v,children:v?"Processing...":"Approve"})]})]})]})]})]})}function lw(){const{user:t}=fe(),s=(t==null?void 0:t.role)==="Accountant";if(!s&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin")return e.jsx("div",{className:"text-royal",children:"Access denied"});const[n,r]=d.useState([]),[a,l]=d.useState({date:new Date().toISOString().slice(0,10),source:"Other",amount:0,note:""}),[o,i]=d.useState(!1),c=$n(),[u,x]=d.useState(null),[m,p]=d.useState(null),b=async()=>{try{const{income:g}=await B.listIncome();r(g||[])}catch(g){p(g.message)}};d.useEffect(()=>{b()},[]);const k=async g=>{var N;(N=g==null?void 0:g.preventDefault)==null||N.call(g),x(null),p(null);try{await B.addIncome(a),x("Income added"),l({...a,amount:0}),i(!1),b()}catch(v){p(v.message)}};return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Income"})}),u&&e.jsx("div",{className:"mb-2 text-green-700",children:u}),m&&e.jsx("div",{className:"mb-2 text-red-600",children:m}),s&&e.jsx("div",{className:"mb-3",children:e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 bg-gold text-navy rounded-xl px-4 py-2",children:[e.jsx(mp,{className:"w-5 h-5"})," Add Income"]})}),o&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>i(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-lg shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Add Income"}),e.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 gap-2",children:[e.jsx("input",{type:"date",className:"border rounded-xl px-3 py-2",value:a.date,onChange:g=>l(N=>({...N,date:g.target.value}))}),e.jsx(ow,{kind:"incomes",value:a.source,onChange:g=>l(N=>({...N,source:g}))}),e.jsx("div",{className:"text-right text-sm mt-1",children:e.jsx("button",{type:"button",onClick:()=>{i(!1),c("/accounting/dashboard?openHeads=1")},className:"text-blue-600 underline",children:"Manage Account Heads"})}),e.jsx("input",{type:"number",className:"border rounded-xl px-3 py-2",placeholder:"Amount",value:a.amount,onChange:g=>l(N=>({...N,amount:Number(g.target.value)}))}),e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Note",value:a.note,onChange:g=>l(N=>({...N,note:g.target.value}))}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{className:"bg-gold text-navy rounded-xl px-4 py-2",children:"Add"})]})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Date"}),e.jsx("th",{className:"p-3 text-left",children:"Source"}),e.jsx("th",{className:"p-3 text-left",children:"Amount"}),e.jsx("th",{className:"p-3 text-left",children:"Note"})]})}),e.jsxs("tbody",{children:[n.map(g=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:new Date(g.date).toLocaleDateString()}),e.jsx("td",{className:"p-3",children:g.source}),e.jsx("td",{className:"p-3",children:Pe(g.amount)}),e.jsx("td",{className:"p-3",children:g.note||"-"})]},g._id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:"4",children:"No entries"})})]})]})})]})}function ow({kind:t="incomes",value:s,onChange:n}){let r={};try{r=JSON.parse(localStorage.getItem("accountHeads")||"{}")}catch{r={}}const a=r&&r[t]?r[t]:[],[l,o]=d.useState(""),i=s||"",c=u=>{n(u==="__other__"?l:u)};return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Purpose"}),e.jsxs("select",{className:"border rounded-xl px-3 py-2 w-full mb-2",value:i||"",onChange:u=>c(u.target.value),children:[!a||a.length===0?e.jsx("option",{value:"",children:"No heads defined"}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"-- select purpose --"}),a.map(u=>e.jsx("option",{value:u,children:u},u))]}),e.jsx("option",{value:"__other__",children:"Other (enter manually)"})]}),i==="__other__"||!i&&l?e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Enter purpose",value:l,onChange:u=>{o(u.target.value),n(u.target.value)}}):null]})}function iw({kind:t="expenses",value:s,onChange:n}){let r={};try{r=JSON.parse(localStorage.getItem("accountHeads")||"{}")}catch{r={}}const a=r&&r[t]?r[t]:[],[l,o]=d.useState(""),i=s||"",c=u=>{n(u==="__other__"?l:u)};return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Purpose"}),e.jsxs("select",{className:"border rounded-xl px-3 py-2 w-full mb-2",value:i||"",onChange:u=>c(u.target.value),children:[!a||a.length===0?e.jsx("option",{value:"",children:"No heads defined"}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"-- select purpose --"}),a.map(u=>e.jsx("option",{value:u,children:u},u))]}),e.jsx("option",{value:"__other__",children:"Other (enter manually)"})]}),i==="__other__"||!i&&l?e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Enter purpose",value:l,onChange:u=>{o(u.target.value),n(u.target.value)}}):null]})}function dw(){const{user:t}=fe(),s=(t==null?void 0:t.role)==="Accountant";if(!s&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin")return e.jsx("div",{className:"text-royal",children:"Access denied"});const[n,r]=d.useState([]),[a,l]=d.useState({date:new Date().toISOString().slice(0,10),purpose:"",amount:0,note:""}),[o,i]=d.useState(!1),c=$n(),[u,x]=d.useState(null),[m,p]=d.useState(null),b=async()=>{try{const{expenses:N}=await B.listExpenses();r(N||[])}catch(N){p(N.message)}};d.useEffect(()=>{b()},[]);const k=async N=>{var v;(v=N==null?void 0:N.preventDefault)==null||v.call(N),x(null),p(null);try{await B.addExpense(a),x("Expense added"),l({...a,purpose:"",amount:0,note:""}),i(!1),b()}catch(h){p(h.message)}},g=async N=>{if(confirm("Delete expense?"))try{await B.deleteExpense(N),b()}catch(v){p(v.message)}};return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Expense"})}),u&&e.jsx("div",{className:"mb-2 text-green-700",children:u}),m&&e.jsx("div",{className:"mb-2 text-red-600",children:m}),s&&e.jsx("div",{className:"mb-3",children:e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 bg-gold text-navy rounded-xl px-4 py-2",children:[e.jsx(mp,{className:"w-5 h-5"})," Add Expense"]})}),o&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>i(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-lg shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Add Expense"}),e.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 gap-2",children:[e.jsx("input",{type:"date",className:"border rounded-xl px-3 py-2",value:a.date,onChange:N=>l(v=>({...v,date:N.target.value}))}),e.jsx(iw,{kind:"expenses",value:a.purpose,onChange:N=>l(v=>({...v,purpose:N}))}),e.jsx("div",{className:"text-right text-sm mt-1",children:e.jsx("button",{type:"button",onClick:()=>{i(!1),c("/accounting/dashboard?openHeads=1")},className:"text-blue-600 underline",children:"Manage Account Heads"})}),e.jsx("input",{type:"number",className:"border rounded-xl px-3 py-2",placeholder:"Amount",value:a.amount,onChange:N=>l(v=>({...v,amount:Number(N.target.value)}))}),e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Note",value:a.note,onChange:N=>l(v=>({...v,note:N.target.value}))}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{className:"bg-gold text-navy rounded-xl px-4 py-2",children:"Add"})]})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Date"}),e.jsx("th",{className:"p-3 text-left",children:"Purpose"}),e.jsx("th",{className:"p-3 text-left",children:"Amount"}),e.jsx("th",{className:"p-3 text-left",children:"Note"}),s&&e.jsx("th",{className:"p-3 text-left",children:"Action"})]})}),e.jsxs("tbody",{children:[n.map(N=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:new Date(N.date).toLocaleDateString()}),e.jsx("td",{className:"p-3",children:N.purpose}),e.jsx("td",{className:"p-3",children:Pe(N.amount)}),e.jsx("td",{className:"p-3",children:N.note||"-"}),s&&e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>g(N._id),className:"px-3 py-1 rounded-lg border hover:bg-red-50 text-red-700",children:"Delete"})})]},N._id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:s?5:4,children:"No entries"})})]})]})})]})}function cw(){const[t,s]=d.useState([]),[n,r]=d.useState([]),[a,l]=d.useState(!1),[o,i]=d.useState(null),[c,u]=d.useState({userId:"",accountNo:"",bankName:"",branchName:""});d.useEffect(()=>{(async()=>(await x(),m()))()},[]);const x=async()=>{try{const h=await(B.listUsersPublic?B.listUsersPublic():B.listUsers()),j=Array.isArray(h)?h:(h==null?void 0:h.users)||[];return s(j),j}catch(h){return console.error("Failed to load users",h),s([]),[]}},m=()=>{try{const h=localStorage.getItem("employeeBankRecords"),j=h?JSON.parse(h):[];r(j)}catch{r([])}},p=h=>{localStorage.setItem("employeeBankRecords",JSON.stringify(h)),r(h)},b=async()=>{const h=!t||t.length===0?await x():t;i(null),u({userId:h&&h[0]?h[0]._id:"",accountNo:"",bankName:"",branchName:""}),l(!0)},k=h=>{i(h.id),u({userId:h.userId,accountNo:h.accountNo,bankName:h.bankName,branchName:h.branchName}),l(!0)},g=h=>{var j;if((j=h==null?void 0:h.preventDefault)==null||j.call(h),!c.userId||!c.accountNo)return alert("Select employee and enter account number");if(o){const y=n.map(w=>w.id===o?{...w,...c}:w);p(y)}else{const w=[{id:`b_${Date.now()}`,...c},...n];p(w)}l(!1)},N=h=>{if(!confirm("Delete bank record?"))return;const j=n.filter(y=>y.id!==h);p(j)},v=h=>t.find(j=>j._id===h)||{};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Employee Bank Accounts"}),e.jsx("div",{children:e.jsx("button",{onClick:b,className:"bg-gold text-navy rounded-xl px-4 py-2",children:"+ Add Bank Account"})})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Emp Id"}),e.jsx("th",{className:"p-3 text-left",children:"Name"}),e.jsx("th",{className:"p-3 text-left",children:"Designation"}),e.jsx("th",{className:"p-3 text-left",children:"Account No"}),e.jsx("th",{className:"p-3 text-left",children:"Bank Name"}),e.jsx("th",{className:"p-3 text-left",children:"Branch Name"}),e.jsx("th",{className:"p-3 text-left",children:"Action"})]})}),e.jsxs("tbody",{children:[n.map(h=>{const j=v(h.userId);return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:(j._id||"").slice(0,8)}),e.jsx("td",{className:"p-3",children:j.name||"-"}),e.jsx("td",{className:"p-3",children:j.designation||"-"}),e.jsx("td",{className:"p-3",children:h.accountNo}),e.jsx("td",{className:"p-3",children:h.bankName}),e.jsx("td",{className:"p-3",children:h.branchName}),e.jsxs("td",{className:"p-3",children:[e.jsx("button",{onClick:()=>k(h),className:"px-3 py-1 rounded-lg border mr-2",children:"Edit"}),e.jsx("button",{onClick:()=>N(h.id),className:"px-3 py-1 rounded-lg border hover:bg-red-50 text-red-700",children:"Delete"})]})]},h.id)}),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:7,children:"No bank accounts"})})]})]})}),a&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>l(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-lg shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:o?"Edit Bank Account":"Add Bank Account"}),e.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 gap-2",children:[e.jsx("label",{className:"text-sm text-royal",children:"Employee"}),e.jsx("select",{className:"border rounded-xl px-3 py-2",value:c.userId,onChange:h=>u(j=>({...j,userId:h.target.value})),children:!t||t.length===0?e.jsx("option",{value:"",children:"Loading employees..."}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"-- select employee --"}),t.map(h=>e.jsxs("option",{value:h._id,children:[h.name," (",h.designation||"",")"]},h._id))]})}),e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Account No",value:c.accountNo,onChange:h=>u(j=>({...j,accountNo:h.target.value}))}),e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Bank Name",value:c.bankName,onChange:h=>u(j=>({...j,bankName:h.target.value}))}),e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Branch Name",value:c.branchName,onChange:h=>u(j=>({...j,branchName:h.target.value}))}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{className:"bg-gold text-navy rounded-xl px-4 py-2",children:o?"Save":"Add"})]})]})]})]})]})}function uw(){const[t,s]=d.useState([]),[n,r]=d.useState([]),[a,l]=d.useState(!1),[o,i]=d.useState(null),[c,u]=d.useState({userId:"",totalSalary:0});d.useEffect(()=>{(async()=>(await x(),m()))()},[]);const x=async()=>{try{const h=await(B.listUsersPublic?B.listUsersPublic():B.listUsers()),j=Array.isArray(h)?h:(h==null?void 0:h.users)||[];return s(j),j}catch{return s([]),[]}},m=()=>{try{const h=localStorage.getItem("employeeSalaryRecords");r(h?JSON.parse(h):[])}catch{r([])}},p=h=>{localStorage.setItem("employeeSalaryRecords",JSON.stringify(h)),r(h)},b=async()=>{const h=!t||t.length===0?await x():t;i(null),u({userId:h&&h[0]?h[0]._id:"",totalSalary:0}),l(!0)},k=h=>{i(h.id),u({userId:h.userId,totalSalary:h.totalSalary}),l(!0)},g=h=>{var j;if((j=h==null?void 0:h.preventDefault)==null||j.call(h),!c.userId)return alert("Select employee");if(o){const y=n.map(w=>w.id===o?{...w,...c}:w);p(y)}else{const w=[{id:`s_${Date.now()}`,...c},...n];p(w)}l(!1)},N=h=>{confirm("Delete salary record?")&&p(n.filter(j=>j.id!==h))},v=h=>t.find(j=>j._id===h)||{};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Employee Salary"}),e.jsx("div",{children:e.jsx("button",{onClick:b,className:"bg-gold text-navy rounded-xl px-4 py-2",children:"+ Add Salary"})})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Emp Id"}),e.jsx("th",{className:"p-3 text-left",children:"Name"}),e.jsx("th",{className:"p-3 text-left",children:"Designation"}),e.jsx("th",{className:"p-3 text-left",children:"Total Salary"}),e.jsx("th",{className:"p-3 text-left",children:"Action"})]})}),e.jsxs("tbody",{children:[n.map(h=>{const j=v(h.userId);return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:(j._id||"").slice(0,8)}),e.jsx("td",{className:"p-3",children:j.name||"-"}),e.jsx("td",{className:"p-3",children:j.designation||"-"}),e.jsx("td",{className:"p-3",children:Pe(h.totalSalary||0)}),e.jsxs("td",{className:"p-3",children:[e.jsx("button",{onClick:()=>k(h),className:"px-3 py-1 rounded-lg border mr-2",children:"Edit"}),e.jsx("button",{onClick:()=>N(h.id),className:"px-3 py-1 rounded-lg border hover:bg-red-50 text-red-700",children:"Delete"})]})]},h.id)}),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:5,children:"No salary records"})})]})]})}),a&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>l(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-lg shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:o?"Edit Salary":"Add Salary"}),e.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 gap-2",children:[e.jsx("label",{className:"text-sm text-royal",children:"Employee"}),e.jsx("select",{className:"border rounded-xl px-3 py-2",value:c.userId,onChange:h=>u(j=>({...j,userId:h.target.value})),children:!t||t.length===0?e.jsx("option",{value:"",children:"Loading employees..."}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"-- select employee --"}),t.map(h=>e.jsxs("option",{value:h._id,children:[h.name," (",h.designation||"",")"]},h._id))]})}),e.jsx("input",{type:"number",className:"border rounded-xl px-3 py-2",placeholder:"Total Salary",value:c.totalSalary,onChange:h=>u(j=>({...j,totalSalary:Number(h.target.value)}))}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{className:"bg-gold text-navy rounded-xl px-4 py-2",children:o?"Save":"Add"})]})]})]})]})]})}const mw=[{key:"",label:"All"},{key:"pending",label:"Pending"},{key:"recruited",label:"Recruited"}];function xw(){const[t,s]=d.useState(""),[n,r]=d.useState([]),[a,l]=d.useState([]),[o,i]=d.useState([]),[c,u]=d.useState(!1),[x,m]=d.useState(null),p=async(b=t)=>{const k=await B.listCandidates(b);r(k)};return d.useEffect(()=>{p("")},[]),d.useEffect(()=>{(async()=>(l(await B.listEmployers()),i(await B.listJobs())))()},[]),d.useEffect(()=>{p(t)},[t]),e.jsxs("div",{className:"p-4 md:p-6 space-y-4 font-[Poppins]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-[#053867]",children:"Candidates"}),e.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Add Candidate"})]}),e.jsx("div",{className:"flex gap-2",children:mw.map(b=>e.jsx("button",{onClick:()=>s(b.key),className:`px-3 py-1.5 rounded-full border ${b.key===t?"bg-[#253985] text-white":"bg-white text-[#253985] border-[#253985]"}`,children:b.label},b.key))}),e.jsx("div",{className:"bg-white shadow rounded-2xl p-4 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-[#053867]",children:[e.jsx("th",{className:"py-2",children:"CanID"}),e.jsx("th",{className:"py-2",children:"Name"}),e.jsx("th",{className:"py-2",children:"Interest"}),e.jsx("th",{className:"py-2",children:"Source"}),e.jsx("th",{className:"py-2",children:"Trained"}),e.jsx("th",{className:"py-2",children:"Date"}),e.jsx("th",{className:"py-2",children:"CV"}),e.jsx("th",{className:"py-2",children:"Action"})]})}),e.jsxs("tbody",{children:[n.map(b=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:b.canId}),e.jsx("td",{className:"py-2",children:b.name}),e.jsx("td",{className:"py-2",children:b.jobInterest}),e.jsx("td",{className:"py-2",children:b.source}),e.jsx("td",{className:"py-2",children:b.trained?"Yes":"No"}),e.jsx("td",{className:"py-2",children:new Date(b.date).toLocaleDateString("en-GB")}),e.jsx("td",{className:"py-2",children:b.cvLink?e.jsx("a",{className:"text-[#253985] underline",href:b.cvLink,target:"_blank",children:"View"}):"-"}),e.jsx("td",{className:"py-2",children:b.recruited?e.jsx("span",{className:"px-2 py-1 rounded bg-green-100 text-green-700",children:"Recruited"}):e.jsx("button",{onClick:()=>m(b),className:"px-3 py-1 rounded-xl bg-[#253985] text-white",children:"Recruit"})})]},b._id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-2 text-gray-500",colSpan:8,children:"No candidates"})})]})]})}),c&&e.jsx(hw,{onClose:()=>u(!1),onSaved:()=>{u(!1),p()}}),x&&e.jsx(pw,{candidate:x,employers:a,jobs:o.filter(b=>b.status==="Active"),onClose:()=>m(null),onSaved:()=>{m(null),p(t)}})]})}function hw({onClose:t,onSaved:s}){const[n,r]=d.useState({canId:"",name:"",jobInterest:"",source:"Facebook",trained:!1,cvLink:""}),[a,l]=d.useState(!1),[o,i]=d.useState(""),c=async m=>{if(!m.trim()){i("");return}l(!0);try{const b=(await B.listCandidates()).some(k=>k.canId.toLowerCase()===m.trim().toLowerCase());i(b?"This Candidate ID already exists":"")}catch(p){console.error("Validation error:",p)}finally{l(!1)}},u=m=>{r(p=>({...p,canId:m})),i("")},x=async()=>{if(!n.canId)return alert("Candidate ID is required");if(o)return alert(o);if(!n.name||!n.jobInterest)return alert("Name & Job Interest required");try{await B.addCandidate(n),s()}catch(m){alert(m.message||"Failed to add candidate")}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-6 w-full max-w-2xl space-y-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-[#053867]",children:"Add New Candidate"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Fill in the candidate information below"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-4",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-5 h-5 text-[#253985]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.jsx("span",{className:"text-sm font-semibold text-[#053867]",children:"Candidate ID *"})]}),e.jsx("input",{type:"text",value:n.canId,onChange:m=>u(m.target.value),onBlur:()=>c(n.canId),className:`w-full border-2 rounded-xl px-4 py-3 text-lg font-mono focus:outline-none focus:ring-2 transition-all ${o?"border-red-400 focus:ring-red-400 bg-red-50":"border-blue-300 focus:ring-blue-400 bg-white"}`,placeholder:"e.g., CAN-2025-0001"}),e.jsxs("div",{className:"mt-2 min-h-[20px]",children:[a&&e.jsxs("span",{className:"text-xs text-blue-600 flex items-center gap-1",children:[e.jsxs("svg",{className:"animate-spin h-3 w-3",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking availability..."]}),o&&e.jsxs("span",{className:"text-xs text-red-600 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),o]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"Name *"}),e.jsx("input",{type:"text",value:n.name,onChange:m=>r(p=>({...p,name:m.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all",placeholder:"Full name"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"Job Interest *"}),e.jsx("input",{type:"text",value:n.jobInterest,onChange:m=>r(p=>({...p,jobInterest:m.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all",placeholder:"e.g., Software Developer"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"CV Source"}),e.jsx("select",{value:n.source,onChange:m=>r(p=>({...p,source:m.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all bg-white",children:["Facebook","LinkedIn","Bdjobs","Reference","Prime Academy","Others"].map(m=>e.jsx("option",{value:m,children:m},m))})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"CV Link"}),e.jsx("input",{type:"url",value:n.cvLink,onChange:m=>r(p=>({...p,cvLink:m.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all",placeholder:"Google Drive or OneDrive link"})]})})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.trained,onChange:m=>r(p=>({...p,trained:m.target.checked})),className:"w-5 h-5 text-[#253985] border-2 border-gray-300 rounded focus:ring-2 focus:ring-[#253985] cursor-pointer"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867]",children:"Trained by Prime Academy"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Check if this candidate completed training"})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:t,className:"px-6 py-2.5 rounded-xl bg-gray-100 text-gray-700 font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:x,disabled:a||!!o,className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-[#253985] to-[#053867] text-white font-medium hover:shadow-lg transform hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Candidate"]})]})]})})}function pw({candidate:t,employers:s,jobs:n,onClose:r,onSaved:a}){const[l,o]=d.useState({employerId:"",jobId:"",date:new Date().toISOString().slice(0,10)}),[i,c]=d.useState(!1),u=async()=>{if(!l.employerId||!l.jobId)return alert("Please select employer and job position");c(!0);try{await B.recruitCandidate(t._id,l),a()}catch(x){alert(x.message||"Failed to recruit candidate")}finally{c(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-6 w-full max-w-lg space-y-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-[#253985]",children:"Recruit Candidate"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("span",{className:"font-semibold",children:t.name}),"  ",t.canId]})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"Select Employer *"}),e.jsxs("select",{value:l.employerId,onChange:x=>o(m=>({...m,employerId:x.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all bg-white",children:[e.jsx("option",{value:"",children:"Choose an employer..."}),s.map(x=>e.jsxs("option",{value:x._id,children:[x.name," (",x.empId,")"]},x._id))]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"Select Job Position *"}),e.jsxs("select",{value:l.jobId,onChange:x=>o(m=>({...m,jobId:x.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all bg-white",children:[e.jsx("option",{value:"",children:"Choose a job position..."}),n.map(x=>e.jsxs("option",{value:x._id,children:[x.position,"  ",x.jobId]},x._id))]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"Recruitment Date"}),e.jsx("input",{type:"date",value:l.date,onChange:x=>o(m=>({...m,date:x.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all"})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:r,disabled:i,className:"px-6 py-2.5 rounded-xl bg-gray-100 text-gray-700 font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:u,disabled:i,className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 text-white font-medium hover:shadow-lg transform hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Confirm Recruitment"]})})]})]})})}function gw(){const[t,s]=d.useState([]),[n,r]=d.useState([]),[a,l]=d.useState(!1),o=async()=>s(await B.listJobs());return d.useEffect(()=>{o(),(async()=>r(await B.listEmployers()))()},[]),e.jsxs("div",{className:"p-4 md:p-6 space-y-4 font-[Poppins]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-[#053867]",children:"Job Positions"}),e.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Add Job"})]}),e.jsx("div",{className:"bg-white shadow rounded-2xl p-4 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-[#053867]",children:[e.jsx("th",{className:"py-2",children:"JobID"}),e.jsx("th",{className:"py-2",children:"Position"}),e.jsx("th",{className:"py-2",children:"Employer"}),e.jsx("th",{className:"py-2",children:"Salary"}),e.jsx("th",{className:"py-2",children:"Deadline"}),e.jsx("th",{className:"py-2",children:"Status"})]})}),e.jsxs("tbody",{children:[t.map(i=>{var c;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:i.jobId}),e.jsx("td",{className:"py-2",children:i.position}),e.jsx("td",{className:"py-2",children:((c=i.employer)==null?void 0:c.name)||"-"}),e.jsx("td",{className:"py-2",children:i.salaryRange||"-"}),e.jsx("td",{className:"py-2",children:i.deadline?new Date(i.deadline).toLocaleDateString("en-GB"):"-"}),e.jsx("td",{className:"py-2",children:i.status})]},i._id)}),t.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-2 text-gray-500",colSpan:6,children:"No jobs"})})]})]})}),a&&e.jsx(fw,{employers:n,onClose:()=>l(!1),onSaved:()=>{l(!1),o()}})]})}function fw({employers:t,onClose:s,onSaved:n}){const[r,a]=d.useState({jobId:"",position:"",employerId:"",salaryRange:"",deadline:"",status:"Active"}),[l,o]=d.useState(!1),[i,c]=d.useState(""),u=async p=>{if(!p.trim()){c("");return}o(!0);try{const k=(await B.listJobs()).some(g=>g.jobId.toLowerCase()===p.trim().toLowerCase());c(k?"This Job ID already exists":"")}catch(b){console.error("Validation error:",b)}finally{o(!1)}},x=p=>{a(b=>({...b,jobId:p})),c("")},m=async()=>{if(!r.jobId)return alert("Job ID is required");if(i)return alert(i);if(!r.position||!r.employerId)return alert("Position & Employer required");await B.addJob(r),n()};return e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-xl space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-[#253985]",children:"Add Job Position"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-3",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-5 h-5 text-[#253985]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.jsx("span",{className:"text-sm font-semibold text-[#053867]",children:"Job ID *"})]}),e.jsx("input",{type:"text",value:r.jobId,onChange:p=>x(p.target.value),onBlur:()=>u(r.jobId),className:`w-full border-2 rounded-xl px-4 py-2.5 text-lg font-mono focus:outline-none focus:ring-2 transition-all ${i?"border-red-400 focus:ring-red-400 bg-red-50":"border-blue-300 focus:ring-blue-400 bg-white"}`,placeholder:"e.g., JOB-2025-0001"}),e.jsxs("div",{className:"mt-2 min-h-[20px]",children:[l&&e.jsxs("span",{className:"text-xs text-blue-600 flex items-center gap-1",children:[e.jsxs("svg",{className:"animate-spin h-3 w-3",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking availability..."]}),i&&e.jsxs("span",{className:"text-xs text-red-600 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),i]})]})]})}),e.jsx(Si,{label:"Position *",value:r.position,onChange:p=>a(b=>({...b,position:p}))}),e.jsx($m,{label:"Employer *",value:r.employerId,onChange:p=>a(b=>({...b,employerId:p})),options:t.map(p=>({label:`${p.name} (${p.empId})`,value:p._id}))}),e.jsx(Si,{label:"Salary Range",value:r.salaryRange,onChange:p=>a(b=>({...b,salaryRange:p}))}),e.jsx(Si,{label:"Deadline",type:"date",value:r.deadline,onChange:p=>a(b=>({...b,deadline:p}))}),e.jsx($m,{label:"Status",value:r.status,onChange:p=>a(b=>({...b,status:p})),options:["Active","Inactive"].map(p=>({label:p,value:p}))}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 rounded-2xl bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:m,className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Save"})]})]})})}function Si({label:t,value:s,onChange:n,type:r="text"}){return e.jsxs("label",{className:"text-sm text-[#053867] space-y-1 block",children:[e.jsx("span",{children:t}),e.jsx("input",{type:r,value:s,onChange:a=>n(a.target.value),className:"w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#253985]"})]})}function $m({label:t,value:s,onChange:n,options:r}){return e.jsxs("label",{className:"text-sm text-[#053867] space-y-1 block",children:[e.jsx("span",{children:t}),e.jsxs("select",{value:s,onChange:a=>n(a.target.value),className:"w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#253985]",children:[e.jsx("option",{value:"",children:"Select..."}),r.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]})}function yw(){const[t,s]=d.useState([]),[n,r]=d.useState(!1),a=async()=>s(await B.listEmployers());return d.useEffect(()=>{a()},[]),e.jsxs("div",{className:"p-4 md:p-6 space-y-4 font-[Poppins]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-[#053867]",children:"Employers"}),e.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Add Employer"})]}),e.jsx("div",{className:"bg-white shadow rounded-2xl p-4 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-[#053867]",children:[e.jsx("th",{className:"py-2",children:"EmpID"}),e.jsx("th",{className:"py-2",children:"Name"}),e.jsx("th",{className:"py-2",children:"Address"}),e.jsx("th",{className:"py-2",children:"Job Location"}),e.jsx("th",{className:"py-2",children:"MoU Date"})]})}),e.jsxs("tbody",{children:[t.map(l=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:l.empId}),e.jsx("td",{className:"py-2",children:l.name}),e.jsx("td",{className:"py-2",children:l.address||"-"}),e.jsx("td",{className:"py-2",children:l.jobLocation||"-"}),e.jsx("td",{className:"py-2",children:l.mouDate?new Date(l.mouDate).toLocaleDateString("en-GB"):"-"})]},l._id)),t.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-2 text-gray-500",colSpan:5,children:"No employers"})})]})]})}),n&&e.jsx(bw,{onClose:()=>r(!1),onSaved:()=>{r(!1),a()}})]})}function bw({onClose:t,onSaved:s}){const[n,r]=d.useState({empId:"",name:"",address:"",jobLocation:"",mouDate:""}),[a,l]=d.useState(!1),[o,i]=d.useState(""),c=async m=>{if(!m.trim()){i("");return}l(!0);try{const b=(await B.listEmployers()).some(k=>k.empId.toLowerCase()===m.trim().toLowerCase());i(b?"This Employer ID already exists":"")}catch(p){console.error("Validation error:",p)}finally{l(!1)}},u=m=>{r(p=>({...p,empId:m})),i("")},x=async()=>{if(!n.empId)return alert("Employer ID is required");if(o)return alert(o);if(!n.name)return alert("Name is required");await B.addEmployer(n),s()};return e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-xl space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-[#253985]",children:"Add Employer"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-3",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-5 h-5 text-[#253985]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.jsx("span",{className:"text-sm font-semibold text-[#053867]",children:"Employer ID *"})]}),e.jsx("input",{type:"text",value:n.empId,onChange:m=>u(m.target.value),onBlur:()=>c(n.empId),className:`w-full border-2 rounded-xl px-4 py-2.5 text-lg font-mono focus:outline-none focus:ring-2 transition-all ${o?"border-red-400 focus:ring-red-400 bg-red-50":"border-blue-300 focus:ring-blue-400 bg-white"}`,placeholder:"e.g., EMP-2025-0001"}),e.jsxs("div",{className:"mt-2 min-h-[20px]",children:[a&&e.jsxs("span",{className:"text-xs text-blue-600 flex items-center gap-1",children:[e.jsxs("svg",{className:"animate-spin h-3 w-3",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking availability..."]}),o&&e.jsxs("span",{className:"text-xs text-red-600 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),o]})]})]})}),e.jsx(cl,{label:"Name *",value:n.name,onChange:m=>r(p=>({...p,name:m}))}),e.jsx(cl,{label:"Address",value:n.address,onChange:m=>r(p=>({...p,address:m}))}),e.jsx(cl,{label:"Job Location",value:n.jobLocation,onChange:m=>r(p=>({...p,jobLocation:m}))}),e.jsx(cl,{label:"MoU Date",type:"date",value:n.mouDate,onChange:m=>r(p=>({...p,mouDate:m}))}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-2xl bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:x,className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Save"})]})]})})}function cl({label:t,value:s,onChange:n,type:r="text"}){return e.jsxs("label",{className:"text-sm text-[#053867] space-y-1 block",children:[e.jsx("span",{children:t}),e.jsx("input",{type:r,value:s,onChange:a=>n(a.target.value),className:"w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#253985]"})]})}function vw(){const{user:t}=fe(),[s,n]=d.useState([]),[r,a]=d.useState(!1),[l,o]=d.useState(!1),[i,c]=d.useState("All"),[u,x]=d.useState(null),m=(t==null?void 0:t.role)==="Accountant"||(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin",p=(t==null?void 0:t.role)==="Recruitment"||(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin",b=async()=>{o(!0);try{const w=await B.listRecIncome();n(Array.isArray(w)?w:[])}finally{o(!1)}};d.useEffect(()=>{b()},[]);const k=d.useMemo(()=>i==="All"?s:s.filter(w=>w.status===i),[s,i]),g=d.useMemo(()=>s.filter(w=>w.status==="Approved").reduce((w,S)=>w+(Number(S.amount)||0),0),[s]),N=d.useMemo(()=>s.filter(w=>w.status==="Pending").reduce((w,S)=>w+(Number(S.amount)||0),0),[s]),v=async w=>{if(confirm("Approve this income entry?"))try{await B.approveRecIncome(w),b()}catch(S){alert(S.message||"Failed to approve")}},h=async(w,S)=>{try{await B.rejectRecIncome(w,S),x(null),b()}catch(A){alert(A.message||"Failed to reject")}},j=async w=>{if(confirm("Delete this income entry?"))try{await B.deleteRecIncome(w),b()}catch(S){alert(S.message||"Failed to delete")}},y=w=>{switch(w){case"Approved":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-medium",children:[e.jsx(it,{size:14}),"Approved"]});case"Rejected":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium",children:[e.jsx(js,{size:14}),"Rejected"]});case"Pending":default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-medium",children:[e.jsx(Bt,{size:14}),"Waiting for Approval"]})}};return e.jsxs("div",{className:"p-4 md:p-6 space-y-4 font-[Poppins]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-[#053867]",children:"Recruitment Income"}),p&&e.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49] font-medium",children:"Add Income"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsx("div",{className:"text-sm opacity-90",children:"Approved Income"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:es(g)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsx("div",{className:"text-sm opacity-90",children:"Pending Approval"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:es(N)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsx("div",{className:"text-sm opacity-90",children:"Total Entries"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:s.length})]})]}),e.jsx("div",{className:"flex gap-2 border-b border-gray-200",children:["All","Pending","Approved","Rejected"].map(w=>e.jsxs("button",{onClick:()=>c(w),className:`px-4 py-2 font-medium transition-colors ${i===w?"text-[#253985] border-b-2 border-[#253985]":"text-gray-500 hover:text-gray-700"}`,children:[w," (",s.filter(S=>w==="All"||S.status===w).length,")"]},w))}),e.jsxs("div",{className:"bg-white shadow rounded-2xl p-4 overflow-x-auto",children:[l&&e.jsx("div",{className:"text-sm text-gray-500 mb-3",children:"Loading"}),e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-[#053867] border-b-2",children:[e.jsx("th",{className:"py-3 px-2",children:"Date"}),e.jsx("th",{className:"py-3 px-2",children:"Source"}),e.jsx("th",{className:"py-3 px-2",children:"Income From"}),e.jsx("th",{className:"py-3 px-2",children:"Income For"}),e.jsx("th",{className:"py-3 px-2",children:"Description"}),e.jsx("th",{className:"py-3 px-2",children:"Amount"}),e.jsx("th",{className:"py-3 px-2",children:"Status"}),e.jsx("th",{className:"py-3 px-2",children:"Submitted By"}),m&&e.jsx("th",{className:"py-3 px-2",children:"Actions"})]})}),e.jsxs("tbody",{children:[k.map(w=>{var S,A,D;return e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-2",children:w.date?new Date(w.date).toLocaleDateString("en-GB"):"-"}),e.jsx("td",{className:"py-3 px-2 font-medium",children:w.source||"-"}),e.jsx("td",{className:"py-3 px-2 text-gray-600",children:((S=w.incomeFrom)==null?void 0:S.name)||"-"}),e.jsx("td",{className:"py-3 px-2 text-gray-600",children:((A=w.incomeFor)==null?void 0:A.name)||"-"}),e.jsx("td",{className:"py-3 px-2 text-gray-600",children:w.description||"-"}),e.jsx("td",{className:"py-3 px-2 font-semibold",children:es(w.amount)}),e.jsx("td",{className:"py-3 px-2",children:y(w.status)}),e.jsx("td",{className:"py-3 px-2 text-gray-600",children:((D=w.submittedBy)==null?void 0:D.name)||"-"}),m&&e.jsx("td",{className:"py-3 px-2",children:e.jsxs("div",{className:"flex gap-2",children:[w.status==="Pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>v(w._id),className:"px-3 py-1 rounded-xl bg-green-100 text-green-700 hover:bg-green-200 text-xs font-medium",children:"Approve"}),e.jsx("button",{onClick:()=>x(w),className:"px-3 py-1 rounded-xl bg-red-100 text-red-700 hover:bg-red-200 text-xs font-medium",children:"Reject"})]}),((t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin")&&e.jsx("button",{onClick:()=>j(w._id),className:"px-3 py-1 rounded-xl bg-gray-100 text-gray-700 hover:bg-gray-200 text-xs font-medium",children:"Delete"})]})})]},w._id)}),k.length===0&&e.jsx("tr",{children:e.jsxs("td",{className:"py-8 text-center text-gray-500",colSpan:m?9:8,children:["No ",i!=="All"?i.toLowerCase():""," income entries"]})})]})]})]}),r&&e.jsx(jw,{onClose:()=>a(!1),onSaved:()=>{a(!1),b()}}),u&&e.jsx(Nw,{income:u,onClose:()=>x(null),onReject:w=>h(u._id,w)})]})}function jw({onClose:t,onSaved:s}){const[n,r]=d.useState({date:new Date().toISOString().slice(0,10),source:"",amount:"",description:"",incomeFrom:"",incomeFor:""}),[a,l]=d.useState([]),[o,i]=d.useState([]),[c,u]=d.useState(!0);d.useEffect(()=>{(async()=>{try{const[p,b]=await Promise.all([B.listEmployers(),B.listRecruited()]);l(Array.isArray(p)?p:[]),i(Array.isArray(b)?b:[])}catch(p){console.error("Failed to load dropdown data:",p)}finally{u(!1)}})()},[]);const x=async()=>{if(!n.source)return alert("Source is required");const m=Number(n.amount);if(!m||m<=0)return alert("Enter a valid amount");if(!n.incomeFrom)return alert("Income From (Employer) is required");if(!n.incomeFor)return alert("Income For (Candidate) is required");try{await B.addRecIncome({date:n.date,source:n.source,amount:m,description:n.description,incomeFrom:n.incomeFrom,incomeFor:n.incomeFor}),s()}catch(p){alert(p.message||"Failed to submit income")}};return e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-lg space-y-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dt,{className:"text-[#253985]",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-[#253985]",children:"Submit Income for Approval"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"This income will be sent to the Accountant for approval before being counted."}),c?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading form data..."}):e.jsxs(e.Fragment,{children:[e.jsx(Vr,{label:"Date",type:"date",value:n.date,onChange:m=>r(p=>({...p,date:m}))}),e.jsx(Vr,{label:"Source",value:n.source,onChange:m=>r(p=>({...p,source:m})),placeholder:"Commission, Training Fee, Placement Fee, etc."}),e.jsx(Om,{label:"Income From (Employer) *",value:n.incomeFrom,onChange:m=>r(p=>({...p,incomeFrom:m})),options:a.map(m=>({value:m._id,label:m.name})),placeholder:"Select employer..."}),e.jsx(Om,{label:"Income For (Recruited Candidate) *",value:n.incomeFor,onChange:m=>r(p=>({...p,incomeFor:m})),options:o.map(m=>({value:m._id,label:`${m.name} (${m.canId})`})),placeholder:"Select candidate..."}),e.jsx(Vr,{label:"Amount (BDT)",type:"number",value:n.amount,onChange:m=>r(p=>({...p,amount:m}))}),e.jsx(Vr,{label:"Description (Optional)",value:n.description,onChange:m=>r(p=>({...p,description:m})),placeholder:"Additional details about this income",multiline:!0}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-2xl bg-gray-100 hover:bg-gray-200 font-medium",children:"Cancel"}),e.jsx("button",{onClick:x,className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49] font-medium",children:"Submit for Approval"})]})]})]})})}function Om({label:t,value:s,onChange:n,options:r,placeholder:a}){const[l,o]=d.useState(""),[i,c]=d.useState(!1),u=r.filter(m=>m.label.toLowerCase().includes(l.toLowerCase())),x=r.find(m=>m.value===s);return e.jsxs("label",{className:"text-sm text-[#053867] space-y-1 block relative",children:[e.jsx("span",{className:"font-medium",children:t}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{onClick:()=>c(!i),className:"w-full border border-gray-300 rounded-xl px-3 py-2 cursor-pointer bg-white hover:border-[#253985] focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent flex justify-between items-center",children:[e.jsx("span",{className:x?"text-gray-900":"text-gray-400",children:x?x.label:a}),e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-xl shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b",children:e.jsx("input",{type:"text",value:l,onChange:m=>o(m.target.value),placeholder:"Search...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#253985] text-sm",onClick:m=>m.stopPropagation()})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length===0?e.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No results found"}):u.map(m=>e.jsx("div",{onClick:()=>{n(m.value),c(!1),o("")},className:`px-3 py-2 cursor-pointer hover:bg-gray-100 text-sm ${m.value===s?"bg-blue-50 text-[#253985] font-medium":""}`,children:m.label},m.value))})]})]}),i&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)})]})}function Nw({income:t,onClose:s,onReject:n}){var o;const[r,a]=d.useState(""),l=()=>{if(!r.trim())return alert("Please provide a rejection reason");n(r)};return e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(js,{className:"text-red-600",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-red-600",children:"Reject Income Entry"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[e.jsx("div",{className:"font-medium text-gray-700",children:t.source}),e.jsx("div",{className:"text-gray-600",children:es(t.amount)}),e.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:["Submitted by: ",((o=t.submittedBy)==null?void 0:o.name)||"Unknown"]})]}),e.jsx(Vr,{label:"Rejection Reason",value:r,onChange:a,placeholder:"Explain why this income is being rejected",multiline:!0}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 rounded-2xl bg-gray-100 hover:bg-gray-200 font-medium",children:"Cancel"}),e.jsx("button",{onClick:l,className:"px-4 py-2 rounded-2xl bg-red-600 text-white hover:bg-red-700 font-medium",children:"Reject Entry"})]})]})})}function Vr({label:t,value:s,onChange:n,type:r="text",placeholder:a="",multiline:l=!1}){return e.jsxs("label",{className:"text-sm text-[#053867] space-y-1 block",children:[e.jsx("span",{className:"font-medium",children:t}),l?e.jsx("textarea",{value:s,placeholder:a,onChange:o=>n(o.target.value),rows:3,className:"w-full border border-gray-300 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent"}):e.jsx("input",{type:r,value:s,placeholder:a,onChange:o=>n(o.target.value),className:"w-full border border-gray-300 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent"})]})}function ww(){const[t,s]=d.useState([]),[n,r]=d.useState(!1),[a,l]=d.useState(!1),o=async()=>{l(!0);try{const u=await B.listRecExpense();s(Array.isArray(u)?u:[])}finally{l(!1)}};d.useEffect(()=>{o()},[]);const i=d.useMemo(()=>t.reduce((u,x)=>u+(Number(x.amount)||0),0),[t]),c=async u=>{confirm("Delete this expense entry?")&&(await B.deleteRecExpense(u),o())};return e.jsxs("div",{className:"p-4 md:p-6 space-y-4 font-[Poppins]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-[#053867]",children:"Recruitment Expense"}),e.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Add Expense"})]}),e.jsxs("div",{className:"bg-white shadow rounded-2xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"text-[#253985] font-semibold",children:["Total: ",e.jsx("span",{className:"font-bold",children:es(i)})]}),a&&e.jsx("div",{className:"text-sm text-gray-500",children:"Loading"})]}),e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-[#053867]",children:[e.jsx("th",{className:"py-2",children:"Date"}),e.jsx("th",{className:"py-2",children:"Purpose"}),e.jsx("th",{className:"py-2",children:"Amount"}),e.jsx("th",{className:"py-2",children:"Action"})]})}),e.jsxs("tbody",{children:[t.map(u=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:u.date?new Date(u.date).toLocaleDateString("en-GB"):"-"}),e.jsx("td",{className:"py-2",children:u.purpose||"-"}),e.jsx("td",{className:"py-2",children:es(u.amount)}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>c(u._id),className:"px-3 py-1 rounded-xl bg-red-100 text-red-700 hover:bg-red-200",children:"Delete"})})]},u._id)),t.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-3 text-gray-500",colSpan:4,children:"No expense entries"})})]})]})]}),n&&e.jsx(Sw,{onClose:()=>r(!1),onSaved:()=>{r(!1),o()}})]})}function Sw({onClose:t,onSaved:s}){const[n,r]=d.useState({date:new Date().toISOString().slice(0,10),purpose:"",amount:""}),a=async()=>{if(!n.purpose)return alert("Purpose is required");const l=Number(n.amount);if(!l||l<=0)return alert("Enter a valid amount");await B.addRecExpense({date:n.date,purpose:n.purpose,amount:l}),s()};return e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 w-full max-w-lg space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#253985]",children:"Add Expense"}),e.jsx(ki,{label:"Date",type:"date",value:n.date,onChange:l=>r(o=>({...o,date:l}))}),e.jsx(ki,{label:"Purpose",value:n.purpose,onChange:l=>r(o=>({...o,purpose:l})),placeholder:"Candidate Screening / Travel / HR Event"}),e.jsx(ki,{label:"Amount (BDT)",type:"number",value:n.amount,onChange:l=>r(o=>({...o,amount:l}))}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-2xl bg-gray-100",children:"Cancel"}),e.jsx("button",{onClick:a,className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Save"})]})]})})}function ki({label:t,value:s,onChange:n,type:r="text",placeholder:a=""}){return e.jsxs("label",{className:"text-sm text-[#053867] space-y-1 block",children:[e.jsx("span",{children:t}),e.jsx("input",{type:r,value:s,placeholder:a,onChange:l=>n(l.target.value),className:"w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#253985]"})]})}function kw(){const[t,s]=d.useState([]),[n,r]=d.useState({}),[a,l]=d.useState(!1),[o,i]=d.useState(""),[c,u]=d.useState(!1),[x,m]=d.useState(null),[p,b]=d.useState(!1),[k,g]=d.useState(""),[N,v]=d.useState([]),h=["Reel","Short","Explainer","Ad","Banner","Other"],j=["Facebook","Instagram","YouTube","TikTok","X","Other"],[y,w]=d.useState("monthly"),[S,A]=d.useState(""),[D,T]=d.useState(""),[R,_]=d.useState(""),[I,E]=d.useState("");async function V(){l(!0),i("");try{const[U,q]=await Promise.all([B.listMGWorks(),B.mgStats()]),ee=Array.isArray(U)?U:(U==null?void 0:U.list)||(U==null?void 0:U.items)||[];s(ee),r(q||{})}catch(U){i(U.message||"Failed to load")}finally{l(!1)}}async function F(U){b(!0),g("");try{if(!U.title||!U.date)throw new Error("Title and date are required");const q={...U||{}};if(q.assignedTo&&!P[q.assignedTo]){const ee=N.find(z=>z.name===q.assignedTo||z.email===q.assignedTo);ee&&(q.assignedTo=ee._id||ee.id||ee.email)}q._id?await B.updateMGWork(q._id,q):await B.createMGWork(q),await V(),u(!1)}catch(q){g(q.message||"Save failed")}finally{b(!1)}}function M(){m({}),g(""),u(!0)}function C(U){m(U||{}),g(""),u(!0)}async function $(U){if(U&&confirm("Delete this work item?"))try{await B.deleteMGWork(U),await V()}catch(q){alert(q.message||"Delete failed")}}d.useEffect(()=>{const U=new Date;let q=new Date;q.setMonth(U.getMonth()-1),A(q.toISOString().slice(0,10)),T(U.toISOString().slice(0,10)),V(),(async()=>{try{const ee=await B.listUsersPublic(),z=Array.isArray(ee)?ee:(ee==null?void 0:ee.users)||[];v(z)}catch{}})()},[]);const P=d.useMemo(()=>{const U={};return N.forEach(q=>{const ee=q._id||q.id||q.email;U[ee]=q.name||q.email||ee}),U},[N]);d.useEffect(()=>{(async()=>{try{r(await B.mgStats())}catch{}})()},[y,S,D]);const W=d.useMemo(()=>{const U=(I||"").trim().toLowerCase();let q=S?new Date(S):null,ee=D?new Date(D):null;return ee&&ee.setHours(23,59,59,999),t.filter(z=>{try{const te=z!=null&&z.date?new Date(z.date):z!=null&&z.createdAt?new Date(z.createdAt):null;if(q&&te&&te<q||ee&&te&&te>ee||R&&R!=="all"&&(z.status||"").toLowerCase()!==R.toLowerCase())return!1;if(!U)return!0;const K=z.assignedTo&&P[z.assignedTo]?P[z.assignedTo]:z.assignedTo||"";return`${z.title||""} ${K} ${z.type||""} ${z.platform||""} ${z.notes||""}`.toLowerCase().includes(U)}catch{return!0}})},[t,S,D,R,I]),O=d.useMemo(()=>{const U={total:t.length,queued:0,inProgress:0,review:0,done:0,hold:0};return t.forEach(q=>{const ee=(q.status||"").toLowerCase();ee==="queued"?U.queued++:ee==="inprogress"?U.inProgress++:ee==="review"?U.review++:ee==="done"?U.done++:ee==="hold"&&U.hold++}),U},[t]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-bold text-navy",children:"Motion Graphics  Production Log"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:V,className:"bg-royal text-white px-3 py-2 rounded-xl",children:"Refresh"})})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:gap-4 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-slate",children:"Range"}),e.jsxs("select",{value:y,onChange:U=>{const q=U.target.value;w(q);const ee=new Date;let z=new Date;q==="daily"?z.setDate(ee.getDate()-1):q==="weekly"?z.setDate(ee.getDate()-7):q==="monthly"?z.setMonth(ee.getMonth()-1):q==="yearly"?z.setFullYear(ee.getFullYear()-1):q==="lifetime"&&(z=null),q!=="custom"&&(z?A(z.toISOString().slice(0,10)):(A(""),T("")),T(ee.toISOString().slice(0,10)))},className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom"})]}),y==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:S,onChange:U=>A(U.target.value),className:"border rounded-xl px-3 py-2"}),e.jsx("input",{type:"date",value:D,onChange:U=>T(U.target.value),className:"border rounded-xl px-3 py-2"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-slate",children:"Status"}),e.jsxs("select",{value:R,onChange:U=>_(U.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"Queued",children:"Queued"}),e.jsx("option",{value:"InProgress",children:"In Progress"}),e.jsx("option",{value:"Review",children:"Review"}),e.jsx("option",{value:"Done",children:"Done"}),e.jsx("option",{value:"Hold",children:"Hold"})]})]}),e.jsx("div",{className:"flex-1 flex items-center",children:e.jsx("input",{placeholder:"Search title, assignee, notes...",value:I,onChange:U=>E(U.target.value),className:"w-full border rounded-xl px-3 py-2"})})]})}),o&&e.jsx("div",{className:"text-red-600",children:o}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{k:"total",label:"Total",v:O.total},{k:"queued",label:"Queued",v:O.queued},{k:"inProgress",label:"In Progress",v:O.inProgress},{k:"done",label:"Done",v:O.done}].map(U=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm",children:[e.jsx("div",{className:"text-royal text-sm",children:U.label}),e.jsx("div",{className:"text-3xl font-extrabold",children:U.v??0})]},U.k))}),e.jsx("div",{children:a?e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3 md:hidden",children:[W.map(U=>e.jsxs("div",{className:"bg-white p-3 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate",children:sm(U.date)}),e.jsx("div",{className:"font-semibold text-navy",children:U.title}),e.jsxs("div",{className:"text-xs text-slate",children:[U.type,"  ",U.platform,"  ",U.durationSec?`${Math.round(U.durationSec/60)}m`:""]})]}),e.jsxs("div",{className:"text-sm text-right",children:[e.jsx("div",{className:"px-2 py-1 rounded-full bg-slate-100 text-slate-800 text-xs",children:U.status}),e.jsx("div",{className:"text-xs text-slate mt-2",children:P[U.assignedTo]||U.assignedTo||"-"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C(U),className:"text-royal text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>$(U._id),className:"text-red-600 text-sm",children:"Delete"}),U.assetLink&&e.jsx("a",{className:"text-royal text-sm",href:U.assetLink,target:"_blank",rel:"noreferrer",children:"Asset"})]}),U.notes&&e.jsx("div",{className:"mt-2 text-xs text-slate",children:U.notes})]},U._id||`${U.title}-${U.date}`)),W.length===0&&e.jsx("div",{className:"text-slate",children:"No results"})]}),e.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-auto",children:[e.jsxs("div",{className:"p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate",children:["Showing ",W.length," of ",t.length," items"]}),e.jsx("div",{children:e.jsx("button",{onClick:M,className:"bg-royal text-white px-3 py-2 rounded-xl",children:"New Work"})})]}),e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-slate text-sm",children:[e.jsx("th",{className:"px-4 py-3",children:"Date"}),e.jsx("th",{className:"px-4 py-3",children:"Title"}),e.jsx("th",{className:"px-4 py-3",children:"Type"}),e.jsx("th",{className:"px-4 py-3",children:"Platform"}),e.jsx("th",{className:"px-4 py-3",children:"Assigned"}),e.jsx("th",{className:"px-4 py-3",children:"Duration"}),e.jsx("th",{className:"px-4 py-3",children:"Status"}),e.jsx("th",{className:"px-4 py-3",children:"Notes"}),e.jsx("th",{className:"px-4 py-3",children:"Actions"})]})}),e.jsxs("tbody",{children:[W.map(U=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:sm(U.date)}),e.jsx("td",{className:"px-4 py-3 align-top text-sm font-semibold",children:U.title}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:U.type}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:U.platform}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:P[U.assignedTo]||U.assignedTo||"-"}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:U.durationSec?`${Math.round(U.durationSec/60)}m`:"-"}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:e.jsx("span",{className:"px-2 py-1 rounded-full bg-slate-100 text-slate-800 text-xs",children:U.status})}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:U.notes?U.notes.length>120?`${U.notes.slice(0,120)}...`:U.notes:"-"}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C(U),className:"text-royal text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>$(U._id),className:"text-red-600 text-sm",children:"Delete"})]})})]},U._id||`${U.title}-${U.date}`)),W.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-6 text-slate",colSpan:9,children:"No results"})})]})]})]})]})}),e.jsx(Cw,{visible:c,payload:x,setPayload:m,onClose:()=>u(!1),onSave:F,saving:p,error:k,users:N,types:h,platforms:j})]})}function Cw({visible:t,payload:s,setPayload:n,onClose:r,onSave:a,saving:l,error:o,users:i,types:c,platforms:u}){const[x,m]=d.useState(""),[p,b]=d.useState(!1),[k,g]=d.useState(-1),N=d.useRef(null),[v,h]=d.useState("");if(d.useEffect(()=>{const S=setTimeout(()=>h(x||""),150);return()=>clearTimeout(S)},[x]),d.useEffect(()=>{if(!s){m("");return}const S=i&&i.find(D=>s.assignedTo&&(D._id===s.assignedTo||D.id===s.assignedTo));if(S){m(S.name||S.email);return}const A=i&&i.find(D=>D.name&&s.assignedTo&&D.name===s.assignedTo||D.email&&s.assignedTo&&D.email===s.assignedTo);m(A?A.name||A.email:s.assignedTo||"")},[s,i]),!t)return null;const j=v&&i?i.filter(S=>{const A=v.toLowerCase();return S.name&&S.name.toLowerCase().includes(A)||S.email&&S.email.toLowerCase().includes(A)}).slice(0,6):[];function y(S){const A=S._id||S.id||S.email,D=S.name||S.email||A;n(T=>({...T||{},assignedTo:A})),m(D),b(!1),g(-1)}function w(S){!j||j.length===0||(S.key==="ArrowDown"?(S.preventDefault(),g(A=>A>=j.length-1?0:A+1),b(!0)):S.key==="ArrowUp"?(S.preventDefault(),g(A=>A<=0?j.length-1:A-1),b(!0)):S.key==="Enter"?k>=0&&k<j.length&&(S.preventDefault(),y(j[k])):S.key==="Escape"&&(b(!1),g(-1)))}return e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[s&&s._id?"Edit":"New"," MG Work"]}),e.jsx("button",{onClick:r,className:"text-slate",children:"Close"})]}),o&&e.jsx("div",{className:"text-red-600 mt-2",children:o}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[e.jsx("input",{type:"date",value:(s==null?void 0:s.date)||"",onChange:S=>n(A=>({...A,date:S.target.value})),className:"border rounded-xl px-3 py-2"}),e.jsx("input",{placeholder:"Title",value:(s==null?void 0:s.title)||"",onChange:S=>n(A=>({...A,title:S.target.value})),className:"border rounded-xl px-3 py-2"}),e.jsx("select",{value:(s==null?void 0:s.type)||c[0],onChange:S=>n(A=>({...A,type:S.target.value})),className:"border rounded-xl px-3 py-2",children:c.map(S=>e.jsx("option",{value:S,children:S},S))}),e.jsx("select",{value:(s==null?void 0:s.platform)||u[0],onChange:S=>n(A=>({...A,platform:S.target.value})),className:"border rounded-xl px-3 py-2",children:u.map(S=>e.jsx("option",{value:S,children:S},S))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:N,id:"mg-assigned-input","aria-autocomplete":"list","aria-controls":"mg-assigned-listbox","aria-expanded":p,"aria-activedescendant":k>=0&&j[k]?`mg-assigned-opt-${k}`:void 0,placeholder:"Assigned To (type to search)",value:x||"",onChange:S=>{m(S.target.value),n(A=>({...A,assignedTo:S.target.value})),b(!0),g(-1)},onFocus:()=>b(!0),onKeyDown:w,className:"border rounded-xl px-3 py-2 w-full"}),p&&j.length>0&&e.jsx("div",{id:"mg-assigned-listbox",role:"listbox","aria-labelledby":"mg-assigned-input",className:"absolute z-40 bg-white border mt-1 rounded-lg w-full max-h-44 overflow-auto shadow-sm",children:j.map((S,A)=>e.jsxs("div",{id:`mg-assigned-opt-${A}`,role:"option","aria-selected":A===k,onMouseDown:()=>y(S),className:`px-3 py-2 cursor-pointer ${A===k?"bg-slate-100":"hover:bg-slate-50"}`,children:[e.jsx("div",{className:"text-sm font-medium",children:S.name||S.email}),S.email&&e.jsx("div",{className:"text-xs text-slate",children:S.email})]},S._id||S.email))})]}),e.jsx("input",{placeholder:"Duration (sec)",type:"number",value:(s==null?void 0:s.durationSec)||"",onChange:S=>n(A=>({...A,durationSec:Number(S.target.value)})),className:"border rounded-xl px-3 py-2"}),e.jsx("input",{placeholder:"Asset Link",value:(s==null?void 0:s.assetLink)||"",onChange:S=>n(A=>({...A,assetLink:S.target.value})),className:"border rounded-xl px-3 py-2 md:col-span-2"}),e.jsxs("select",{value:(s==null?void 0:s.status)||"Queued",onChange:S=>n(A=>({...A,status:S.target.value})),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{children:"Queued"}),e.jsx("option",{children:"InProgress"}),e.jsx("option",{children:"Review"}),e.jsx("option",{children:"Done"}),e.jsx("option",{children:"Hold"})]}),e.jsx("textarea",{placeholder:"Notes",value:(s==null?void 0:s.notes)||"",onChange:S=>n(A=>({...A,notes:S.target.value})),className:"border rounded-xl px-3 py-2 md:col-span-2"})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:r,className:"px-3 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{onClick:()=>a(s),disabled:l,className:"px-3 py-2 rounded-xl bg-royal text-white",children:l?"Saving...":"Save"})]})]})})}function Aw(){var P,W,O,U,q,ee,z,te,K,G,oe,le;const{user:t}=fe();if((t==null?void 0:t.role)!=="Coordinator"&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin")return e.jsx("div",{className:"text-royal",children:"Access denied"});const[s,n]=d.useState([]),[r,a]=d.useState([]),[l,o]=d.useState(""),[i,c]=d.useState(!0),[u,x]=d.useState(!1),[m,p]=d.useState(null),[b,k]=d.useState(null),[g,N]=d.useState(!1),[v,h]=d.useState(!1),[j,y]=d.useState(null),[w,S]=d.useState(null),[A,D]=d.useState({followUpType:"Call",note:"",amountPromised:"",updatedNextPaymentDate:""}),[T,R]=d.useState({collectingAmount:"",paymentMethod:"Cash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""}),_=async()=>{try{const{students:Z}=await B.getStudentsWithDues();n(Z||[]),a(Z||[]);const L=sessionStorage.getItem("openPaymentId");if(L&&Z&&Z.length>0){const H=Z.find(re=>re._id===L);H&&(setTimeout(()=>{I(H)},100),sessionStorage.removeItem("openPaymentId"),sessionStorage.removeItem("openPaymentData"))}}catch(Z){S(Z.message)}finally{c(!1)}};d.useEffect(()=>{_()},[]),d.useEffect(()=>{if(l.trim()==="")a(s);else{const Z=l.toLowerCase(),L=s.filter(H=>{var re,se,me,he,ie,xe,pe;return((se=(re=H.lead)==null?void 0:re.leadId)==null?void 0:se.toLowerCase().includes(Z))||((he=(me=H.lead)==null?void 0:me.name)==null?void 0:he.toLowerCase().includes(Z))||((xe=(ie=H.lead)==null?void 0:ie.phone)==null?void 0:xe.includes(Z))||((pe=H.courseName)==null?void 0:pe.toLowerCase().includes(Z))});a(L)}},[l,s]);const I=async Z=>{p(Z),x(!0);try{const L=await B.getStudentHistory(Z._id);k(L)}catch(L){S(L.message)}},E=()=>{x(!1),p(null),k(null),N(!1),h(!1),D({followUpType:"Call",note:"",amountPromised:"",updatedNextPaymentDate:""}),R({collectingAmount:"",paymentMethod:"Cash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""})},V=Z=>{p(Z),h(!0),R({collectingAmount:"",paymentMethod:"Cash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""})},F=Z=>{p(Z),N(!0),D({followUpType:"Call",note:"",amountPromised:"",updatedNextPaymentDate:""})},M=async Z=>{if(Z.preventDefault(),y(null),S(null),(t==null?void 0:t.role)!=="Coordinator"){S("Only Coordinators can add follow-ups");return}try{await B.addFollowUp({admissionFeeId:m._id,leadId:m.lead._id,...A,amountPromised:Number(A.amountPromised)||0}),y("Follow-up added successfully"),N(!1),D({followUpType:"Call",note:"",amountPromised:"",updatedNextPaymentDate:""}),p(null),_()}catch(L){S(L.message)}},C=async Z=>{if(Z.preventDefault(),y(null),S(null),(t==null?void 0:t.role)!=="Coordinator"){S("Only Coordinators can collect payments");return}const L=Number(T.collectingAmount)||0;if(L<=0){S("Collecting amount must be greater than 0");return}if(L>m.dueAmount){S(`Cannot collect more than due amount (${m.dueAmount})`);return}try{await B.updateAdmissionFeePayment({admissionFeeId:m._id,additionalPayment:L,paymentMethod:T.paymentMethod,paymentDate:T.paymentDate,nextPaymentDate:T.nextPaymentDate,note:T.note}),y(`Successfully submitted due collection of ${L} for approval`),h(!1),R({collectingAmount:"",paymentMethod:"Cash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""}),p(null),_()}catch(H){S(H.message)}};if(i)return e.jsx("div",{className:"p-6",children:"Loading..."});const $=Z=>{if(!Z)return!1;const L=new Date;return L.setHours(0,0,0,0),new Date(Z)<L};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy",children:"Due Fees Collection"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and follow up on pending student payments"})]})}),j&&e.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg",children:j}),w&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:w}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Dn,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by Lead ID, Name, Phone, or Course...",value:l,onChange:Z=>o(Z.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Student"}),e.jsx("th",{className:"p-3 text-left",children:"Course"}),e.jsx("th",{className:"p-3 text-left",children:"Total Amount"}),e.jsx("th",{className:"p-3 text-left",children:"Paid"}),e.jsx("th",{className:"p-3 text-left",children:"Due"}),e.jsx("th",{className:"p-3 text-left",children:"Next Payment"}),e.jsx("th",{className:"p-3 text-left",children:"Admitted Date"}),e.jsx("th",{className:"p-3 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[r.map(Z=>{var L,H,re,se,me,he;return e.jsxs("tr",{className:`border-t hover:bg-gray-50 ${$(Z.nextPaymentDate)?"bg-red-50":""}`,children:[e.jsxs("td",{className:"p-3",children:[e.jsxs("div",{className:"font-semibold text-navy",children:[(L=Z.lead)==null?void 0:L.leadId,"  ",(H=Z.lead)==null?void 0:H.name]}),e.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-3 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(wl,{size:12}),(re=Z.lead)==null?void 0:re.phone]}),((se=Z.lead)==null?void 0:se.email)&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(xp,{size:12}),(me=Z.lead)==null?void 0:me.email]})]})]}),e.jsx("td",{className:"p-3",children:Z.courseName}),e.jsxs("td",{className:"p-3 font-semibold",children:[" ",Z.totalAmount||0]}),e.jsxs("td",{className:"p-3 text-green-600 font-semibold",children:[" ",Z.amount||0]}),e.jsxs("td",{className:"p-3 text-orange-600 font-bold",children:[" ",Z.dueAmount||0]}),e.jsx("td",{className:"p-3",children:Z.nextPaymentDate?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:new Date(Z.nextPaymentDate).toLocaleDateString("en-GB")}),$(Z.nextPaymentDate)&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-red-600 font-medium mt-1",children:[e.jsx(Dt,{size:12}),"Overdue"]})]}):e.jsx("span",{className:"text-gray-400",children:"Not set"})}),e.jsx("td",{className:"p-3",children:(he=Z.lead)!=null&&he.admittedAt?new Date(Z.lead.admittedAt).toLocaleDateString("en-GB"):"N/A"}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{onClick:()=>V(Z),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-green-500 text-white rounded-lg text-xs font-medium hover:bg-green-600 transition-colors",children:[e.jsx(He,{size:14}),"Collect Due"]}),e.jsxs("button",{onClick:()=>F(Z),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-orange-500 text-white rounded-lg text-xs font-medium hover:bg-orange-600 transition-colors",children:[e.jsx(wl,{size:14}),"Follow Up"]}),e.jsxs("button",{onClick:()=>I(Z),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-500 text-white rounded-lg text-xs font-medium hover:bg-blue-600 transition-colors",children:[e.jsx(Do,{size:14}),"Details"]})]})})]},Z._id)}),r.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-8 text-center text-gray-500",children:l?"No students found matching your search":"No students with due fees"})})]})]})}),u&&m&&b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto my-8",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-navy",children:"Student Payment Details"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(P=m.lead)==null?void 0:P.leadId,"  ",(W=m.lead)==null?void 0:W.name]})]}),e.jsx("button",{onClick:E,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-bold text-navy mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Student Information"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Lead ID:"})," ",e.jsx("span",{className:"font-semibold",children:(O=m.lead)==null?void 0:O.leadId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"})," ",e.jsx("span",{className:"font-semibold",children:(U=m.lead)==null?void 0:U.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",e.jsx("span",{className:"font-semibold",children:(q=m.lead)==null?void 0:q.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"})," ",e.jsx("span",{className:"font-semibold",children:((ee=m.lead)==null?void 0:ee.email)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Admitted:"})," ",e.jsx("span",{className:"font-semibold",children:(z=m.lead)!=null&&z.admittedAt?new Date(m.lead.admittedAt).toLocaleDateString("en-GB"):"N/A"})]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-bold text-navy mb-3 flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5"}),"Payment Summary"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Course:"})," ",e.jsx("span",{className:"font-semibold",children:m.courseName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"})," ",e.jsxs("span",{className:"font-bold text-lg",children:[" ",m.totalAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Amount Paid:"})," ",e.jsxs("span",{className:"font-bold text-lg text-green-600",children:[" ",m.amount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Due Amount:"})," ",e.jsxs("span",{className:"font-bold text-lg text-orange-600",children:[" ",m.dueAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"})," ",e.jsx("span",{className:"font-semibold",children:m.method})]})]})]})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-bold text-navy mb-3 flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5"}),"Important Dates"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Date:"}),e.jsx("p",{className:"font-semibold",children:new Date(m.paymentDate).toLocaleDateString("en-GB")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Next Payment Date:"}),e.jsx("p",{className:"font-semibold",children:m.nextPaymentDate?new Date(m.nextPaymentDate).toLocaleDateString("en-GB"):"Not set"}),$(m.nextPaymentDate)&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-red-600 font-medium mt-1",children:[e.jsx(Dt,{size:12}),"Overdue"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Submitted:"}),e.jsx("p",{className:"font-semibold",children:new Date(m.createdAt).toLocaleDateString("en-GB")})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-bold text-navy flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Follow-up History (",((te=b.followUps)==null?void 0:te.length)||0,")"]}),(t==null?void 0:t.role)==="Coordinator"&&e.jsx("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors",children:"Add Follow-up"})]}),b.followUps&&b.followUps.length>0?e.jsx("div",{className:"space-y-3",children:b.followUps.map(Z=>{var L;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{children:[e.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium mr-2",children:Z.followUpType}),e.jsxs("span",{className:"text-xs text-gray-600",children:["by ",(L=Z.coordinator)==null?void 0:L.name,"  ",new Date(Z.createdAt).toLocaleString("en-GB")]})]})}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap mb-2",children:Z.note}),(Z.amountPromised>0||Z.updatedNextPaymentDate)&&e.jsxs("div",{className:"flex gap-4 text-xs text-gray-600 mt-2 pt-2 border-t",children:[Z.amountPromised>0&&e.jsxs("span",{children:["Amount Promised:  ",Z.amountPromised]}),Z.updatedNextPaymentDate&&e.jsxs("span",{children:["Next Payment Updated: ",new Date(Z.updatedNextPaymentDate).toLocaleDateString("en-GB")]})]})]},Z._id)})}):e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No follow-ups yet"})]}),g&&(t==null?void 0:t.role)==="Coordinator"&&e.jsxs("div",{className:"bg-white border-2 border-blue-300 rounded-xl p-5",children:[e.jsx("h4",{className:"font-bold text-navy mb-4",children:"Add New Follow-up"}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Follow-up Type *"}),e.jsxs("select",{value:A.followUpType,onChange:Z=>D(L=>({...L,followUpType:Z.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{children:"Call"}),e.jsx("option",{children:"SMS"}),e.jsx("option",{children:"Email"}),e.jsx("option",{children:"Visit"}),e.jsx("option",{children:"WhatsApp"}),e.jsx("option",{children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Notes *"}),e.jsx("textarea",{rows:"3",value:A.note,onChange:Z=>D(L=>({...L,note:Z.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Enter follow-up details...",required:!0})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Amount Promised (Optional)"}),e.jsx("input",{type:"number",value:A.amountPromised,onChange:Z=>D(L=>({...L,amountPromised:Z.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Update Next Payment Date (Optional)"}),e.jsx("input",{type:"date",value:A.updatedNextPaymentDate,onChange:Z=>D(L=>({...L,updatedNextPaymentDate:Z.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>{N(!1),D({followUpType:"Call",note:"",amountPromised:"",updatedNextPaymentDate:""})},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors",children:"Save Follow-up"})]})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 p-4 flex justify-end",children:e.jsx("button",{onClick:E,className:"px-6 py-2 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors",children:"Close"})})]})}),v&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-navy",children:"Collect Due Payment"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(K=m.lead)==null?void 0:K.leadId,"  ",(G=m.lead)==null?void 0:G.name]})]}),e.jsx("button",{onClick:()=>{h(!1),p(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-bold text-navy mb-3 flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5"}),"Payment Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("p",{className:"font-bold text-lg",children:[" ",m.totalAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Paid So Far:"}),e.jsxs("p",{className:"font-bold text-lg text-green-600",children:[" ",m.amount||0]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Due Amount:"}),e.jsxs("p",{className:"font-bold text-2xl text-orange-600",children:[" ",m.dueAmount||0]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Collecting Amount Now *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-semibold",children:""}),e.jsx("input",{type:"number",value:T.collectingAmount,onChange:Z=>R(L=>({...L,collectingAmount:Z.target.value})),className:"w-full border-2 border-green-300 rounded-lg pl-8 pr-3 py-3 text-lg font-bold focus:outline-none focus:ring-2 focus:ring-green-500 bg-green-50",placeholder:"0",min:"1",max:m.dueAmount,required:!0})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Maximum:  ",m.dueAmount]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Payment Method *"}),e.jsxs("select",{value:T.paymentMethod,onChange:Z=>R(L=>({...L,paymentMethod:Z.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select payment method"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Mobile Banking (bKash)",children:"Mobile Banking (bKash)"}),e.jsx("option",{value:"Mobile Banking (Nagad)",children:"Mobile Banking (Nagad)"}),e.jsx("option",{value:"Mobile Banking (Rocket)",children:"Mobile Banking (Rocket)"}),e.jsx("option",{value:"Check",children:"Check"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Payment Date *"}),e.jsx("input",{type:"date",value:T.paymentDate,onChange:Z=>R(L=>({...L,paymentDate:Z.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Next Payment Date (Optional)"}),e.jsx("input",{type:"date",value:T.nextPaymentDate,onChange:Z=>R(L=>({...L,nextPaymentDate:Z.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.nextPaymentDate&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Current: ",new Date(m.nextPaymentDate).toLocaleDateString("en-GB")]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Set when customer will make next payment"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Note (Optional)"}),e.jsx("textarea",{rows:"2",value:T.note,onChange:Z=>R(L=>({...L,note:Z.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Add any notes about this collection..."})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),p(null)},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg text-sm font-bold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(He,{size:16}),"Collect Payment"]})]})]})]})}),g&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-navy",children:"Add Follow-up"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(oe=m.lead)==null?void 0:oe.leadId,"  ",(le=m.lead)==null?void 0:le.name]})]}),e.jsx("button",{onClick:()=>{N(!1),p(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:M,className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Current Due Amount:"}),e.jsxs("span",{className:"font-bold text-xl text-orange-600",children:[" ",m.dueAmount||0]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Follow-up Type *"}),e.jsxs("select",{value:A.followUpType,onChange:Z=>D(L=>({...L,followUpType:Z.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{children:"Call"}),e.jsx("option",{children:"SMS"}),e.jsx("option",{children:"Email"}),e.jsx("option",{children:"Visit"}),e.jsx("option",{children:"WhatsApp"}),e.jsx("option",{children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Notes *"}),e.jsx("textarea",{rows:"3",value:A.note,onChange:Z=>D(L=>({...L,note:Z.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Enter follow-up details, conversation summary, student response...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Amount Promised (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:""}),e.jsx("input",{type:"number",value:A.amountPromised,onChange:Z=>D(L=>({...L,amountPromised:Z.target.value})),className:"w-full border border-gray-300 rounded-lg pl-8 pr-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Update Next Payment Date (Optional)"}),e.jsx("input",{type:"date",value:A.updatedNextPaymentDate,onChange:Z=>D(L=>({...L,updatedNextPaymentDate:Z.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.nextPaymentDate&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Current: ",new Date(m.nextPaymentDate).toLocaleDateString("en-GB")]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>{N(!1),p(null)},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg text-sm font-bold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(wl,{size:16}),"Save Follow-up"]})]})]})]})})]})}function Dw(){const{user:t}=fe();if((t==null?void 0:t.role)!=="Coordinator"&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin")return e.jsx("div",{className:"text-royal",children:"Access denied"});const[s,n]=d.useState([]),[r,a]=d.useState(!0);if(d.useEffect(()=>{(async()=>{try{const{notifications:c}=await B.getPaymentNotifications();n(c||[])}catch(c){console.error(c)}finally{a(!1)}})()},[]),r)return e.jsx("div",{className:"p-6",children:"Loading..."});const l=s.filter(i=>i.isOverdue),o=s.filter(i=>!i.isOverdue);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-navy",children:"Payment Reminders"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Upcoming and overdue payment notifications"})]}),l.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Dt,{className:"text-red-600",size:24}),e.jsxs("h2",{className:"text-xl font-bold text-red-600",children:["Overdue Payments (",l.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:l.map(i=>{var c,u,x,m;return e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-5 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-navy",children:[(c=i.lead)==null?void 0:c.leadId,"  ",(u=i.lead)==null?void 0:u.name]}),e.jsx("span",{className:"px-3 py-1 bg-red-600 text-white rounded-full text-xs font-bold",children:"OVERDUE"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-2 text-sm text-gray-700",children:[e.jsxs("div",{children:[" ",(x=i.lead)==null?void 0:x.phone]}),((m=i.lead)==null?void 0:m.email)&&e.jsxs("div",{children:[" ",i.lead.email]}),e.jsxs("div",{children:[" Course: ",i.courseName]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(He,{size:14}),"Due:  ",i.dueAmount||0]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ge,{size:14}),"Expected: ",new Date(i.nextPaymentDate).toLocaleDateString("en-GB")]})]})]}),e.jsx(ln,{to:"/coordinator/due-fees",className:"ml-4 px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors",children:"Follow Up"})]})},i._id)})})]}),o.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ge,{className:"text-orange-600",size:24}),e.jsxs("h2",{className:"text-xl font-bold text-orange-600",children:["Upcoming Payments (",o.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:o.map(i=>{var c,u,x,m;return e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-5 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-navy",children:[(c=i.lead)==null?void 0:c.leadId,"  ",(u=i.lead)==null?void 0:u.name]}),e.jsxs("span",{className:"px-3 py-1 bg-orange-500 text-white rounded-full text-xs font-bold",children:[i.daysUntil," DAYS LEFT"]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-2 text-sm text-gray-700",children:[e.jsxs("div",{children:[" ",(x=i.lead)==null?void 0:x.phone]}),((m=i.lead)==null?void 0:m.email)&&e.jsxs("div",{children:[" ",i.lead.email]}),e.jsxs("div",{children:[" Course: ",i.courseName]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(He,{size:14}),"Due:  ",i.dueAmount||0]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ge,{size:14}),"Due Date: ",new Date(i.nextPaymentDate).toLocaleDateString("en-GB")]})]})]}),e.jsx(ln,{to:"/coordinator/due-fees",className:"ml-4 px-4 py-2 bg-orange-500 text-white rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors",children:"View Details"})]})},i._id)})})]}),s.length===0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-soft p-12 text-center",children:[e.jsx(ge,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No upcoming or overdue payments"})]})]})}function Tw(){const{user:t}=fe(),[s,n]=d.useState("leave"),[r,a]=d.useState([]),[l,o]=d.useState([]),[i,c]=d.useState([]),[u,x]=d.useState([]),[m,p]=d.useState(!1),[b,k]=d.useState(!1),[g,N]=d.useState(null),[v,h]=d.useState(""),[j,y]=d.useState(""),[w,S]=d.useState(null),[A,D]=d.useState(null),[T,R]=d.useState(!1),[_,I]=d.useState(null),[E,V]=d.useState(null),[F,M]=d.useState({leaveType:"Casual Leave",startDate:"",endDate:"",reason:"",handoverTo:""}),[C,$]=d.useState({applicationType:"TA/DA",purpose:"",travelDate:"",destination:"",amount:"",description:""}),P=(t==null?void 0:t.role)==="SuperAdmin";d.useEffect(()=>{P||(W(),O(),U())},[]),d.useEffect(()=>{const L=async()=>{const H=sessionStorage.getItem("openHandoverRequestId"),re=sessionStorage.getItem("handoverNotificationId");if(H&&i.length>0){console.log(" Opening handover modal for request:",H);const se=i.find(me=>me._id===H);if(se&&(N(se),n("handover"),re))try{await B.markNotificationRead(re)}catch(me){console.error("Failed to mark notification as read:",me)}sessionStorage.removeItem("openHandoverRequestId"),sessionStorage.removeItem("handoverNotificationId")}};i.length>0&&L()},[i]);const W=async()=>{try{const[L,H]=await Promise.all([B.getMyLeaveApplications(),B.getMyTADAApplications()]);a(L.applications||[]),o(H.applications||[])}catch(L){D(L.message)}},O=async()=>{try{const L=await B.listUsers();x((L.users||[]).filter(H=>H.role!=="SuperAdmin"&&H._id!==(t==null?void 0:t.id)))}catch(L){console.error("Failed to load employees:",L)}},U=async()=>{try{const L=await B.getHandoverRequests();c(L.requests||[])}catch(L){console.error("Failed to load handover requests:",L)}},q=async L=>{L.preventDefault(),S(null),D(null),R(!0);try{const H={...F};H.handoverTo||delete H.handoverTo,_?(await B.updateLeaveApplication(_,H),S("Leave application updated successfully! "),I(null)):(await B.createLeaveApplication(H),S("Leave application submitted successfully! ")),M({leaveType:"Casual Leave",startDate:"",endDate:"",reason:"",handoverTo:""}),p(!1),W()}catch(H){D(H.message)}finally{R(!1)}},ee=async()=>{if(g){if(v==="deny"&&!j.trim()){D("Please provide a reason for denying the handover");return}R(!0),S(null),D(null);try{v==="accept"?(await B.acceptHandover(g._id,j),S("Handover request accepted successfully! ")):(await B.denyHandover(g._id,j),S("Handover request denied")),N(null),y(""),h(""),U(),W(),window.scrollTo({top:0,behavior:"smooth"})}catch(L){D(L.message)}finally{R(!1)}}},z=async L=>{L.preventDefault(),S(null),D(null),R(!0);try{E?(await B.updateTADAApplication(E,C),S("TA/DA application updated successfully! "),V(null)):(await B.createTADAApplication(C),S("TA/DA application submitted successfully! ")),$({applicationType:"TA/DA",purpose:"",travelDate:"",destination:"",amount:"",description:""}),k(!1),W()}catch(H){D(H.message)}finally{R(!1)}},te=L=>{var H;I(L._id),M({leaveType:L.leaveType,startDate:L.startDate.split("T")[0],endDate:L.endDate.split("T")[0],reason:L.reason,handoverTo:((H=L.handoverTo)==null?void 0:H._id)||""}),p(!0),window.scrollTo({top:0,behavior:"smooth"})},K=async L=>{if(confirm("Are you sure you want to delete this leave application? This action cannot be undone.")){R(!0),S(null),D(null);try{await B.deleteLeaveApplication(L),S("Leave application deleted successfully"),W(),window.scrollTo({top:0,behavior:"smooth"})}catch(H){D(H.message)}finally{R(!1)}}},G=L=>{V(L._id),$({applicationType:L.applicationType,purpose:L.purpose,travelDate:L.travelDate.split("T")[0],destination:L.destination||"",amount:L.amount,description:L.description||""}),k(!0),window.scrollTo({top:0,behavior:"smooth"})},oe=async L=>{if(confirm("Are you sure you want to delete this TA/DA application? This action cannot be undone.")){R(!0),S(null),D(null);try{await B.deleteTADAApplication(L),S("TA/DA application deleted successfully"),W(),window.scrollTo({top:0,behavior:"smooth"})}catch(H){D(H.message)}finally{R(!1)}}},le=L=>({Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800",Paid:"bg-blue-100 text-blue-800"})[L]||"bg-gray-100 text-gray-800",Z=L=>{switch(L){case"Approved":return it;case"Rejected":return js;case"Paid":return it;default:return Bt}};return P?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-xl text-gray-600",children:"SuperAdmin cannot apply for leave or TA/DA."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"My Applications"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Apply for leave and travel allowance"})]}),w&&e.jsxs("div",{className:"p-4 bg-green-50 border-l-4 border-green-500 rounded-lg flex items-start gap-3",children:[e.jsx(it,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-green-800 font-medium",children:w})]}),A&&e.jsxs("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 rounded-lg flex items-start gap-3",children:[e.jsx(Dt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-red-800 font-medium",children:A})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>p(!0),className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl p-6 hover:shadow-lg transition-all flex items-center justify-center gap-3",children:[e.jsx(ge,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-semibold",children:"Apply for Leave"})]}),e.jsxs("button",{onClick:()=>k(!0),className:"bg-gradient-to-r from-orange-500 to-pink-600 text-white rounded-xl p-6 hover:shadow-lg transition-all flex items-center justify-center gap-3",children:[e.jsx(er,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-semibold",children:"Apply for TA/DA"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>n("leave"),className:`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center gap-2 ${s==="leave"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(ge,{className:"w-5 h-5"}),"Leave Applications (",r.length,")"]}),e.jsxs("button",{onClick:()=>n("tada"),className:`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center gap-2 ${s==="tada"?"bg-orange-50 text-orange-600 border-b-2 border-orange-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(er,{className:"w-5 h-5"}),"TA/DA Applications (",l.length,")"]}),e.jsxs("button",{onClick:()=>n("handover"),className:`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center gap-2 ${s==="handover"?"bg-green-50 text-green-600 border-b-2 border-green-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(Me,{className:"w-5 h-5"}),"Handover Requests (",i.length,")"]})]}),e.jsxs("div",{className:"p-6",children:[s==="leave"&&e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(ge,{className:"w-16 h-16 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No leave applications yet"})]}):r.map(L=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${le(L.status)}`,children:[ve.createElement(Z(L.status),{className:"w-4 h-4 inline mr-1"}),L.status]}),e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:L.leaveType})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(L.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Start Date"}),e.jsx("p",{className:"font-medium text-gray-800",children:new Date(L.startDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"End Date"}),e.jsx("p",{className:"font-medium text-gray-800",children:new Date(L.endDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Duration"}),e.jsxs("p",{className:"font-medium text-gray-800",children:[L.totalDays," day(s)"]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Reason"}),e.jsx("p",{className:"text-sm text-gray-700",children:L.reason})]}),L.handoverTo&&e.jsxs("div",{className:"p-3 rounded-lg bg-indigo-50 mb-3",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-600 mb-1 flex items-center gap-1",children:[e.jsx(Me,{className:"w-3 h-3"}),"Responsibility Handover"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-800",children:[L.handoverTo.name," (",L.handoverTo.role,")"]}),L.handoverNote&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:L.handoverNote})]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L.handoverStatus==="Accepted"?"bg-green-100 text-green-800":L.handoverStatus==="Denied"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[L.handoverStatus==="Accepted"&&e.jsx(tr,{className:"w-3 h-3 inline mr-1"}),L.handoverStatus==="Denied"&&e.jsx(Wr,{className:"w-3 h-3 inline mr-1"}),L.handoverStatus==="Pending"&&e.jsx(Bt,{className:"w-3 h-3 inline mr-1"}),L.handoverStatus]})]})]}),L.reviewNote&&e.jsxs("div",{className:`p-3 rounded-lg ${L.status==="Approved"?"bg-green-50":"bg-red-50"}`,children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Review Note"}),e.jsx("p",{className:"text-sm text-gray-700",children:L.reviewNote}),L.reviewedBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["by ",L.reviewedBy.name," on ",new Date(L.reviewedAt).toLocaleDateString()]})]}),L.status==="Pending"&&e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>te(L),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(kd,{className:"w-4 h-4"}),"Edit"]}),e.jsxs("button",{onClick:()=>K(L._id),className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(cn,{className:"w-4 h-4"}),"Delete"]})]})]},L._id))}),s==="tada"&&e.jsx("div",{className:"space-y-4",children:l.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(er,{className:"w-16 h-16 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No TA/DA applications yet"})]}):l.map(L=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${le(L.adminStatus)}`,children:[ve.createElement(Z(L.adminStatus),{className:"w-4 h-4 inline mr-1"}),"Admin: ",L.adminStatus]}),L.adminStatus==="Approved"&&e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${le(L.paymentStatus)}`,children:[ve.createElement(Z(L.paymentStatus),{className:"w-4 h-4 inline mr-1"}),"Payment: ",L.paymentStatus]}),e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:L.applicationType})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(L.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Travel Date"}),e.jsx("p",{className:"font-medium text-gray-800",children:new Date(L.travelDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Amount"}),e.jsx("p",{className:"font-medium text-gray-800 text-lg",children:Pe(L.amount)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Destination"}),e.jsx("p",{className:"font-medium text-gray-800",children:L.destination})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Purpose"}),e.jsx("p",{className:"text-sm text-gray-700",children:L.purpose})]}),L.description&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700",children:L.description})]}),L.adminReviewNote&&e.jsxs("div",{className:`p-3 rounded-lg mb-2 ${L.adminStatus==="Approved"?"bg-green-50":"bg-red-50"}`,children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Admin Review"}),e.jsx("p",{className:"text-sm text-gray-700",children:L.adminReviewNote}),L.adminReviewedBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["by ",L.adminReviewedBy.name," on ",new Date(L.adminReviewedAt).toLocaleDateString()]})]}),L.paymentNote&&e.jsxs("div",{className:"p-3 rounded-lg bg-blue-50",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Payment Note"}),e.jsx("p",{className:"text-sm text-gray-700",children:L.paymentNote}),L.paidBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Paid by ",L.paidBy.name," on ",new Date(L.paidAt).toLocaleDateString()]})]}),L.adminStatus==="Pending"&&e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>G(L),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(kd,{className:"w-4 h-4"}),"Edit"]}),e.jsxs("button",{onClick:()=>oe(L._id),className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(cn,{className:"w-4 h-4"}),"Delete"]})]})]},L._id))}),s==="handover"&&e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(Me,{className:"w-16 h-16 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No handover requests"})]}):i.map(L=>e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-white rounded-lg p-5 border border-indigo-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:L.employee.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:L.employee.name}),e.jsx("p",{className:"text-xs text-gray-500",children:L.employee.role})]})]}),e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:L.leaveType})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(L.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3 p-3 bg-white rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Start Date"}),e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:new Date(L.startDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"End Date"}),e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:new Date(L.endDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Duration"}),e.jsxs("p",{className:"font-medium text-gray-800 text-sm",children:[L.totalDays," day(s)"]})]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Leave Reason"}),e.jsx("p",{className:"text-sm text-gray-700",children:L.reason})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>{N(L),h("accept")},className:"flex-1 bg-gradient-to-r from-green-500 to-teal-600 text-white py-2.5 rounded-lg font-medium hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(tr,{className:"w-5 h-5"}),"Accept Handover"]}),e.jsxs("button",{onClick:()=>{N(L),h("deny")},className:"flex-1 bg-gradient-to-r from-red-500 to-pink-600 text-white py-2.5 rounded-lg font-medium hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(Wr,{className:"w-5 h-5"}),"Deny Handover"]})]})]},L._id))})]})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-lg",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${v==="accept"?"bg-gradient-to-r from-green-500 to-teal-600":"bg-gradient-to-r from-red-500 to-pink-600"}`,children:v==="accept"?e.jsx(tr,{className:"w-5 h-5 text-white"}):e.jsx(Wr,{className:"w-5 h-5 text-white"})}),e.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:[v==="accept"?"Accept":"Deny"," Handover"]})]})}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["From: ",e.jsx("span",{className:"font-semibold text-gray-800",children:g.employee.name})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Leave Type: ",e.jsx("span",{className:"font-semibold text-gray-800",children:g.leaveType})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Duration: ",e.jsxs("span",{className:"font-semibold text-gray-800",children:[g.totalDays," day(s)"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:v==="accept"?"Note (Optional)":"Reason for Denial *"}),e.jsx("textarea",{rows:"3",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none resize-none",value:j,onChange:L=>y(L.target.value),placeholder:v==="accept"?"Add any notes...":"Please explain why you are denying this request...",required:v==="deny"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{h(""),y("")},className:"px-5 py-2.5 rounded-lg border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50",children:"Back"}),e.jsx("button",{onClick:ee,disabled:T||v==="deny"&&!j.trim(),className:`px-5 py-2.5 rounded-lg font-medium text-white ${v==="accept"?"bg-gradient-to-r from-green-500 to-teal-600 hover:shadow-lg":"bg-gradient-to-r from-red-500 to-pink-600 hover:shadow-lg"} disabled:opacity-50 transition-all`,children:T?"Processing...":v==="accept"?"Confirm Accept":"Confirm Deny"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg",children:e.jsx(Me,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Handover Request"})]}),e.jsx("button",{onClick:()=>{N(null),y(""),h("")},className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsxs("p",{className:"text-sm font-semibold text-indigo-900 mb-3",children:[g.employee.name," has requested you to handle their responsibilities"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Leave Type:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:g.leaveType})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Duration:"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[g.totalDays," day(s)"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"From:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:new Date(g.startDate).toLocaleDateString("en-GB")})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"To:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:new Date(g.endDate).toLocaleDateString("en-GB")})]}),g.reason&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-indigo-200",children:[e.jsx("span",{className:"text-xs text-gray-600 block mb-1",children:"Reason:"}),e.jsx("p",{className:"text-sm text-gray-700",children:g.reason})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>h("deny"),className:"flex-1 px-5 py-3 rounded-lg border-2 border-red-200 text-red-600 font-medium hover:bg-red-50 transition flex items-center justify-center gap-2",children:[e.jsx(Wr,{size:18}),"Deny"]}),e.jsxs("button",{onClick:()=>h("accept"),className:"flex-1 px-5 py-3 rounded-lg bg-gradient-to-r from-green-500 to-teal-600 text-white font-medium hover:shadow-lg transition flex items-center justify-center gap-2",children:[e.jsx(tr,{size:18}),"Accept"]})]})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("form",{onSubmit:q,className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:e.jsx(ge,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:_?"Edit Leave Application":"Apply for Leave"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Type *"}),e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none",value:F.leaveType,onChange:L=>M(H=>({...H,leaveType:L.target.value})),required:!0,children:[e.jsx("option",{children:"Sick Leave"}),e.jsx("option",{children:"Casual Leave"}),e.jsx("option",{children:"Annual Leave"}),e.jsx("option",{children:"Emergency Leave"}),e.jsx("option",{children:"Unpaid Leave"}),e.jsx("option",{children:"Other"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none",value:F.startDate,onChange:L=>M(H=>({...H,startDate:L.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none",value:F.endDate,onChange:L=>M(H=>({...H,endDate:L.target.value})),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Responsibility Handover To"}),e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none",value:F.handoverTo,onChange:L=>M(H=>({...H,handoverTo:L.target.value})),children:[e.jsx("option",{value:"",children:"-- No Handover Required --"}),u.map(L=>e.jsxs("option",{value:L._id,children:[L.name," (",L.role,")"]},L._id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Select a colleague to handle your responsibilities during leave"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),e.jsx("textarea",{rows:"4",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none resize-none",value:F.reason,onChange:L=>M(H=>({...H,reason:L.target.value})),placeholder:"Please explain your reason for leave...",required:!0})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{p(!1),I(null),M({leaveType:"Casual Leave",startDate:"",endDate:"",reason:"",handoverTo:""})},className:"px-5 py-2.5 rounded-lg border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:T,className:"px-5 py-2.5 rounded-lg bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50",children:T?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"w-4 h-4"}),"Submit Application"]})})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("form",{onSubmit:z,className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-orange-500 to-pink-600 rounded-lg",children:e.jsx(er,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:E?"Edit TA/DA Application":"Apply for TA/DA"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Application Type *"}),e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none",value:C.applicationType,onChange:L=>$(H=>({...H,applicationType:L.target.value})),required:!0,children:[e.jsx("option",{children:"TA"}),e.jsx("option",{children:"DA"}),e.jsx("option",{children:"TA/DA"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Travel Date *"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none",value:C.travelDate,onChange:L=>$(H=>({...H,travelDate:L.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (BDT) *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none",value:C.amount,onChange:L=>$(H=>({...H,amount:L.target.value})),placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination *"}),e.jsx("input",{type:"text",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none",value:C.destination,onChange:L=>$(H=>({...H,destination:L.target.value})),placeholder:"e.g., Dhaka to Chittagong",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose *"}),e.jsx("input",{type:"text",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none",value:C.purpose,onChange:L=>$(H=>({...H,purpose:L.target.value})),placeholder:"e.g., Business meeting, Training session",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{rows:"3",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none resize-none",value:C.description,onChange:L=>$(H=>({...H,description:L.target.value})),placeholder:"Additional details about your travel..."})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{k(!1),V(null),$({applicationType:"TA/DA",purpose:"",travelDate:"",destination:"",amount:"",description:""})},className:"px-5 py-2.5 rounded-lg border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:T,className:"px-5 py-2.5 rounded-lg bg-gradient-to-r from-orange-500 to-pink-600 text-white font-semibold hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50",children:T?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"w-4 h-4"}),"Submit Application"]})})]})]})})]})}function Ew(){const[t,s]=d.useState("leave"),[n,r]=d.useState("Pending"),[a,l]=d.useState("Pending"),[o,i]=d.useState([]),[c,u]=d.useState([]),[x,m]=d.useState(null),[p,b]=d.useState(!1),[k,g]=d.useState(""),[N,v]=d.useState(""),[h,j]=d.useState(!1),[y,w]=d.useState(null),[S,A]=d.useState(null);d.useEffect(()=>{D(),T()},[]),d.useEffect(()=>{D()},[n]),d.useEffect(()=>{T()},[a]);const D=async()=>{try{const C=await B.getAllLeaveApplications(n==="All"?"":n);i(C.applications||[])}catch(C){A(C.message)}},T=async()=>{try{const C=await B.getAdminTADAApplications(a==="All"?"":a);u(C.applications||[])}catch(C){A(C.message)}},R=async()=>{j(!0),A(null),w(null);try{N==="approve"?(await B.approveLeaveApplication(x._id,k),w(`Leave application approved for ${x.employee.name}`)):(await B.rejectLeaveApplication(x._id,k),w(`Leave application rejected for ${x.employee.name}`)),b(!1),g(""),D()}catch(C){A(C.message)}finally{j(!1)}},_=async()=>{j(!0),A(null),w(null);try{N==="approve"?(await B.approveTADAApplication(x._id,k),w(`TA/DA application approved for ${x.employee.name}`)):(await B.rejectTADAApplication(x._id,k),w(`TA/DA application rejected for ${x.employee.name}`)),b(!1),g(""),T()}catch(C){A(C.message)}finally{j(!1)}},I=(C,$)=>{m(C),v("approve"),b(!0)},E=(C,$)=>{m(C),v("reject"),g(""),b(!0)},V=(C,$)=>{m(C),v("request_details"),g(""),b(!0)},F=async()=>{if(!k.trim()){A("Please enter what details you need");return}j(!0),A(null),w(null);try{const C=t==="leave"?`/api/leave/${x._id}/request-details`:`/api/tada/${x._id}/request-details`;await B.authFetch(C,{method:"PATCH",body:JSON.stringify({detailsRequested:k})}),w(`Details request sent to ${x.employee.name}`),b(!1),g(""),t==="leave"?D():T()}catch(C){A(C.message)}finally{j(!1)}},M=C=>({Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800"})[C]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Application Approvals"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Review and approve leave and TA/DA applications"})]}),y&&e.jsx("div",{className:"p-4 bg-green-50 border-l-4 border-green-500 rounded-lg",children:e.jsx("p",{className:"text-green-800 font-medium",children:y})}),S&&e.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsx("p",{className:"text-red-800 font-medium",children:S})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>s("leave"),className:`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center gap-2 ${t==="leave"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(ge,{className:"w-5 h-5"}),"Leave Applications"]}),e.jsxs("button",{onClick:()=>s("tada"),className:`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center gap-2 ${t==="tada"?"bg-orange-50 text-orange-600 border-b-2 border-orange-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(er,{className:"w-5 h-5"}),"TA/DA Applications"]})]}),e.jsxs("div",{className:"p-6",children:[t==="leave"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),e.jsxs("select",{value:n,onChange:C=>r(C.target.value),className:"border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Pending"}),e.jsx("option",{children:"Approved"}),e.jsx("option",{children:"Rejected"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",o.length," applications)"]})]}),o.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(ge,{className:"w-16 h-16 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No leave applications"})]}):e.jsx("div",{className:"space-y-3",children:o.map(C=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:C.employee.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:C.employee.name}),e.jsx("p",{className:"text-xs text-gray-500",children:C.employee.role})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${M(C.status)}`,children:C.status}),e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:C.leaveType})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3 bg-white rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Start Date"}),e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:new Date(C.startDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"End Date"}),e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:new Date(C.endDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Duration"}),e.jsxs("p",{className:"font-medium text-gray-800 text-sm",children:[C.totalDays," day(s)"]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Reason"}),e.jsx("p",{className:"text-sm text-gray-700",children:C.reason})]}),C.handoverTo&&e.jsxs("div",{className:"mb-3 p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsxs("p",{className:"text-xs font-medium text-indigo-700 mb-2 flex items-center gap-1",children:[e.jsx(Me,{className:"w-3 h-3"}),"Responsibility Handover"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:C.handoverTo.name}),e.jsx("p",{className:"text-xs text-gray-600",children:C.handoverTo.role}),C.handoverNote&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1 italic",children:['"',C.handoverNote,'"']})]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${C.handoverStatus==="Accepted"?"bg-green-100 text-green-800":C.handoverStatus==="Denied"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[C.handoverStatus==="Accepted"&&" ",C.handoverStatus==="Denied"&&" ",C.handoverStatus==="Pending"&&" ",C.handoverStatus]})]})]}),C.status==="Pending"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>I(C),className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg px-4 py-2 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(it,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>V(C),className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg px-4 py-2 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(tl,{className:"w-4 h-4"}),"Ask Details"]}),e.jsxs("button",{onClick:()=>E(C),className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg px-4 py-2 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(js,{className:"w-4 h-4"}),"Reject"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 text-center flex items-center justify-center gap-1",children:[e.jsx(jn,{className:"w-3 h-3"}),"Click to add comment/reason before submitting"]})]}),C.reviewNote&&e.jsx("div",{className:`mt-3 p-4 rounded-lg border-l-4 ${C.status==="Approved"?"bg-green-50 border-green-400":"bg-red-50 border-red-400"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(jn,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-gray-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 uppercase",children:C.status==="Approved"?" Admin Comment":" Rejection Reason"}),e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:C.reviewNote}),C.reviewedBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["by ",C.reviewedBy.name," on ",new Date(C.reviewedAt).toLocaleDateString()]})]})]})})]},C._id))})]}),t==="tada"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),e.jsxs("select",{value:a,onChange:C=>l(C.target.value),className:"border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none",children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Pending"}),e.jsx("option",{children:"Approved"}),e.jsx("option",{children:"Rejected"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",c.length," applications)"]})]}),c.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(er,{className:"w-16 h-16 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No TA/DA applications"})]}):e.jsx("div",{className:"space-y-3",children:c.map(C=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-orange-500 to-pink-600 flex items-center justify-center text-white font-bold",children:C.employee.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:C.employee.name}),e.jsx("p",{className:"text-xs text-gray-500",children:C.employee.role})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${M(C.adminStatus)}`,children:C.adminStatus}),e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:C.applicationType})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3 bg-white rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Travel Date"}),e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:new Date(C.travelDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Amount"}),e.jsx("p",{className:"font-bold text-gray-800 text-lg",children:Pe(C.amount)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Destination"}),e.jsx("p",{className:"font-medium text-gray-800",children:C.destination})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Purpose"}),e.jsx("p",{className:"text-sm text-gray-700",children:C.purpose})]}),C.description&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700",children:C.description})]}),C.adminStatus==="Pending"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>I(C),className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg px-4 py-2 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(it,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>V(C),className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg px-4 py-2 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(tl,{className:"w-4 h-4"}),"Ask Details"]}),e.jsxs("button",{onClick:()=>E(C),className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg px-4 py-2 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(js,{className:"w-4 h-4"}),"Reject"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 text-center flex items-center justify-center gap-1",children:[e.jsx(jn,{className:"w-3 h-3"}),"Click to add comment/reason before submitting"]})]}),C.adminReviewNote&&e.jsx("div",{className:`mt-3 p-4 rounded-lg border-l-4 ${C.adminStatus==="Approved"?"bg-green-50 border-green-400":"bg-red-50 border-red-400"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(jn,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-gray-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 uppercase",children:C.adminStatus==="Approved"?" Admin Comment":" Rejection Reason"}),e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:C.adminReviewNote}),C.adminReviewedBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["by ",C.adminReviewedBy.name," on ",new Date(C.adminReviewedAt).toLocaleDateString()]})]})]})}),C.adminStatus==="Approved"&&e.jsx("div",{className:"mt-3 p-3 rounded-lg bg-blue-50 border border-blue-200",children:e.jsxs("p",{className:"text-xs font-medium text-blue-800",children:[" Approved - Sent to Accountant for payment ",C.paymentStatus==="Paid"?"(Already Paid)":"(Pending Payment)"]})})]},C._id))})]})]})]}),p&&x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${N==="approve"?"bg-green-100":N==="request_details"?"bg-blue-100":"bg-red-100"}`,children:N==="approve"?e.jsx(it,{className:"w-6 h-6 text-green-600"}):N==="request_details"?e.jsx(tl,{className:"w-6 h-6 text-blue-600"}):e.jsx(js,{className:"w-6 h-6 text-red-600"})}),e.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:[N==="approve"?"Approve":N==="request_details"?"Request More Details":"Reject"," Application"]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Employee:"}),e.jsx("p",{className:"font-semibold text-gray-800",children:x.employee.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:x.employee.role})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(jn,{className:"w-4 h-4 text-blue-600"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:N==="approve"?"Comment (Optional)":N==="request_details"?"What details do you need? *":"Reason for Rejection *"})]}),e.jsx("textarea",{rows:"4",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none resize-none text-sm",value:k,onChange:C=>g(C.target.value),placeholder:N==="approve"?"Add any comments about this application...":N==="request_details"?"Please specify what additional information you need...":"Please provide a reason for rejection...",required:N!=="approve"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N==="approve"?"Your comment will be sent to the applicant via notification":N==="request_details"?"The applicant will be asked to provide these details. Application will remain pending.":"The applicant will receive this reason in a notification"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{b(!1),g("")},className:"px-5 py-2.5 rounded-lg border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:N==="request_details"?F:t==="leave"?R:_,disabled:h||N!=="approve"&&!k.trim(),className:`px-5 py-2.5 rounded-lg text-white font-semibold hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed ${N==="approve"?"bg-gradient-to-r from-green-500 to-green-600":N==="request_details"?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-red-500 to-red-600"}`,children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e.jsx(e.Fragment,{children:N==="approve"?e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"w-4 h-4"}),"Approve & Notify"]}):N==="request_details"?e.jsxs(e.Fragment,{children:[e.jsx(tl,{className:"w-4 h-4"}),"Send Details Request"]}):e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"w-4 h-4"}),"Reject & Notify"]})})})]})]})})]})}function Mw(){const[t,s]=d.useState("Pending"),[n,r]=d.useState([]),[a,l]=d.useState(null),[o,i]=d.useState(!1),[c,u]=d.useState(""),[x,m]=d.useState(!1),[p,b]=d.useState(null),[k,g]=d.useState(null);d.useEffect(()=>{N()},[t]);const N=async()=>{try{const y=await B.getAccountantTADAApplications(t==="All"?"":t);r(y.applications||[])}catch(y){g(y.message)}},v=async()=>{m(!0),g(null),b(null);try{await B.payTADAApplication(a._id,c),b(`Payment processed for ${a.employee.name} - ${Pe(a.amount)}`),i(!1),u(""),N()}catch(y){g(y.message)}finally{m(!1)}},h=n.filter(y=>y.paymentStatus==="Pending").reduce((y,w)=>y+w.amount,0),j=n.filter(y=>y.paymentStatus==="Paid").reduce((y,w)=>y+w.amount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"TA/DA Payments"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Process approved travel allowance and dearness allowance payments"})]}),p&&e.jsxs("div",{className:"p-4 bg-green-50 border-l-4 border-green-500 rounded-lg flex items-start gap-3",children:[e.jsx(it,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-green-800 font-medium",children:p})]}),k&&e.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsx("p",{className:"text-red-800 font-medium",children:k})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl p-6 shadow-lg text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/80 mb-1",children:"Pending Payments"}),e.jsx("p",{className:"text-3xl font-bold",children:Pe(h)})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Bt,{className:"w-8 h-8"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-teal-600 rounded-xl p-6 shadow-lg text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/80 mb-1",children:"Paid Total"}),e.jsx("p",{className:"text-3xl font-bold",children:Pe(j)})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(it,{className:"w-8 h-8"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Payment Status:"}),e.jsxs("select",{value:t,onChange:y=>s(y.target.value),className:"border-2 border-gray-200 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Pending"}),e.jsx("option",{children:"Paid"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",n.length," applications)"]})]})}),e.jsx("div",{className:"p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(He,{className:"w-16 h-16 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No TA/DA applications for payment"})]}):e.jsx("div",{className:"space-y-4",children:n.map(y=>{var w,S;return e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-lg p-5 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg",children:y.employee.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800 text-lg",children:y.employee.name}),e.jsx("p",{className:"text-sm text-gray-500",children:y.employee.role})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[y.paymentStatus==="Pending"?e.jsxs("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(Bt,{className:"w-4 h-4"}),"Pending Payment"]}):e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(it,{className:"w-4 h-4"}),"Paid"]}),e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:y.applicationType})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3"}),"Travel Date"]}),e.jsx("p",{className:"font-medium text-gray-800",children:new Date(y.travelDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(Jy,{className:"w-3 h-3"}),"Destination"]}),e.jsx("p",{className:"font-medium text-gray-800",children:y.destination})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(He,{className:"w-3 h-3"}),"Amount"]}),e.jsx("p",{className:"font-bold text-gray-800 text-xl",children:Pe(y.amount)})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(St,{className:"w-3 h-3"}),"Purpose"]}),e.jsx("p",{className:"text-sm text-gray-700",children:y.purpose})]}),y.description&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700",children:y.description})]}),y.adminReviewNote&&e.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Admin Approval Note"}),e.jsx("p",{className:"text-sm text-gray-700",children:y.adminReviewNote}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Approved by ",(w=y.adminReviewedBy)==null?void 0:w.name," on ",new Date(y.adminReviewedAt).toLocaleDateString()]})]}),y.paymentStatus==="Pending"?e.jsxs("button",{onClick:()=>{l(y),i(!0)},className:"w-full bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-lg px-6 py-3 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(He,{className:"w-5 h-5"}),"Process Payment - ",Pe(y.amount)]}):e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Payment Confirmation"}),y.paymentNote&&e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:y.paymentNote}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Paid by ",(S=y.paidBy)==null?void 0:S.name," on ",new Date(y.paidAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]},y._id)})})})]}),o&&a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(He,{className:"w-6 h-6 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Process Payment"})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Employee:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:a.employee.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Type:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:a.applicationType})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Amount:"}),e.jsx("span",{className:"font-bold text-gray-800 text-xl",children:Pe(a.amount)})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Note (Optional)"}),e.jsx("textarea",{rows:"3",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-green-500 focus:outline-none resize-none",value:c,onChange:y=>u(y.target.value),placeholder:"Add payment confirmation details or transaction reference..."})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{i(!1),u("")},className:"px-5 py-2.5 rounded-lg border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:v,disabled:x,className:"px-5 py-2.5 rounded-lg bg-gradient-to-r from-green-500 to-teal-600 text-white font-semibold hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"w-4 h-4"}),"Confirm Payment"]})})]})]})})]})}function Lw(){const t=$n(),{user:s}=fe(),[n,r]=d.useState([]),[a,l]=d.useState([]),[o,i]=d.useState([]),[c,u]=d.useState(0),[x,m]=d.useState(!0),[p,b]=d.useState("all"),[k,g]=d.useState("all"),[N,v]=d.useState(null),[h,j]=d.useState(null),[y,w]=d.useState(!1),[S,A]=d.useState(null);d.useEffect(()=>{s&&D()},[s]);const D=async()=>{try{m(!0);const M=await B.getNotifications(void 0,100);r(M.notifications||[]),u(M.unreadCount||0);try{const $=((await B.listMyTasks()).tasks||[]).filter(P=>{if(P.status==="Completed")return!1;const W=new Date;return new Date(P.dueDate)<W});l($)}catch(C){console.log("Could not load urgent tasks:",C.message)}if(s&&["Admission","Admin","SuperAdmin"].includes(s.role))try{const C=await B.getAdmissionFollowUpNotifications();console.log("Follow-up data received:",C);const $=new Date;$.setHours(0,0,0,0);const P=C.notifications||C.leads||[];console.log("Processing follow-up leads:",P.length);const W=P.map(O=>{if(!O.nextFollowUpDate)return{...O,isOverdue:!1};const U=new Date(O.nextFollowUpDate);U.setHours(0,0,0,0);const q=U<$;return{...O,isOverdue:q}});i(W),console.log("Set follow-up notifications:",W.length)}catch(C){console.error("Could not load follow-up notifications:",C),console.log("Could not load follow-up notifications:",C.message)}}catch(M){j(M.message)}finally{m(!1)}},T=async M=>{try{M.isRead||(await B.markNotificationRead(M._id),u(C=>Math.max(0,C-1)),r(C=>C.map($=>$._id===M._id?{...$,isRead:!0}:$))),M.type==="LEAVE_HANDOVER_REQUEST"?(sessionStorage.setItem("openHandoverRequestId",M.relatedId),sessionStorage.setItem("handoverNotificationId",M._id),t("/my-applications")):M.link&&t(M.link)}catch(C){console.error("Failed to handle notification:",C)}},R=async()=>{try{await B.markAllNotificationsRead(),v("All notifications marked as read "),r(M=>M.map(C=>({...C,isRead:!0}))),u(0),setTimeout(()=>v(null),3e3)}catch(M){j(M.message)}},_=async(M,C)=>{if(C.stopPropagation(),!!confirm("Delete this notification?"))try{await B.deleteNotification(M),r($=>$.filter(P=>P._id!==M)),v("Notification deleted"),setTimeout(()=>v(null),3e3)}catch($){j($.message)}},I=async M=>{try{j(null);const C=await B.getLeadHistory(M._id),$=C.lead||C;A($),w(!0)}catch(C){console.error("Failed to load lead details:",C),j("Failed to load lead details: "+C.message)}},E=n.filter(M=>!(p==="unread"&&M.isRead||p==="read"&&!M.isRead||k==="leave"&&!M.type.startsWith("LEAVE_")||k==="tada"&&!M.type.startsWith("TADA_")||k==="handover"&&!M.type.includes("HANDOVER")||k==="task"&&!M.type.startsWith("TASK_")||k==="urgent"||k==="followup")),V=M=>M.startsWith("LEAVE_")?e.jsx(ge,{className:"w-5 h-5 text-blue-600"}):M.startsWith("TADA_")?e.jsx(Dt,{className:"w-5 h-5 text-orange-600"}):M.includes("HANDOVER")?e.jsx(Me,{className:"w-5 h-5 text-purple-600"}):M.startsWith("TASK_")?e.jsx(it,{className:"w-5 h-5 text-green-600"}):e.jsx(Xt,{className:"w-5 h-5 text-gray-600"}),F=M=>M.startsWith("LEAVE_")?"border-blue-200 bg-blue-50":M.startsWith("TADA_")?"border-orange-200 bg-orange-50":M.includes("HANDOVER")?"border-purple-200 bg-purple-50":M.startsWith("TASK_")?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50";return e.jsxs("div",{className:"p-4 md:p-6 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-navy flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg",children:e.jsx(Xt,{className:"w-6 h-6 text-white"})}),"All Notifications"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:c>0?`${c} unread notification${c>1?"s":""}`:"All caught up!"})]}),c>0&&e.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition",children:[e.jsx(up,{size:18}),"Mark All Read"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(To,{size:16,className:"text-gray-500"}),e.jsxs("select",{value:p,onChange:M=>b(M.target.value),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:outline-none text-sm",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"unread",children:"Unread"}),e.jsx("option",{value:"read",children:"Read"})]})]}),e.jsxs("select",{value:k,onChange:M=>g(M.target.value),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:outline-none text-sm",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"urgent",children:"Urgent Tasks"}),e.jsx("option",{value:"followup",children:"Follow-up Due"}),e.jsx("option",{value:"leave",children:"Leave Applications"}),e.jsx("option",{value:"tada",children:"TA/DA Applications"}),e.jsx("option",{value:"handover",children:"Handover Requests"}),e.jsx("option",{value:"task",children:"Tasks"})]})]})]}),N&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg flex items-center gap-2",children:[e.jsx(it,{size:18}),N]}),h&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg flex items-center gap-2",children:[e.jsx(js,{size:18}),h]}),x?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Loading notifications..."})]}):e.jsxs("div",{className:"space-y-6",children:[k==="all"||k==="urgent"?a.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(ge,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("h2",{className:"text-lg font-bold text-navy",children:["Urgent Tasks (",a.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:a.map(M=>e.jsx("div",{onClick:()=>t("/tasks"),className:"p-4 rounded-xl border-2 border-red-200 bg-red-50 cursor-pointer hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white",children:e.jsx(Dt,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-semibold text-navy",children:M.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:M.description||"No description"})]}),e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 font-medium",children:"Overdue"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500",children:[e.jsx(ge,{size:12}),"Due: ",new Date(M.dueDate).toLocaleDateString("en-GB")]})]})]})},M._id))})]}):null,k==="all"||k==="followup"?o.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:e.jsx(Xt,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("h2",{className:"text-lg font-bold text-navy",children:["Follow-up Due (",o.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:o.map(M=>{const C=M.isOverdue;return e.jsx("div",{onClick:()=>I(M),className:`p-4 rounded-xl border-2 cursor-pointer hover:shadow-md transition-all ${C?"border-red-200 bg-red-50":"border-purple-200 bg-purple-50"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white",children:e.jsx(Me,{className:`w-5 h-5 ${C?"text-red-600":"text-purple-600"}`})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-base font-semibold text-navy",children:[M.leadId,"  ",M.name]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[M.interestedCourse||"No course","  ",M.status]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[M.phone," ",M.email&&` ${M.email}`]}),M.assignedTo&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" Assigned to: ",M.assignedTo.name]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded font-medium ${C?"bg-red-100 text-red-700":"bg-purple-100 text-purple-700"}`,children:C?"OVERDUE":"DUE TODAY"}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-gray-500",children:[e.jsx(ge,{size:12}),new Date(M.nextFollowUpDate).toLocaleDateString("en-GB")]})]})]})})]})},M._id)})})]}):null,E.length===0&&a.length===0&&o.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx(Xt,{size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No notifications found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Try adjusting your filters"})]}):null,E.length>0&&e.jsxs("div",{children:[(a.length>0||o.length>0)&&k==="all"&&e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg",children:e.jsx(Xt,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("h2",{className:"text-lg font-bold text-navy",children:["System Notifications (",E.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:E.map(M=>{const C=M.type==="LEAVE_HANDOVER_REQUEST";return e.jsx("div",{onClick:()=>T(M),className:`p-4 rounded-xl border-2 cursor-pointer transition-all hover:shadow-md ${M.isRead?"bg-white border-gray-200":F(M.type)+" border-l-4"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${M.isRead?"bg-gray-100":"bg-white"}`,children:V(M.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:`text-base ${M.isRead?"font-medium text-gray-700":"font-semibold text-navy"}`,children:[M.title,C&&!M.isRead&&e.jsx("span",{className:"ml-2 text-xs bg-purple-600 text-white px-2 py-0.5 rounded-full",children:"Action Required"}),!M.isRead&&!C&&e.jsx("span",{className:"ml-2 inline-block w-2 h-2 bg-indigo-500 rounded-full"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:M.message}),M.sender&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("img",{src:M.sender.avatar,alt:M.sender.name,className:"w-5 h-5 rounded-full"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["from ",M.sender.name]})]})]}),e.jsx("button",{onClick:$=>_(M._id,$),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete notification",children:e.jsx(cn,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-400",children:[e.jsx(Bt,{size:12}),new Date(M.createdAt).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})},M._id)})})]})]}),y&&S&&e.jsx(pp,{lead:S,onClose:()=>{w(!1),A(null)},onUpdate:async()=>{try{const M=await B.getLeadHistory(S._id);A(M)}catch(M){console.error("Failed to reload lead:",M)}}})]})}function Pw(){const{user:t}=fe(),[s,n]=d.useState([]),[r,a]=d.useState([]),[l,o]=d.useState(null),[i,c]=d.useState([]),[u,x]=d.useState(""),[m,p]=d.useState(""),[b,k]=d.useState(!0),[g,N]=d.useState(!1),v=d.useRef(null),h=d.useRef(null),j=()=>{var E;(E=v.current)==null||E.scrollIntoView({behavior:"smooth"})};d.useEffect(()=>{j()},[i]),d.useEffect(()=>{y(),w();const E=setInterval(y,5e3);return()=>clearInterval(E)},[]),d.useEffect(()=>{if(l){S(l._id);const E=setInterval(()=>S(l._id),3e3);return()=>clearInterval(E)}},[l]);const y=async()=>{try{const E=await B.getConversations();n(E.conversations||[])}catch(E){console.error("Error loading conversations:",E)}finally{k(!1)}},w=async()=>{try{const V=((await B.listUsers()).users||[]).filter(F=>F._id!==t.id);a(V)}catch(E){console.error("Error loading users:",E)}},S=async E=>{try{const V=await B.getMessages(E);c(V.messages||[]),await B.markMessagesAsRead(E),y()}catch(V){console.error("Error loading messages:",V)}},A=async E=>{if(E.preventDefault(),!(!u.trim()||!l))try{N(!0),await B.sendMessage({recipient:l._id,content:u.trim()}),x(""),S(l._id),y()}catch(V){console.error("Error sending message:",V),alert("Failed to send message")}finally{N(!1)}},D=E=>{o(E)},R=(()=>{const E=new Map;s.forEach(M=>{M.user&&M.user._id&&!E.has(M.user._id)&&E.set(M.user._id,{...M.user,hasConversation:!0,lastMessage:M.lastMessage,unreadCount:M.unreadCount||0})}),r.forEach(M=>{M&&M._id&&!E.has(M._id)&&E.set(M._id,{...M,hasConversation:!1,lastMessage:null,unreadCount:0})});const V=[],F=[];return E.forEach(M=>{M.hasConversation?V.push(M):F.push(M)}),F.sort((M,C)=>(M.name||"").localeCompare(C.name||"")),[...V,...F]})().filter(E=>{var V,F,M;return((V=E==null?void 0:E.name)==null?void 0:V.toLowerCase().includes(m.toLowerCase()))||((F=E==null?void 0:E.email)==null?void 0:F.toLowerCase().includes(m.toLowerCase()))||((M=E==null?void 0:E.designation)==null?void 0:M.toLowerCase().includes(m.toLowerCase()))}),_=E=>{if(!E)return"";const V=new Date(E),M=new Date-V,C=Math.floor(M/6e4),$=Math.floor(M/36e5),P=Math.floor(M/864e5);return C<1?"Just now":C<60?`${C}m ago`:$<24?`${$}h ago`:P<7?`${P}d ago`:V.toLocaleDateString()},I=E=>E?new Date(E).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return b?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ft,{size:48,className:"mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Loading messages..."})]})}):e.jsxs("div",{className:"h-[calc(100vh-64px)] flex bg-white rounded-xl shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"w-80 border-r flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-bold text-navy mb-3",children:"Messages"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dn,{size:18,className:"absolute left-3 top-2.5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search conversations...",value:m,onChange:E=>p(E.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:R.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(ft,{size:48,className:"mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No colleagues found"}),e.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search"})]}):R.map(E=>e.jsx("div",{onClick:()=>D(E),className:`p-4 border-b cursor-pointer hover:bg-gray-50 transition ${(l==null?void 0:l._id)===E._id?"bg-blue-50 border-l-4 border-l-blue-500":""} ${E.hasConversation?"bg-gradient-to-r from-blue-50/30 to-transparent":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:E.avatar,alt:E.name,className:"w-12 h-12 rounded-full object-cover"}),E.hasConversation&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full border-2 border-white"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-navy truncate",children:E.name}),E.lastMessage&&e.jsx("span",{className:"text-xs text-gray-500",children:_(E.lastMessage.createdAt)})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:E.designation||E.role}),E.lastMessage&&e.jsxs("p",{className:"text-sm text-gray-500 truncate mt-1",children:[E.lastMessage.sender.toString()===t.id?"You: ":"",E.lastMessage.content]}),E.unreadCount>0&&e.jsxs("span",{className:"inline-block mt-1 px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:[E.unreadCount," new"]})]})]})},E._id))})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:l.avatar,alt:l.name,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-navy",children:l.name}),e.jsx("p",{className:"text-sm text-gray-500",children:l.designation||l.role})]})]}),e.jsx("button",{onClick:()=>o(null),className:"p-2 hover:bg-gray-100 rounded-lg transition md:hidden",children:e.jsx(Eo,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:i.length===0?e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ft,{size:48,className:"mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No messages yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Send a message to start the conversation"})]})}):e.jsxs("div",{className:"space-y-4",children:[i.map(E=>{var C,$,P,W,O;const V=(($=(C=E.sender)==null?void 0:C._id)==null?void 0:$.toString())||((P=E.sender)==null?void 0:P.toString()),F=((W=t==null?void 0:t.id)==null?void 0:W.toString())||((O=t==null?void 0:t._id)==null?void 0:O.toString()),M=V===F;return i.length>0&&E===i[0]&&console.log("Message alignment debug:",{senderId:V,currentUserId:F,isOwn:M}),e.jsx("div",{className:`flex ${M?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex gap-2 max-w-[70%] ${M?"flex-row-reverse":""}`,children:[!M&&e.jsx("img",{src:E.sender.avatar,alt:E.sender.name,className:"w-8 h-8 rounded-full object-cover flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:`p-3 rounded-lg ${M?"bg-blue-500 text-white":"bg-white text-gray-800 border"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:E.content})}),e.jsxs("div",{className:`flex items-center gap-2 mt-1 text-xs text-gray-500 ${M?"justify-end":""}`,children:[e.jsx("span",{children:I(E.createdAt)}),M&&e.jsx("span",{children:E.isRead?e.jsx(up,{size:14,className:"text-blue-400"}):e.jsx(Hy,{size:14,className:"text-gray-400"})})]})]})]})},E._id)}),e.jsx("div",{ref:v})]})}),e.jsx("form",{onSubmit:A,className:"p-4 border-t bg-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:h,type:"text",value:u,onChange:E=>x(E.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:g}),e.jsx("button",{type:"submit",disabled:!u.trim()||g,className:"p-3 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(eo,{size:20})})]})})]}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ft,{size:64,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Select a conversation"}),e.jsx("p",{children:"Choose a colleague from the list to start messaging"})]})})})]})}function Iw(){const{user:t}=fe(),[s,n]=d.useState([]),[r,a]=d.useState(!0),[l,o]=d.useState("all"),[i,c]=d.useState(""),[u,x]=d.useState(""),[m,p]=d.useState("all");d.useEffect(()=>{b()},[l,i,u,m]);const b=async()=>{try{a(!0);const w=(await B.listMyTasks()).tasks||[];let S=k(w);m==="completed"?S=S.filter(A=>A.status==="Completed"):m==="pending"&&(S=S.filter(A=>A.status!=="Completed")),S.sort((A,D)=>{const T=new Date(A.dueDate||A.createdAt);return new Date(D.dueDate||D.createdAt)-T}),n(S)}catch(y){console.error("Failed to load tasks:",y)}finally{a(!1)}},k=y=>{const w=new Date;switch(l){case"daily":{const S=new Date(w.getFullYear(),w.getMonth(),w.getDate());return y.filter(A=>new Date(A.dueDate||A.createdAt)>=S)}case"weekly":{const S=new Date(w);return S.setDate(w.getDate()-7),y.filter(A=>new Date(A.dueDate||A.createdAt)>=S)}case"monthly":{const S=new Date(w);return S.setMonth(w.getMonth()-1),y.filter(A=>new Date(A.dueDate||A.createdAt)>=S)}case"custom":{if(!i||!u)return y;const S=new Date(i),A=new Date(u);return A.setHours(23,59,59,999),y.filter(D=>{const T=new Date(D.dueDate||D.createdAt);return T>=S&&T<=A})}default:return y}},g={total:s.length,completed:s.filter(y=>y.status==="Completed").length,pending:s.filter(y=>y.status!=="Completed").length,overdue:s.filter(y=>y.status==="Completed"||!y.dueDate?!1:new Date(y.dueDate)<new Date).length},N=g.total>0?Math.round(g.completed/g.total*100):0,v=y=>{switch(y){case"Completed":return"bg-green-100 text-green-700";case"In Progress":return"bg-blue-100 text-blue-700";case"On Hold":return"bg-yellow-100 text-yellow-700";case"Blocked":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},h=y=>{switch(y){case"Critical":return"bg-red-100 text-red-700";case"High":return"bg-orange-100 text-orange-700";case"Medium":return"bg-yellow-100 text-yellow-700";case"Low":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},j=()=>{const y=["Title","Status","Priority","Due Date","Assigned By","Tags"],w=s.map(R=>{var _,I;return[R.title,R.status,R.priority,R.dueDate?new Date(R.dueDate).toLocaleDateString():"N/A",((_=R.assignedBy)==null?void 0:_.name)||"N/A",((I=R.tags)==null?void 0:I.join(", "))||"N/A"]}),S=[y.join(","),...w.map(R=>R.map(_=>`"${_}"`).join(","))].join(`
`),A=new Blob([S],{type:"text/csv"}),D=window.URL.createObjectURL(A),T=document.createElement("a");T.href=D,T.download=`task-report-${new Date().toISOString().split("T")[0]}.csv`,T.click(),window.URL.revokeObjectURL(D)};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Task Report"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View and analyze your task performance"})]}),e.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-navy text-white rounded-lg hover:bg-navy/90 transition",children:[e.jsx(Ht,{size:18}),"Export CSV"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:g.total})]}),e.jsx(Zl,{size:32,className:"text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:g.completed})]}),e.jsx(Dc,{size:32,className:"text-green-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-yellow-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:g.pending})]}),e.jsx(Bt,{size:32,className:"text-yellow-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:g.overdue})]}),e.jsx(Dt,{size:32,className:"text-red-500"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-navy flex items-center gap-2",children:[e.jsx(_t,{size:20}),"Completion Rate"]}),e.jsxs("span",{className:"text-2xl font-bold text-navy",children:[N,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-4 rounded-full transition-all duration-500",style:{width:`${N}%`}})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-navy mb-4 flex items-center gap-2",children:[e.jsx(To,{size:20}),"Filters"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Period"}),e.jsxs("select",{value:l,onChange:y=>o(y.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"daily",children:"Today"}),e.jsx("option",{value:"weekly",children:"Last 7 Days"}),e.jsx("option",{value:"monthly",children:"Last 30 Days"}),e.jsx("option",{value:"custom",children:"Custom Range"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:m,onChange:y=>p(y.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed Only"}),e.jsx("option",{value:"pending",children:"Pending Only"})]})]}),l==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:i,onChange:y=>c(y.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:u,onChange:y=>x(y.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-semibold text-navy",children:["Task List (",s.length," ",m==="completed"?"Completed":m==="pending"?"Pending":""," Tasks)"]})}),r?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Bt,{size:48,className:"mx-auto mb-3 animate-spin"}),e.jsx("p",{children:"Loading tasks..."})]}):s.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Zl,{size:48,className:"mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No tasks found for the selected filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(y=>{var w,S;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-navy",children:y.title}),y.description&&e.jsx("div",{className:"text-sm text-gray-500 mt-1 line-clamp-1",children:y.description})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v(y.status)}`,children:y.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${h(y.priority)}`,children:y.priority})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:y.dueDate?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ge,{size:14}),new Date(y.dueDate).toLocaleDateString()]}):e.jsx("span",{className:"text-gray-400",children:"No due date"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:((w=y.assignedBy)==null?void 0:w.name)||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(S=y.tags)==null?void 0:S.map((A,D)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:A},D))})})]},y._id)})})]})})]})]})}function Rw(){var E;const{user:t}=fe(),[s,n]=d.useState([]),[r,a]=d.useState([]),[l,o]=d.useState(!0),[i,c]=d.useState("all"),[u,x]=d.useState(""),[m,p]=d.useState(""),[b,k]=d.useState("all"),[g,N]=d.useState("all"),[v,h]=d.useState("");d.useEffect(()=>{j()},[]),d.useEffect(()=>{y()},[i,u,m,b,g]);const j=async()=>{try{const V=await B.listUsers();a(V.users||[])}catch(V){console.error("Failed to load users:",V)}},y=async()=>{try{o(!0);let F=(await B.listAllTasks()).tasks||[];g!=="all"&&(F=F.filter(C=>C.assignedTo&&C.assignedTo.includes(g)));let M=w(F);b==="completed"?M=M.filter(C=>C.status==="Completed"):b==="pending"&&(M=M.filter(C=>C.status!=="Completed")),M.sort((C,$)=>{const P=new Date(C.dueDate||C.createdAt);return new Date($.dueDate||$.createdAt)-P}),n(M)}catch(V){console.error("Failed to load tasks:",V)}finally{o(!1)}},w=V=>{const F=new Date;switch(i){case"daily":{const M=new Date(F.getFullYear(),F.getMonth(),F.getDate());return V.filter(C=>new Date(C.dueDate||C.createdAt)>=M)}case"weekly":{const M=new Date(F);return M.setDate(F.getDate()-7),V.filter(C=>new Date(C.dueDate||C.createdAt)>=M)}case"monthly":{const M=new Date(F);return M.setMonth(F.getMonth()-1),V.filter(C=>new Date(C.dueDate||C.createdAt)>=M)}case"custom":{if(!u||!m)return V;const M=new Date(u),C=new Date(m);return C.setHours(23,59,59,999),V.filter($=>{const P=new Date($.dueDate||$.createdAt);return P>=M&&P<=C})}default:return V}},S={total:s.length,completed:s.filter(V=>V.status==="Completed").length,pending:s.filter(V=>V.status!=="Completed").length,overdue:s.filter(V=>V.status==="Completed"||!V.dueDate?!1:new Date(V.dueDate)<new Date).length},A=S.total>0?Math.round(S.completed/S.total*100):0,D=V=>{switch(V){case"Completed":return"bg-green-100 text-green-700";case"In Progress":return"bg-blue-100 text-blue-700";case"On Hold":return"bg-yellow-100 text-yellow-700";case"Blocked":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},T=V=>{switch(V){case"Critical":return"bg-red-100 text-red-700";case"High":return"bg-orange-100 text-orange-700";case"Medium":return"bg-yellow-100 text-yellow-700";case"Low":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},R=()=>{const V=g!=="all"?r.find(U=>U._id===g):null,F=V?`task-report-${V.name.replace(/\s+/g,"-")}-${new Date().toISOString().split("T")[0]}.csv`:`task-report-all-${new Date().toISOString().split("T")[0]}.csv`,M=["Title","Status","Priority","Due Date","Assigned To","Assigned By","Tags"],C=s.map(U=>{var q,ee,z;return[U.title,U.status,U.priority,U.dueDate?new Date(U.dueDate).toLocaleDateString():"N/A",((q=U.assignedTo)==null?void 0:q.map(te=>{const K=r.find(G=>G._id===te);return(K==null?void 0:K.name)||"Unknown"}).join(", "))||"N/A",((ee=U.assignedBy)==null?void 0:ee.name)||"N/A",((z=U.tags)==null?void 0:z.join(", "))||"N/A"]}),$=[M.join(","),...C.map(U=>U.map(q=>`"${q}"`).join(","))].join(`
`),P=new Blob([$],{type:"text/csv"}),W=window.URL.createObjectURL(P),O=document.createElement("a");O.href=W,O.download=F,O.click(),window.URL.revokeObjectURL(W)},_=r.filter(V=>{var F,M,C;return((F=V.name)==null?void 0:F.toLowerCase().includes(v.toLowerCase()))||((M=V.email)==null?void 0:M.toLowerCase().includes(v.toLowerCase()))||((C=V.designation)==null?void 0:C.toLowerCase().includes(v.toLowerCase()))}),I=g==="all"?"All Employees":((E=r.find(V=>V._id===g))==null?void 0:E.name)||"Unknown";return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Admin Task Report"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View and analyze employee task performance"})]}),e.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-navy text-white rounded-lg hover:bg-navy/90 transition",children:[e.jsx(Ht,{size:18}),"Export CSV"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-navy mb-4 flex items-center gap-2",children:[e.jsx(Me,{size:20}),"Select Employee"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dn,{size:18,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or designation...",value:v,onChange:V=>h(V.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Employee (",I,")"]}),e.jsxs("select",{value:g,onChange:V=>N(V.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Employees"}),_.map(V=>e.jsxs("option",{value:V._id,children:[V.name," - ",V.designation||V.role]},V._id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:S.total})]}),e.jsx(Zl,{size:32,className:"text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:S.completed})]}),e.jsx(Dc,{size:32,className:"text-green-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-yellow-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:S.pending})]}),e.jsx(Bt,{size:32,className:"text-yellow-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:S.overdue})]}),e.jsx(Dt,{size:32,className:"text-red-500"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-navy flex items-center gap-2",children:[e.jsx(_t,{size:20}),"Completion Rate - ",I]}),e.jsxs("span",{className:"text-2xl font-bold text-navy",children:[A,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-4 rounded-full transition-all duration-500",style:{width:`${A}%`}})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-navy mb-4 flex items-center gap-2",children:[e.jsx(To,{size:20}),"Filters"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Period"}),e.jsxs("select",{value:i,onChange:V=>c(V.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"daily",children:"Today"}),e.jsx("option",{value:"weekly",children:"Last 7 Days"}),e.jsx("option",{value:"monthly",children:"Last 30 Days"}),e.jsx("option",{value:"custom",children:"Custom Range"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:b,onChange:V=>k(V.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed Only"}),e.jsx("option",{value:"pending",children:"Pending Only"})]})]}),i==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:u,onChange:V=>x(V.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:m,onChange:V=>p(V.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-semibold text-navy",children:["Task List (",s.length," ",b==="completed"?"Completed":b==="pending"?"Pending":""," Tasks)"]})}),l?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Bt,{size:48,className:"mx-auto mb-3 animate-spin"}),e.jsx("p",{children:"Loading tasks..."})]}):s.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Zl,{size:48,className:"mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No tasks found for the selected filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(V=>{var F,M,C;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-navy",children:V.title}),V.description&&e.jsx("div",{className:"text-sm text-gray-500 mt-1 line-clamp-1",children:V.description})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(F=V.assignedTo)==null?void 0:F.map($=>{const P=r.find(W=>W._id===$);return P?e.jsxs("div",{className:"flex items-center gap-1 text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded",children:[e.jsx("img",{src:P.avatar,alt:P.name,className:"w-4 h-4 rounded-full"}),P.name]},$):null})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D(V.status)}`,children:V.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${T(V.priority)}`,children:V.priority})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:V.dueDate?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ge,{size:14}),new Date(V.dueDate).toLocaleDateString()]}):e.jsx("span",{className:"text-gray-400",children:"No due date"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:((M=V.assignedBy)==null?void 0:M.name)||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(C=V.tags)==null?void 0:C.map(($,P)=>e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded",children:$},P))})})]},V._id)})})]})})]})]})}function $w(){var V;const[t,s]=d.useState("admission"),[n,r]=d.useState("student"),[a,l]=d.useState([]),[o,i]=d.useState([]),[c,u]=d.useState([]),[x,m]=d.useState(""),[p,b]=d.useState(""),[k,g]=d.useState(!1),[N,v]=d.useState(""),[h,j]=d.useState(""),[y,w]=d.useState({courseId:"",month:"",targetValue:"",assignedTo:"",note:""}),A=(()=>{const F=[],M=new Date,C=M.getFullYear(),$=M.getMonth();for(let P=0;P<12;P++){const W=C+Math.floor(($+P)/12),O=($+P)%12,U=`${W}-${String(O+1).padStart(2,"0")}`,ee=new Date(W,O,1).toLocaleDateString("en-US",{year:"numeric",month:"long"});F.push({value:U,label:ee})}return F})();d.useEffect(()=>{const F=new Date().toISOString().slice(0,7);m(F),w({...y,month:F})},[]),d.useEffect(()=>{(async()=>{try{const M=await B.listCourses();l((M==null?void 0:M.courses)||[])}catch(M){console.error("Failed to load courses:",M)}})()},[]),d.useEffect(()=>{(async()=>{try{const M=t==="admission"?"Admission":"Recruitment",C=await B.getTeamMembers(M);i((C==null?void 0:C.members)||[])}catch(M){console.error("Failed to load team members:",M)}})()},[t]),d.useEffect(()=>{x&&T()},[x,t,n,p]);const D=()=>t==="admission"?n==="student"?"AdmissionStudent":"AdmissionRevenue":n==="student"?"RecruitmentCandidate":"RecruitmentRevenue",T=async()=>{if(x){g(!0),v("");try{const F=D(),M=await B.getTargets(x,F,p||null);u((M==null?void 0:M.targets)||[])}catch(F){v("Failed to load targets: "+F.message)}finally{g(!1)}}},R=async F=>{F.preventDefault(),v(""),j("");const M=D();if(!y.month||!y.targetValue){v("Please fill all required fields");return}if(M==="AdmissionStudent"&&!y.courseId){v("Please select a course");return}try{const C={targetType:M,month:y.month,targetValue:parseInt(y.targetValue),...y.courseId&&{courseId:y.courseId},...y.assignedTo&&{assignedTo:y.assignedTo},...y.note&&{note:y.note}};await B.setTarget(C),j("Target set successfully!"),w({courseId:"",month:x,targetValue:"",assignedTo:"",note:""}),T()}catch(C){v("Failed to set target: "+C.message)}},_=async F=>{if(confirm("Delete this target?"))try{await B.deleteTarget(F),j("Target deleted successfully!"),T()}catch(M){v("Failed to delete target: "+M.message)}},I=()=>n==="student"?t==="admission"?"Students":"Candidates":"BDT",E=F=>n==="revenue"?`${F.toLocaleString()}`:F.toString();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg",children:e.jsx(Wt,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Targets"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Set and track performance targets for admission and recruitment teams"})]})]})}),N&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:N}),h&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:h}),e.jsxs("div",{className:"flex gap-2 border-b",children:[e.jsx("button",{onClick:()=>{s("admission"),r("student")},className:`px-6 py-3 font-medium transition-colors border-b-2 ${t==="admission"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{size:18}),"Admission Targets"]})}),e.jsx("button",{onClick:()=>{s("recruitment"),r("student")},className:`px-6 py-3 font-medium transition-colors border-b-2 ${t==="recruitment"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cp,{size:18}),"Recruitment Targets"]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r("student"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="student"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:t==="admission"?"Student Target":"Candidate Target"}),e.jsx("button",{onClick:()=>r("revenue"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="revenue"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{size:16}),"Revenue Target"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ss,{size:20}),"Set New Target"]}),e.jsxs("form",{onSubmit:R,className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[D()==="AdmissionStudent"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Course ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:y.courseId,onChange:F=>w({...y,courseId:F.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Course"}),a.map(F=>e.jsx("option",{value:F._id,children:F.name},F._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Month ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:y.month,onChange:F=>w({...y,month:F.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",required:!0,children:A.map(F=>e.jsx("option",{value:F.value,children:F.label},F.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Target (",I(),") ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0",value:y.targetValue,onChange:F=>w({...y,targetValue:F.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",placeholder:"Enter target",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Member (Optional)"}),e.jsxs("select",{value:y.assignedTo,onChange:F=>w({...y,assignedTo:F.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Team Target"}),o.map(F=>e.jsx("option",{value:F._id,children:F.name},F._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note (Optional)"}),e.jsx("input",{type:"text",value:y.note,onChange:F=>w({...y,note:F.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",placeholder:"Add note"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"Set Target"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(_t,{size:20}),"Targets & Achievement"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:p,onChange:F=>b(F.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"All Team Members"}),o.map(F=>e.jsx("option",{value:F._id,children:F.name},F._id))]}),e.jsx("select",{value:x,onChange:F=>{console.log("[Month Filter] Changing from",x,"to",F.target.value),m(F.target.value)},className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",children:A.map(F=>e.jsx("option",{value:F.value,children:F.label},F.value))})]})]}),(()=>{var $;const F=new Date().toISOString().slice(0,7),M=x>F,C=x===F;return console.log("[Banner] currentMonth:",F,"selectedMonth:",x,"isFuture:",M,"isCurrent:",C),M?e.jsxs("div",{className:"mb-4 bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-lg flex items-start gap-2",children:[e.jsx(ge,{size:18,className:"mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Future Month Selected"}),e.jsxs("p",{className:"text-sm",children:["You are viewing targets for ",($=A.find(P=>P.value===x))==null?void 0:$.label,". Achievement data will be calculated as the month progresses."]})]})]}):C?e.jsxs("div",{className:"mb-4 bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-lg flex items-start gap-2",children:[e.jsx(ge,{size:18,className:"mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Current Month"}),e.jsx("p",{className:"text-sm",children:"Achievement is calculated up to today. Final results will be available at month end."})]})]}):null})(),k?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading targets..."}):c.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No targets set for ",(V=A.find(F=>F.value===x))==null?void 0:V.label]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[D()==="AdmissionStudent"&&e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Course"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Assigned To"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Target"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Achieved"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Progress"}),c.some(F=>F.note)&&e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Note"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:c.map(F=>{var $;const M=F.percentage||0,C=M>=100?"green":M>=75?"blue":M>=50?"yellow":"red";return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[D()==="AdmissionStudent"&&e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:(($=F.course)==null?void 0:$.name)||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:F.assignedTo?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:F.assignedTo.name}),e.jsx("div",{className:"text-xs text-gray-500",children:F.assignedTo.role})]}):e.jsx("span",{className:"text-gray-500 italic",children:"Team Target"})}),e.jsx("td",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:E(F.targetValue)}),e.jsx("td",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:E(F.achieved)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"flex-1 max-w-xs bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full bg-${C}-500`,style:{width:`${Math.min(M,100)}%`}})}),e.jsxs("span",{className:`text-sm font-semibold text-${C}-600`,children:[M,"%"]})]})}),c.some(P=>P.note)&&e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:F.note||"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>_(F._id),className:"text-red-600 hover:text-red-800 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Target",children:e.jsx(cn,{size:16})})})]},F._id)})})]})})]})]})}function Ow(){var k;const{user:t}=fe(),[s,n]=d.useState([]),[r,a]=d.useState(""),[l,o]=d.useState(!1),[i,c]=d.useState(""),x=(()=>{const g=[],N=new Date,v=N.getFullYear(),h=N.getMonth();for(let j=0;j<12;j++){const y=v+Math.floor((h+j)/12),w=(h+j)%12,S=`${y}-${String(w+1).padStart(2,"0")}`,D=new Date(y,w,1).toLocaleDateString("en-US",{year:"numeric",month:"long"});g.push({value:S,label:D})}return g})();d.useEffect(()=>{const g=new Date().getFullYear(),N=new Date().getMonth()+1,v=`${g}-${String(N).padStart(2,"0")}`;a(v)},[]),d.useEffect(()=>{r&&t&&m()},[r,t]);const m=async()=>{if(!(!r||!t)){o(!0),c("");try{const g=await B.getTargets(r,"AdmissionStudent",t.id),N=await B.getTargets(r,"AdmissionRevenue",t.id),v=[...(g==null?void 0:g.targets)||[],...(N==null?void 0:N.targets)||[]];n(v)}catch(g){c("Failed to load targets: "+g.message)}finally{o(!1)}}},p=(g,N)=>N==="AdmissionRevenue"?`${g.toLocaleString()}`:g.toString(),b=g=>{switch(g){case"AdmissionStudent":return"Student Target";case"AdmissionRevenue":return"Revenue Target";default:return g}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg",children:e.jsx(Wt,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Targets"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View your assigned performance targets"})]})]})}),i&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(_t,{size:20}),"Targets & Achievement"]}),e.jsx("select",{value:r,onChange:g=>a(g.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:x.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]}),(()=>{var y;const g=new Date().getFullYear(),N=new Date().getMonth()+1,v=`${g}-${String(N).padStart(2,"0")}`,h=r>v,j=r===v;return h?e.jsxs("div",{className:"mb-4 bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-lg flex items-start gap-2",children:[e.jsx(ge,{size:18,className:"mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Future Month Selected"}),e.jsxs("p",{className:"text-sm",children:["You are viewing targets for ",(y=x.find(w=>w.value===r))==null?void 0:y.label,". Achievement data will be calculated as the month progresses."]})]})]}):j?e.jsxs("div",{className:"mb-4 bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-lg flex items-start gap-2",children:[e.jsx(ge,{size:18,className:"mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Current Month"}),e.jsx("p",{className:"text-sm",children:"Achievement is calculated up to today. Final results will be available at month end."})]})]}):null})(),l?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading targets..."}):s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Wt,{size:48,className:"mx-auto mb-3 opacity-30"}),e.jsxs("p",{className:"font-medium",children:["No targets assigned for ",(k=x.find(g=>g.value===r))==null?void 0:k.label]}),e.jsx("p",{className:"text-sm mt-1",children:"Your targets will appear here once they are set by your admin."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Target Type"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Course"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Target"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Achieved"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Progress"}),s.some(g=>g.note)&&e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Note"})]})}),e.jsx("tbody",{children:s.map(g=>{var h;const N=g.percentage||0,v=N>=100?"green":N>=75?"blue":N>=50?"yellow":"red";return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:b(g.targetType)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:((h=g.course)==null?void 0:h.name)||"All Courses"}),e.jsx("td",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:p(g.targetValue,g.targetType)}),e.jsx("td",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:p(g.achieved,g.targetType)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"flex-1 max-w-xs bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full bg-${v}-500`,style:{width:`${Math.min(N,100)}%`}})}),e.jsxs("span",{className:`text-sm font-semibold text-${v}-600 min-w-[45px] text-right`,children:[N,"%"]})]})}),s.some(j=>j.note)&&e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:g.note||"-"})]},g._id)})})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"About Your Targets"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Student Target:"})," Number of students you need to admit for specific courses"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Revenue Target:"})," Total admission fees you need to collect"]}),e.jsx("li",{children:" Progress is updated in real-time based on your actual admissions"}),e.jsx("li",{children:" Contact your admin if you have questions about your targets"})]})]})]})}function Fw(){var R,_;const{user:t}=fe(),[s,n]=d.useState([]),[r,a]=d.useState(!1),[l,o]=d.useState(!1),[i,c]=d.useState(null),[u,x]=d.useState(null),[m,p]=d.useState({batchName:"",category:"",targetedStudent:"",status:"Active"}),[b,k]=d.useState(null),[g,N]=d.useState(null),[v,h]=d.useState(!1),j=(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin",y=async()=>{try{h(!0);const{batches:I}=await B.listBatches();n(I||[]),k(null)}catch(I){k(I.message)}finally{h(!1)}};d.useEffect(()=>{y()},[]);const w=()=>{x(null),p({batchName:"",category:"",targetedStudent:"",status:"Active"}),a(!0)},S=I=>{x(I._id),p({batchName:I.batchName,category:I.category,targetedStudent:I.targetedStudent,status:I.status}),a(!0)},A=async I=>{I.preventDefault(),k(null),N(null);try{u?(await B.updateBatch(u,m),N("Batch updated successfully")):(await B.createBatch(m),N("Batch created successfully")),a(!1),y()}catch(E){k(E.message)}},D=async(I,E)=>{if(E){alert("Cannot delete batch with admitted students");return}if(confirm("Delete this batch?"))try{await B.deleteBatch(I),N("Batch deleted successfully"),y()}catch(V){k(V.message)}},T=async I=>{try{const{batch:E}=await B.getBatchReport(I._id);c(E),o(!0)}catch(E){k(E.message)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Batch Management"}),j&&e.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-gold text-navy rounded-xl font-semibold hover:bg-lightgold",children:[e.jsx(ss,{size:18}),"Add Batch"]})]}),g&&e.jsx("div",{className:"mb-3 p-3 bg-green-100 text-green-700 rounded-xl",children:g}),b&&e.jsx("div",{className:"mb-3 p-3 bg-red-100 text-red-600 rounded-xl",children:b}),v?e.jsx("div",{className:"text-center py-8 text-royal",children:"Loading batches..."}):e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Batch ID"}),e.jsx("th",{className:"text-left p-3",children:"Batch Name"}),e.jsx("th",{className:"text-left p-3",children:"Category"}),e.jsx("th",{className:"text-left p-3",children:"Targeted Students"}),e.jsx("th",{className:"text-left p-3",children:"Admitted Students"}),e.jsx("th",{className:"text-left p-3",children:"Progress"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsxs("tbody",{children:[s.map(I=>{var M;const E=((M=I.admittedStudents)==null?void 0:M.length)||0,V=I.targetedStudent||0,F=V>0?Math.round(E/V*100):0;return e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 font-mono text-xs",children:I.batchId}),e.jsx("td",{className:"p-3 font-semibold text-navy",children:I.batchName}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-medium",children:I.category})}),e.jsx("td",{className:"p-3 text-center",children:V}),e.jsx("td",{className:"p-3 text-center font-semibold text-blue-600",children:E}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${F>=100?"bg-green-500":F>=75?"bg-blue-500":F>=50?"bg-yellow-500":"bg-orange-500"}`,style:{width:`${Math.min(F,100)}%`}})}),e.jsxs("span",{className:"text-xs font-medium",children:[F,"%"]})]})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${I.status==="Active"?"bg-green-100 text-green-700":I.status==="Completed"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:I.status})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(I),className:"p-2 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100",title:"View Report",children:e.jsx(Do,{size:16})}),j&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>S(I),className:"p-2 rounded-lg border hover:bg-gray-100",title:"Edit",children:e.jsx(Zy,{size:16})}),e.jsx("button",{onClick:()=>D(I._id,E>0),className:"p-2 rounded-lg border hover:bg-red-50 text-red-600",title:"Delete",children:e.jsx(cn,{size:16})})]})]})})]},I._id)}),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-4 text-center text-royal/70",children:"No batches found"})})]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("form",{onSubmit:A,className:"bg-white rounded-2xl shadow-soft p-6 w-full max-w-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-navy mb-4",children:u?"Edit Batch":"Add New Batch"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-royal mb-1",children:"Batch Name *"}),e.jsx("input",{type:"text",required:!0,value:m.batchName,onChange:I=>p({...m,batchName:I.target.value}),className:"w-full border rounded-xl px-3 py-2",placeholder:"e.g., Graphics Design Batch 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-royal mb-1",children:"Category *"}),e.jsx("input",{type:"text",required:!0,value:m.category,onChange:I=>p({...m,category:I.target.value}),className:"w-full border rounded-xl px-3 py-2",placeholder:"e.g., Graphics Design"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-royal mb-1",children:"Targeted Students *"}),e.jsx("input",{type:"number",required:!0,min:"1",value:m.targetedStudent,onChange:I=>p({...m,targetedStudent:I.target.value}),className:"w-full border rounded-xl px-3 py-2",placeholder:"e.g., 25"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-royal mb-1",children:"Status"}),e.jsxs("select",{value:m.status,onChange:I=>p({...m,status:I.target.value}),className:"w-full border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 rounded-xl border hover:bg-gray-100",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-xl bg-gold text-navy font-semibold hover:bg-lightgold",children:u?"Update":"Create"})]})]})}),l&&i&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-soft p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy",children:["Batch Report: ",i.batchName]}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-blue-600 mb-1",children:"Batch ID"}),e.jsx("div",{className:"text-lg font-bold text-blue-800",children:i.batchId})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-green-600 mb-1",children:"Admitted / Target"}),e.jsxs("div",{className:"text-lg font-bold text-green-800",children:[((R=i.admittedStudents)==null?void 0:R.length)||0," / ",i.targetedStudent]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Category"}),e.jsx("div",{className:"text-lg font-bold text-purple-800",children:i.category})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-navy mb-3",children:"Admitted Students"}),((_=i.admittedStudents)==null?void 0:_.length)>0?e.jsx("div",{className:"bg-gray-50 rounded-xl overflow-hidden",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Lead ID"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Phone"}),e.jsx("th",{className:"text-left p-3",children:"Course"}),e.jsx("th",{className:"text-left p-3",children:"Admitted Date"})]})}),e.jsx("tbody",{children:i.admittedStudents.map((I,E)=>{var V,F,M,C;return e.jsxs("tr",{className:"border-t border-gray-300",children:[e.jsx("td",{className:"p-3 font-mono text-xs",children:((V=I.lead)==null?void 0:V.leadId)||"-"}),e.jsx("td",{className:"p-3 font-medium",children:((F=I.lead)==null?void 0:F.name)||"-"}),e.jsx("td",{className:"p-3",children:((M=I.lead)==null?void 0:M.phone)||"-"}),e.jsx("td",{className:"p-3",children:((C=I.lead)==null?void 0:C.interestedCourse)||"-"}),e.jsx("td",{className:"p-3",children:I.admittedAt?new Date(I.admittedAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"-"})]},E)})})]})}):e.jsx("div",{className:"text-center py-8 text-royal/70",children:"No students admitted yet"}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>o(!1),className:"px-6 py-2 rounded-xl bg-navy text-white font-semibold hover:bg-navy/90",children:"Close"})})]})})]})}function _w(){const{login:t}=fe(),s=$n(),[n,r]=d.useState(""),[a,l]=d.useState(""),[o,i]=d.useState(null),[c,u]=d.useState(!1),x=async m=>{m.preventDefault(),i(null),u(!0);try{await t(n,a),s("/")}catch(p){i((p==null?void 0:p.message)||"Login failed")}finally{u(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-royal/10 to-gold/10",children:e.jsxs("form",{onSubmit:x,className:"bg-white shadow-soft rounded-2xl p-6 w-full max-w-md",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"https://primeacademy.org/logo-full.png",alt:"Prime Academy",className:"w-56 object-contain"})}),e.jsx("h1",{className:"text-2xl font-bold text-navy mb-4",children:"Sign in"}),o&&e.jsx("div",{className:"mb-3 text-sm text-red-600",children:o}),e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Email"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2 mb-3",value:n,onChange:m=>r(m.target.value),placeholder:"you@domain.com"}),e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Password"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2 mb-4",type:"password",value:a,onChange:m=>l(m.target.value)}),e.jsx("button",{disabled:c,className:"w-full bg-gold text-navy rounded-xl py-2 font-semibold hover:bg-lightgold transition",children:c?"Signing in":"Sign In"})]})})}function zw(){return e.jsx("div",{className:"p-6",children:"Not Found"})}function Uw(){const[t,s]=d.useState(!1);return e.jsxs("div",{className:"min-h-screen flex bg-[#f7f9fc]",children:[e.jsx(rb,{isOpen:t,setIsOpen:s}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(nb,{onMenuClick:()=>s(!0)}),e.jsx("main",{className:"p-4 md:p-6 flex-1 overflow-auto",children:e.jsx(Ac,{})})]})]})}function Bw(){return e.jsxs(lp,{children:[e.jsx(ce,{element:e.jsx(Ry,{}),children:e.jsxs(ce,{element:e.jsx(Uw,{}),children:[e.jsx(ce,{path:"/",element:e.jsx(bb,{})}),e.jsx(ce,{path:"/profile",element:e.jsx(vb,{})}),e.jsx(ce,{path:"/my-tasks",element:e.jsx(kb,{})}),e.jsx(ce,{path:"/tasks-board",element:e.jsx(_N,{})}),e.jsx(ce,{path:"/messages",element:e.jsx(Pw,{})}),e.jsx(ce,{path:"/task-report",element:e.jsx(Iw,{})}),e.jsx(ce,{element:e.jsx(Pt,{roles:["Admin","Accountant","Admission","Recruitment","DigitalMarketing","MotionGraphics","Coordinator"]}),children:e.jsx(ce,{path:"/my-applications",element:e.jsx(Tw,{})})}),e.jsx(ce,{path:"/notifications",element:e.jsx(Lw,{})}),e.jsxs(ce,{element:e.jsx(Pt,{roles:["SuperAdmin","Admin"]}),children:[e.jsx(ce,{path:"/assign-tasks",element:e.jsx(jb,{})}),e.jsx(ce,{path:"/employees",element:e.jsx(zN,{})}),e.jsx(ce,{path:"/reports-view",element:e.jsx(VN,{})}),e.jsx(ce,{path:"/leads-center-view",element:e.jsx(qN,{})}),e.jsx(ce,{path:"/admin-task-report",element:e.jsx(Rw,{})}),e.jsx(ce,{path:"/admission-targets",element:e.jsx($w,{})}),e.jsx(ce,{path:"/batches",element:e.jsx(Fw,{})}),e.jsx(ce,{path:"/admin/approvals",element:e.jsx(Ew,{})})]}),e.jsx(ce,{element:e.jsx(Pt,{roles:["SuperAdmin","Admin","DigitalMarketing","Admission","Recruitment","MotionGraphics"]}),children:e.jsx(ce,{path:"/courses",element:e.jsx(UN,{})})}),e.jsxs(ce,{element:e.jsx(Pt,{roles:["DigitalMarketing"]}),children:[e.jsx(ce,{path:"/lead-entry",element:e.jsx(GN,{})}),e.jsx(ce,{path:"/leads-center",element:e.jsx(YN,{})}),e.jsx(ce,{path:"/dm-metrics",element:e.jsx(QN,{})})]}),e.jsx(ce,{element:e.jsx(Pt,{roles:["DigitalMarketing","Admin","SuperAdmin"]}),children:e.jsx(ce,{path:"/dm/dashboard",element:e.jsx(jp,{})})}),e.jsxs(ce,{element:e.jsx(Pt,{roles:["Admission","Admin","SuperAdmin"]}),children:[e.jsx(ce,{path:"/admission/dashboard",element:e.jsx(vp,{})}),"   ",e.jsx(ce,{path:"/admission/metrics",element:e.jsx(nw,{})}),e.jsx(ce,{path:"/my-targets",element:e.jsx(Ow,{})}),e.jsx(ce,{path:"/admission/assigned",element:e.jsx(_r,{})}),e.jsx(ce,{path:"/admission/counseling",element:e.jsx(_r,{})}),e.jsx(ce,{path:"/admission/follow-up",element:e.jsx(_r,{})}),e.jsx(ce,{path:"/admission/admitted",element:e.jsx(_r,{})}),e.jsx(ce,{path:"/admission/not-admitted",element:e.jsx(_r,{})}),e.jsx(ce,{path:"/admission/fees",element:e.jsx(sw,{})})]}),e.jsxs(ce,{element:e.jsx(Pt,{roles:["Accountant","Admin","SuperAdmin"]}),children:[e.jsx(ce,{path:"/accounting/dashboard",element:e.jsx(gp,{})}),e.jsx(ce,{path:"/accounting/fees",element:e.jsx(rw,{})}),e.jsx(ce,{path:"/accounting/due-collections",element:e.jsx(aw,{})}),e.jsx(ce,{path:"/accounting/income",element:e.jsx(lw,{})}),e.jsx(ce,{path:"/accounting/expense",element:e.jsx(dw,{})}),e.jsx(ce,{path:"/accounting/tada-payments",element:e.jsx(Mw,{})})]}),e.jsxs(ce,{element:e.jsx(Pt,{roles:["SuperAdmin","Admin","Accountant"]}),children:[e.jsx(ce,{path:"/employee-accounts/bank",element:e.jsx(cw,{})}),e.jsx(ce,{path:"/employee-accounts/salary",element:e.jsx(uw,{})})]}),e.jsxs(ce,{element:e.jsx(Pt,{roles:["MotionGraphics","Admin","SuperAdmin"]}),children:[e.jsx(ce,{path:"/mg/dashboard",element:e.jsx(yp,{})}),e.jsx(ce,{path:"/mg/production",element:e.jsx(kw,{})})]}),e.jsxs(ce,{element:e.jsx(Pt,{roles:["Recruitment","Admin","SuperAdmin"]}),children:[e.jsx(ce,{path:"/recruitment",element:e.jsx(fp,{})}),e.jsx(ce,{path:"/recruitment/candidates",element:e.jsx(xw,{})}),e.jsx(ce,{path:"/recruitment/jobs",element:e.jsx(gw,{})}),e.jsx(ce,{path:"/recruitment/employers",element:e.jsx(yw,{})}),e.jsx(ce,{path:"/recruitment/expenses",element:e.jsx(ww,{})})]}),e.jsx(ce,{element:e.jsx(Pt,{roles:["Recruitment","Accountant"]}),children:e.jsx(ce,{path:"/recruitment/income",element:e.jsx(vw,{})})}),e.jsxs(ce,{element:e.jsx(Pt,{roles:["Coordinator","Admin","SuperAdmin"]}),children:[e.jsx(ce,{path:"/coordinator/dashboard",element:e.jsx(bp,{})}),e.jsx(ce,{path:"/coordinator/due-fees",element:e.jsx(Aw,{})}),e.jsx(ce,{path:"/coordinator/notifications",element:e.jsx(Dw,{})})]}),e.jsx(ce,{path:"*",element:e.jsx(wa,{to:"/",replace:!0})})]})}),e.jsx(ce,{path:"*",element:e.jsx(wa,{to:"/login",replace:!0})})]})}Qh(document.getElementById("root")).render(e.jsx(ve.StrictMode,{children:e.jsx(Ay,{children:e.jsx(Iy,{children:e.jsxs(lp,{children:[e.jsx(ce,{path:"/login",element:e.jsx(_w,{})}),e.jsx(ce,{path:"/*",element:e.jsx(Bw,{})}),e.jsx(ce,{path:"*",element:e.jsx(zw,{})})]})})})}));
