function qp(t,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Jp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cm={exports:{}},Jl={},Am={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var va=Symbol.for("react.element"),Qp=Symbol.for("react.portal"),Xp=Symbol.for("react.fragment"),Kp=Symbol.for("react.strict_mode"),Zp=Symbol.for("react.profiler"),ef=Symbol.for("react.provider"),tf=Symbol.for("react.context"),sf=Symbol.for("react.forward_ref"),nf=Symbol.for("react.suspense"),rf=Symbol.for("react.memo"),af=Symbol.for("react.lazy"),kd=Symbol.iterator;function lf(t){return t===null||typeof t!="object"?null:(t=kd&&t[kd]||t["@@iterator"],typeof t=="function"?t:null)}var Dm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Tm=Object.assign,Em={};function or(t,s,n){this.props=t,this.context=s,this.refs=Em,this.updater=n||Dm}or.prototype.isReactComponent={};or.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};or.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mm(){}Mm.prototype=or.prototype;function mc(t,s,n){this.props=t,this.context=s,this.refs=Em,this.updater=n||Dm}var xc=mc.prototype=new Mm;xc.constructor=mc;Tm(xc,or.prototype);xc.isPureReactComponent=!0;var Cd=Array.isArray,Pm=Object.prototype.hasOwnProperty,hc={current:null},Lm={key:!0,ref:!0,__self:!0,__source:!0};function Rm(t,s,n){var r,a={},l=null,i=null;if(s!=null)for(r in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)Pm.call(s,r)&&!Lm.hasOwnProperty(r)&&(a[r]=s[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var d=Array(o),u=0;u<o;u++)d[u]=arguments[u+2];a.children=d}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:va,type:t,key:l,ref:i,props:a,_owner:hc.current}}function of(t,s){return{$$typeof:va,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function pc(t){return typeof t=="object"&&t!==null&&t.$$typeof===va}function cf(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return s[n]})}var Ad=/\/+/g;function ki(t,s){return typeof t=="object"&&t!==null&&t.key!=null?cf(""+t.key):s.toString(36)}function Ka(t,s,n,r,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case va:case Qp:i=!0}}if(i)return i=t,a=a(i),t=r===""?"."+ki(i,0):r,Cd(a)?(n="",t!=null&&(n=t.replace(Ad,"$&/")+"/"),Ka(a,s,n,"",function(u){return u})):a!=null&&(pc(a)&&(a=of(a,n+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Ad,"$&/")+"/")+t)),s.push(a)),1;if(i=0,r=r===""?".":r+":",Cd(t))for(var o=0;o<t.length;o++){l=t[o];var d=r+ki(l,o);i+=Ka(l,s,n,d,a)}else if(d=lf(t),typeof d=="function")for(t=d.call(t),o=0;!(l=t.next()).done;)l=l.value,d=r+ki(l,o++),i+=Ka(l,s,n,d,a);else if(l==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function Da(t,s,n){if(t==null)return t;var r=[],a=0;return Ka(t,r,"","",function(l){return s.call(n,l,a++)}),r}function df(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var rt={current:null},Za={transition:null},uf={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:Za,ReactCurrentOwner:hc};function Im(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Da,forEach:function(t,s,n){Da(t,function(){s.apply(this,arguments)},n)},count:function(t){var s=0;return Da(t,function(){s++}),s},toArray:function(t){return Da(t,function(s){return s})||[]},only:function(t){if(!pc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=or;me.Fragment=Xp;me.Profiler=Zp;me.PureComponent=mc;me.StrictMode=Kp;me.Suspense=nf;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uf;me.act=Im;me.cloneElement=function(t,s,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Tm({},t.props),a=t.key,l=t.ref,i=t._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=hc.current),s.key!==void 0&&(a=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(d in s)Pm.call(s,d)&&!Lm.hasOwnProperty(d)&&(r[d]=s[d]===void 0&&o!==void 0?o[d]:s[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){o=Array(d);for(var u=0;u<d;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:va,type:t.type,key:a,ref:l,props:r,_owner:i}};me.createContext=function(t){return t={$$typeof:tf,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ef,_context:t},t.Consumer=t};me.createElement=Rm;me.createFactory=function(t){var s=Rm.bind(null,t);return s.type=t,s};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:sf,render:t}};me.isValidElement=pc;me.lazy=function(t){return{$$typeof:af,_payload:{_status:-1,_result:t},_init:df}};me.memo=function(t,s){return{$$typeof:rf,type:t,compare:s===void 0?null:s}};me.startTransition=function(t){var s=Za.transition;Za.transition={};try{t()}finally{Za.transition=s}};me.unstable_act=Im;me.useCallback=function(t,s){return rt.current.useCallback(t,s)};me.useContext=function(t){return rt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return rt.current.useDeferredValue(t)};me.useEffect=function(t,s){return rt.current.useEffect(t,s)};me.useId=function(){return rt.current.useId()};me.useImperativeHandle=function(t,s,n){return rt.current.useImperativeHandle(t,s,n)};me.useInsertionEffect=function(t,s){return rt.current.useInsertionEffect(t,s)};me.useLayoutEffect=function(t,s){return rt.current.useLayoutEffect(t,s)};me.useMemo=function(t,s){return rt.current.useMemo(t,s)};me.useReducer=function(t,s,n){return rt.current.useReducer(t,s,n)};me.useRef=function(t){return rt.current.useRef(t)};me.useState=function(t){return rt.current.useState(t)};me.useSyncExternalStore=function(t,s,n){return rt.current.useSyncExternalStore(t,s,n)};me.useTransition=function(){return rt.current.useTransition()};me.version="18.3.1";Am.exports=me;var c=Am.exports;const ge=Jp(c),mf=qp({__proto__:null,default:ge},[c]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf=c,hf=Symbol.for("react.element"),pf=Symbol.for("react.fragment"),ff=Object.prototype.hasOwnProperty,gf=xf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yf={key:!0,ref:!0,__self:!0,__source:!0};function $m(t,s,n){var r,a={},l=null,i=null;n!==void 0&&(l=""+n),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(r in s)ff.call(s,r)&&!yf.hasOwnProperty(r)&&(a[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:hf,type:t,key:l,ref:i,props:a,_owner:gf.current}}Jl.Fragment=pf;Jl.jsx=$m;Jl.jsxs=$m;Cm.exports=Jl;var e=Cm.exports,Om={exports:{}},jt={},Fm={exports:{}},_m={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(M,H){var Z=M.length;M.push(H);e:for(;0<Z;){var W=Z-1>>>1,F=M[W];if(0<a(F,H))M[W]=H,M[Z]=F,Z=W;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var H=M[0],Z=M.pop();if(Z!==H){M[0]=Z;e:for(var W=0,F=M.length,q=F>>>1;W<q;){var se=2*(W+1)-1,I=M[se],z=se+1,G=M[z];if(0>a(I,Z))z<F&&0>a(G,I)?(M[W]=G,M[z]=Z,W=z):(M[W]=I,M[se]=Z,W=se);else if(z<F&&0>a(G,Z))M[W]=G,M[z]=Z,W=z;else break e}}return H}function a(M,H){var Z=M.sortIndex-H.sortIndex;return Z!==0?Z:M.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var d=[],u=[],x=1,m=null,h=3,g=!1,w=!1,j=!1,A=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(M){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=M)r(u),H.sortIndex=H.expirationTime,s(d,H);else break;H=n(u)}}function y(M){if(j=!1,v(M),!w)if(n(d)!==null)w=!0,$(N);else{var H=n(u);H!==null&&L(y,H.startTime-M)}}function N(M,H){w=!1,j&&(j=!1,b(k),k=-1),g=!0;var Z=h;try{for(v(H),m=n(d);m!==null&&(!(m.expirationTime>H)||M&&!B());){var W=m.callback;if(typeof W=="function"){m.callback=null,h=m.priorityLevel;var F=W(m.expirationTime<=H);H=t.unstable_now(),typeof F=="function"?m.callback=F:m===n(d)&&r(d),v(H)}else r(d);m=n(d)}if(m!==null)var q=!0;else{var se=n(u);se!==null&&L(y,se.startTime-H),q=!1}return q}finally{m=null,h=Z,g=!1}}var C=!1,E=null,k=-1,O=5,U=-1;function B(){return!(t.unstable_now()-U<O)}function R(){if(E!==null){var M=t.unstable_now();U=M;var H=!0;try{H=E(!0,M)}finally{H?S():(C=!1,E=null)}}else C=!1}var S;if(typeof p=="function")S=function(){p(R)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,D=P.port2;P.port1.onmessage=R,S=function(){D.postMessage(null)}}else S=function(){A(R,0)};function $(M){E=M,C||(C=!0,S())}function L(M,H){k=A(function(){M(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,$(N))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(M){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var Z=h;h=H;try{return M()}finally{h=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,H){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Z=h;h=M;try{return H()}finally{h=Z}},t.unstable_scheduleCallback=function(M,H,Z){var W=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?W+Z:W):Z=W,M){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=Z+F,M={id:x++,callback:H,priorityLevel:M,startTime:Z,expirationTime:F,sortIndex:-1},Z>W?(M.sortIndex=Z,s(u,M),n(d)===null&&M===n(u)&&(j?(b(k),k=-1):j=!0,L(y,Z-W))):(M.sortIndex=F,s(d,M),w||g||(w=!0,$(N))),M},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(M){var H=h;return function(){var Z=h;h=H;try{return M.apply(this,arguments)}finally{h=Z}}}})(_m);Fm.exports=_m;var vf=Fm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bf=c,bt=vf;function re(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)s+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zm=new Set,Qr={};function Nn(t,s){Zn(t,s),Zn(t+"Capture",s)}function Zn(t,s){for(Qr[t]=s,t=0;t<s.length;t++)zm.add(s[t])}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oo=Object.prototype.hasOwnProperty,jf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dd={},Td={};function Nf(t){return oo.call(Td,t)?!0:oo.call(Dd,t)?!1:jf.test(t)?Td[t]=!0:(Dd[t]=!0,!1)}function wf(t,s,n,r){if(n!==null&&n.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Sf(t,s,n,r){if(s===null||typeof s>"u"||wf(t,s,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function at(t,s,n,r,a,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new at(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];Je[s]=new at(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new at(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new at(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new at(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new at(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new at(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new at(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new at(t,5,!1,t.toLowerCase(),null,!1,!1)});var fc=/[\-:]([a-z])/g;function gc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(fc,gc);Je[s]=new at(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(fc,gc);Je[s]=new at(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(fc,gc);Je[s]=new at(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new at(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new at(t,1,!1,t.toLowerCase(),null,!0,!0)});function yc(t,s,n,r){var a=Je.hasOwnProperty(s)?Je[s]:null;(a!==null?a.type!==0:r||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Sf(s,n,a,r)&&(n=null),r||a===null?Nf(s)&&(n===null?t.removeAttribute(s):t.setAttribute(s,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(s=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(s):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,s,n):t.setAttribute(s,n))))}var bs=bf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ta=Symbol.for("react.element"),En=Symbol.for("react.portal"),Mn=Symbol.for("react.fragment"),vc=Symbol.for("react.strict_mode"),co=Symbol.for("react.profiler"),Bm=Symbol.for("react.provider"),Um=Symbol.for("react.context"),bc=Symbol.for("react.forward_ref"),uo=Symbol.for("react.suspense"),mo=Symbol.for("react.suspense_list"),jc=Symbol.for("react.memo"),Ps=Symbol.for("react.lazy"),Wm=Symbol.for("react.offscreen"),Ed=Symbol.iterator;function br(t){return t===null||typeof t!="object"?null:(t=Ed&&t[Ed]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Ci;function Pr(t){if(Ci===void 0)try{throw Error()}catch(n){var s=n.stack.trim().match(/\n( *(at )?)/);Ci=s&&s[1]||""}return`
`+Ci+t}var Ai=!1;function Di(t,s){if(!t||Ai)return"";Ai=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(u){var r=u}Reflect.construct(t,[],s)}else{try{s.call()}catch(u){r=u}t.call(s.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),l=r.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var d=`
`+a[i].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=i&&0<=o);break}}}finally{Ai=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pr(t):""}function kf(t){switch(t.tag){case 5:return Pr(t.type);case 16:return Pr("Lazy");case 13:return Pr("Suspense");case 19:return Pr("SuspenseList");case 0:case 2:case 15:return t=Di(t.type,!1),t;case 11:return t=Di(t.type.render,!1),t;case 1:return t=Di(t.type,!0),t;default:return""}}function xo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mn:return"Fragment";case En:return"Portal";case co:return"Profiler";case vc:return"StrictMode";case uo:return"Suspense";case mo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Um:return(t.displayName||"Context")+".Consumer";case Bm:return(t._context.displayName||"Context")+".Provider";case bc:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jc:return s=t.displayName||null,s!==null?s:xo(t.type)||"Memo";case Ps:s=t._payload,t=t._init;try{return xo(t(s))}catch{}}return null}function Cf(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xo(s);case 8:return s===vc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hm(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Af(t){var s=Hm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),r=""+t[s];if(!t.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return a.call(this)},set:function(i){r=""+i,l.call(this,i)}}),Object.defineProperty(t,s,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ea(t){t._valueTracker||(t._valueTracker=Af(t))}function Vm(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var n=s.getValue(),r="";return t&&(r=Hm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(s.setValue(t),!0):!1}function ml(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ho(t,s){var n=s.checked;return Me({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Md(t,s){var n=s.defaultValue==null?"":s.defaultValue,r=s.checked!=null?s.checked:s.defaultChecked;n=Xs(s.value!=null?s.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Gm(t,s){s=s.checked,s!=null&&yc(t,"checked",s,!1)}function po(t,s){Gm(t,s);var n=Xs(s.value),r=s.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?fo(t,s.type,n):s.hasOwnProperty("defaultValue")&&fo(t,s.type,Xs(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Pd(t,s,n){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var r=s.type;if(!(r!=="submit"&&r!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,n||s===t.value||(t.value=s),t.defaultValue=s}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fo(t,s,n){(s!=="number"||ml(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lr=Array.isArray;function Gn(t,s,n,r){if(t=t.options,s){s={};for(var a=0;a<n.length;a++)s["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=s.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xs(n),s=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}s!==null||t[a].disabled||(s=t[a])}s!==null&&(s.selected=!0)}}function go(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(re(91));return Me({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ld(t,s){var n=s.value;if(n==null){if(n=s.children,s=s.defaultValue,n!=null){if(s!=null)throw Error(re(92));if(Lr(n)){if(1<n.length)throw Error(re(93));n=n[0]}s=n}s==null&&(s=""),n=s}t._wrapperState={initialValue:Xs(n)}}function Ym(t,s){var n=Xs(s.value),r=Xs(s.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),s.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rd(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function qm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yo(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?qm(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ma,Jm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(s,n,r,a)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Ma=Ma||document.createElement("div"),Ma.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ma.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Xr(t,s){if(s){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=s;return}}t.textContent=s}var Fr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Df=["Webkit","ms","Moz","O"];Object.keys(Fr).forEach(function(t){Df.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Fr[s]=Fr[t]})});function Qm(t,s,n){return s==null||typeof s=="boolean"||s===""?"":n||typeof s!="number"||s===0||Fr.hasOwnProperty(t)&&Fr[t]?(""+s).trim():s+"px"}function Xm(t,s){t=t.style;for(var n in s)if(s.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=Qm(n,s[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var Tf=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vo(t,s){if(s){if(Tf[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(re(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(re(61))}if(s.style!=null&&typeof s.style!="object")throw Error(re(62))}}function bo(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jo=null;function Nc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var No=null,Yn=null,qn=null;function Id(t){if(t=Na(t)){if(typeof No!="function")throw Error(re(280));var s=t.stateNode;s&&(s=ei(s),No(t.stateNode,t.type,s))}}function Km(t){Yn?qn?qn.push(t):qn=[t]:Yn=t}function Zm(){if(Yn){var t=Yn,s=qn;if(qn=Yn=null,Id(t),s)for(t=0;t<s.length;t++)Id(s[t])}}function ex(t,s){return t(s)}function tx(){}var Ti=!1;function sx(t,s,n){if(Ti)return t(s,n);Ti=!0;try{return ex(t,s,n)}finally{Ti=!1,(Yn!==null||qn!==null)&&(tx(),Zm())}}function Kr(t,s){var n=t.stateNode;if(n===null)return null;var r=ei(n);if(r===null)return null;n=r[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(re(231,s,typeof n));return n}var wo=!1;if(fs)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){wo=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{wo=!1}function Ef(t,s,n,r,a,l,i,o,d){var u=Array.prototype.slice.call(arguments,3);try{s.apply(n,u)}catch(x){this.onError(x)}}var _r=!1,xl=null,hl=!1,So=null,Mf={onError:function(t){_r=!0,xl=t}};function Pf(t,s,n,r,a,l,i,o,d){_r=!1,xl=null,Ef.apply(Mf,arguments)}function Lf(t,s,n,r,a,l,i,o,d){if(Pf.apply(this,arguments),_r){if(_r){var u=xl;_r=!1,xl=null}else throw Error(re(198));hl||(hl=!0,So=u)}}function wn(t){var s=t,n=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(n=s.return),t=s.return;while(t)}return s.tag===3?n:null}function nx(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function $d(t){if(wn(t)!==t)throw Error(re(188))}function Rf(t){var s=t.alternate;if(!s){if(s=wn(t),s===null)throw Error(re(188));return s!==t?null:t}for(var n=t,r=s;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return $d(a),t;if(l===r)return $d(a),s;l=l.sibling}throw Error(re(188))}if(n.return!==r.return)n=a,r=l;else{for(var i=!1,o=a.child;o;){if(o===n){i=!0,n=a,r=l;break}if(o===r){i=!0,r=a,n=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===n){i=!0,n=l,r=a;break}if(o===r){i=!0,r=l,n=a;break}o=o.sibling}if(!i)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?t:s}function rx(t){return t=Rf(t),t!==null?ax(t):null}function ax(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=ax(t);if(s!==null)return s;t=t.sibling}return null}var lx=bt.unstable_scheduleCallback,Od=bt.unstable_cancelCallback,If=bt.unstable_shouldYield,$f=bt.unstable_requestPaint,Re=bt.unstable_now,Of=bt.unstable_getCurrentPriorityLevel,wc=bt.unstable_ImmediatePriority,ix=bt.unstable_UserBlockingPriority,pl=bt.unstable_NormalPriority,Ff=bt.unstable_LowPriority,ox=bt.unstable_IdlePriority,Ql=null,ss=null;function _f(t){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(Ql,t,void 0,(t.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:Uf,zf=Math.log,Bf=Math.LN2;function Uf(t){return t>>>=0,t===0?32:31-(zf(t)/Bf|0)|0}var Pa=64,La=4194304;function Rr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fl(t,s){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,l=t.pingedLanes,i=n&268435455;if(i!==0){var o=i&~a;o!==0?r=Rr(o):(l&=i,l!==0&&(r=Rr(l)))}else i=n&~a,i!==0?r=Rr(i):l!==0&&(r=Rr(l));if(r===0)return 0;if(s!==0&&s!==r&&!(s&a)&&(a=r&-r,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(r&4&&(r|=n&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=r;0<s;)n=31-Bt(s),a=1<<n,r|=t[n],s&=~a;return r}function Wf(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hf(t,s){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var i=31-Bt(l),o=1<<i,d=a[i];d===-1?(!(o&n)||o&r)&&(a[i]=Wf(o,s)):d<=s&&(t.expiredLanes|=o),l&=~o}}function ko(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cx(){var t=Pa;return Pa<<=1,!(Pa&4194240)&&(Pa=64),t}function Ei(t){for(var s=[],n=0;31>n;n++)s.push(t);return s}function ba(t,s,n){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Bt(s),t[s]=n}function Vf(t,s){var n=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-Bt(n),l=1<<a;s[a]=0,r[a]=-1,t[a]=-1,n&=~l}}function Sc(t,s){var n=t.entangledLanes|=s;for(t=t.entanglements;n;){var r=31-Bt(n),a=1<<r;a&s|t[r]&s&&(t[r]|=s),n&=~a}}var je=0;function dx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ux,kc,mx,xx,hx,Co=!1,Ra=[],Bs=null,Us=null,Ws=null,Zr=new Map,ea=new Map,Is=[],Gf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fd(t,s){switch(t){case"focusin":case"focusout":Bs=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":Zr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ea.delete(s.pointerId)}}function Nr(t,s,n,r,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},s!==null&&(s=Na(s),s!==null&&kc(s)),t):(t.eventSystemFlags|=r,s=t.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),t)}function Yf(t,s,n,r,a){switch(s){case"focusin":return Bs=Nr(Bs,t,s,n,r,a),!0;case"dragenter":return Us=Nr(Us,t,s,n,r,a),!0;case"mouseover":return Ws=Nr(Ws,t,s,n,r,a),!0;case"pointerover":var l=a.pointerId;return Zr.set(l,Nr(Zr.get(l)||null,t,s,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,ea.set(l,Nr(ea.get(l)||null,t,s,n,r,a)),!0}return!1}function px(t){var s=dn(t.target);if(s!==null){var n=wn(s);if(n!==null){if(s=n.tag,s===13){if(s=nx(n),s!==null){t.blockedOn=s,hx(t.priority,function(){mx(n)});return}}else if(s===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function el(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var n=Ao(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jo=r,n.target.dispatchEvent(r),jo=null}else return s=Na(n),s!==null&&kc(s),t.blockedOn=n,!1;s.shift()}return!0}function _d(t,s,n){el(t)&&n.delete(s)}function qf(){Co=!1,Bs!==null&&el(Bs)&&(Bs=null),Us!==null&&el(Us)&&(Us=null),Ws!==null&&el(Ws)&&(Ws=null),Zr.forEach(_d),ea.forEach(_d)}function wr(t,s){t.blockedOn===s&&(t.blockedOn=null,Co||(Co=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,qf)))}function ta(t){function s(a){return wr(a,t)}if(0<Ra.length){wr(Ra[0],t);for(var n=1;n<Ra.length;n++){var r=Ra[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Bs!==null&&wr(Bs,t),Us!==null&&wr(Us,t),Ws!==null&&wr(Ws,t),Zr.forEach(s),ea.forEach(s),n=0;n<Is.length;n++)r=Is[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Is.length&&(n=Is[0],n.blockedOn===null);)px(n),n.blockedOn===null&&Is.shift()}var Jn=bs.ReactCurrentBatchConfig,gl=!0;function Jf(t,s,n,r){var a=je,l=Jn.transition;Jn.transition=null;try{je=1,Cc(t,s,n,r)}finally{je=a,Jn.transition=l}}function Qf(t,s,n,r){var a=je,l=Jn.transition;Jn.transition=null;try{je=4,Cc(t,s,n,r)}finally{je=a,Jn.transition=l}}function Cc(t,s,n,r){if(gl){var a=Ao(t,s,n,r);if(a===null)zi(t,s,r,yl,n),Fd(t,r);else if(Yf(a,t,s,n,r))r.stopPropagation();else if(Fd(t,r),s&4&&-1<Gf.indexOf(t)){for(;a!==null;){var l=Na(a);if(l!==null&&ux(l),l=Ao(t,s,n,r),l===null&&zi(t,s,r,yl,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else zi(t,s,r,null,n)}}var yl=null;function Ao(t,s,n,r){if(yl=null,t=Nc(r),t=dn(t),t!==null)if(s=wn(t),s===null)t=null;else if(n=s.tag,n===13){if(t=nx(s),t!==null)return t;t=null}else if(n===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return yl=t,null}function fx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Of()){case wc:return 1;case ix:return 4;case pl:case Ff:return 16;case ox:return 536870912;default:return 16}default:return 16}}var Fs=null,Ac=null,tl=null;function gx(){if(tl)return tl;var t,s=Ac,n=s.length,r,a="value"in Fs?Fs.value:Fs.textContent,l=a.length;for(t=0;t<n&&s[t]===a[t];t++);var i=n-t;for(r=1;r<=i&&s[n-r]===a[l-r];r++);return tl=a.slice(t,1<r?1-r:void 0)}function sl(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ia(){return!0}function zd(){return!1}function Nt(t){function s(n,r,a,l,i){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ia:zd,this.isPropagationStopped=zd,this}return Me(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),s}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dc=Nt(cr),ja=Me({},cr,{view:0,detail:0}),Xf=Nt(ja),Mi,Pi,Sr,Xl=Me({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sr&&(Sr&&t.type==="mousemove"?(Mi=t.screenX-Sr.screenX,Pi=t.screenY-Sr.screenY):Pi=Mi=0,Sr=t),Mi)},movementY:function(t){return"movementY"in t?t.movementY:Pi}}),Bd=Nt(Xl),Kf=Me({},Xl,{dataTransfer:0}),Zf=Nt(Kf),eg=Me({},ja,{relatedTarget:0}),Li=Nt(eg),tg=Me({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),sg=Nt(tg),ng=Me({},cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rg=Nt(ng),ag=Me({},cr,{data:0}),Ud=Nt(ag),lg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ig={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},og={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cg(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=og[t])?!!s[t]:!1}function Tc(){return cg}var dg=Me({},ja,{key:function(t){if(t.key){var s=lg[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=sl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ig[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tc,charCode:function(t){return t.type==="keypress"?sl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ug=Nt(dg),mg=Me({},Xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wd=Nt(mg),xg=Me({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tc}),hg=Nt(xg),pg=Me({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),fg=Nt(pg),gg=Me({},Xl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yg=Nt(gg),vg=[9,13,27,32],Ec=fs&&"CompositionEvent"in window,zr=null;fs&&"documentMode"in document&&(zr=document.documentMode);var bg=fs&&"TextEvent"in window&&!zr,yx=fs&&(!Ec||zr&&8<zr&&11>=zr),Hd=" ",Vd=!1;function vx(t,s){switch(t){case"keyup":return vg.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pn=!1;function jg(t,s){switch(t){case"compositionend":return bx(s);case"keypress":return s.which!==32?null:(Vd=!0,Hd);case"textInput":return t=s.data,t===Hd&&Vd?null:t;default:return null}}function Ng(t,s){if(Pn)return t==="compositionend"||!Ec&&vx(t,s)?(t=gx(),tl=Ac=Fs=null,Pn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return yx&&s.locale!=="ko"?null:s.data;default:return null}}var wg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!wg[t.type]:s==="textarea"}function jx(t,s,n,r){Km(r),s=vl(s,"onChange"),0<s.length&&(n=new Dc("onChange","change",null,n,r),t.push({event:n,listeners:s}))}var Br=null,sa=null;function Sg(t){Px(t,0)}function Kl(t){var s=In(t);if(Vm(s))return t}function kg(t,s){if(t==="change")return s}var Nx=!1;if(fs){var Ri;if(fs){var Ii="oninput"in document;if(!Ii){var Yd=document.createElement("div");Yd.setAttribute("oninput","return;"),Ii=typeof Yd.oninput=="function"}Ri=Ii}else Ri=!1;Nx=Ri&&(!document.documentMode||9<document.documentMode)}function qd(){Br&&(Br.detachEvent("onpropertychange",wx),sa=Br=null)}function wx(t){if(t.propertyName==="value"&&Kl(sa)){var s=[];jx(s,sa,t,Nc(t)),sx(Sg,s)}}function Cg(t,s,n){t==="focusin"?(qd(),Br=s,sa=n,Br.attachEvent("onpropertychange",wx)):t==="focusout"&&qd()}function Ag(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kl(sa)}function Dg(t,s){if(t==="click")return Kl(s)}function Tg(t,s){if(t==="input"||t==="change")return Kl(s)}function Eg(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Ht=typeof Object.is=="function"?Object.is:Eg;function na(t,s){if(Ht(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var n=Object.keys(t),r=Object.keys(s);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!oo.call(s,a)||!Ht(t[a],s[a]))return!1}return!0}function Jd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qd(t,s){var n=Jd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=s&&r>=s)return{node:n,offset:s-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jd(n)}}function Sx(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Sx(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function kx(){for(var t=window,s=ml();s instanceof t.HTMLIFrameElement;){try{var n=typeof s.contentWindow.location.href=="string"}catch{n=!1}if(n)t=s.contentWindow;else break;s=ml(t.document)}return s}function Mc(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Mg(t){var s=kx(),n=t.focusedElem,r=t.selectionRange;if(s!==n&&n&&n.ownerDocument&&Sx(n.ownerDocument.documentElement,n)){if(r!==null&&Mc(n)){if(s=r.start,t=r.end,t===void 0&&(t=s),"selectionStart"in n)n.selectionStart=s,n.selectionEnd=Math.min(t,n.value.length);else if(t=(s=n.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!t.extend&&l>r&&(a=r,r=l,l=a),a=Qd(n,l);var i=Qd(n,r);a&&i&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),t.removeAllRanges(),l>r?(t.addRange(s),t.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),t.addRange(s)))}}for(s=[],t=n;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<s.length;n++)t=s[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pg=fs&&"documentMode"in document&&11>=document.documentMode,Ln=null,Do=null,Ur=null,To=!1;function Xd(t,s,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;To||Ln==null||Ln!==ml(r)||(r=Ln,"selectionStart"in r&&Mc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ur&&na(Ur,r)||(Ur=r,r=vl(Do,"onSelect"),0<r.length&&(s=new Dc("onSelect","select",null,s,n),t.push({event:s,listeners:r}),s.target=Ln)))}function $a(t,s){var n={};return n[t.toLowerCase()]=s.toLowerCase(),n["Webkit"+t]="webkit"+s,n["Moz"+t]="moz"+s,n}var Rn={animationend:$a("Animation","AnimationEnd"),animationiteration:$a("Animation","AnimationIteration"),animationstart:$a("Animation","AnimationStart"),transitionend:$a("Transition","TransitionEnd")},$i={},Cx={};fs&&(Cx=document.createElement("div").style,"AnimationEvent"in window||(delete Rn.animationend.animation,delete Rn.animationiteration.animation,delete Rn.animationstart.animation),"TransitionEvent"in window||delete Rn.transitionend.transition);function Zl(t){if($i[t])return $i[t];if(!Rn[t])return t;var s=Rn[t],n;for(n in s)if(s.hasOwnProperty(n)&&n in Cx)return $i[t]=s[n];return t}var Ax=Zl("animationend"),Dx=Zl("animationiteration"),Tx=Zl("animationstart"),Ex=Zl("transitionend"),Mx=new Map,Kd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tn(t,s){Mx.set(t,s),Nn(s,[t])}for(var Oi=0;Oi<Kd.length;Oi++){var Fi=Kd[Oi],Lg=Fi.toLowerCase(),Rg=Fi[0].toUpperCase()+Fi.slice(1);tn(Lg,"on"+Rg)}tn(Ax,"onAnimationEnd");tn(Dx,"onAnimationIteration");tn(Tx,"onAnimationStart");tn("dblclick","onDoubleClick");tn("focusin","onFocus");tn("focusout","onBlur");tn(Ex,"onTransitionEnd");Zn("onMouseEnter",["mouseout","mouseover"]);Zn("onMouseLeave",["mouseout","mouseover"]);Zn("onPointerEnter",["pointerout","pointerover"]);Zn("onPointerLeave",["pointerout","pointerover"]);Nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ig=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Zd(t,s,n){var r=t.type||"unknown-event";t.currentTarget=n,Lf(r,s,void 0,t),t.currentTarget=null}function Px(t,s){s=(s&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var l=void 0;if(s)for(var i=r.length-1;0<=i;i--){var o=r[i],d=o.instance,u=o.currentTarget;if(o=o.listener,d!==l&&a.isPropagationStopped())break e;Zd(a,o,u),l=d}else for(i=0;i<r.length;i++){if(o=r[i],d=o.instance,u=o.currentTarget,o=o.listener,d!==l&&a.isPropagationStopped())break e;Zd(a,o,u),l=d}}}if(hl)throw t=So,hl=!1,So=null,t}function we(t,s){var n=s[Ro];n===void 0&&(n=s[Ro]=new Set);var r=t+"__bubble";n.has(r)||(Lx(s,t,2,!1),n.add(r))}function _i(t,s,n){var r=0;s&&(r|=4),Lx(n,t,r,s)}var Oa="_reactListening"+Math.random().toString(36).slice(2);function ra(t){if(!t[Oa]){t[Oa]=!0,zm.forEach(function(n){n!=="selectionchange"&&(Ig.has(n)||_i(n,!1,t),_i(n,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Oa]||(s[Oa]=!0,_i("selectionchange",!1,s))}}function Lx(t,s,n,r){switch(fx(s)){case 1:var a=Jf;break;case 4:a=Qf;break;default:a=Cc}n=a.bind(null,s,n,t),a=void 0,!wo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(s,n,{capture:!0,passive:a}):t.addEventListener(s,n,!0):a!==void 0?t.addEventListener(s,n,{passive:a}):t.addEventListener(s,n,!1)}function zi(t,s,n,r,a){var l=r;if(!(s&1)&&!(s&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=r.return;i!==null;){var d=i.tag;if((d===3||d===4)&&(d=i.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;i=i.return}for(;o!==null;){if(i=dn(o),i===null)return;if(d=i.tag,d===5||d===6){r=l=i;continue e}o=o.parentNode}}r=r.return}sx(function(){var u=l,x=Nc(n),m=[];e:{var h=Mx.get(t);if(h!==void 0){var g=Dc,w=t;switch(t){case"keypress":if(sl(n)===0)break e;case"keydown":case"keyup":g=ug;break;case"focusin":w="focus",g=Li;break;case"focusout":w="blur",g=Li;break;case"beforeblur":case"afterblur":g=Li;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Zf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=hg;break;case Ax:case Dx:case Tx:g=sg;break;case Ex:g=fg;break;case"scroll":g=Xf;break;case"wheel":g=yg;break;case"copy":case"cut":case"paste":g=rg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Wd}var j=(s&4)!==0,A=!j&&t==="scroll",b=j?h!==null?h+"Capture":null:h;j=[];for(var p=u,v;p!==null;){v=p;var y=v.stateNode;if(v.tag===5&&y!==null&&(v=y,b!==null&&(y=Kr(p,b),y!=null&&j.push(aa(p,y,v)))),A)break;p=p.return}0<j.length&&(h=new g(h,w,null,n,x),m.push({event:h,listeners:j}))}}if(!(s&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==jo&&(w=n.relatedTarget||n.fromElement)&&(dn(w)||w[gs]))break e;if((g||h)&&(h=x.window===x?x:(h=x.ownerDocument)?h.defaultView||h.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=u,w=w?dn(w):null,w!==null&&(A=wn(w),w!==A||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(j=Bd,y="onMouseLeave",b="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(j=Wd,y="onPointerLeave",b="onPointerEnter",p="pointer"),A=g==null?h:In(g),v=w==null?h:In(w),h=new j(y,p+"leave",g,n,x),h.target=A,h.relatedTarget=v,y=null,dn(x)===u&&(j=new j(b,p+"enter",w,n,x),j.target=v,j.relatedTarget=A,y=j),A=y,g&&w)t:{for(j=g,b=w,p=0,v=j;v;v=Dn(v))p++;for(v=0,y=b;y;y=Dn(y))v++;for(;0<p-v;)j=Dn(j),p--;for(;0<v-p;)b=Dn(b),v--;for(;p--;){if(j===b||b!==null&&j===b.alternate)break t;j=Dn(j),b=Dn(b)}j=null}else j=null;g!==null&&eu(m,h,g,j,!1),w!==null&&A!==null&&eu(m,A,w,j,!0)}}e:{if(h=u?In(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var N=kg;else if(Gd(h))if(Nx)N=Tg;else{N=Ag;var C=Cg}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=Dg);if(N&&(N=N(t,u))){jx(m,N,n,x);break e}C&&C(t,h,u),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&fo(h,"number",h.value)}switch(C=u?In(u):window,t){case"focusin":(Gd(C)||C.contentEditable==="true")&&(Ln=C,Do=u,Ur=null);break;case"focusout":Ur=Do=Ln=null;break;case"mousedown":To=!0;break;case"contextmenu":case"mouseup":case"dragend":To=!1,Xd(m,n,x);break;case"selectionchange":if(Pg)break;case"keydown":case"keyup":Xd(m,n,x)}var E;if(Ec)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Pn?vx(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(yx&&n.locale!=="ko"&&(Pn||k!=="onCompositionStart"?k==="onCompositionEnd"&&Pn&&(E=gx()):(Fs=x,Ac="value"in Fs?Fs.value:Fs.textContent,Pn=!0)),C=vl(u,k),0<C.length&&(k=new Ud(k,t,null,n,x),m.push({event:k,listeners:C}),E?k.data=E:(E=bx(n),E!==null&&(k.data=E)))),(E=bg?jg(t,n):Ng(t,n))&&(u=vl(u,"onBeforeInput"),0<u.length&&(x=new Ud("onBeforeInput","beforeinput",null,n,x),m.push({event:x,listeners:u}),x.data=E))}Px(m,s)})}function aa(t,s,n){return{instance:t,listener:s,currentTarget:n}}function vl(t,s){for(var n=s+"Capture",r=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Kr(t,n),l!=null&&r.unshift(aa(t,l,a)),l=Kr(t,s),l!=null&&r.push(aa(t,l,a))),t=t.return}return r}function Dn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eu(t,s,n,r,a){for(var l=s._reactName,i=[];n!==null&&n!==r;){var o=n,d=o.alternate,u=o.stateNode;if(d!==null&&d===r)break;o.tag===5&&u!==null&&(o=u,a?(d=Kr(n,l),d!=null&&i.unshift(aa(n,d,o))):a||(d=Kr(n,l),d!=null&&i.push(aa(n,d,o)))),n=n.return}i.length!==0&&t.push({event:s,listeners:i})}var $g=/\r\n?/g,Og=/\u0000|\uFFFD/g;function tu(t){return(typeof t=="string"?t:""+t).replace($g,`
`).replace(Og,"")}function Fa(t,s,n){if(s=tu(s),tu(t)!==s&&n)throw Error(re(425))}function bl(){}var Eo=null,Mo=null;function Po(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Lo=typeof setTimeout=="function"?setTimeout:void 0,Fg=typeof clearTimeout=="function"?clearTimeout:void 0,su=typeof Promise=="function"?Promise:void 0,_g=typeof queueMicrotask=="function"?queueMicrotask:typeof su<"u"?function(t){return su.resolve(null).then(t).catch(zg)}:Lo;function zg(t){setTimeout(function(){throw t})}function Bi(t,s){var n=s,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),ta(s);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);ta(s)}function Hs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function nu(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(s===0)return t;s--}else n==="/$"&&s++}t=t.previousSibling}return null}var dr=Math.random().toString(36).slice(2),ts="__reactFiber$"+dr,la="__reactProps$"+dr,gs="__reactContainer$"+dr,Ro="__reactEvents$"+dr,Bg="__reactListeners$"+dr,Ug="__reactHandles$"+dr;function dn(t){var s=t[ts];if(s)return s;for(var n=t.parentNode;n;){if(s=n[gs]||n[ts]){if(n=s.alternate,s.child!==null||n!==null&&n.child!==null)for(t=nu(t);t!==null;){if(n=t[ts])return n;t=nu(t)}return s}t=n,n=t.parentNode}return null}function Na(t){return t=t[ts]||t[gs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function In(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function ei(t){return t[la]||null}var Io=[],$n=-1;function sn(t){return{current:t}}function Se(t){0>$n||(t.current=Io[$n],Io[$n]=null,$n--)}function Ne(t,s){$n++,Io[$n]=t.current,t.current=s}var Ks={},tt=sn(Ks),dt=sn(!1),fn=Ks;function er(t,s){var n=t.type.contextTypes;if(!n)return Ks;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===s)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=s[l];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),a}function ut(t){return t=t.childContextTypes,t!=null}function jl(){Se(dt),Se(tt)}function ru(t,s,n){if(tt.current!==Ks)throw Error(re(168));Ne(tt,s),Ne(dt,n)}function Rx(t,s,n){var r=t.stateNode;if(s=s.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in s))throw Error(re(108,Cf(t)||"Unknown",a));return Me({},n,r)}function Nl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ks,fn=tt.current,Ne(tt,t),Ne(dt,dt.current),!0}function au(t,s,n){var r=t.stateNode;if(!r)throw Error(re(169));n?(t=Rx(t,s,fn),r.__reactInternalMemoizedMergedChildContext=t,Se(dt),Se(tt),Ne(tt,t)):Se(dt),Ne(dt,n)}var ds=null,ti=!1,Ui=!1;function Ix(t){ds===null?ds=[t]:ds.push(t)}function Wg(t){ti=!0,Ix(t)}function nn(){if(!Ui&&ds!==null){Ui=!0;var t=0,s=je;try{var n=ds;for(je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ds=null,ti=!1}catch(a){throw ds!==null&&(ds=ds.slice(t+1)),lx(wc,nn),a}finally{je=s,Ui=!1}}return null}var On=[],Fn=0,wl=null,Sl=0,Ct=[],At=0,gn=null,us=1,ms="";function ln(t,s){On[Fn++]=Sl,On[Fn++]=wl,wl=t,Sl=s}function $x(t,s,n){Ct[At++]=us,Ct[At++]=ms,Ct[At++]=gn,gn=t;var r=us;t=ms;var a=32-Bt(r)-1;r&=~(1<<a),n+=1;var l=32-Bt(s)+a;if(30<l){var i=a-a%5;l=(r&(1<<i)-1).toString(32),r>>=i,a-=i,us=1<<32-Bt(s)+a|n<<a|r,ms=l+t}else us=1<<l|n<<a|r,ms=t}function Pc(t){t.return!==null&&(ln(t,1),$x(t,1,0))}function Lc(t){for(;t===wl;)wl=On[--Fn],On[Fn]=null,Sl=On[--Fn],On[Fn]=null;for(;t===gn;)gn=Ct[--At],Ct[At]=null,ms=Ct[--At],Ct[At]=null,us=Ct[--At],Ct[At]=null}var vt=null,yt=null,ke=!1,zt=null;function Ox(t,s){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=s,n.return=t,s=t.deletions,s===null?(t.deletions=[n],t.flags|=16):s.push(n)}function lu(t,s){switch(t.tag){case 5:var n=t.type;return s=s.nodeType!==1||n.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,vt=t,yt=Hs(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,vt=t,yt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(n=gn!==null?{id:us,overflow:ms}:null,t.memoizedState={dehydrated:s,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=s,n.return=t,t.child=n,vt=t,yt=null,!0):!1;default:return!1}}function $o(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Oo(t){if(ke){var s=yt;if(s){var n=s;if(!lu(t,s)){if($o(t))throw Error(re(418));s=Hs(n.nextSibling);var r=vt;s&&lu(t,s)?Ox(r,n):(t.flags=t.flags&-4097|2,ke=!1,vt=t)}}else{if($o(t))throw Error(re(418));t.flags=t.flags&-4097|2,ke=!1,vt=t}}}function iu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vt=t}function _a(t){if(t!==vt)return!1;if(!ke)return iu(t),ke=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Po(t.type,t.memoizedProps)),s&&(s=yt)){if($o(t))throw Fx(),Error(re(418));for(;s;)Ox(t,s),s=Hs(s.nextSibling)}if(iu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(s===0){yt=Hs(t.nextSibling);break e}s--}else n!=="$"&&n!=="$!"&&n!=="$?"||s++}t=t.nextSibling}yt=null}}else yt=vt?Hs(t.stateNode.nextSibling):null;return!0}function Fx(){for(var t=yt;t;)t=Hs(t.nextSibling)}function tr(){yt=vt=null,ke=!1}function Rc(t){zt===null?zt=[t]:zt.push(t)}var Hg=bs.ReactCurrentBatchConfig;function kr(t,s,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,t));var a=r,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},s._stringRef=l,s)}if(typeof t!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,t))}return t}function za(t,s){throw t=Object.prototype.toString.call(s),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function ou(t){var s=t._init;return s(t._payload)}function _x(t){function s(b,p){if(t){var v=b.deletions;v===null?(b.deletions=[p],b.flags|=16):v.push(p)}}function n(b,p){if(!t)return null;for(;p!==null;)s(b,p),p=p.sibling;return null}function r(b,p){for(b=new Map;p!==null;)p.key!==null?b.set(p.key,p):b.set(p.index,p),p=p.sibling;return b}function a(b,p){return b=qs(b,p),b.index=0,b.sibling=null,b}function l(b,p,v){return b.index=v,t?(v=b.alternate,v!==null?(v=v.index,v<p?(b.flags|=2,p):v):(b.flags|=2,p)):(b.flags|=1048576,p)}function i(b){return t&&b.alternate===null&&(b.flags|=2),b}function o(b,p,v,y){return p===null||p.tag!==6?(p=Ji(v,b.mode,y),p.return=b,p):(p=a(p,v),p.return=b,p)}function d(b,p,v,y){var N=v.type;return N===Mn?x(b,p,v.props.children,y,v.key):p!==null&&(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ps&&ou(N)===p.type)?(y=a(p,v.props),y.ref=kr(b,p,v),y.return=b,y):(y=cl(v.type,v.key,v.props,null,b.mode,y),y.ref=kr(b,p,v),y.return=b,y)}function u(b,p,v,y){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=Qi(v,b.mode,y),p.return=b,p):(p=a(p,v.children||[]),p.return=b,p)}function x(b,p,v,y,N){return p===null||p.tag!==7?(p=hn(v,b.mode,y,N),p.return=b,p):(p=a(p,v),p.return=b,p)}function m(b,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ji(""+p,b.mode,v),p.return=b,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ta:return v=cl(p.type,p.key,p.props,null,b.mode,v),v.ref=kr(b,null,p),v.return=b,v;case En:return p=Qi(p,b.mode,v),p.return=b,p;case Ps:var y=p._init;return m(b,y(p._payload),v)}if(Lr(p)||br(p))return p=hn(p,b.mode,v,null),p.return=b,p;za(b,p)}return null}function h(b,p,v,y){var N=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return N!==null?null:o(b,p,""+v,y);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ta:return v.key===N?d(b,p,v,y):null;case En:return v.key===N?u(b,p,v,y):null;case Ps:return N=v._init,h(b,p,N(v._payload),y)}if(Lr(v)||br(v))return N!==null?null:x(b,p,v,y,null);za(b,v)}return null}function g(b,p,v,y,N){if(typeof y=="string"&&y!==""||typeof y=="number")return b=b.get(v)||null,o(p,b,""+y,N);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ta:return b=b.get(y.key===null?v:y.key)||null,d(p,b,y,N);case En:return b=b.get(y.key===null?v:y.key)||null,u(p,b,y,N);case Ps:var C=y._init;return g(b,p,v,C(y._payload),N)}if(Lr(y)||br(y))return b=b.get(v)||null,x(p,b,y,N,null);za(p,y)}return null}function w(b,p,v,y){for(var N=null,C=null,E=p,k=p=0,O=null;E!==null&&k<v.length;k++){E.index>k?(O=E,E=null):O=E.sibling;var U=h(b,E,v[k],y);if(U===null){E===null&&(E=O);break}t&&E&&U.alternate===null&&s(b,E),p=l(U,p,k),C===null?N=U:C.sibling=U,C=U,E=O}if(k===v.length)return n(b,E),ke&&ln(b,k),N;if(E===null){for(;k<v.length;k++)E=m(b,v[k],y),E!==null&&(p=l(E,p,k),C===null?N=E:C.sibling=E,C=E);return ke&&ln(b,k),N}for(E=r(b,E);k<v.length;k++)O=g(E,b,k,v[k],y),O!==null&&(t&&O.alternate!==null&&E.delete(O.key===null?k:O.key),p=l(O,p,k),C===null?N=O:C.sibling=O,C=O);return t&&E.forEach(function(B){return s(b,B)}),ke&&ln(b,k),N}function j(b,p,v,y){var N=br(v);if(typeof N!="function")throw Error(re(150));if(v=N.call(v),v==null)throw Error(re(151));for(var C=N=null,E=p,k=p=0,O=null,U=v.next();E!==null&&!U.done;k++,U=v.next()){E.index>k?(O=E,E=null):O=E.sibling;var B=h(b,E,U.value,y);if(B===null){E===null&&(E=O);break}t&&E&&B.alternate===null&&s(b,E),p=l(B,p,k),C===null?N=B:C.sibling=B,C=B,E=O}if(U.done)return n(b,E),ke&&ln(b,k),N;if(E===null){for(;!U.done;k++,U=v.next())U=m(b,U.value,y),U!==null&&(p=l(U,p,k),C===null?N=U:C.sibling=U,C=U);return ke&&ln(b,k),N}for(E=r(b,E);!U.done;k++,U=v.next())U=g(E,b,k,U.value,y),U!==null&&(t&&U.alternate!==null&&E.delete(U.key===null?k:U.key),p=l(U,p,k),C===null?N=U:C.sibling=U,C=U);return t&&E.forEach(function(R){return s(b,R)}),ke&&ln(b,k),N}function A(b,p,v,y){if(typeof v=="object"&&v!==null&&v.type===Mn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ta:e:{for(var N=v.key,C=p;C!==null;){if(C.key===N){if(N=v.type,N===Mn){if(C.tag===7){n(b,C.sibling),p=a(C,v.props.children),p.return=b,b=p;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ps&&ou(N)===C.type){n(b,C.sibling),p=a(C,v.props),p.ref=kr(b,C,v),p.return=b,b=p;break e}n(b,C);break}else s(b,C);C=C.sibling}v.type===Mn?(p=hn(v.props.children,b.mode,y,v.key),p.return=b,b=p):(y=cl(v.type,v.key,v.props,null,b.mode,y),y.ref=kr(b,p,v),y.return=b,b=y)}return i(b);case En:e:{for(C=v.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){n(b,p.sibling),p=a(p,v.children||[]),p.return=b,b=p;break e}else{n(b,p);break}else s(b,p);p=p.sibling}p=Qi(v,b.mode,y),p.return=b,b=p}return i(b);case Ps:return C=v._init,A(b,p,C(v._payload),y)}if(Lr(v))return w(b,p,v,y);if(br(v))return j(b,p,v,y);za(b,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(n(b,p.sibling),p=a(p,v),p.return=b,b=p):(n(b,p),p=Ji(v,b.mode,y),p.return=b,b=p),i(b)):n(b,p)}return A}var sr=_x(!0),zx=_x(!1),kl=sn(null),Cl=null,_n=null,Ic=null;function $c(){Ic=_n=Cl=null}function Oc(t){var s=kl.current;Se(kl),t._currentValue=s}function Fo(t,s,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,r!==null&&(r.childLanes|=s)):r!==null&&(r.childLanes&s)!==s&&(r.childLanes|=s),t===n)break;t=t.return}}function Qn(t,s){Cl=t,Ic=_n=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(ct=!0),t.firstContext=null)}function Mt(t){var s=t._currentValue;if(Ic!==t)if(t={context:t,memoizedValue:s,next:null},_n===null){if(Cl===null)throw Error(re(308));_n=t,Cl.dependencies={lanes:0,firstContext:t}}else _n=_n.next=t;return s}var un=null;function Fc(t){un===null?un=[t]:un.push(t)}function Bx(t,s,n,r){var a=s.interleaved;return a===null?(n.next=n,Fc(s)):(n.next=a.next,a.next=n),s.interleaved=n,ys(t,r)}function ys(t,s){t.lanes|=s;var n=t.alternate;for(n!==null&&(n.lanes|=s),n=t,t=t.return;t!==null;)t.childLanes|=s,n=t.alternate,n!==null&&(n.childLanes|=s),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ls=!1;function _c(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ux(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hs(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Vs(t,s,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var a=r.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s,ys(t,n)}return a=r.interleaved,a===null?(s.next=s,Fc(r)):(s.next=a.next,a.next=s),r.interleaved=s,ys(t,n)}function nl(t,s,n){if(s=s.updateQueue,s!==null&&(s=s.shared,(n&4194240)!==0)){var r=s.lanes;r&=t.pendingLanes,n|=r,s.lanes=n,Sc(t,n)}}function cu(t,s){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=i:l=l.next=i,n=n.next}while(n!==null);l===null?a=l=s:l=l.next=s}else a=l=s;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=s:t.next=s,n.lastBaseUpdate=s}function Al(t,s,n,r){var a=t.updateQueue;Ls=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var d=o,u=d.next;d.next=null,i===null?l=u:i.next=u,i=d;var x=t.alternate;x!==null&&(x=x.updateQueue,o=x.lastBaseUpdate,o!==i&&(o===null?x.firstBaseUpdate=u:o.next=u,x.lastBaseUpdate=d))}if(l!==null){var m=a.baseState;i=0,x=u=d=null,o=l;do{var h=o.lane,g=o.eventTime;if((r&h)===h){x!==null&&(x=x.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=t,j=o;switch(h=s,g=n,j.tag){case 1:if(w=j.payload,typeof w=="function"){m=w.call(g,m,h);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=j.payload,h=typeof w=="function"?w.call(g,m,h):w,h==null)break e;m=Me({},m,h);break e;case 2:Ls=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else g={eventTime:g,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(u=x=g,d=m):x=x.next=g,i|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(x===null&&(d=m),a.baseState=d,a.firstBaseUpdate=u,a.lastBaseUpdate=x,s=a.shared.interleaved,s!==null){a=s;do i|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);vn|=i,t.lanes=i,t.memoizedState=m}}function du(t,s,n){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var r=t[s],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(re(191,a));a.call(r)}}}var wa={},ns=sn(wa),ia=sn(wa),oa=sn(wa);function mn(t){if(t===wa)throw Error(re(174));return t}function zc(t,s){switch(Ne(oa,s),Ne(ia,t),Ne(ns,wa),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:yo(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=yo(s,t)}Se(ns),Ne(ns,s)}function nr(){Se(ns),Se(ia),Se(oa)}function Wx(t){mn(oa.current);var s=mn(ns.current),n=yo(s,t.type);s!==n&&(Ne(ia,t),Ne(ns,n))}function Bc(t){ia.current===t&&(Se(ns),Se(ia))}var De=sn(0);function Dl(t){for(var s=t;s!==null;){if(s.tag===13){var n=s.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Wi=[];function Uc(){for(var t=0;t<Wi.length;t++)Wi[t]._workInProgressVersionPrimary=null;Wi.length=0}var rl=bs.ReactCurrentDispatcher,Hi=bs.ReactCurrentBatchConfig,yn=0,Te=null,Fe=null,Be=null,Tl=!1,Wr=!1,ca=0,Vg=0;function Xe(){throw Error(re(321))}function Wc(t,s){if(s===null)return!1;for(var n=0;n<s.length&&n<t.length;n++)if(!Ht(t[n],s[n]))return!1;return!0}function Hc(t,s,n,r,a,l){if(yn=l,Te=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,rl.current=t===null||t.memoizedState===null?Jg:Qg,t=n(r,a),Wr){l=0;do{if(Wr=!1,ca=0,25<=l)throw Error(re(301));l+=1,Be=Fe=null,s.updateQueue=null,rl.current=Xg,t=n(r,a)}while(Wr)}if(rl.current=El,s=Fe!==null&&Fe.next!==null,yn=0,Be=Fe=Te=null,Tl=!1,s)throw Error(re(300));return t}function Vc(){var t=ca!==0;return ca=0,t}function Zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Te.memoizedState=Be=t:Be=Be.next=t,Be}function Pt(){if(Fe===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var s=Be===null?Te.memoizedState:Be.next;if(s!==null)Be=s,Fe=t;else{if(t===null)throw Error(re(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Be===null?Te.memoizedState=Be=t:Be=Be.next=t}return Be}function da(t,s){return typeof s=="function"?s(t):s}function Vi(t){var s=Pt(),n=s.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=Fe,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var o=i=null,d=null,u=l;do{var x=u.lane;if((yn&x)===x)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var m={lane:x,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(o=d=m,i=r):d=d.next=m,Te.lanes|=x,vn|=x}u=u.next}while(u!==null&&u!==l);d===null?i=r:d.next=o,Ht(r,s.memoizedState)||(ct=!0),s.memoizedState=r,s.baseState=i,s.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do l=a.lane,Te.lanes|=l,vn|=l,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[s.memoizedState,n.dispatch]}function Gi(t){var s=Pt(),n=s.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,l=s.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do l=t(l,i.action),i=i.next;while(i!==a);Ht(l,s.memoizedState)||(ct=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),n.lastRenderedState=l}return[l,r]}function Hx(){}function Vx(t,s){var n=Te,r=Pt(),a=s(),l=!Ht(r.memoizedState,a);if(l&&(r.memoizedState=a,ct=!0),r=r.queue,Gc(qx.bind(null,n,r,t),[t]),r.getSnapshot!==s||l||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,ua(9,Yx.bind(null,n,r,a,s),void 0,null),We===null)throw Error(re(349));yn&30||Gx(n,s,a)}return a}function Gx(t,s,n){t.flags|=16384,t={getSnapshot:s,value:n},s=Te.updateQueue,s===null?(s={lastEffect:null,stores:null},Te.updateQueue=s,s.stores=[t]):(n=s.stores,n===null?s.stores=[t]:n.push(t))}function Yx(t,s,n,r){s.value=n,s.getSnapshot=r,Jx(s)&&Qx(t)}function qx(t,s,n){return n(function(){Jx(s)&&Qx(t)})}function Jx(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!Ht(t,n)}catch{return!0}}function Qx(t){var s=ys(t,1);s!==null&&Ut(s,t,1,-1)}function uu(t){var s=Zt();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:t},s.queue=t,t=t.dispatch=qg.bind(null,Te,t),[s.memoizedState,t]}function ua(t,s,n,r){return t={tag:t,create:s,destroy:n,deps:r,next:null},s=Te.updateQueue,s===null?(s={lastEffect:null,stores:null},Te.updateQueue=s,s.lastEffect=t.next=t):(n=s.lastEffect,n===null?s.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,s.lastEffect=t)),t}function Xx(){return Pt().memoizedState}function al(t,s,n,r){var a=Zt();Te.flags|=t,a.memoizedState=ua(1|s,n,void 0,r===void 0?null:r)}function si(t,s,n,r){var a=Pt();r=r===void 0?null:r;var l=void 0;if(Fe!==null){var i=Fe.memoizedState;if(l=i.destroy,r!==null&&Wc(r,i.deps)){a.memoizedState=ua(s,n,l,r);return}}Te.flags|=t,a.memoizedState=ua(1|s,n,l,r)}function mu(t,s){return al(8390656,8,t,s)}function Gc(t,s){return si(2048,8,t,s)}function Kx(t,s){return si(4,2,t,s)}function Zx(t,s){return si(4,4,t,s)}function eh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function th(t,s,n){return n=n!=null?n.concat([t]):null,si(4,4,eh.bind(null,s,t),n)}function Yc(){}function sh(t,s){var n=Pt();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&Wc(s,r[1])?r[0]:(n.memoizedState=[t,s],t)}function nh(t,s){var n=Pt();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&Wc(s,r[1])?r[0]:(t=t(),n.memoizedState=[t,s],t)}function rh(t,s,n){return yn&21?(Ht(n,s)||(n=cx(),Te.lanes|=n,vn|=n,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,ct=!0),t.memoizedState=n)}function Gg(t,s){var n=je;je=n!==0&&4>n?n:4,t(!0);var r=Hi.transition;Hi.transition={};try{t(!1),s()}finally{je=n,Hi.transition=r}}function ah(){return Pt().memoizedState}function Yg(t,s,n){var r=Ys(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lh(t))ih(s,n);else if(n=Bx(t,s,n,r),n!==null){var a=nt();Ut(n,t,r,a),oh(n,s,r)}}function qg(t,s,n){var r=Ys(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lh(t))ih(s,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,o=l(i,n);if(a.hasEagerState=!0,a.eagerState=o,Ht(o,i)){var d=s.interleaved;d===null?(a.next=a,Fc(s)):(a.next=d.next,d.next=a),s.interleaved=a;return}}catch{}finally{}n=Bx(t,s,a,r),n!==null&&(a=nt(),Ut(n,t,r,a),oh(n,s,r))}}function lh(t){var s=t.alternate;return t===Te||s!==null&&s===Te}function ih(t,s){Wr=Tl=!0;var n=t.pending;n===null?s.next=s:(s.next=n.next,n.next=s),t.pending=s}function oh(t,s,n){if(n&4194240){var r=s.lanes;r&=t.pendingLanes,n|=r,s.lanes=n,Sc(t,n)}}var El={readContext:Mt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},Jg={readContext:Mt,useCallback:function(t,s){return Zt().memoizedState=[t,s===void 0?null:s],t},useContext:Mt,useEffect:mu,useImperativeHandle:function(t,s,n){return n=n!=null?n.concat([t]):null,al(4194308,4,eh.bind(null,s,t),n)},useLayoutEffect:function(t,s){return al(4194308,4,t,s)},useInsertionEffect:function(t,s){return al(4,2,t,s)},useMemo:function(t,s){var n=Zt();return s=s===void 0?null:s,t=t(),n.memoizedState=[t,s],t},useReducer:function(t,s,n){var r=Zt();return s=n!==void 0?n(s):s,r.memoizedState=r.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},r.queue=t,t=t.dispatch=Yg.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var s=Zt();return t={current:t},s.memoizedState=t},useState:uu,useDebugValue:Yc,useDeferredValue:function(t){return Zt().memoizedState=t},useTransition:function(){var t=uu(!1),s=t[0];return t=Gg.bind(null,t[1]),Zt().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,n){var r=Te,a=Zt();if(ke){if(n===void 0)throw Error(re(407));n=n()}else{if(n=s(),We===null)throw Error(re(349));yn&30||Gx(r,s,n)}a.memoizedState=n;var l={value:n,getSnapshot:s};return a.queue=l,mu(qx.bind(null,r,l,t),[t]),r.flags|=2048,ua(9,Yx.bind(null,r,l,n,s),void 0,null),n},useId:function(){var t=Zt(),s=We.identifierPrefix;if(ke){var n=ms,r=us;n=(r&~(1<<32-Bt(r)-1)).toString(32)+n,s=":"+s+"R"+n,n=ca++,0<n&&(s+="H"+n.toString(32)),s+=":"}else n=Vg++,s=":"+s+"r"+n.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Qg={readContext:Mt,useCallback:sh,useContext:Mt,useEffect:Gc,useImperativeHandle:th,useInsertionEffect:Kx,useLayoutEffect:Zx,useMemo:nh,useReducer:Vi,useRef:Xx,useState:function(){return Vi(da)},useDebugValue:Yc,useDeferredValue:function(t){var s=Pt();return rh(s,Fe.memoizedState,t)},useTransition:function(){var t=Vi(da)[0],s=Pt().memoizedState;return[t,s]},useMutableSource:Hx,useSyncExternalStore:Vx,useId:ah,unstable_isNewReconciler:!1},Xg={readContext:Mt,useCallback:sh,useContext:Mt,useEffect:Gc,useImperativeHandle:th,useInsertionEffect:Kx,useLayoutEffect:Zx,useMemo:nh,useReducer:Gi,useRef:Xx,useState:function(){return Gi(da)},useDebugValue:Yc,useDeferredValue:function(t){var s=Pt();return Fe===null?s.memoizedState=t:rh(s,Fe.memoizedState,t)},useTransition:function(){var t=Gi(da)[0],s=Pt().memoizedState;return[t,s]},useMutableSource:Hx,useSyncExternalStore:Vx,useId:ah,unstable_isNewReconciler:!1};function Ft(t,s){if(t&&t.defaultProps){s=Me({},s),t=t.defaultProps;for(var n in t)s[n]===void 0&&(s[n]=t[n]);return s}return s}function _o(t,s,n,r){s=t.memoizedState,n=n(r,s),n=n==null?s:Me({},s,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ni={isMounted:function(t){return(t=t._reactInternals)?wn(t)===t:!1},enqueueSetState:function(t,s,n){t=t._reactInternals;var r=nt(),a=Ys(t),l=hs(r,a);l.payload=s,n!=null&&(l.callback=n),s=Vs(t,l,a),s!==null&&(Ut(s,t,a,r),nl(s,t,a))},enqueueReplaceState:function(t,s,n){t=t._reactInternals;var r=nt(),a=Ys(t),l=hs(r,a);l.tag=1,l.payload=s,n!=null&&(l.callback=n),s=Vs(t,l,a),s!==null&&(Ut(s,t,a,r),nl(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var n=nt(),r=Ys(t),a=hs(n,r);a.tag=2,s!=null&&(a.callback=s),s=Vs(t,a,r),s!==null&&(Ut(s,t,r,n),nl(s,t,r))}};function xu(t,s,n,r,a,l,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,l,i):s.prototype&&s.prototype.isPureReactComponent?!na(n,r)||!na(a,l):!0}function ch(t,s,n){var r=!1,a=Ks,l=s.contextType;return typeof l=="object"&&l!==null?l=Mt(l):(a=ut(s)?fn:tt.current,r=s.contextTypes,l=(r=r!=null)?er(t,a):Ks),s=new s(n,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ni,t.stateNode=s,s._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),s}function hu(t,s,n,r){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(n,r),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(n,r),s.state!==t&&ni.enqueueReplaceState(s,s.state,null)}function zo(t,s,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},_c(t);var l=s.contextType;typeof l=="object"&&l!==null?a.context=Mt(l):(l=ut(s)?fn:tt.current,a.context=er(t,l)),a.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(_o(t,s,l,n),a.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&ni.enqueueReplaceState(a,a.state,null),Al(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function rr(t,s){try{var n="",r=s;do n+=kf(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:a,digest:null}}function Yi(t,s,n){return{value:t,source:null,stack:n??null,digest:s??null}}function Bo(t,s){try{console.error(s.value)}catch(n){setTimeout(function(){throw n})}}var Kg=typeof WeakMap=="function"?WeakMap:Map;function dh(t,s,n){n=hs(-1,n),n.tag=3,n.payload={element:null};var r=s.value;return n.callback=function(){Pl||(Pl=!0,Xo=r),Bo(t,s)},n}function uh(t,s,n){n=hs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=s.value;n.payload=function(){return r(a)},n.callback=function(){Bo(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Bo(t,s),typeof r!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),n}function pu(t,s,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Kg;var a=new Set;r.set(s,a)}else a=r.get(s),a===void 0&&(a=new Set,r.set(s,a));a.has(n)||(a.add(n),t=m0.bind(null,t,s,n),s.then(t,t))}function fu(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function gu(t,s,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===s?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(s=hs(-1,1),s.tag=2,Vs(n,s,1))),n.lanes|=1),t)}var Zg=bs.ReactCurrentOwner,ct=!1;function st(t,s,n,r){s.child=t===null?zx(s,null,n,r):sr(s,t.child,n,r)}function yu(t,s,n,r,a){n=n.render;var l=s.ref;return Qn(s,a),r=Hc(t,s,n,r,l,a),n=Vc(),t!==null&&!ct?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,vs(t,s,a)):(ke&&n&&Pc(s),s.flags|=1,st(t,s,r,a),s.child)}function vu(t,s,n,r,a){if(t===null){var l=n.type;return typeof l=="function"&&!td(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(s.tag=15,s.type=l,mh(t,s,l,r,a)):(t=cl(n.type,null,r,s,s.mode,a),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,!(t.lanes&a)){var i=l.memoizedProps;if(n=n.compare,n=n!==null?n:na,n(i,r)&&t.ref===s.ref)return vs(t,s,a)}return s.flags|=1,t=qs(l,r),t.ref=s.ref,t.return=s,s.child=t}function mh(t,s,n,r,a){if(t!==null){var l=t.memoizedProps;if(na(l,r)&&t.ref===s.ref)if(ct=!1,s.pendingProps=r=l,(t.lanes&a)!==0)t.flags&131072&&(ct=!0);else return s.lanes=t.lanes,vs(t,s,a)}return Uo(t,s,n,r,a)}function xh(t,s,n){var r=s.pendingProps,a=r.children,l=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Bn,ft),ft|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Ne(Bn,ft),ft|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Ne(Bn,ft),ft|=r}else l!==null?(r=l.baseLanes|n,s.memoizedState=null):r=n,Ne(Bn,ft),ft|=r;return st(t,s,a,n),s.child}function hh(t,s){var n=s.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(s.flags|=512,s.flags|=2097152)}function Uo(t,s,n,r,a){var l=ut(n)?fn:tt.current;return l=er(s,l),Qn(s,a),n=Hc(t,s,n,r,l,a),r=Vc(),t!==null&&!ct?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,vs(t,s,a)):(ke&&r&&Pc(s),s.flags|=1,st(t,s,n,a),s.child)}function bu(t,s,n,r,a){if(ut(n)){var l=!0;Nl(s)}else l=!1;if(Qn(s,a),s.stateNode===null)ll(t,s),ch(s,n,r),zo(s,n,r,a),r=!0;else if(t===null){var i=s.stateNode,o=s.memoizedProps;i.props=o;var d=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Mt(u):(u=ut(n)?fn:tt.current,u=er(s,u));var x=n.getDerivedStateFromProps,m=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||d!==u)&&hu(s,i,r,u),Ls=!1;var h=s.memoizedState;i.state=h,Al(s,r,i,a),d=s.memoizedState,o!==r||h!==d||dt.current||Ls?(typeof x=="function"&&(_o(s,n,x,r),d=s.memoizedState),(o=Ls||xu(s,n,o,r,h,d,u))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=r,s.memoizedState=d),i.props=r,i.state=d,i.context=u,r=o):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),r=!1)}else{i=s.stateNode,Ux(t,s),o=s.memoizedProps,u=s.type===s.elementType?o:Ft(s.type,o),i.props=u,m=s.pendingProps,h=i.context,d=n.contextType,typeof d=="object"&&d!==null?d=Mt(d):(d=ut(n)?fn:tt.current,d=er(s,d));var g=n.getDerivedStateFromProps;(x=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==m||h!==d)&&hu(s,i,r,d),Ls=!1,h=s.memoizedState,i.state=h,Al(s,r,i,a);var w=s.memoizedState;o!==m||h!==w||dt.current||Ls?(typeof g=="function"&&(_o(s,n,g,r),w=s.memoizedState),(u=Ls||xu(s,n,u,r,h,w,d)||!1)?(x||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,d),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,d)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),s.memoizedProps=r,s.memoizedState=w),i.props=r,i.state=w,i.context=d,r=u):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),r=!1)}return Wo(t,s,n,r,l,a)}function Wo(t,s,n,r,a,l){hh(t,s);var i=(s.flags&128)!==0;if(!r&&!i)return a&&au(s,n,!1),vs(t,s,l);r=s.stateNode,Zg.current=s;var o=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return s.flags|=1,t!==null&&i?(s.child=sr(s,t.child,null,l),s.child=sr(s,null,o,l)):st(t,s,o,l),s.memoizedState=r.state,a&&au(s,n,!0),s.child}function ph(t){var s=t.stateNode;s.pendingContext?ru(t,s.pendingContext,s.pendingContext!==s.context):s.context&&ru(t,s.context,!1),zc(t,s.containerInfo)}function ju(t,s,n,r,a){return tr(),Rc(a),s.flags|=256,st(t,s,n,r),s.child}var Ho={dehydrated:null,treeContext:null,retryLane:0};function Vo(t){return{baseLanes:t,cachePool:null,transitions:null}}function fh(t,s,n){var r=s.pendingProps,a=De.current,l=!1,i=(s.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Ne(De,a&1),t===null)return Oo(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=r.children,t=r.fallback,l?(r=s.mode,l=s.child,i={mode:"hidden",children:i},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=li(i,r,0,null),t=hn(t,r,n,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=Vo(n),s.memoizedState=Ho,t):qc(s,i));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return e0(t,s,i,r,o,a,n);if(l){l=r.fallback,i=s.mode,a=t.child,o=a.sibling;var d={mode:"hidden",children:r.children};return!(i&1)&&s.child!==a?(r=s.child,r.childLanes=0,r.pendingProps=d,s.deletions=null):(r=qs(a,d),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=qs(o,l):(l=hn(l,i,n,null),l.flags|=2),l.return=s,r.return=s,r.sibling=l,s.child=r,r=l,l=s.child,i=t.child.memoizedState,i=i===null?Vo(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=t.childLanes&~n,s.memoizedState=Ho,r}return l=t.child,t=l.sibling,r=qs(l,{mode:"visible",children:r.children}),!(s.mode&1)&&(r.lanes=n),r.return=s,r.sibling=null,t!==null&&(n=s.deletions,n===null?(s.deletions=[t],s.flags|=16):n.push(t)),s.child=r,s.memoizedState=null,r}function qc(t,s){return s=li({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Ba(t,s,n,r){return r!==null&&Rc(r),sr(s,t.child,null,n),t=qc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function e0(t,s,n,r,a,l,i){if(n)return s.flags&256?(s.flags&=-257,r=Yi(Error(re(422))),Ba(t,s,i,r)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=r.fallback,a=s.mode,r=li({mode:"visible",children:r.children},a,0,null),l=hn(l,a,i,null),l.flags|=2,r.return=s,l.return=s,r.sibling=l,s.child=r,s.mode&1&&sr(s,t.child,null,i),s.child.memoizedState=Vo(i),s.memoizedState=Ho,l);if(!(s.mode&1))return Ba(t,s,i,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,l=Error(re(419)),r=Yi(l,r,void 0),Ba(t,s,i,r)}if(o=(i&t.childLanes)!==0,ct||o){if(r=We,r!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,ys(t,a),Ut(r,t,a,-1))}return ed(),r=Yi(Error(re(421))),Ba(t,s,i,r)}return a.data==="$?"?(s.flags|=128,s.child=t.child,s=x0.bind(null,t),a._reactRetry=s,null):(t=l.treeContext,yt=Hs(a.nextSibling),vt=s,ke=!0,zt=null,t!==null&&(Ct[At++]=us,Ct[At++]=ms,Ct[At++]=gn,us=t.id,ms=t.overflow,gn=s),s=qc(s,r.children),s.flags|=4096,s)}function Nu(t,s,n){t.lanes|=s;var r=t.alternate;r!==null&&(r.lanes|=s),Fo(t.return,s,n)}function qi(t,s,n,r,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function gh(t,s,n){var r=s.pendingProps,a=r.revealOrder,l=r.tail;if(st(t,s,r.children,n),r=De.current,r&2)r=r&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nu(t,n,s);else if(t.tag===19)Nu(t,n,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(De,r),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(n=s.child,a=null;n!==null;)t=n.alternate,t!==null&&Dl(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=s.child,s.child=null):(a=n.sibling,n.sibling=null),qi(s,!1,a,n,l);break;case"backwards":for(n=null,a=s.child,s.child=null;a!==null;){if(t=a.alternate,t!==null&&Dl(t)===null){s.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}qi(s,!0,n,null,l);break;case"together":qi(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ll(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function vs(t,s,n){if(t!==null&&(s.dependencies=t.dependencies),vn|=s.lanes,!(n&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(re(153));if(s.child!==null){for(t=s.child,n=qs(t,t.pendingProps),s.child=n,n.return=s;t.sibling!==null;)t=t.sibling,n=n.sibling=qs(t,t.pendingProps),n.return=s;n.sibling=null}return s.child}function t0(t,s,n){switch(s.tag){case 3:ph(s),tr();break;case 5:Wx(s);break;case 1:ut(s.type)&&Nl(s);break;case 4:zc(s,s.stateNode.containerInfo);break;case 10:var r=s.type._context,a=s.memoizedProps.value;Ne(kl,r._currentValue),r._currentValue=a;break;case 13:if(r=s.memoizedState,r!==null)return r.dehydrated!==null?(Ne(De,De.current&1),s.flags|=128,null):n&s.child.childLanes?fh(t,s,n):(Ne(De,De.current&1),t=vs(t,s,n),t!==null?t.sibling:null);Ne(De,De.current&1);break;case 19:if(r=(n&s.childLanes)!==0,t.flags&128){if(r)return gh(t,s,n);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ne(De,De.current),r)break;return null;case 22:case 23:return s.lanes=0,xh(t,s,n)}return vs(t,s,n)}var yh,Go,vh,bh;yh=function(t,s){for(var n=s.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Go=function(){};vh=function(t,s,n,r){var a=t.memoizedProps;if(a!==r){t=s.stateNode,mn(ns.current);var l=null;switch(n){case"input":a=ho(t,a),r=ho(t,r),l=[];break;case"select":a=Me({},a,{value:void 0}),r=Me({},r,{value:void 0}),l=[];break;case"textarea":a=go(t,a),r=go(t,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bl)}vo(n,r);var i;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var o=a[u];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qr.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in r){var d=r[u];if(o=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&d!==o&&(d!=null||o!=null))if(u==="style")if(o){for(i in o)!o.hasOwnProperty(i)||d&&d.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in d)d.hasOwnProperty(i)&&o[i]!==d[i]&&(n||(n={}),n[i]=d[i])}else n||(l||(l=[]),l.push(u,n)),n=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,o=o?o.__html:void 0,d!=null&&o!==d&&(l=l||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qr.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&we("scroll",t),l||o===d||(l=[])):(l=l||[]).push(u,d))}n&&(l=l||[]).push("style",n);var u=l;(s.updateQueue=u)&&(s.flags|=4)}};bh=function(t,s,n,r){n!==r&&(s.flags|=4)};function Cr(t,s){if(!ke)switch(t.tailMode){case"hidden":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ke(t){var s=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(s)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,s}function s0(t,s,n){var r=s.pendingProps;switch(Lc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(s),null;case 1:return ut(s.type)&&jl(),Ke(s),null;case 3:return r=s.stateNode,nr(),Se(dt),Se(tt),Uc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_a(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zt!==null&&(ec(zt),zt=null))),Go(t,s),Ke(s),null;case 5:Bc(s);var a=mn(oa.current);if(n=s.type,t!==null&&s.stateNode!=null)vh(t,s,n,r,a),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!r){if(s.stateNode===null)throw Error(re(166));return Ke(s),null}if(t=mn(ns.current),_a(s)){r=s.stateNode,n=s.type;var l=s.memoizedProps;switch(r[ts]=s,r[la]=l,t=(s.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(a=0;a<Ir.length;a++)we(Ir[a],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Md(r,l),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},we("invalid",r);break;case"textarea":Ld(r,l),we("invalid",r)}vo(n,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?r.textContent!==o&&(l.suppressHydrationWarning!==!0&&Fa(r.textContent,o,t),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&Fa(r.textContent,o,t),a=["children",""+o]):Qr.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&we("scroll",r)}switch(n){case"input":Ea(r),Pd(r,l,!0);break;case"textarea":Ea(r),Rd(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=bl)}r=a,s.updateQueue=r,r!==null&&(s.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[ts]=s,t[la]=r,yh(t,s,!1,!1),s.stateNode=t;e:{switch(i=bo(n,r),n){case"dialog":we("cancel",t),we("close",t),a=r;break;case"iframe":case"object":case"embed":we("load",t),a=r;break;case"video":case"audio":for(a=0;a<Ir.length;a++)we(Ir[a],t);a=r;break;case"source":we("error",t),a=r;break;case"img":case"image":case"link":we("error",t),we("load",t),a=r;break;case"details":we("toggle",t),a=r;break;case"input":Md(t,r),a=ho(t,r),we("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=Me({},r,{value:void 0}),we("invalid",t);break;case"textarea":Ld(t,r),a=go(t,r),we("invalid",t);break;default:a=r}vo(n,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var d=o[l];l==="style"?Xm(t,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Jm(t,d)):l==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Xr(t,d):typeof d=="number"&&Xr(t,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Qr.hasOwnProperty(l)?d!=null&&l==="onScroll"&&we("scroll",t):d!=null&&yc(t,l,d,i))}switch(n){case"input":Ea(t),Pd(t,r,!1);break;case"textarea":Ea(t),Rd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xs(r.value));break;case"select":t.multiple=!!r.multiple,l=r.value,l!=null?Gn(t,!!r.multiple,l,!1):r.defaultValue!=null&&Gn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=bl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ke(s),null;case 6:if(t&&s.stateNode!=null)bh(t,s,t.memoizedProps,r);else{if(typeof r!="string"&&s.stateNode===null)throw Error(re(166));if(n=mn(oa.current),mn(ns.current),_a(s)){if(r=s.stateNode,n=s.memoizedProps,r[ts]=s,(l=r.nodeValue!==n)&&(t=vt,t!==null))switch(t.tag){case 3:Fa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fa(r.nodeValue,n,(t.mode&1)!==0)}l&&(s.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ts]=s,s.stateNode=r}return Ke(s),null;case 13:if(Se(De),r=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&yt!==null&&s.mode&1&&!(s.flags&128))Fx(),tr(),s.flags|=98560,l=!1;else if(l=_a(s),r!==null&&r.dehydrated!==null){if(t===null){if(!l)throw Error(re(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(re(317));l[ts]=s}else tr(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Ke(s),l=!1}else zt!==null&&(ec(zt),zt=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=n,s):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(s.child.flags|=8192,s.mode&1&&(t===null||De.current&1?ze===0&&(ze=3):ed())),s.updateQueue!==null&&(s.flags|=4),Ke(s),null);case 4:return nr(),Go(t,s),t===null&&ra(s.stateNode.containerInfo),Ke(s),null;case 10:return Oc(s.type._context),Ke(s),null;case 17:return ut(s.type)&&jl(),Ke(s),null;case 19:if(Se(De),l=s.memoizedState,l===null)return Ke(s),null;if(r=(s.flags&128)!==0,i=l.rendering,i===null)if(r)Cr(l,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(i=Dl(t),i!==null){for(s.flags|=128,Cr(l,!1),r=i.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),s.subtreeFlags=0,r=n,n=s.child;n!==null;)l=n,t=r,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,t=i.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(De,De.current&1|2),s.child}t=t.sibling}l.tail!==null&&Re()>ar&&(s.flags|=128,r=!0,Cr(l,!1),s.lanes=4194304)}else{if(!r)if(t=Dl(i),t!==null){if(s.flags|=128,r=!0,n=t.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),Cr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!ke)return Ke(s),null}else 2*Re()-l.renderingStartTime>ar&&n!==1073741824&&(s.flags|=128,r=!0,Cr(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(n=l.last,n!==null?n.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Re(),s.sibling=null,n=De.current,Ne(De,r?n&1|2:n&1),s):(Ke(s),null);case 22:case 23:return Zc(),r=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(s.flags|=8192),r&&s.mode&1?ft&1073741824&&(Ke(s),s.subtreeFlags&6&&(s.flags|=8192)):Ke(s),null;case 24:return null;case 25:return null}throw Error(re(156,s.tag))}function n0(t,s){switch(Lc(s),s.tag){case 1:return ut(s.type)&&jl(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return nr(),Se(dt),Se(tt),Uc(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return Bc(s),null;case 13:if(Se(De),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(re(340));tr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Se(De),null;case 4:return nr(),null;case 10:return Oc(s.type._context),null;case 22:case 23:return Zc(),null;case 24:return null;default:return null}}var Ua=!1,Ze=!1,r0=typeof WeakSet=="function"?WeakSet:Set,oe=null;function zn(t,s){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,s,r)}else n.current=null}function Yo(t,s,n){try{n()}catch(r){Le(t,s,r)}}var wu=!1;function a0(t,s){if(Eo=gl,t=kx(),Mc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var i=0,o=-1,d=-1,u=0,x=0,m=t,h=null;t:for(;;){for(var g;m!==n||a!==0&&m.nodeType!==3||(o=i+a),m!==l||r!==0&&m.nodeType!==3||(d=i+r),m.nodeType===3&&(i+=m.nodeValue.length),(g=m.firstChild)!==null;)h=m,m=g;for(;;){if(m===t)break t;if(h===n&&++u===a&&(o=i),h===l&&++x===r&&(d=i),(g=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=g}n=o===-1||d===-1?null:{start:o,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mo={focusedElem:t,selectionRange:n},gl=!1,oe=s;oe!==null;)if(s=oe,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,oe=t;else for(;oe!==null;){s=oe;try{var w=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var j=w.memoizedProps,A=w.memoizedState,b=s.stateNode,p=b.getSnapshotBeforeUpdate(s.elementType===s.type?j:Ft(s.type,j),A);b.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=s.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(y){Le(s,s.return,y)}if(t=s.sibling,t!==null){t.return=s.return,oe=t;break}oe=s.return}return w=wu,wu=!1,w}function Hr(t,s,n){var r=s.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&Yo(s,n,l)}a=a.next}while(a!==r)}}function ri(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==s)}}function qo(t){var s=t.ref;if(s!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof s=="function"?s(t):s.current=t}}function jh(t){var s=t.alternate;s!==null&&(t.alternate=null,jh(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[ts],delete s[la],delete s[Ro],delete s[Bg],delete s[Ug])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Nh(t){return t.tag===5||t.tag===3||t.tag===4}function Su(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Nh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jo(t,s,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?n.nodeType===8?n.parentNode.insertBefore(t,s):n.insertBefore(t,s):(n.nodeType===8?(s=n.parentNode,s.insertBefore(t,n)):(s=n,s.appendChild(t)),n=n._reactRootContainer,n!=null||s.onclick!==null||(s.onclick=bl));else if(r!==4&&(t=t.child,t!==null))for(Jo(t,s,n),t=t.sibling;t!==null;)Jo(t,s,n),t=t.sibling}function Qo(t,s,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?n.insertBefore(t,s):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qo(t,s,n),t=t.sibling;t!==null;)Qo(t,s,n),t=t.sibling}var Ye=null,_t=!1;function As(t,s,n){for(n=n.child;n!==null;)wh(t,s,n),n=n.sibling}function wh(t,s,n){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(Ql,n)}catch{}switch(n.tag){case 5:Ze||zn(n,s);case 6:var r=Ye,a=_t;Ye=null,As(t,s,n),Ye=r,_t=a,Ye!==null&&(_t?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(_t?(t=Ye,n=n.stateNode,t.nodeType===8?Bi(t.parentNode,n):t.nodeType===1&&Bi(t,n),ta(t)):Bi(Ye,n.stateNode));break;case 4:r=Ye,a=_t,Ye=n.stateNode.containerInfo,_t=!0,As(t,s,n),Ye=r,_t=a;break;case 0:case 11:case 14:case 15:if(!Ze&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Yo(n,s,i),a=a.next}while(a!==r)}As(t,s,n);break;case 1:if(!Ze&&(zn(n,s),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Le(n,s,o)}As(t,s,n);break;case 21:As(t,s,n);break;case 22:n.mode&1?(Ze=(r=Ze)||n.memoizedState!==null,As(t,s,n),Ze=r):As(t,s,n);break;default:As(t,s,n)}}function ku(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new r0),s.forEach(function(r){var a=h0.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function $t(t,s){var n=s.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=t,i=s,o=i;e:for(;o!==null;){switch(o.tag){case 5:Ye=o.stateNode,_t=!1;break e;case 3:Ye=o.stateNode.containerInfo,_t=!0;break e;case 4:Ye=o.stateNode.containerInfo,_t=!0;break e}o=o.return}if(Ye===null)throw Error(re(160));wh(l,i,a),Ye=null,_t=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(u){Le(a,s,u)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Sh(s,t),s=s.sibling}function Sh(t,s){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($t(s,t),Xt(t),r&4){try{Hr(3,t,t.return),ri(3,t)}catch(j){Le(t,t.return,j)}try{Hr(5,t,t.return)}catch(j){Le(t,t.return,j)}}break;case 1:$t(s,t),Xt(t),r&512&&n!==null&&zn(n,n.return);break;case 5:if($t(s,t),Xt(t),r&512&&n!==null&&zn(n,n.return),t.flags&32){var a=t.stateNode;try{Xr(a,"")}catch(j){Le(t,t.return,j)}}if(r&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,i=n!==null?n.memoizedProps:l,o=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&Gm(a,l),bo(o,i);var u=bo(o,l);for(i=0;i<d.length;i+=2){var x=d[i],m=d[i+1];x==="style"?Xm(a,m):x==="dangerouslySetInnerHTML"?Jm(a,m):x==="children"?Xr(a,m):yc(a,x,m,u)}switch(o){case"input":po(a,l);break;case"textarea":Ym(a,l);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var g=l.value;g!=null?Gn(a,!!l.multiple,g,!1):h!==!!l.multiple&&(l.defaultValue!=null?Gn(a,!!l.multiple,l.defaultValue,!0):Gn(a,!!l.multiple,l.multiple?[]:"",!1))}a[la]=l}catch(j){Le(t,t.return,j)}}break;case 6:if($t(s,t),Xt(t),r&4){if(t.stateNode===null)throw Error(re(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(j){Le(t,t.return,j)}}break;case 3:if($t(s,t),Xt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ta(s.containerInfo)}catch(j){Le(t,t.return,j)}break;case 4:$t(s,t),Xt(t);break;case 13:$t(s,t),Xt(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Xc=Re())),r&4&&ku(t);break;case 22:if(x=n!==null&&n.memoizedState!==null,t.mode&1?(Ze=(u=Ze)||x,$t(s,t),Ze=u):$t(s,t),Xt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!x&&t.mode&1)for(oe=t,x=t.child;x!==null;){for(m=oe=x;oe!==null;){switch(h=oe,g=h.child,h.tag){case 0:case 11:case 14:case 15:Hr(4,h,h.return);break;case 1:zn(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{s=r,w.props=s.memoizedProps,w.state=s.memoizedState,w.componentWillUnmount()}catch(j){Le(r,n,j)}}break;case 5:zn(h,h.return);break;case 22:if(h.memoizedState!==null){Au(m);continue}}g!==null?(g.return=h,oe=g):Au(m)}x=x.sibling}e:for(x=null,m=t;;){if(m.tag===5){if(x===null){x=m;try{a=m.stateNode,u?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=m.stateNode,d=m.memoizedProps.style,i=d!=null&&d.hasOwnProperty("display")?d.display:null,o.style.display=Qm("display",i))}catch(j){Le(t,t.return,j)}}}else if(m.tag===6){if(x===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(j){Le(t,t.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;x===m&&(x=null),m=m.return}x===m&&(x=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:$t(s,t),Xt(t),r&4&&ku(t);break;case 21:break;default:$t(s,t),Xt(t)}}function Xt(t){var s=t.flags;if(s&2){try{e:{for(var n=t.return;n!==null;){if(Nh(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Xr(a,""),r.flags&=-33);var l=Su(t);Qo(t,l,a);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Su(t);Jo(t,o,i);break;default:throw Error(re(161))}}catch(d){Le(t,t.return,d)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function l0(t,s,n){oe=t,kh(t)}function kh(t,s,n){for(var r=(t.mode&1)!==0;oe!==null;){var a=oe,l=a.child;if(a.tag===22&&r){var i=a.memoizedState!==null||Ua;if(!i){var o=a.alternate,d=o!==null&&o.memoizedState!==null||Ze;o=Ua;var u=Ze;if(Ua=i,(Ze=d)&&!u)for(oe=a;oe!==null;)i=oe,d=i.child,i.tag===22&&i.memoizedState!==null?Du(a):d!==null?(d.return=i,oe=d):Du(a);for(;l!==null;)oe=l,kh(l),l=l.sibling;oe=a,Ua=o,Ze=u}Cu(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,oe=l):Cu(t)}}function Cu(t){for(;oe!==null;){var s=oe;if(s.flags&8772){var n=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Ze||ri(5,s);break;case 1:var r=s.stateNode;if(s.flags&4&&!Ze)if(n===null)r.componentDidMount();else{var a=s.elementType===s.type?n.memoizedProps:Ft(s.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&du(s,l,r);break;case 3:var i=s.updateQueue;if(i!==null){if(n=null,s.child!==null)switch(s.child.tag){case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}du(s,i,n)}break;case 5:var o=s.stateNode;if(n===null&&s.flags&4){n=o;var d=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var u=s.alternate;if(u!==null){var x=u.memoizedState;if(x!==null){var m=x.dehydrated;m!==null&&ta(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}Ze||s.flags&512&&qo(s)}catch(h){Le(s,s.return,h)}}if(s===t){oe=null;break}if(n=s.sibling,n!==null){n.return=s.return,oe=n;break}oe=s.return}}function Au(t){for(;oe!==null;){var s=oe;if(s===t){oe=null;break}var n=s.sibling;if(n!==null){n.return=s.return,oe=n;break}oe=s.return}}function Du(t){for(;oe!==null;){var s=oe;try{switch(s.tag){case 0:case 11:case 15:var n=s.return;try{ri(4,s)}catch(d){Le(s,n,d)}break;case 1:var r=s.stateNode;if(typeof r.componentDidMount=="function"){var a=s.return;try{r.componentDidMount()}catch(d){Le(s,a,d)}}var l=s.return;try{qo(s)}catch(d){Le(s,l,d)}break;case 5:var i=s.return;try{qo(s)}catch(d){Le(s,i,d)}}}catch(d){Le(s,s.return,d)}if(s===t){oe=null;break}var o=s.sibling;if(o!==null){o.return=s.return,oe=o;break}oe=s.return}}var i0=Math.ceil,Ml=bs.ReactCurrentDispatcher,Jc=bs.ReactCurrentOwner,Tt=bs.ReactCurrentBatchConfig,ye=0,We=null,Ie=null,qe=0,ft=0,Bn=sn(0),ze=0,ma=null,vn=0,ai=0,Qc=0,Vr=null,ot=null,Xc=0,ar=1/0,os=null,Pl=!1,Xo=null,Gs=null,Wa=!1,_s=null,Ll=0,Gr=0,Ko=null,il=-1,ol=0;function nt(){return ye&6?Re():il!==-1?il:il=Re()}function Ys(t){return t.mode&1?ye&2&&qe!==0?qe&-qe:Hg.transition!==null?(ol===0&&(ol=cx()),ol):(t=je,t!==0||(t=window.event,t=t===void 0?16:fx(t.type)),t):1}function Ut(t,s,n,r){if(50<Gr)throw Gr=0,Ko=null,Error(re(185));ba(t,n,r),(!(ye&2)||t!==We)&&(t===We&&(!(ye&2)&&(ai|=n),ze===4&&$s(t,qe)),mt(t,r),n===1&&ye===0&&!(s.mode&1)&&(ar=Re()+500,ti&&nn()))}function mt(t,s){var n=t.callbackNode;Hf(t,s);var r=fl(t,t===We?qe:0);if(r===0)n!==null&&Od(n),t.callbackNode=null,t.callbackPriority=0;else if(s=r&-r,t.callbackPriority!==s){if(n!=null&&Od(n),s===1)t.tag===0?Wg(Tu.bind(null,t)):Ix(Tu.bind(null,t)),_g(function(){!(ye&6)&&nn()}),n=null;else{switch(dx(r)){case 1:n=wc;break;case 4:n=ix;break;case 16:n=pl;break;case 536870912:n=ox;break;default:n=pl}n=Lh(n,Ch.bind(null,t))}t.callbackPriority=s,t.callbackNode=n}}function Ch(t,s){if(il=-1,ol=0,ye&6)throw Error(re(327));var n=t.callbackNode;if(Xn()&&t.callbackNode!==n)return null;var r=fl(t,t===We?qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||s)s=Rl(t,r);else{s=r;var a=ye;ye|=2;var l=Dh();(We!==t||qe!==s)&&(os=null,ar=Re()+500,xn(t,s));do try{d0();break}catch(o){Ah(t,o)}while(!0);$c(),Ml.current=l,ye=a,Ie!==null?s=0:(We=null,qe=0,s=ze)}if(s!==0){if(s===2&&(a=ko(t),a!==0&&(r=a,s=Zo(t,a))),s===1)throw n=ma,xn(t,0),$s(t,r),mt(t,Re()),n;if(s===6)$s(t,r);else{if(a=t.current.alternate,!(r&30)&&!o0(a)&&(s=Rl(t,r),s===2&&(l=ko(t),l!==0&&(r=l,s=Zo(t,l))),s===1))throw n=ma,xn(t,0),$s(t,r),mt(t,Re()),n;switch(t.finishedWork=a,t.finishedLanes=r,s){case 0:case 1:throw Error(re(345));case 2:on(t,ot,os);break;case 3:if($s(t,r),(r&130023424)===r&&(s=Xc+500-Re(),10<s)){if(fl(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){nt(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Lo(on.bind(null,t,ot,os),s);break}on(t,ot,os);break;case 4:if($s(t,r),(r&4194240)===r)break;for(s=t.eventTimes,a=-1;0<r;){var i=31-Bt(r);l=1<<i,i=s[i],i>a&&(a=i),r&=~l}if(r=a,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*i0(r/1960))-r,10<r){t.timeoutHandle=Lo(on.bind(null,t,ot,os),r);break}on(t,ot,os);break;case 5:on(t,ot,os);break;default:throw Error(re(329))}}}return mt(t,Re()),t.callbackNode===n?Ch.bind(null,t):null}function Zo(t,s){var n=Vr;return t.current.memoizedState.isDehydrated&&(xn(t,s).flags|=256),t=Rl(t,s),t!==2&&(s=ot,ot=n,s!==null&&ec(s)),t}function ec(t){ot===null?ot=t:ot.push.apply(ot,t)}function o0(t){for(var s=t;;){if(s.flags&16384){var n=s.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!Ht(l(),a))return!1}catch{return!1}}}if(n=s.child,s.subtreeFlags&16384&&n!==null)n.return=s,s=n;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function $s(t,s){for(s&=~Qc,s&=~ai,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var n=31-Bt(s),r=1<<n;t[n]=-1,s&=~r}}function Tu(t){if(ye&6)throw Error(re(327));Xn();var s=fl(t,0);if(!(s&1))return mt(t,Re()),null;var n=Rl(t,s);if(t.tag!==0&&n===2){var r=ko(t);r!==0&&(s=r,n=Zo(t,r))}if(n===1)throw n=ma,xn(t,0),$s(t,s),mt(t,Re()),n;if(n===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,on(t,ot,os),mt(t,Re()),null}function Kc(t,s){var n=ye;ye|=1;try{return t(s)}finally{ye=n,ye===0&&(ar=Re()+500,ti&&nn())}}function bn(t){_s!==null&&_s.tag===0&&!(ye&6)&&Xn();var s=ye;ye|=1;var n=Tt.transition,r=je;try{if(Tt.transition=null,je=1,t)return t()}finally{je=r,Tt.transition=n,ye=s,!(ye&6)&&nn()}}function Zc(){ft=Bn.current,Se(Bn)}function xn(t,s){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Fg(n)),Ie!==null)for(n=Ie.return;n!==null;){var r=n;switch(Lc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&jl();break;case 3:nr(),Se(dt),Se(tt),Uc();break;case 5:Bc(r);break;case 4:nr();break;case 13:Se(De);break;case 19:Se(De);break;case 10:Oc(r.type._context);break;case 22:case 23:Zc()}n=n.return}if(We=t,Ie=t=qs(t.current,null),qe=ft=s,ze=0,ma=null,Qc=ai=vn=0,ot=Vr=null,un!==null){for(s=0;s<un.length;s++)if(n=un[s],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var i=l.next;l.next=a,r.next=i}n.pending=r}un=null}return t}function Ah(t,s){do{var n=Ie;try{if($c(),rl.current=El,Tl){for(var r=Te.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Tl=!1}if(yn=0,Be=Fe=Te=null,Wr=!1,ca=0,Jc.current=null,n===null||n.return===null){ze=1,ma=s,Ie=null;break}e:{var l=t,i=n.return,o=n,d=s;if(s=qe,o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,x=o,m=x.tag;if(!(x.mode&1)&&(m===0||m===11||m===15)){var h=x.alternate;h?(x.updateQueue=h.updateQueue,x.memoizedState=h.memoizedState,x.lanes=h.lanes):(x.updateQueue=null,x.memoizedState=null)}var g=fu(i);if(g!==null){g.flags&=-257,gu(g,i,o,l,s),g.mode&1&&pu(l,u,s),s=g,d=u;var w=s.updateQueue;if(w===null){var j=new Set;j.add(d),s.updateQueue=j}else w.add(d);break e}else{if(!(s&1)){pu(l,u,s),ed();break e}d=Error(re(426))}}else if(ke&&o.mode&1){var A=fu(i);if(A!==null){!(A.flags&65536)&&(A.flags|=256),gu(A,i,o,l,s),Rc(rr(d,o));break e}}l=d=rr(d,o),ze!==4&&(ze=2),Vr===null?Vr=[l]:Vr.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var b=dh(l,d,s);cu(l,b);break e;case 1:o=d;var p=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Gs===null||!Gs.has(v)))){l.flags|=65536,s&=-s,l.lanes|=s;var y=uh(l,o,s);cu(l,y);break e}}l=l.return}while(l!==null)}Eh(n)}catch(N){s=N,Ie===n&&n!==null&&(Ie=n=n.return);continue}break}while(!0)}function Dh(){var t=Ml.current;return Ml.current=El,t===null?El:t}function ed(){(ze===0||ze===3||ze===2)&&(ze=4),We===null||!(vn&268435455)&&!(ai&268435455)||$s(We,qe)}function Rl(t,s){var n=ye;ye|=2;var r=Dh();(We!==t||qe!==s)&&(os=null,xn(t,s));do try{c0();break}catch(a){Ah(t,a)}while(!0);if($c(),ye=n,Ml.current=r,Ie!==null)throw Error(re(261));return We=null,qe=0,ze}function c0(){for(;Ie!==null;)Th(Ie)}function d0(){for(;Ie!==null&&!If();)Th(Ie)}function Th(t){var s=Ph(t.alternate,t,ft);t.memoizedProps=t.pendingProps,s===null?Eh(t):Ie=s,Jc.current=null}function Eh(t){var s=t;do{var n=s.alternate;if(t=s.return,s.flags&32768){if(n=n0(n,s),n!==null){n.flags&=32767,Ie=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Ie=null;return}}else if(n=s0(n,s,ft),n!==null){Ie=n;return}if(s=s.sibling,s!==null){Ie=s;return}Ie=s=t}while(s!==null);ze===0&&(ze=5)}function on(t,s,n){var r=je,a=Tt.transition;try{Tt.transition=null,je=1,u0(t,s,n,r)}finally{Tt.transition=a,je=r}return null}function u0(t,s,n,r){do Xn();while(_s!==null);if(ye&6)throw Error(re(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(Vf(t,l),t===We&&(Ie=We=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wa||(Wa=!0,Lh(pl,function(){return Xn(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Tt.transition,Tt.transition=null;var i=je;je=1;var o=ye;ye|=4,Jc.current=null,a0(t,n),Sh(n,t),Mg(Mo),gl=!!Eo,Mo=Eo=null,t.current=n,l0(n),$f(),ye=o,je=i,Tt.transition=l}else t.current=n;if(Wa&&(Wa=!1,_s=t,Ll=a),l=t.pendingLanes,l===0&&(Gs=null),_f(n.stateNode),mt(t,Re()),s!==null)for(r=t.onRecoverableError,n=0;n<s.length;n++)a=s[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Pl)throw Pl=!1,t=Xo,Xo=null,t;return Ll&1&&t.tag!==0&&Xn(),l=t.pendingLanes,l&1?t===Ko?Gr++:(Gr=0,Ko=t):Gr=0,nn(),null}function Xn(){if(_s!==null){var t=dx(Ll),s=Tt.transition,n=je;try{if(Tt.transition=null,je=16>t?16:t,_s===null)var r=!1;else{if(t=_s,_s=null,Ll=0,ye&6)throw Error(re(331));var a=ye;for(ye|=4,oe=t.current;oe!==null;){var l=oe,i=l.child;if(oe.flags&16){var o=l.deletions;if(o!==null){for(var d=0;d<o.length;d++){var u=o[d];for(oe=u;oe!==null;){var x=oe;switch(x.tag){case 0:case 11:case 15:Hr(8,x,l)}var m=x.child;if(m!==null)m.return=x,oe=m;else for(;oe!==null;){x=oe;var h=x.sibling,g=x.return;if(jh(x),x===u){oe=null;break}if(h!==null){h.return=g,oe=h;break}oe=g}}}var w=l.alternate;if(w!==null){var j=w.child;if(j!==null){w.child=null;do{var A=j.sibling;j.sibling=null,j=A}while(j!==null)}}oe=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,oe=i;else e:for(;oe!==null;){if(l=oe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Hr(9,l,l.return)}var b=l.sibling;if(b!==null){b.return=l.return,oe=b;break e}oe=l.return}}var p=t.current;for(oe=p;oe!==null;){i=oe;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,oe=v;else e:for(i=p;oe!==null;){if(o=oe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ri(9,o)}}catch(N){Le(o,o.return,N)}if(o===i){oe=null;break e}var y=o.sibling;if(y!==null){y.return=o.return,oe=y;break e}oe=o.return}}if(ye=a,nn(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(Ql,t)}catch{}r=!0}return r}finally{je=n,Tt.transition=s}}return!1}function Eu(t,s,n){s=rr(n,s),s=dh(t,s,1),t=Vs(t,s,1),s=nt(),t!==null&&(ba(t,1,s),mt(t,s))}function Le(t,s,n){if(t.tag===3)Eu(t,t,n);else for(;s!==null;){if(s.tag===3){Eu(s,t,n);break}else if(s.tag===1){var r=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gs===null||!Gs.has(r))){t=rr(n,t),t=uh(s,t,1),s=Vs(s,t,1),t=nt(),s!==null&&(ba(s,1,t),mt(s,t));break}}s=s.return}}function m0(t,s,n){var r=t.pingCache;r!==null&&r.delete(s),s=nt(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(qe&n)===n&&(ze===4||ze===3&&(qe&130023424)===qe&&500>Re()-Xc?xn(t,0):Qc|=n),mt(t,s)}function Mh(t,s){s===0&&(t.mode&1?(s=La,La<<=1,!(La&130023424)&&(La=4194304)):s=1);var n=nt();t=ys(t,s),t!==null&&(ba(t,s,n),mt(t,n))}function x0(t){var s=t.memoizedState,n=0;s!==null&&(n=s.retryLane),Mh(t,n)}function h0(t,s){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(s),Mh(t,n)}var Ph;Ph=function(t,s,n){if(t!==null)if(t.memoizedProps!==s.pendingProps||dt.current)ct=!0;else{if(!(t.lanes&n)&&!(s.flags&128))return ct=!1,t0(t,s,n);ct=!!(t.flags&131072)}else ct=!1,ke&&s.flags&1048576&&$x(s,Sl,s.index);switch(s.lanes=0,s.tag){case 2:var r=s.type;ll(t,s),t=s.pendingProps;var a=er(s,tt.current);Qn(s,n),a=Hc(null,s,r,t,a,n);var l=Vc();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,ut(r)?(l=!0,Nl(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,_c(s),a.updater=ni,s.stateNode=a,a._reactInternals=s,zo(s,r,t,n),s=Wo(null,s,r,!0,l,n)):(s.tag=0,ke&&l&&Pc(s),st(null,s,a,n),s=s.child),s;case 16:r=s.elementType;e:{switch(ll(t,s),t=s.pendingProps,a=r._init,r=a(r._payload),s.type=r,a=s.tag=f0(r),t=Ft(r,t),a){case 0:s=Uo(null,s,r,t,n);break e;case 1:s=bu(null,s,r,t,n);break e;case 11:s=yu(null,s,r,t,n);break e;case 14:s=vu(null,s,r,Ft(r.type,t),n);break e}throw Error(re(306,r,""))}return s;case 0:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Ft(r,a),Uo(t,s,r,a,n);case 1:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Ft(r,a),bu(t,s,r,a,n);case 3:e:{if(ph(s),t===null)throw Error(re(387));r=s.pendingProps,l=s.memoizedState,a=l.element,Ux(t,s),Al(s,r,null,n);var i=s.memoizedState;if(r=i.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=rr(Error(re(423)),s),s=ju(t,s,r,n,a);break e}else if(r!==a){a=rr(Error(re(424)),s),s=ju(t,s,r,n,a);break e}else for(yt=Hs(s.stateNode.containerInfo.firstChild),vt=s,ke=!0,zt=null,n=zx(s,null,r,n),s.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tr(),r===a){s=vs(t,s,n);break e}st(t,s,r,n)}s=s.child}return s;case 5:return Wx(s),t===null&&Oo(s),r=s.type,a=s.pendingProps,l=t!==null?t.memoizedProps:null,i=a.children,Po(r,a)?i=null:l!==null&&Po(r,l)&&(s.flags|=32),hh(t,s),st(t,s,i,n),s.child;case 6:return t===null&&Oo(s),null;case 13:return fh(t,s,n);case 4:return zc(s,s.stateNode.containerInfo),r=s.pendingProps,t===null?s.child=sr(s,null,r,n):st(t,s,r,n),s.child;case 11:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Ft(r,a),yu(t,s,r,a,n);case 7:return st(t,s,s.pendingProps,n),s.child;case 8:return st(t,s,s.pendingProps.children,n),s.child;case 12:return st(t,s,s.pendingProps.children,n),s.child;case 10:e:{if(r=s.type._context,a=s.pendingProps,l=s.memoizedProps,i=a.value,Ne(kl,r._currentValue),r._currentValue=i,l!==null)if(Ht(l.value,i)){if(l.children===a.children&&!dt.current){s=vs(t,s,n);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var d=o.firstContext;d!==null;){if(d.context===r){if(l.tag===1){d=hs(-1,n&-n),d.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var x=u.pending;x===null?d.next=d:(d.next=x.next,x.next=d),u.pending=d}}l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),Fo(l.return,n,s),o.lanes|=n;break}d=d.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(re(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Fo(i,n,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}st(t,s,a.children,n),s=s.child}return s;case 9:return a=s.type,r=s.pendingProps.children,Qn(s,n),a=Mt(a),r=r(a),s.flags|=1,st(t,s,r,n),s.child;case 14:return r=s.type,a=Ft(r,s.pendingProps),a=Ft(r.type,a),vu(t,s,r,a,n);case 15:return mh(t,s,s.type,s.pendingProps,n);case 17:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Ft(r,a),ll(t,s),s.tag=1,ut(r)?(t=!0,Nl(s)):t=!1,Qn(s,n),ch(s,r,a),zo(s,r,a,n),Wo(null,s,r,!0,t,n);case 19:return gh(t,s,n);case 22:return xh(t,s,n)}throw Error(re(156,s.tag))};function Lh(t,s){return lx(t,s)}function p0(t,s,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(t,s,n,r){return new p0(t,s,n,r)}function td(t){return t=t.prototype,!(!t||!t.isReactComponent)}function f0(t){if(typeof t=="function")return td(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bc)return 11;if(t===jc)return 14}return 2}function qs(t,s){var n=t.alternate;return n===null?(n=Dt(t.tag,s,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=s,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,s=t.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cl(t,s,n,r,a,l){var i=2;if(r=t,typeof t=="function")td(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Mn:return hn(n.children,a,l,s);case vc:i=8,a|=8;break;case co:return t=Dt(12,n,s,a|2),t.elementType=co,t.lanes=l,t;case uo:return t=Dt(13,n,s,a),t.elementType=uo,t.lanes=l,t;case mo:return t=Dt(19,n,s,a),t.elementType=mo,t.lanes=l,t;case Wm:return li(n,a,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Bm:i=10;break e;case Um:i=9;break e;case bc:i=11;break e;case jc:i=14;break e;case Ps:i=16,r=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return s=Dt(i,n,s,a),s.elementType=t,s.type=r,s.lanes=l,s}function hn(t,s,n,r){return t=Dt(7,t,r,s),t.lanes=n,t}function li(t,s,n,r){return t=Dt(22,t,r,s),t.elementType=Wm,t.lanes=n,t.stateNode={isHidden:!1},t}function Ji(t,s,n){return t=Dt(6,t,null,s),t.lanes=n,t}function Qi(t,s,n){return s=Dt(4,t.children!==null?t.children:[],t.key,s),s.lanes=n,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function g0(t,s,n,r,a){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ei(0),this.expirationTimes=Ei(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function sd(t,s,n,r,a,l,i,o,d){return t=new g0(t,s,n,o,d),s===1?(s=1,l===!0&&(s|=8)):s=0,l=Dt(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_c(l),t}function y0(t,s,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:En,key:r==null?null:""+r,children:t,containerInfo:s,implementation:n}}function Rh(t){if(!t)return Ks;t=t._reactInternals;e:{if(wn(t)!==t||t.tag!==1)throw Error(re(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(ut(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(re(171))}if(t.tag===1){var n=t.type;if(ut(n))return Rx(t,n,s)}return s}function Ih(t,s,n,r,a,l,i,o,d){return t=sd(n,r,!0,t,a,l,i,o,d),t.context=Rh(null),n=t.current,r=nt(),a=Ys(n),l=hs(r,a),l.callback=s??null,Vs(n,l,a),t.current.lanes=a,ba(t,a,r),mt(t,r),t}function ii(t,s,n,r){var a=s.current,l=nt(),i=Ys(a);return n=Rh(n),s.context===null?s.context=n:s.pendingContext=n,s=hs(l,i),s.payload={element:t},r=r===void 0?null:r,r!==null&&(s.callback=r),t=Vs(a,s,i),t!==null&&(Ut(t,a,i,l),nl(t,a,i)),i}function Il(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mu(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<s?n:s}}function nd(t,s){Mu(t,s),(t=t.alternate)&&Mu(t,s)}function v0(){return null}var $h=typeof reportError=="function"?reportError:function(t){console.error(t)};function rd(t){this._internalRoot=t}oi.prototype.render=rd.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(re(409));ii(t,s,null,null)};oi.prototype.unmount=rd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;bn(function(){ii(null,t,null,null)}),s[gs]=null}};function oi(t){this._internalRoot=t}oi.prototype.unstable_scheduleHydration=function(t){if(t){var s=xx();t={blockedOn:null,target:t,priority:s};for(var n=0;n<Is.length&&s!==0&&s<Is[n].priority;n++);Is.splice(n,0,t),n===0&&px(t)}};function ad(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ci(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pu(){}function b0(t,s,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var u=Il(i);l.call(u)}}var i=Ih(s,r,t,0,null,!1,!1,"",Pu);return t._reactRootContainer=i,t[gs]=i.current,ra(t.nodeType===8?t.parentNode:t),bn(),i}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var u=Il(d);o.call(u)}}var d=sd(t,0,!1,null,null,!1,!1,"",Pu);return t._reactRootContainer=d,t[gs]=d.current,ra(t.nodeType===8?t.parentNode:t),bn(function(){ii(s,d,n,r)}),d}function di(t,s,n,r,a){var l=n._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var d=Il(i);o.call(d)}}ii(s,i,t,a)}else i=b0(n,s,t,a,r);return Il(i)}ux=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var n=Rr(s.pendingLanes);n!==0&&(Sc(s,n|1),mt(s,Re()),!(ye&6)&&(ar=Re()+500,nn()))}break;case 13:bn(function(){var r=ys(t,1);if(r!==null){var a=nt();Ut(r,t,1,a)}}),nd(t,1)}};kc=function(t){if(t.tag===13){var s=ys(t,134217728);if(s!==null){var n=nt();Ut(s,t,134217728,n)}nd(t,134217728)}};mx=function(t){if(t.tag===13){var s=Ys(t),n=ys(t,s);if(n!==null){var r=nt();Ut(n,t,s,r)}nd(t,s)}};xx=function(){return je};hx=function(t,s){var n=je;try{return je=t,s()}finally{je=n}};No=function(t,s,n){switch(s){case"input":if(po(t,n),s=n.name,n.type==="radio"&&s!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<n.length;s++){var r=n[s];if(r!==t&&r.form===t.form){var a=ei(r);if(!a)throw Error(re(90));Vm(r),po(r,a)}}}break;case"textarea":Ym(t,n);break;case"select":s=n.value,s!=null&&Gn(t,!!n.multiple,s,!1)}};ex=Kc;tx=bn;var j0={usingClientEntryPoint:!1,Events:[Na,In,ei,Km,Zm,Kc]},Ar={findFiberByHostInstance:dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},N0={bundleType:Ar.bundleType,version:Ar.version,rendererPackageName:Ar.rendererPackageName,rendererConfig:Ar.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rx(t),t===null?null:t.stateNode},findFiberByHostInstance:Ar.findFiberByHostInstance||v0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ha.isDisabled&&Ha.supportsFiber)try{Ql=Ha.inject(N0),ss=Ha}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j0;jt.createPortal=function(t,s){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ad(s))throw Error(re(200));return y0(t,s,null,n)};jt.createRoot=function(t,s){if(!ad(t))throw Error(re(299));var n=!1,r="",a=$h;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=sd(t,1,!1,null,null,n,!1,r,a),t[gs]=s.current,ra(t.nodeType===8?t.parentNode:t),new rd(s)};jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=rx(s),t=t===null?null:t.stateNode,t};jt.flushSync=function(t){return bn(t)};jt.hydrate=function(t,s,n){if(!ci(s))throw Error(re(200));return di(null,t,s,!0,n)};jt.hydrateRoot=function(t,s,n){if(!ad(t))throw Error(re(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",i=$h;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),s=Ih(s,null,t,1,n??null,a,!1,l,i),t[gs]=s.current,ra(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[n,a]:s.mutableSourceEagerHydrationData.push(n,a);return new oi(s)};jt.render=function(t,s,n){if(!ci(s))throw Error(re(200));return di(null,t,s,!1,n)};jt.unmountComponentAtNode=function(t){if(!ci(t))throw Error(re(40));return t._reactRootContainer?(bn(function(){di(null,null,t,!1,function(){t._reactRootContainer=null,t[gs]=null})}),!0):!1};jt.unstable_batchedUpdates=Kc;jt.unstable_renderSubtreeIntoContainer=function(t,s,n,r){if(!ci(n))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return di(t,s,n,!1,r)};jt.version="18.3.1-next-f1338f8080-20240426";function Oh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Oh)}catch(t){console.error(t)}}Oh(),Om.exports=jt;var Un=Om.exports,Fh,Lu=Un;Fh=Lu.createRoot,Lu.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xa(){return xa=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xa.apply(this,arguments)}var zs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zs||(zs={}));const Ru="popstate";function w0(t){t===void 0&&(t={});function s(r,a){let{pathname:l,search:i,hash:o}=r.location;return tc("",{pathname:l,search:i,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:$l(a)}return k0(s,n,null,t)}function Ee(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function ld(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function S0(){return Math.random().toString(36).substr(2,8)}function Iu(t,s){return{usr:t.state,key:t.key,idx:s}}function tc(t,s,n,r){return n===void 0&&(n=null),xa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?ur(s):s,{state:n,key:s&&s.key||r||S0()})}function $l(t){let{pathname:s="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(s+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function ur(t){let s={};if(t){let n=t.indexOf("#");n>=0&&(s.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(s.search=t.substr(r),t=t.substr(0,r)),t&&(s.pathname=t)}return s}function k0(t,s,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,i=a.history,o=zs.Pop,d=null,u=x();u==null&&(u=0,i.replaceState(xa({},i.state,{idx:u}),""));function x(){return(i.state||{idx:null}).idx}function m(){o=zs.Pop;let A=x(),b=A==null?null:A-u;u=A,d&&d({action:o,location:j.location,delta:b})}function h(A,b){o=zs.Push;let p=tc(j.location,A,b);u=x()+1;let v=Iu(p,u),y=j.createHref(p);try{i.pushState(v,"",y)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(y)}l&&d&&d({action:o,location:j.location,delta:1})}function g(A,b){o=zs.Replace;let p=tc(j.location,A,b);u=x();let v=Iu(p,u),y=j.createHref(p);i.replaceState(v,"",y),l&&d&&d({action:o,location:j.location,delta:0})}function w(A){let b=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof A=="string"?A:$l(A);return p=p.replace(/ $/,"%20"),Ee(b,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,b)}let j={get action(){return o},get location(){return t(a,i)},listen(A){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Ru,m),d=A,()=>{a.removeEventListener(Ru,m),d=null}},createHref(A){return s(a,A)},createURL:w,encodeLocation(A){let b=w(A);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:g,go(A){return i.go(A)}};return j}var $u;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($u||($u={}));function C0(t,s,n){return n===void 0&&(n="/"),A0(t,s,n)}function A0(t,s,n,r){let a=typeof s=="string"?ur(s):s,l=lr(a.pathname||"/",n);if(l==null)return null;let i=_h(t);D0(i);let o=null;for(let d=0;o==null&&d<i.length;++d){let u=_0(l);o=O0(i[d],u)}return o}function _h(t,s,n,r){s===void 0&&(s=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(l,i,o)=>{let d={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};d.relativePath.startsWith("/")&&(Ee(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let u=Js([r,d.relativePath]),x=n.concat(d);l.children&&l.children.length>0&&(Ee(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),_h(l.children,s,x,u)),!(l.path==null&&!l.index)&&s.push({path:u,score:I0(u,l.index),routesMeta:x})};return t.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))a(l,i);else for(let d of zh(l.path))a(l,i,d)}),s}function zh(t){let s=t.split("/");if(s.length===0)return[];let[n,...r]=s,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let i=zh(r.join("/")),o=[];return o.push(...i.map(d=>d===""?l:[l,d].join("/"))),a&&o.push(...i),o.map(d=>t.startsWith("/")&&d===""?"/":d)}function D0(t){t.sort((s,n)=>s.score!==n.score?n.score-s.score:$0(s.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const T0=/^:[\w-]+$/,E0=3,M0=2,P0=1,L0=10,R0=-2,Ou=t=>t==="*";function I0(t,s){let n=t.split("/"),r=n.length;return n.some(Ou)&&(r+=R0),s&&(r+=M0),n.filter(a=>!Ou(a)).reduce((a,l)=>a+(T0.test(l)?E0:l===""?P0:L0),r)}function $0(t,s){return t.length===s.length&&t.slice(0,-1).every((r,a)=>r===s[a])?t[t.length-1]-s[s.length-1]:0}function O0(t,s,n){let{routesMeta:r}=t,a={},l="/",i=[];for(let o=0;o<r.length;++o){let d=r[o],u=o===r.length-1,x=l==="/"?s:s.slice(l.length)||"/",m=sc({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},x),h=d.route;if(!m)return null;Object.assign(a,m.params),i.push({params:a,pathname:Js([l,m.pathname]),pathnameBase:H0(Js([l,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(l=Js([l,m.pathnameBase]))}return i}function sc(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=F0(t.path,t.caseSensitive,t.end),a=s.match(n);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((u,x,m)=>{let{paramName:h,isOptional:g}=x;if(h==="*"){let j=o[m]||"";i=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const w=o[m];return g&&!w?u[h]=void 0:u[h]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:i,pattern:t}}function F0(t,s,n){s===void 0&&(s=!1),n===void 0&&(n=!0),ld(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,d)=>(r.push({paramName:o,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),r]}function _0(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return ld(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function lr(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let n=s.endsWith("/")?s.length-1:s.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const z0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B0=t=>z0.test(t);function U0(t,s){s===void 0&&(s="/");let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?ur(t):t,l;if(n)if(B0(n))l=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),ld(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?l=Fu(n.substring(1),"/"):l=Fu(n,s)}else l=s;return{pathname:l,search:V0(r),hash:G0(a)}}function Fu(t,s){let n=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Xi(t,s,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function W0(t){return t.filter((s,n)=>n===0||s.route.path&&s.route.path.length>0)}function id(t,s){let n=W0(t);return s?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function od(t,s,n,r){r===void 0&&(r=!1);let a;typeof t=="string"?a=ur(t):(a=xa({},t),Ee(!a.pathname||!a.pathname.includes("?"),Xi("?","pathname","search",a)),Ee(!a.pathname||!a.pathname.includes("#"),Xi("#","pathname","hash",a)),Ee(!a.search||!a.search.includes("#"),Xi("#","search","hash",a)));let l=t===""||a.pathname==="",i=l?"/":a.pathname,o;if(i==null)o=n;else{let m=s.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}o=m>=0?s[m]:"/"}let d=U0(a,o),u=i&&i!=="/"&&i.endsWith("/"),x=(l||i===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(u||x)&&(d.pathname+="/"),d}const Js=t=>t.join("/").replace(/\/\/+/g,"/"),H0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),V0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,G0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Y0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Bh=["post","put","patch","delete"];new Set(Bh);const q0=["get",...Bh];new Set(q0);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ha(){return ha=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ha.apply(this,arguments)}const ui=c.createContext(null),Uh=c.createContext(null),js=c.createContext(null),mi=c.createContext(null),Ns=c.createContext({outlet:null,matches:[],isDataRoute:!1}),Wh=c.createContext(null);function J0(t,s){let{relative:n}=s===void 0?{}:s;mr()||Ee(!1);let{basename:r,navigator:a}=c.useContext(js),{hash:l,pathname:i,search:o}=xi(t,{relative:n}),d=i;return r!=="/"&&(d=i==="/"?r:Js([r,i])),a.createHref({pathname:d,search:o,hash:l})}function mr(){return c.useContext(mi)!=null}function rn(){return mr()||Ee(!1),c.useContext(mi).location}function Hh(t){c.useContext(js).static||c.useLayoutEffect(t)}function Sn(){let{isDataRoute:t}=c.useContext(Ns);return t?dy():Q0()}function Q0(){mr()||Ee(!1);let t=c.useContext(ui),{basename:s,future:n,navigator:r}=c.useContext(js),{matches:a}=c.useContext(Ns),{pathname:l}=rn(),i=JSON.stringify(id(a,n.v7_relativeSplatPath)),o=c.useRef(!1);return Hh(()=>{o.current=!0}),c.useCallback(function(u,x){if(x===void 0&&(x={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let m=od(u,JSON.parse(i),l,x.relative==="path");t==null&&s!=="/"&&(m.pathname=m.pathname==="/"?s:Js([s,m.pathname])),(x.replace?r.replace:r.push)(m,x.state,x)},[s,r,i,l,t])}const X0=c.createContext(null);function K0(t){let s=c.useContext(Ns).outlet;return s&&c.createElement(X0.Provider,{value:t},s)}function xi(t,s){let{relative:n}=s===void 0?{}:s,{future:r}=c.useContext(js),{matches:a}=c.useContext(Ns),{pathname:l}=rn(),i=JSON.stringify(id(a,r.v7_relativeSplatPath));return c.useMemo(()=>od(t,JSON.parse(i),l,n==="path"),[t,i,l,n])}function Z0(t,s){return ey(t,s)}function ey(t,s,n,r){mr()||Ee(!1);let{navigator:a}=c.useContext(js),{matches:l}=c.useContext(Ns),i=l[l.length-1],o=i?i.params:{};i&&i.pathname;let d=i?i.pathnameBase:"/";i&&i.route;let u=rn(),x;if(s){var m;let A=typeof s=="string"?ur(s):s;d==="/"||(m=A.pathname)!=null&&m.startsWith(d)||Ee(!1),x=A}else x=u;let h=x.pathname||"/",g=h;if(d!=="/"){let A=d.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(A.length).join("/")}let w=C0(t,{pathname:g}),j=ay(w&&w.map(A=>Object.assign({},A,{params:Object.assign({},o,A.params),pathname:Js([d,a.encodeLocation?a.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?d:Js([d,a.encodeLocation?a.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),l,n,r);return s&&j?c.createElement(mi.Provider,{value:{location:ha({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:zs.Pop}},j):j}function ty(){let t=cy(),s=Y0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},s),n?c.createElement("pre",{style:a},n):null,null)}const sy=c.createElement(ty,null);class ny extends c.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,n){return n.location!==s.location||n.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:n.error,location:n.location,revalidation:s.revalidation||n.revalidation}}componentDidCatch(s,n){console.error("React Router caught the following error during render",s,n)}render(){return this.state.error!==void 0?c.createElement(Ns.Provider,{value:this.props.routeContext},c.createElement(Wh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ry(t){let{routeContext:s,match:n,children:r}=t,a=c.useContext(ui);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),c.createElement(Ns.Provider,{value:s},r)}function ay(t,s,n,r){var a;if(s===void 0&&(s=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&s.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=(a=n)==null?void 0:a.errors;if(o!=null){let x=i.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);x>=0||Ee(!1),i=i.slice(0,Math.min(i.length,x+1))}let d=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let x=0;x<i.length;x++){let m=i[x];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=x),m.route.id){let{loaderData:h,errors:g}=n,w=m.route.loader&&h[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||w){d=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((x,m,h)=>{let g,w=!1,j=null,A=null;n&&(g=o&&m.route.id?o[m.route.id]:void 0,j=m.route.errorElement||sy,d&&(u<0&&h===0?(uy("route-fallback"),w=!0,A=null):u===h&&(w=!0,A=m.route.hydrateFallbackElement||null)));let b=s.concat(i.slice(0,h+1)),p=()=>{let v;return g?v=j:w?v=A:m.route.Component?v=c.createElement(m.route.Component,null):m.route.element?v=m.route.element:v=x,c.createElement(ry,{match:m,routeContext:{outlet:x,matches:b,isDataRoute:n!=null},children:v})};return n&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?c.createElement(ny,{location:n.location,revalidation:n.revalidation,component:j,error:g,children:p(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):p()},null)}var Vh=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Vh||{}),Gh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Gh||{});function ly(t){let s=c.useContext(ui);return s||Ee(!1),s}function iy(t){let s=c.useContext(Uh);return s||Ee(!1),s}function oy(t){let s=c.useContext(Ns);return s||Ee(!1),s}function Yh(t){let s=oy(),n=s.matches[s.matches.length-1];return n.route.id||Ee(!1),n.route.id}function cy(){var t;let s=c.useContext(Wh),n=iy(),r=Yh();return s!==void 0?s:(t=n.errors)==null?void 0:t[r]}function dy(){let{router:t}=ly(Vh.UseNavigateStable),s=Yh(Gh.UseNavigateStable),n=c.useRef(!1);return Hh(()=>{n.current=!0}),c.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,ha({fromRouteId:s},l)))},[t,s])}const _u={};function uy(t,s,n){_u[t]||(_u[t]=!0)}function my(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function pa(t){let{to:s,replace:n,state:r,relative:a}=t;mr()||Ee(!1);let{future:l,static:i}=c.useContext(js),{matches:o}=c.useContext(Ns),{pathname:d}=rn(),u=Sn(),x=od(s,id(o,l.v7_relativeSplatPath),d,a==="path"),m=JSON.stringify(x);return c.useEffect(()=>u(JSON.parse(m),{replace:n,state:r,relative:a}),[u,m,a,n,r]),null}function cd(t){return K0(t.context)}function ie(t){Ee(!1)}function xy(t){let{basename:s="/",children:n=null,location:r,navigationType:a=zs.Pop,navigator:l,static:i=!1,future:o}=t;mr()&&Ee(!1);let d=s.replace(/^\/*/,"/"),u=c.useMemo(()=>({basename:d,navigator:l,static:i,future:ha({v7_relativeSplatPath:!1},o)}),[d,o,l,i]);typeof r=="string"&&(r=ur(r));let{pathname:x="/",search:m="",hash:h="",state:g=null,key:w="default"}=r,j=c.useMemo(()=>{let A=lr(x,d);return A==null?null:{location:{pathname:A,search:m,hash:h,state:g,key:w},navigationType:a}},[d,x,m,h,g,w,a]);return j==null?null:c.createElement(js.Provider,{value:u},c.createElement(mi.Provider,{children:n,value:j}))}function qh(t){let{children:s,location:n}=t;return Z0(nc(s),n)}new Promise(()=>{});function nc(t,s){s===void 0&&(s=[]);let n=[];return c.Children.forEach(t,(r,a)=>{if(!c.isValidElement(r))return;let l=[...s,a];if(r.type===c.Fragment){n.push.apply(n,nc(r.props.children,l));return}r.type!==ie&&Ee(!1),!r.props.index||!r.props.children||Ee(!1);let i={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=nc(r.props.children,l)),n.push(i)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ol(){return Ol=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ol.apply(this,arguments)}function Jh(t,s){if(t==null)return{};var n={},r=Object.keys(t),a,l;for(l=0;l<r.length;l++)a=r[l],!(s.indexOf(a)>=0)&&(n[a]=t[a]);return n}function hy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function py(t,s){return t.button===0&&(!s||s==="_self")&&!hy(t)}const fy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gy=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],yy="6";try{window.__reactRouterVersion=yy}catch{}const vy=c.createContext({isTransitioning:!1}),by="startTransition",zu=mf[by];function jy(t){let{basename:s,children:n,future:r,window:a}=t,l=c.useRef();l.current==null&&(l.current=w0({window:a,v5Compat:!0}));let i=l.current,[o,d]=c.useState({action:i.action,location:i.location}),{v7_startTransition:u}=r||{},x=c.useCallback(m=>{u&&zu?zu(()=>d(m)):d(m)},[d,u]);return c.useLayoutEffect(()=>i.listen(x),[i,x]),c.useEffect(()=>my(r),[r]),c.createElement(xy,{basename:s,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const Ny=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qs=c.forwardRef(function(s,n){let{onClick:r,relative:a,reloadDocument:l,replace:i,state:o,target:d,to:u,preventScrollReset:x,viewTransition:m}=s,h=Jh(s,fy),{basename:g}=c.useContext(js),w,j=!1;if(typeof u=="string"&&wy.test(u)&&(w=u,Ny))try{let v=new URL(window.location.href),y=u.startsWith("//")?new URL(v.protocol+u):new URL(u),N=lr(y.pathname,g);y.origin===v.origin&&N!=null?u=N+y.search+y.hash:j=!0}catch{}let A=J0(u,{relative:a}),b=Cy(u,{replace:i,state:o,target:d,preventScrollReset:x,relative:a,viewTransition:m});function p(v){r&&r(v),v.defaultPrevented||b(v)}return c.createElement("a",Ol({},h,{href:w||A,onClick:j||l?r:p,ref:n,target:d}))}),Sy=c.forwardRef(function(s,n){let{"aria-current":r="page",caseSensitive:a=!1,className:l="",end:i=!1,style:o,to:d,viewTransition:u,children:x}=s,m=Jh(s,gy),h=xi(d,{relative:m.relative}),g=rn(),w=c.useContext(Uh),{navigator:j,basename:A}=c.useContext(js),b=w!=null&&Ay(h)&&u===!0,p=j.encodeLocation?j.encodeLocation(h).pathname:h.pathname,v=g.pathname,y=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;a||(v=v.toLowerCase(),y=y?y.toLowerCase():null,p=p.toLowerCase()),y&&A&&(y=lr(y,A)||y);const N=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let C=v===p||!i&&v.startsWith(p)&&v.charAt(N)==="/",E=y!=null&&(y===p||!i&&y.startsWith(p)&&y.charAt(p.length)==="/"),k={isActive:C,isPending:E,isTransitioning:b},O=C?r:void 0,U;typeof l=="function"?U=l(k):U=[l,C?"active":null,E?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let B=typeof o=="function"?o(k):o;return c.createElement(Qs,Ol({},m,{"aria-current":O,className:U,ref:n,style:B,to:d,viewTransition:u}),typeof x=="function"?x(k):x)});var rc;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(rc||(rc={}));var Bu;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Bu||(Bu={}));function ky(t){let s=c.useContext(ui);return s||Ee(!1),s}function Cy(t,s){let{target:n,replace:r,state:a,preventScrollReset:l,relative:i,viewTransition:o}=s===void 0?{}:s,d=Sn(),u=rn(),x=xi(t,{relative:i});return c.useCallback(m=>{if(py(m,n)){m.preventDefault();let h=r!==void 0?r:$l(u)===$l(x);d(t,{replace:h,state:a,preventScrollReset:l,relative:i,viewTransition:o})}},[u,d,x,r,a,n,t,l,i,o])}function Ay(t,s){s===void 0&&(s={});let n=c.useContext(vy);n==null&&Ee(!1);let{basename:r}=ky(rc.useViewTransitionState),a=xi(t,{relative:s.relative});if(!n.isTransitioning)return!1;let l=lr(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=lr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return sc(a.pathname,i)!=null||sc(a.pathname,l)!=null}const J=()=>(console.log("[API] Production build - using production API"),"http://31.97.228.226:5000");async function Q(t,s={}){const n=localStorage.getItem("auth_token"),r={...s.headers};n&&(r.Authorization=`Bearer ${n}`),console.log("[API] Fetching:",t);try{const a=await fetch(t,{...s,credentials:"include",headers:r});return console.log("[API] Response status:",a.status,"for",t),a}catch(a){throw console.error("[API] Fetch FAILED:",a.message,"for",t),a}}async function X(t,s){if(!t.ok){let r={};try{r=await t.json()}catch{}const a=(r==null?void 0:r.message)||(r==null?void 0:r.code)||`${s} (${t.status})`;throw new Error(a)}let n={};try{n=await t.json()}catch{}return n}function Wt(t){try{return new Intl.NumberFormat("bn-BD",{style:"currency",currency:"BDT",maximumFractionDigits:0}).format(t||0)}catch{return`${Number(t||0).toLocaleString("bn-BD")}`}}function Ce(t){try{return new Intl.NumberFormat("en-US",{style:"currency",currency:"BDT",maximumFractionDigits:0}).format(t||0)}catch{return`${Number(t||0).toLocaleString("en-US")}`}}function Uu(t){const s=t?new Date(t):new Date,n=String(s.getDate()).padStart(2,"0"),r=String(s.getMonth()+1).padStart(2,"0"),a=s.getFullYear();return`${n}.${r}.${a}`}const _={_normalizeDate(t){if(!t)return"";if(/^\d{4}-\d{2}-\d{2}/.test(t))return t.slice(0,10);const s=/^(\d{2})\/(\d{2})\/(\d{4})$/.exec(t);if(s)return`${s[3]}-${s[2]}-${s[1]}`;const n=new Date(t);if(!isNaN(n)){const r=String(n.getDate()).padStart(2,"0"),a=String(n.getMonth()+1).padStart(2,"0");return`${n.getFullYear()}-${a}-${r}`}return t},async login(t,s){const n=await Q(`${J()}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:s})}),r=await X(n,"Login failed");if(!r||typeof r!="object")throw new Error("Invalid login response");return r},async me(){const t=await Q(`${J()}/api/auth/me`),s=await X(t,"Auth check failed");if(!s||typeof s!="object")throw new Error("Invalid /me response");return s},async logout(){const t=await Q(`${J()}/api/auth/logout`,{method:"POST"});return X(t,"Logout failed")},async updateMe(t){const s=await Q(`${J()}/api/auth/me`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await X(s,"Update failed");if(!n||typeof n!="object")throw new Error("Invalid update response");return n},async listUsers(){const t=await Q(`${J()}/api/users`);return X(t,"Load users failed")},async listUsersPublic(){const t=await Q(`${J()}/api/users/list`,{credentials:"include"});return X(t,"Load public users failed")},async listAdmissionUsers(){const t=await Q(`${J()}/api/users/admission`,{credentials:"include"});return X(t,"Load admission users failed")},async createUser(t){const s=await Q(`${J()}/api/users`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create user failed")},async updateUser(t,s){const n=await Q(`${J()}/api/users/${t}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update user failed")},async deleteUser(t){const s=await Q(`${J()}/api/users/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete user failed")},async reorderUsers(t){const s=await Q(`${J()}/api/users/reorder`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({orders:t})});return X(s,"Reorder users failed")},async listAllTasks(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/tasks${s}`,{credentials:"include"});return X(n,"Load tasks failed")},async listMyTasks(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/tasks/my${s}`,{credentials:"include"});return X(n,"Load my tasks failed")},async assignTask(t){const s=await Q(`${J()}/api/tasks/assign`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Assign task failed")},async addSelfTask(t){const s=await Q(`${J()}/api/tasks/self`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Add self task failed")},async updateTaskStatus(t,s){const n=await Q(`${J()}/api/tasks/${t}/status`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})});return X(n,"Update task status failed")},async updateTask(t,s){const n=await Q(`${J()}/api/tasks/${t}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update task failed")},async deleteTask(t){const s=await Q(`${J()}/api/tasks/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete task failed")},async addTaskComment(t,s){const n=await Q(`${J()}/api/tasks/${t}/comments`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Add comment failed")},async addTaskAttachment(t,s){const n=await Q(`${J()}/api/tasks/${t}/attachments`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Add attachment failed")},async updateChecklistItem(t,s,n){const r=await Q(`${J()}/api/tasks/${t}/checklist/${s}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({completed:n})});return X(r,"Update checklist failed")},async updateBoardPosition(t,s){const n=await Q(`${J()}/api/tasks/${t}/board-position`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update board position failed")},async listCourses(){const t=await Q(`${J()}/api/courses`,{credentials:"include"});return X(t,"Load courses failed")},async createCourse(t){const s=await Q(`${J()}/api/courses`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create course failed")},async updateCourse(t,s){const n=await Q(`${J()}/api/courses/${t}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update course failed")},async deleteCourse(t){const s=await Q(`${J()}/api/courses/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete course failed")},async listLeads(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/leads${s}`,{credentials:"include"});return X(n,"Load leads failed")},async getTodayAssignments(){const t=await Q(`${J()}/api/leads/today-assignments`,{credentials:"include"});return X(t,"Load today assignments failed")},async getLeadHistory(t){const s=await Q(`${J()}/api/leads/${t}/history`,{credentials:"include"});return X(s,"Load lead history failed")},async assignLead(t,s){const n=await Q(`${J()}/api/leads/${t}/assign`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignedTo:s})});return X(n,"Assign lead failed")},async bulkAssignLeads(t,s){const n=await Q(`${J()}/api/leads/bulk-assign`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadIds:t,assignedTo:s})});return X(n,"Bulk assign failed")},async createLead(t){const s=await Q(`${J()}/api/leads`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create lead failed")},async bulkUploadLeads(t){const s=await Q(`${J()}/api/leads/bulk`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({csv:t})});return X(s,"Bulk upload failed")},async listAdmissionLeads(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/admission/leads${s}`,{credentials:"include"});return X(n,"Load admission leads failed")},async updateLeadStatus(t,s,n,r,a,l){const i={status:s};n!=null&&(i.notes=n),r!=null&&(i.courseId=r),a!=null&&(i.batchId=a),l!=null&&l!==""&&(i.nextFollowUpDate=l);const o=await Q(`${J()}/api/admission/leads/${t}/status`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});return X(o,"Update lead status failed")},async listAdmissionFees(){const t=await Q(`${J()}/api/admission/fees`,{credentials:"include"});return X(t,"Load fees failed")},async createAdmissionFee(t){const s=await Q(`${J()}/api/admission/fees`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create fee failed")},async getAdmissionFollowUpNotifications(){const t=await Q(`${J()}/api/admission/follow-up-notifications`,{credentials:"include"});return X(t,"Load follow-up notifications failed")},async getAdmissionReports(t,s,n){const r=new URLSearchParams;t&&r.append("userId",t),s&&r.append("from",s),n&&r.append("to",n);const a=r.toString()?`?${r.toString()}`:"",l=await Q(`${J()}/api/admission/reports${a}`,{credentials:"include"});return X(l,"Load admission reports failed")},async listFeesForApproval(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/accounting/fees${s}`,{credentials:"include"});return X(n,"Load fees failed")},async approveFee(t){const s=await Q(`${J()}/api/accounting/fees/${t}/approve`,{method:"PATCH",credentials:"include"});return X(s,"Approve failed")},async rejectFee(t){const s=await Q(`${J()}/api/accounting/fees/${t}/reject`,{method:"PATCH",credentials:"include"});return X(s,"Reject failed")},async listIncome(){const t=await Q(`${J()}/api/accounting/income`,{credentials:"include"});return X(t,"Load income failed")},async addIncome(t){const s=await Q(`${J()}/api/accounting/income`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Add income failed")},async listExpenses(){const t=await Q(`${J()}/api/accounting/expense`,{credentials:"include"});return X(t,"Load expenses failed")},async addExpense(t){const s=await Q(`${J()}/api/accounting/expense`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Add expense failed")},async deleteExpense(t){const s=await Q(`${J()}/api/accounting/expense/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete expense failed")},async getDueCollections(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/accounting/due-collections${s}`,{credentials:"include"});return X(n,"Load due collections failed")},async approveDueCollection(t,s){const n=await Q(`${J()}/api/accounting/due-collections/${t}/approve`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewNote:s||""})});return X(n,"Approve due collection failed")},async rejectDueCollection(t,s){const n=await Q(`${J()}/api/accounting/due-collections/${t}/reject`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewNote:s||""})});return X(n,"Reject due collection failed")},async accountingSummary(t,s){const n=new URLSearchParams;t&&n.set("from",t),s&&n.set("to",s);const r=n.toString()?`?${n.toString()}`:"",a=await Q(`${J()}/api/accounting/summary${r}`,{credentials:"include"});return X(a,"Load summary failed")},async getRecruitmentStats(){const t=await Q(`${J()}/api/recruitment/stats`,{credentials:"include"});return X(t,"Load recruitment stats failed")},async getRecruitmentSummary(){return this.getRecruitmentStats()},async listEmployers(){const t=await Q(`${J()}/api/recruitment/employers`,{credentials:"include"});return X(t,"Load employers failed")},async createEmployer(t){const s=await Q(`${J()}/api/recruitment/employers`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create employer failed")},async updateEmployer(t,s){const n=await Q(`${J()}/api/recruitment/employers/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update employer failed")},async deleteEmployer(t){const s=await Q(`${J()}/api/recruitment/employers/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete employer failed")},async listJobs(){const t=await Q(`${J()}/api/recruitment/jobs`,{credentials:"include"});return X(t,"Load jobs failed")},async createJob(t){const s=await Q(`${J()}/api/recruitment/jobs`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create job failed")},async updateJob(t,s){const n=await Q(`${J()}/api/recruitment/jobs/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update job failed")},async deleteJob(t){const s=await Q(`${J()}/api/recruitment/jobs/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete job failed")},async listCandidates(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/recruitment/candidates${s}`,{credentials:"include"});return X(n,"Load candidates failed")},async createCandidate(t){const s=await Q(`${J()}/api/recruitment/candidates`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create candidate failed")},async updateCandidate(t,s){const n=await Q(`${J()}/api/recruitment/candidates/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update candidate failed")},async deleteCandidate(t){const s=await Q(`${J()}/api/recruitment/candidates/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete candidate failed")},async recruitCandidate(t,s){const n=await Q(`${J()}/api/recruitment/candidates/${t}/recruit`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Recruit candidate failed")},async listRecruited(){return this.listCandidates("recruited")},async listRecIncome(){const t=await Q(`${J()}/api/recruitment/income`,{credentials:"include"});return X(t,"Load recruitment income failed")},async addRecIncome(t){const s={...t,date:this._normalizeDate(t==null?void 0:t.date)},n=await Q(`${J()}/api/recruitment/income`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Add recruitment income failed")},async approveRecIncome(t){const s=await Q(`${J()}/api/recruitment/income/${t}/approve`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});return X(s,"Approve recruitment income failed")},async rejectRecIncome(t,s){const n=await Q(`${J()}/api/recruitment/income/${t}/reject`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:s})});return X(n,"Reject recruitment income failed")},async deleteRecIncome(t){const s=await Q(`${J()}/api/recruitment/income/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete recruitment income failed")},async updateRecIncome(){throw new Error("updateRecIncome is not supported by the backend (use add/delete).")},async listRecExpense(){const t=await Q(`${J()}/api/recruitment/expenses`,{credentials:"include"});return X(t,"Load recruitment expenses failed")},async addRecExpense(t){const s={...t,date:this._normalizeDate(t==null?void 0:t.date)},n=await Q(`${J()}/api/recruitment/expenses`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Add recruitment expense failed")},async deleteRecExpense(t){const s=await Q(`${J()}/api/recruitment/expenses/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete recruitment expense failed")},async updateRecExpense(){throw new Error("updateRecExpense is not supported by the backend (use add/delete).")},async listDMCosts(t,s){const n=new URLSearchParams;t&&n.set("date",this._normalizeDate(t)),s&&n.set("channel",s);const r=n.toString()?`?${n.toString()}`:"",a=await Q(`${J()}/api/dm/expense${r}`,{credentials:"include"});return X(a,"Load DM costs failed")},async addDMCost(t){const s={...t,date:this._normalizeDate(t==null?void 0:t.date)},n=await Q(`${J()}/api/dm/expense`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Add DM cost failed")},async deleteDMCost(t){const s=await Q(`${J()}/api/dm/expense/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete DM cost failed")},async listSocial(t){const s=t?`?date=${encodeURIComponent(this._normalizeDate(t))}`:"";let n=await Q(`${J()}/api/dm/social${s}`,{credentials:"include"});return!n.ok&&n.status===404&&(n=await Q(`${J()}/api/dm/social-metrics${s}`,{credentials:"include"})),X(n,"Load social metrics failed")},async addSocial(t){const s={...t};s.date&&delete s.date;const n={metrics:s};let r=await Q(`${J()}/api/dm/social`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return!r.ok&&r.status===404&&(r=await Q(`${J()}/api/dm/social-metrics`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})),X(r,"Add social metrics failed")},async deleteSocial(t){let s=await Q(`${J()}/api/dm/social/${t}`,{method:"DELETE",credentials:"include"});return!s.ok&&s.status===404&&(s=await Q(`${J()}/api/dm/social-metrics/${t}`,{method:"DELETE",credentials:"include"})),X(s,"Delete social metrics failed")},async listSEO(t){const s=t?`?date=${encodeURIComponent(this._normalizeDate(t))}`:"",n=await Q(`${J()}/api/dm/seo${s}`,{credentials:"include"});return X(n,"Load SEO reports failed")},async createSEO(t){const s={...t,date:this._normalizeDate(t==null?void 0:t.date)},n=await Q(`${J()}/api/dm/seo`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Create SEO report failed")},async deleteSEO(t){const s=await Q(`${J()}/api/dm/seo/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete SEO report failed")},async addEmployer(t){return this.createEmployer(t)},async editEmployer(t,s){return this.updateEmployer(t,s)},async removeEmployer(t){return this.deleteEmployer(t)},async addJob(t){return this.createJob(t)},async editJob(t,s){return this.updateJob(t,s)},async removeJob(t){return this.deleteJob(t)},async addCandidate(t){return this.createCandidate(t)},async editCandidate(t,s){return this.updateCandidate(t,s)},async removeCandidate(t){return this.deleteCandidate(t)},async removeRecIncome(t){return this.deleteRecIncome(t)},async removeRecExpense(t){return this.deleteRecExpense(t)},async createDMCost(t){return this.addDMCost(t)},async createSocial(t){return this.addSocial(t)},async updateSocial(t){return this.addSocial(t)},async mgStats(){const t=await Q(`${J()}/api/mg/stats`,{credentials:"include"});return X(t,"Load MG stats failed")},async listMGWorks(t={}){const s=new URLSearchParams;t.date&&s.set("date",t.date),t.status&&s.set("status",t.status);const n=s.toString()?`?${s.toString()}`:"",r=await Q(`${J()}/api/mg/works${n}`,{credentials:"include"});return X(r,"Load MG works failed")},async createMGWork(t){const s=await Q(`${J()}/api/mg/works`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create MG work failed")},async updateMGWork(t,s){const n=await Q(`${J()}/api/mg/works/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update MG work failed")},async deleteMGWork(t){const s=await Q(`${J()}/api/mg/works/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete MG work failed")},async reportsOverview(t,s){const n=new URLSearchParams;t&&n.set("from",t),s&&n.set("to",s);const r=n.toString()?`?${n.toString()}`:"",a=await Q(`${J()}/api/reports/overview${r}`,{credentials:"include"});return X(a,"Load consolidated report failed")},async getConversations(){const t=await Q(`${J()}/api/messages/conversations`,{credentials:"include"});return X(t,"Load conversations failed")},async getMessages(t,s={}){const n=new URLSearchParams;s.limit&&n.set("limit",s.limit),s.before&&n.set("before",s.before);const r=n.toString()?`?${n.toString()}`:"",a=await Q(`${J()}/api/messages/${t}${r}`,{credentials:"include"});return X(a,"Load messages failed")},async sendMessage(t){const s=await Q(`${J()}/api/messages/send`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Send message failed")},async markMessagesAsRead(t){const s=await Q(`${J()}/api/messages/${t}/read`,{method:"PATCH",credentials:"include"});return X(s,"Mark messages as read failed")},async deleteMessage(t){const s=await Q(`${J()}/api/messages/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete message failed")},async getUnreadMessageCount(){const t=await Q(`${J()}/api/messages/unread/count`,{credentials:"include"});return X(t,"Get unread count failed")},async setAdmissionTarget(t){const s=await Q(`${J()}/api/admission-targets`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Set admission target failed")},async getAdmissionTargets(t){const s=await Q(`${J()}/api/admission-targets?month=${t}`,{credentials:"include"});return X(s,"Get admission targets failed")},async getAllAdmissionTargets(){const t=await Q(`${J()}/api/admission-targets/all`,{credentials:"include"});return X(t,"Get all admission targets failed")},async deleteAdmissionTarget(t){const s=await Q(`${J()}/api/admission-targets/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete admission target failed")},async setTarget(t){const s=await Q(`${J()}/api/targets`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Set target failed")},async getTargets(t,s,n){let r=`${J()}/api/targets?month=${t}`;s&&(r+=`&targetType=${s}`),n&&(r+=`&assignedTo=${n}`);const a=await Q(r,{credentials:"include"});return X(a,"Get targets failed")},async getAllTargets(){const t=await Q(`${J()}/api/targets/all`,{credentials:"include"});return X(t,"Get all targets failed")},async deleteTarget(t){const s=await Q(`${J()}/api/targets/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete target failed")},async getTeamMembers(t){let s=`${J()}/api/targets/team-members`;t&&(s+=`?role=${t}`);const n=await Q(s,{credentials:"include"});return X(n,"Get team members failed")},async listBatches(t,s){let n=`${J()}/api/batches`;const r=new URLSearchParams;t&&r.append("status",t),s&&r.append("category",s),r.toString()&&(n+=`?${r.toString()}`);const a=await Q(n,{credentials:"include"});return X(a,"Load batches failed")},async getBatch(t){const s=await Q(`${J()}/api/batches/${t}`,{credentials:"include"});return X(s,"Load batch failed")},async getBatchReport(t){const s=await Q(`${J()}/api/batches/${t}/report`,{credentials:"include"});return X(s,"Load batch report failed")},async createBatch(t){const s=await Q(`${J()}/api/batches`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Create batch failed")},async updateBatch(t,s){const n=await Q(`${J()}/api/batches/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update batch failed")},async deleteBatch(t){const s=await Q(`${J()}/api/batches/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete batch failed")},async addStudentToBatch(t,s){const n=await Q(`${J()}/api/batches/${t}/add-student`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:s})});return X(n,"Add student to batch failed")},async getStudentsWithDues(){const t=await Q(`${J()}/api/coordinator/students-with-dues`,{credentials:"include"});return X(t,"Load students with dues failed")},async getPaymentNotifications(){const t=await Q(`${J()}/api/coordinator/payment-notifications`,{credentials:"include"});return X(t,"Load payment notifications failed")},async getStudentHistory(t){const s=await Q(`${J()}/api/coordinator/student-history/${t}`,{credentials:"include"});return X(s,"Load student history failed")},async addFollowUp(t){const s=await Q(`${J()}/api/coordinator/add-follow-up`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Add follow-up failed")},async updatePaymentDate(t,s){const n=await Q(`${J()}/api/coordinator/update-payment-date/${t}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({nextPaymentDate:s})});return X(n,"Update payment date failed")},async getCoordinatorDashboardStats(){const t=await Q(`${J()}/api/coordinator/dashboard-stats`,{credentials:"include"});return X(t,"Load dashboard stats failed")},async updateAdmissionFeePayment(t){const s=await Q(`${J()}/api/coordinator/collect-due`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Collect due payment failed")},async createLeaveApplication(t){const s=await Q(`${J()}/api/leave`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Submit leave application failed")},async getMyLeaveApplications(){const t=await Q(`${J()}/api/leave/my-applications`,{credentials:"include"});return X(t,"Load leave applications failed")},async getAllLeaveApplications(t){const s=t?`?status=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/leave${s}`,{credentials:"include"});return X(n,"Load leave applications failed")},async approveLeaveApplication(t,s){const n=await Q(`${J()}/api/leave/${t}/approve`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewNote:s})});return X(n,"Approve leave failed")},async rejectLeaveApplication(t,s){const n=await Q(`${J()}/api/leave/${t}/reject`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewNote:s})});return X(n,"Reject leave failed")},async getHandoverRequests(){const t=await Q(`${J()}/api/leave/handover-requests`,{credentials:"include"});return X(t,"Load handover requests failed")},async acceptHandover(t,s){const n=await Q(`${J()}/api/leave/${t}/handover/accept`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({handoverNote:s})});return X(n,"Accept handover failed")},async denyHandover(t,s){const n=await Q(`${J()}/api/leave/${t}/handover/deny`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({handoverNote:s})});return X(n,"Deny handover failed")},async updateLeaveApplication(t,s){const n=await Q(`${J()}/api/leave/${t}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update leave application failed")},async deleteLeaveApplication(t){const s=await Q(`${J()}/api/leave/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete leave application failed")},async createTADAApplication(t){const s=await Q(`${J()}/api/tada`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return X(s,"Submit TA/DA application failed")},async getMyTADAApplications(){const t=await Q(`${J()}/api/tada/my-applications`,{credentials:"include"});return X(t,"Load TA/DA applications failed")},async getAdminTADAApplications(t){const s=t?`?adminStatus=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/tada/admin${s}`,{credentials:"include"});return X(n,"Load TA/DA applications failed")},async getAccountantTADAApplications(t){const s=t?`?paymentStatus=${encodeURIComponent(t)}`:"",n=await Q(`${J()}/api/tada/accountant${s}`,{credentials:"include"});return X(n,"Load TA/DA applications failed")},async approveTADAApplication(t,s){const n=await Q(`${J()}/api/tada/${t}/approve`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminReviewNote:s})});return X(n,"Approve TA/DA failed")},async rejectTADAApplication(t,s){const n=await Q(`${J()}/api/tada/${t}/reject`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminReviewNote:s})});return X(n,"Reject TA/DA failed")},async payTADAApplication(t,s){const n=await Q(`${J()}/api/tada/${t}/pay`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentNote:s})});return X(n,"Process payment failed")},async updateTADAApplication(t,s){const n=await Q(`${J()}/api/tada/${t}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return X(n,"Update TA/DA application failed")},async deleteTADAApplication(t){const s=await Q(`${J()}/api/tada/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete TA/DA application failed")},async getNotifications(t,s=50){const n=new URLSearchParams;t!==void 0&&n.append("isRead",t),n.append("limit",s);const r=await Q(`${J()}/api/notifications?${n}`,{credentials:"include"});return X(r,"Load notifications failed")},async getUnreadCount(){const t=await Q(`${J()}/api/notifications/unread-count`,{credentials:"include"});return X(t,"Load unread count failed")},async markNotificationRead(t){const s=await Q(`${J()}/api/notifications/${t}/read`,{method:"PATCH",credentials:"include"});return X(s,"Mark notification read failed")},async markAllNotificationsRead(){const t=await Q(`${J()}/api/notifications/mark-all-read`,{method:"PATCH",credentials:"include"});return X(t,"Mark all notifications read failed")},async deleteNotification(t){const s=await Q(`${J()}/api/notifications/${t}`,{method:"DELETE",credentials:"include"});return X(s,"Delete notification failed")}},Qh=c.createContext(null),xe=()=>c.useContext(Qh);function Dy({children:t}){const[s,n]=c.useState(null),[r,a]=c.useState(!1);c.useEffect(()=>{let d=!0;return _.me().then(u=>{d&&(n((u==null?void 0:u.user)||null),a(!0))}).catch(()=>{d&&a(!0)}),()=>{d=!1}},[]);const l=async(d,u)=>{const x=await _.login(d,u);if(!(x!=null&&x.user))throw new Error("Invalid login response (no user)");return x.token&&localStorage.setItem("auth_token",x.token),n(x.user),x.user},i=async()=>{try{await _.logout()}catch{}localStorage.removeItem("auth_token"),n(null)},o=async d=>{const u=await _.updateMe(d);if(!(u!=null&&u.user))throw new Error("Invalid update response (no user)");return n(u.user),u.user};return e.jsx(Qh.Provider,{value:{user:s,ready:r,login:l,logout:i,updateMe:o},children:t})}function Ty(){const{user:t,ready:s}=xe();return s?t?e.jsx(cd,{}):e.jsx(pa,{to:"/login",replace:!0}):e.jsx("div",{className:"p-6 text-royal",children:"Loading..."})}function St({roles:t=[]}){const{user:s}=xe();return s?t.length&&!t.includes(s.role)?e.jsx(pa,{to:"/",replace:!0}):e.jsx(cd,{}):e.jsx(pa,{to:"/login",replace:!0})}/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xh=(...t)=>t.filter((s,n,r)=>!!s&&r.indexOf(s)===n).join(" ");/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var My={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=c.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:i,...o},d)=>c.createElement("svg",{ref:d,...My,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:Xh("lucide",a),...o},[...i.map(([u,x])=>c.createElement(u,x)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(t,s)=>{const n=c.forwardRef(({className:r,...a},l)=>c.createElement(Py,{ref:l,iconNode:s,className:Xh(`lucide-${Ey(t)}`,r),...a}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=le("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=le("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=le("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=le("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=le("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=le("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=le("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=le("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=le("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=le("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=le("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=le("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=le("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=le("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=le("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=le("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=le("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=le("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=le("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=le("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=le("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=le("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=le("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=le("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=le("Kanban",[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=le("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=le("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=le("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=le("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=le("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=le("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=le("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=le("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=le("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=le("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=le("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=le("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=le("PlaneTakeoff",[["path",{d:"M2 22h20",key:"272qi7"}],["path",{d:"M6.36 17.4 4 17l-2-4 1.1-.55a2 2 0 0 1 1.8 0l.17.1a2 2 0 0 0 1.8 0L8 12 5 6l.9-.45a2 2 0 0 1 2.09.2l4.02 3a2 2 0 0 0 2.1.2l4.19-2.06a2.41 2.41 0 0 1 1.73-.17L21 7a1.4 1.4 0 0 1 .87 1.99l-.38.76c-.23.46-.6.84-1.07 1.08L7.58 17.2a2 2 0 0 1-1.22.18Z",key:"fkigj9"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=le("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=le("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=le("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=le("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=le("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=le("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=le("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=le("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=le("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=le("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=le("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=le("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=le("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);function Ky({onMenuClick:t}){const{user:s,logout:n}=xe(),r=Sn(),[a,l]=c.useState(!1),[i,o]=c.useState([]),[d,u]=c.useState([]),[x,m]=c.useState([]),[h,g]=c.useState([]),[w,j]=c.useState(0),[A,b]=c.useState([]),[p,v]=c.useState(0);c.useEffect(()=>{const S=localStorage.getItem("readNotifications");if(S)try{g(JSON.parse(S))}catch(P){console.error("Failed to parse read notifications:",P)}},[]),c.useEffect(()=>{const S=async()=>{try{const P=await _.getUnreadMessageCount();j(P.count||0)}catch(P){console.error("Failed to load unread messages:",P)}};if(s){S();const P=setInterval(S,10*1e3);return()=>clearInterval(P)}},[s]),c.useEffect(()=>{const S=async()=>{try{const L=((["SuperAdmin","Admin"].includes(s==null?void 0:s.role)?await _.listAllTasks():await _.listMyTasks()).tasks||[]).filter(M=>{if(M.status==="Completed"||!M.dueDate)return!1;const H=new Date,Z=new Date(M.dueDate);return Math.ceil((Z-H)/(1e3*60*60*24))<=3}).sort((M,H)=>new Date(M.dueDate)-new Date(H.dueDate));o(L)}catch(P){console.error("Failed to load urgent tasks:",P)}};if(s){S();const P=setInterval(S,60*1e3);return()=>clearInterval(P)}},[s]),c.useEffect(()=>{const S=async()=>{try{if(["Coordinator","Admin","SuperAdmin"].includes(s==null?void 0:s.role)){const D=(await _.getPaymentNotifications()).notifications||[],$=new Date;$.setHours(0,0,0,0);const L=D.filter(M=>{if(!M.nextPaymentDate)return!1;const H=new Date(M.nextPaymentDate);return H.setHours(0,0,0,0),H<=$}).sort((M,H)=>new Date(M.nextPaymentDate)-new Date(H.nextPaymentDate));u(L)}}catch(P){console.error("Failed to load payment notifications:",P)}};if(s){S();const P=setInterval(S,2*60*1e3);return()=>clearInterval(P)}},[s]),c.useEffect(()=>{const S=async()=>{try{if(["Admission","Admin","SuperAdmin"].includes(s==null?void 0:s.role)){const D=(await _.getAdmissionFollowUpNotifications()).notifications||[],$=new Date;$.setHours(0,0,0,0);const L=D.filter(M=>{if(!M.nextFollowUpDate)return!1;const H=new Date(M.nextFollowUpDate);return H.setHours(0,0,0,0),H<=$}).sort((M,H)=>new Date(M.nextFollowUpDate)-new Date(H.nextFollowUpDate));m(L)}}catch(P){console.error("Failed to load follow-up notifications:",P)}};if(s){S();const P=setInterval(S,2*60*1e3);return()=>clearInterval(P)}},[s]),c.useEffect(()=>{const S=async()=>{var P;try{console.log(" [Topbar] Loading system notifications for user:",s==null?void 0:s.name,s==null?void 0:s.id);const D=await _.getNotifications(!1,20);console.log(" [Topbar] System notifications response:",D),console.log(" [Topbar] Notifications array length:",(P=D.notifications)==null?void 0:P.length),console.log(" [Topbar] Notifications:",JSON.stringify(D.notifications,null,2)),console.log(" [Topbar] Unread count:",D.unreadCount),b(D.notifications||[]),v(D.unreadCount||0)}catch(D){console.error(" [Topbar] Failed to load system notifications:",D),console.error(" [Topbar] Error details:",D.message)}};if(s){S();const P=setInterval(S,30*1e3);return()=>clearInterval(P)}},[s]),c.useEffect(()=>{(()=>{const P=Date.now()-6048e5,D=h.filter($=>$.readAt>P);D.length!==h.length&&(g(D),localStorage.setItem("readNotifications",JSON.stringify(D)))})()},[h]);const y=(S,P)=>{if(!S||P==="Completed")return null;const D=new Date,L=new Date(S)-D,M=Math.ceil(L/(1e3*60*60*24));return M<0?{bg:"bg-red-100",text:"text-red-700",label:"Overdue"}:M<=1?{bg:"bg-red-50",text:"text-red-600",label:M===0?"Due Today":"Due Tomorrow"}:M<=3?{bg:"bg-orange-50",text:"text-orange-600",label:`${M} days left`}:{bg:"bg-gray-50",text:"text-gray-600",label:null}},N={Low:{bg:"bg-blue-100",text:"text-blue-600"},Medium:{bg:"bg-yellow-100",text:"text-yellow-600"},High:{bg:"bg-orange-100",text:"text-orange-600"},Critical:{bg:"bg-red-100",text:"text-red-600"}},C=S=>{const P=[...h.filter(D=>D.taskId!==S._id),{taskId:S._id,readAt:Date.now()}];g(P),localStorage.setItem("readNotifications",JSON.stringify(P)),l(!1),sessionStorage.setItem("openTaskId",S._id),sessionStorage.setItem("openTaskData",JSON.stringify(S)),r("/tasks-board")},E=S=>{const P=[...h.filter(D=>D.paymentId!==S._id),{paymentId:S._id,readAt:Date.now()}];g(P),localStorage.setItem("readNotifications",JSON.stringify(P)),l(!1),sessionStorage.setItem("openPaymentId",S._id),sessionStorage.setItem("openPaymentData",JSON.stringify(S)),r("/coordinator/due-fees")},k=S=>{const P=[...h.filter(D=>D.leadId!==S._id),{leadId:S._id,readAt:Date.now()}];g(P),localStorage.setItem("readNotifications",JSON.stringify(P)),l(!1),r("/admission/pipeline")},O=i.filter(S=>!h.some(P=>P.taskId===S._id)).length,U=d.filter(S=>!h.some(P=>P.paymentId===S._id)).length,B=x.filter(S=>!h.some(P=>P.leadId===S._id)).length,R=O+U+B+p;return e.jsxs("header",{className:"h-16 bg-navy text-white flex items-center justify-between px-4 shadow-soft",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:t,className:"md:hidden p-2 hover:bg-navy/80 rounded-lg transition",children:e.jsx(Hy,{size:20})}),e.jsx("div",{className:"px-2",children:e.jsx("img",{src:"https://primeacademy.org/logo-full.png",alt:"Prime Academy",className:"h-6 md:h-8 object-contain"})})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>r("/messages"),className:"relative p-2 hover:bg-navy/80 rounded-lg transition",title:"Messages",children:[e.jsx(it,{size:20,className:"text-white"}),w>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold animate-pulse",children:w>99?"99+":w})]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>l(!a),className:"relative p-2 hover:bg-navy/80 rounded-lg transition",title:"Notifications",children:[e.jsx(es,{size:20,className:"text-white"}),R>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold animate-pulse",children:R})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border z-50 max-h-[32rem] overflow-y-auto",children:[e.jsxs("div",{className:"p-3 border-b bg-gray-50 flex items-center justify-between sticky top-0",children:[e.jsx("h3",{className:"font-semibold text-navy",children:"Notifications"}),R>0&&e.jsxs("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-1 rounded-full",children:[R," new"]})]}),["Coordinator","Admin","SuperAdmin"].includes(s==null?void 0:s.role)&&d.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-3 py-2 bg-orange-50 border-b border-orange-200",children:e.jsxs("h4",{className:"text-xs font-bold text-orange-700 uppercase flex items-center gap-1",children:[e.jsx(es,{size:12}),"Payment Due (",d.length,")"]})}),e.jsx("div",{className:"divide-y max-h-48 overflow-y-auto",children:d.map(S=>{var $,L;const P=!h.some(M=>M.paymentId===S._id),D=S.isOverdue;return e.jsxs("div",{onClick:()=>E(S),className:`p-3 hover:bg-gray-50 cursor-pointer relative ${P?"bg-orange-50":""}`,children:[P&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-orange-500"}),e.jsx("div",{className:"flex items-start gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:`text-sm ${P?"font-semibold text-navy":"font-medium text-gray-700"}`,children:[($=S.lead)==null?void 0:$.leadId,"  ",(L=S.lead)==null?void 0:L.name]}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:S.courseName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:`text-xs px-2 py-1 rounded inline-flex items-center gap-1 ${D?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:[e.jsx(fe,{size:10}),new Date(S.nextPaymentDate).toLocaleDateString("en-GB")]}),e.jsx("span",{className:`text-xs font-bold ${D?"text-red-600":"text-orange-600"}`,children:D?"OVERDUE":"DUE TODAY"})]}),e.jsxs("p",{className:"text-xs text-orange-700 font-semibold mt-1",children:["Due:  ",S.dueAmount||0]})]})})]},S._id)})})]}),["Admission","Admin","SuperAdmin"].includes(s==null?void 0:s.role)&&x.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-3 py-2 bg-purple-50 border-b border-purple-200",children:e.jsxs("h4",{className:"text-xs font-bold text-purple-700 uppercase flex items-center gap-1",children:[e.jsx(es,{size:12}),"Follow-up Due (",x.length,")"]})}),e.jsx("div",{className:"divide-y max-h-48 overflow-y-auto",children:x.map(S=>{const P=!h.some(L=>L.leadId===S._id),D=S.isOverdue,$=["Admin","SuperAdmin"].includes(s==null?void 0:s.role);return e.jsxs("div",{onClick:()=>k(S),className:`p-3 hover:bg-gray-50 cursor-pointer relative ${P?"bg-purple-50":""}`,children:[P&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-purple-500"}),e.jsx("div",{className:"flex items-start gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("p",{className:`text-sm flex-1 ${P?"font-semibold text-navy":"font-medium text-gray-700"}`,children:[S.leadId,"  ",S.name]}),$&&S.assignedTo&&e.jsxs("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full whitespace-nowrap",children:[" ",S.assignedTo.name]})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:[S.interestedCourse||"No course","  ",S.status]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:`text-xs px-2 py-1 rounded inline-flex items-center gap-1 ${D?"bg-red-100 text-red-700":"bg-purple-100 text-purple-700"}`,children:[e.jsx(fe,{size:10}),new Date(S.nextFollowUpDate).toLocaleDateString("en-GB")]}),e.jsx("span",{className:`text-xs font-bold ${D?"text-red-600":"text-purple-600"}`,children:D?"OVERDUE":"DUE TODAY"})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[S.phone," ",S.email&&` ${S.email}`]})]})})]},S._id)})})]}),i.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-3 py-2 bg-blue-50 border-b border-blue-200",children:e.jsxs("h4",{className:"text-xs font-bold text-blue-700 uppercase flex items-center gap-1",children:[e.jsx(fe,{size:12}),"Urgent Tasks (",i.length,")"]})}),e.jsx("div",{className:"divide-y max-h-48 overflow-y-auto",children:i.map(S=>{var $,L;const P=y(S.dueDate,S.status),D=!h.some(M=>M.taskId===S._id);return e.jsxs("div",{onClick:()=>C(S),className:`p-3 hover:bg-gray-50 cursor-pointer relative ${D?"bg-blue-50":""}`,children:[D&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-blue-500"}),e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm ${D?"font-semibold text-navy":"font-medium text-gray-700"}`,children:S.title}),e.jsxs("div",{className:`text-xs mt-1 px-2 py-1 rounded inline-flex items-center gap-1 ${P==null?void 0:P.bg} ${P==null?void 0:P.text}`,children:[e.jsx(fe,{size:10}),new Date(S.dueDate).toLocaleDateString("en-GB"),(P==null?void 0:P.label)&&` - ${P.label}`]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${($=N[S.priority])==null?void 0:$.bg} ${(L=N[S.priority])==null?void 0:L.text}`,children:S.priority})]})]},S._id)})})]}),A.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-3 py-2 bg-indigo-50 border-b border-indigo-200",children:e.jsxs("h4",{className:"text-xs font-bold text-indigo-700 uppercase flex items-center gap-1",children:[e.jsx(es,{size:12}),"System Notifications (",A.length,")"]})}),e.jsx("div",{className:"divide-y max-h-96 overflow-y-auto",children:A.map(S=>{const P=S.type==="LEAVE_HANDOVER_REQUEST";return e.jsxs("div",{onClick:async()=>{try{P?(console.log(" Handover notification clicked:",S),sessionStorage.setItem("openHandoverRequestId",S.relatedId),sessionStorage.setItem("handoverNotificationId",S._id),l(!1),r("/my-applications")):(await _.markNotificationRead(S._id),l(!1),S.link&&r(S.link));const D=await _.getNotifications(!1,20);b(D.notifications||[]),v(D.unreadCount||0)}catch(D){console.error("Failed to handle notification click:",D)}},className:`p-3 hover:bg-gray-50 cursor-pointer relative ${S.isRead?"":"bg-indigo-50"}`,children:[!S.isRead&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-indigo-500"}),e.jsx("div",{className:"flex items-start gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:`text-sm ${S.isRead?"font-medium text-gray-700":"font-semibold text-navy"}`,children:[S.title,P&&e.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full",children:"Action Required"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:S.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(S.createdAt).toLocaleString("en-GB",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]})})]},S._id)})})]}),i.length===0&&d.length===0&&x.length===0&&A.length===0&&e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(es,{size:32,className:"mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No notifications"})]}),(i.length>0||d.length>0||x.length>0||A.length>0)&&e.jsx("div",{className:"p-3 border-t bg-gray-50 sticky bottom-0",children:e.jsxs("button",{onClick:()=>{l(!1),r("/notifications")},className:"w-full py-2.5 px-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg font-medium hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(es,{size:16}),"See All Notifications"]})})]})]})]}),e.jsx("img",{src:s==null?void 0:s.avatar,alt:"avatar",className:"w-8 h-8 md:w-9 md:h-9 rounded-full border-2 border-gold object-cover"}),e.jsxs("div",{className:"hidden sm:block text-sm leading-tight",children:[e.jsx("div",{className:"font-semibold",children:s==null?void 0:s.name}),e.jsx("div",{className:"opacity-80 text-xs",children:s==null?void 0:s.designation})]}),e.jsxs("a",{href:"/profile",className:"hidden md:inline-flex items-center gap-1 bg-gold text-navy px-3 py-2 rounded-2xl hover:bg-lightgold transition text-sm",children:[e.jsx(ir,{size:16})," Profile"]}),e.jsx("a",{href:"/profile",className:"md:hidden p-2 bg-gold text-navy rounded-full hover:bg-lightgold transition",children:e.jsx(ir,{size:16})}),e.jsxs("button",{onClick:n,className:"hidden md:inline-flex items-center gap-1 bg-white text-navy px-3 py-2 rounded-2xl hover:bg-lightgold transition text-sm",children:[e.jsx(Hu,{size:16})," Logout"]}),e.jsx("button",{onClick:n,className:"md:hidden p-2 bg-white text-navy rounded-full hover:bg-lightgold transition",children:e.jsx(Hu,{size:16})})]})]})}const Gu=({to:t,icon:s,label:n,onClick:r})=>e.jsxs(Sy,{to:t,onClick:r,className:({isActive:a})=>`flex items-center gap-2 px-4 py-2 rounded-xl mx-3 my-1 ${a?"bg-[#e6eeff] text-navy":"text-royal hover:bg-[#f3f6ff]"}`,children:[s,e.jsx("span",{children:n})]});function Zy({isOpen:t,setIsOpen:s}){const{user:n}=xe(),r={SuperAdmin:[{to:"/",label:"Dashboard",icon:e.jsx(Kt,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(it,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Ds,{size:18})},{to:"/admin-task-report",label:"Task Report",icon:e.jsx(gt,{size:18})},{to:"/admin/approvals",label:"Application Approvals",icon:e.jsx(oc,{size:18})},{to:"/employees",label:"Employee ",icon:e.jsx(Ae,{size:18})},{to:"/courses",label:"Courses ",icon:e.jsx(Wn,{size:18})},{to:"/batches",label:"Batches",icon:e.jsx(Ki,{size:18})},{to:"/leads-center-view",label:"Leads Center ",icon:e.jsx(Ge,{size:18})},{to:"/admission/dashboard",label:"Admission Reports",icon:e.jsx(Ge,{size:18})},{to:"/recruitment",label:"Recruitment Reports",icon:e.jsx(Kt,{size:18})},{to:"/accounting/dashboard",label:"Accounts Reports",icon:e.jsx(cs,{size:18})},{to:"/dm/dashboard",label:"Digital Marketing Reports",icon:e.jsx(ps,{size:18})},{to:"/mg/dashboard",label:"Motion Graphics Report",icon:e.jsx(_l,{size:18})}],Admin:[{to:"/",label:"Dashboard",icon:e.jsx(Kt,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(it,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Ms,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Ds,{size:18})},{to:"/admin-task-report",label:"Task Report",icon:e.jsx(gt,{size:18})},{to:"/admin/approvals",label:"Application Approvals",icon:e.jsx(oc,{size:18})},{to:"/employees",label:"Employee",icon:e.jsx(Ae,{size:18})},{to:"/leads-center-view",label:"Leads Center ",icon:e.jsx(Ge,{size:18})},{to:"/courses",label:"Courses ",icon:e.jsx(Wn,{size:18})},{to:"/admission-targets",label:"Targets",icon:e.jsx(Vt,{size:18})},{to:"/batches",label:"Batches",icon:e.jsx(Ki,{size:18})},{to:"/admission/dashboard",label:"Admission Reports",icon:e.jsx(Ge,{size:18})},{to:"/recruitment",label:"Recruitment Reports",icon:e.jsx(Kt,{size:18})},{to:"/accounting/dashboard",label:"Accounts Dashboard",icon:e.jsx(cs,{size:18})},{to:"/dm/dashboard",label:"Digital Marketing Reports",icon:e.jsx(ps,{size:18})},{to:"/mg/dashboard",label:"Motion Graphics Report",icon:e.jsx(_l,{size:18})}],DigitalMarketing:[{to:"/",label:"Dashboard",icon:e.jsx(Kt,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(it,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Ms,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Ds,{size:18})},{to:"/task-report",label:"Task Report",icon:e.jsx(gt,{size:18})},{to:"/courses",label:"Courses",icon:e.jsx(Wn,{size:18})},{to:"/lead-entry",label:"Lead Entry / CSV",icon:e.jsx(Ge,{size:18})},{to:"/leads-center",label:"Leads Center",icon:e.jsx(Ge,{size:18})},{to:"/dm-metrics",label:"Cost / Social / SEO",icon:e.jsx(ps,{size:18})}],Admission:[{to:"/",label:"Dashboard",icon:e.jsx(Kt,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(it,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Ms,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Ds,{size:18})},{to:"/task-report",label:"Task Report",icon:e.jsx(gt,{size:18})},{to:"/courses",label:"Courses",icon:e.jsx(Wn,{size:18})},{to:"/batches",label:"Batches",icon:e.jsx(Ki,{size:18})},{to:"/my-targets",label:"My Targets",icon:e.jsx(Vt,{size:18})},{to:"/admission/assigned",label:"Assigned Lead",icon:e.jsx(Ge,{size:18})},{to:"/admission/counseling",label:"Counseling",icon:e.jsx(Ge,{size:18})},{to:"/admission/follow-up",label:"In Follow-Up",icon:e.jsx(Ge,{size:18})},{to:"/admission/admitted",label:"Admitted",icon:e.jsx(Ge,{size:18})},{to:"/admission/not-admitted",label:"Not Admitted",icon:e.jsx(Ge,{size:18})},{to:"/admission/fees",label:"Admission Fees",icon:e.jsx(Ge,{size:18})}],Accountant:[{to:"/",label:"Dashboard",icon:e.jsx(Kt,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(it,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Ms,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Ds,{size:18})},{to:"/task-report",label:"Task Report",icon:e.jsx(gt,{size:18})},{to:"/accounting/fees",label:"Admission Fees Approval",icon:e.jsx(Ge,{size:18})},{to:"/accounting/due-collections",label:"Due Collection Approval",icon:e.jsx(Ge,{size:18})},{to:"/recruitment/income",label:"Recruitment Income Approval",icon:e.jsx(cs,{size:18})},{to:"/accounting/expense",label:"Expense",icon:e.jsx(Ge,{size:18})},{to:"/accounting/tada-payments",label:"TA/DA Payments",icon:e.jsx($e,{size:18})}],AccountantExtra:[{to:"/employee-accounts/bank",label:"Employee Bank Account",icon:e.jsx(ac,{size:18})},{to:"/employee-accounts/salary",label:"Employee Salary",icon:e.jsx(cs,{size:18})}],Recruitment:[{to:"/",label:"Dashboard",icon:e.jsx(Kt,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(it,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Ms,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Ds,{size:18})},{to:"/task-report",label:"Task Report",icon:e.jsx(gt,{size:18})},{to:"/recruitment",label:"Recruitment",icon:e.jsx(Ae,{size:18})},{to:"/recruitment/candidates",label:"Candidates",icon:e.jsx(Ae,{size:18})},{to:"/recruitment/jobs",label:"Job Positions",icon:e.jsx(Ge,{size:18})},{to:"/recruitment/employers",label:"Employers",icon:e.jsx(Ge,{size:18})},{to:"/recruitment/income",label:"Recruitment Income",icon:e.jsx(cs,{size:18})},{to:"/recruitment/expenses",label:"Recruitment Expense",icon:e.jsx(cs,{size:18})}],MotionGraphics:[{to:"/",label:"Dashboard",icon:e.jsx(Kt,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(it,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Ms,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Ds,{size:18})},{to:"/task-report",label:"Task Report",icon:e.jsx(gt,{size:18})},{to:"/mg/production",label:"MG Production",icon:e.jsx(Ly,{size:18})}],Coordinator:[{to:"/",label:"Dashboard",icon:e.jsx(Kt,{size:18})},{to:"/messages",label:"Messages",icon:e.jsx(it,{size:18})},{to:"/my-applications",label:"My Applications",icon:e.jsx(Ms,{size:18})},{to:"/tasks-board",label:"Task Board",icon:e.jsx(Ds,{size:18})},{to:"/task-report",label:"Task Report",icon:e.jsx(gt,{size:18})},{to:"/admission/fees",label:"Admission Fees Collection",icon:e.jsx(cs,{size:18})},{to:"/coordinator/due-fees",label:"Due Fees Collection",icon:e.jsx(ac,{size:18})},{to:"/coordinator/notifications",label:"Payment Reminders",icon:e.jsx(it,{size:18})}]};let a=r[n==null?void 0:n.role]||[];(n==null?void 0:n.role)==="Accountant"&&Array.isArray(r.AccountantExtra)&&(a=[...a,...r.AccountantExtra]);const l=()=>s&&s(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("aside",{className:"w-72 hidden md:flex bg-white border-r min-h-screen sticky top-0 flex-col",children:[e.jsx("div",{className:"px-4 py-4",children:e.jsx("img",{src:"https://primeacademy.org/logo-full.png",alt:"Prime Academy",className:"w-40 object-contain"})}),e.jsx("nav",{className:"flex-1",children:a.map(i=>e.jsx(Gu,{...i},i.to))})]}),t&&e.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:l}),e.jsxs("aside",{className:"fixed left-0 top-0 h-full w-80 bg-white shadow-xl flex flex-col transform transition-transform",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("img",{src:"https://primeacademy.org/logo-full.png",alt:"Prime Academy",className:"w-32 object-contain"}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(fi,{size:20,className:"text-gray-600"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto",children:a.map(i=>e.jsx(Gu,{...i,onClick:l},i.to))})]})]})]})}function rp(){const{user:t}=xe();if(!["Accountant","Admin","SuperAdmin"].includes(t==null?void 0:t.role))return e.jsx("div",{className:"text-royal",children:"Only Accountant, Admin or SuperAdmin can access this dashboard."});const[s,n]=c.useState({period:"monthly",from:new Date(new Date().getFullYear(),0,1).toISOString().slice(0,10),to:new Date().toISOString().slice(0,10)}),[r,a]=c.useState({totalIncome:0,totalExpense:0,profit:0}),[l,i]=c.useState(null),[o,d]=c.useState([]),[u,x]=c.useState([]),[m,h]=c.useState(!1),[g,w]=c.useState({incomes:[],expenses:[]}),j=async()=>{try{let v,y;if(s.period==="custom")v=s.from,y=s.to;else if(s.period==="lifetime")v=void 0,y=void 0;else{const k=new Date,O=new Date;s.period==="daily"?O.setDate(k.getDate()-1):s.period==="weekly"?O.setDate(k.getDate()-7):s.period==="monthly"?O.setMonth(k.getMonth()-1):s.period==="yearly"&&O.setFullYear(k.getFullYear()-1),v=O.toISOString().slice(0,10),y=k.toISOString().slice(0,10)}const[N,C,E]=await Promise.all([_.accountingSummary(v,y),_.listIncome().catch(()=>({income:[]})),_.listExpenses().catch(()=>({expenses:[]}))]);a(N||{totalIncome:0,totalExpense:0,profit:0}),d(Array.isArray(C)?C:(C==null?void 0:C.income)||[]),x(Array.isArray(E)?E:(E==null?void 0:E.expenses)||[])}catch(v){i(v.message)}};c.useEffect(()=>{j()},[]);const A=rn();c.useEffect(()=>{try{const v=localStorage.getItem("accountHeads");w(v?JSON.parse(v):{incomes:[],expenses:[]})}catch{w({incomes:[],expenses:[]})}try{const v=new URLSearchParams(A.search||"");(v.get("openHeads")||v.get("openHeadsModal"))&&h(!0)}catch{}},[A.search]);const b=(r.totalIncome||0)-(r.totalExpense||0);ev(o,u,s);const p=tv(u);return e.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Accounting Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Financial overview and metrics"})]})}),l&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium",children:l})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("select",{value:s.period,onChange:v=>n(y=>({...y,period:v.target.value})),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom"})]}),s.period==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:s.from,onChange:v=>n(y=>({...y,from:v.target.value})),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"}),e.jsx("span",{className:"text-gray-500 font-medium",children:"to"}),e.jsx("input",{type:"date",value:s.to,onChange:v=>n(y=>({...y,to:v.target.value})),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"})]}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all font-medium shadow-lg",children:"Apply"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"group relative bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Et,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Income"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Ce(r.totalIncome||0)})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-red-500 to-rose-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(np,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Expense"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Ce(r.totalExpense||0)})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx($e,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Profit"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Ce(r.profit||0)})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(cs,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Net Balance"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Ce(b)})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Income by Source"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Revenue distribution breakdown"})]}),e.jsx(Fl,{className:"w-5 h-5 text-gray-400"})]}),e.jsx(qu,{data:[{label:"Admission Fees",value:r.admissionFeesIncome||0,color:"#10b981"},{label:"Recruitment",value:r.recruitmentIncome||0,color:"#3b82f6"},{label:"Due Collections",value:r.dueCollectionIncome||0,color:"#f59e0b"},{label:"Other",value:r.otherIncome||0,color:"#8b5cf6"}].filter(v=>v.value>0)})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Expense by Head"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Distribution breakdown"})]}),e.jsx(Fl,{className:"w-5 h-5 text-gray-400"})]}),e.jsx(qu,{data:p})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>h(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-3xl w-full shadow-2xl transform transition-all",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Account Heads Management"}),e.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsx(Yu,{kind:"incomes",heads:g.incomes,onChange:v=>w(y=>({...y,incomes:v}))}),e.jsx(Yu,{kind:"expenses",heads:g.expenses,onChange:v=>w(y=>({...y,expenses:v}))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-6 py-2 rounded-xl border-2 border-gray-200 hover:bg-gray-50 transition-colors font-medium text-gray-700",children:"Close"}),e.jsx("button",{onClick:()=>{localStorage.setItem("accountHeads",JSON.stringify(g)),h(!1)},className:"px-6 py-2 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 transition-all font-medium shadow-lg hover:shadow-xl",children:"Save Changes"})]})]})})]})}function Yu({kind:t,heads:s=[],onChange:n}){const[r,a]=c.useState(s||[]),[l,i]=c.useState("");c.useEffect(()=>{a(s||[])},[s]);const o=()=>{if(!l.trim())return;const h=[l.trim(),...r];a(h),i(""),n&&n(h)},d=h=>{const g=r.filter((w,j)=>j!==h);a(g),n&&n(g)},u=t==="incomes",x=u?"from-green-50 to-emerald-50":"from-red-50 to-rose-50",m=u?"from-green-600 to-emerald-600":"from-red-600 to-rose-600";return e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:`text-lg font-bold bg-gradient-to-r ${m} bg-clip-text text-transparent`,children:t==="incomes"?"Income Heads":"Expense Heads"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:l,onChange:h=>i(h.target.value),placeholder:u?"New income head":"New expense head",className:"border-2 border-gray-200 rounded-xl px-4 py-2 flex-1 focus:border-blue-500 focus:outline-none transition-colors",onKeyPress:h=>h.key==="Enter"&&o()}),e.jsx("button",{onClick:o,className:`px-4 py-2 bg-gradient-to-r ${m} text-white rounded-xl hover:opacity-90 transition-opacity font-medium shadow-lg`,children:"Add"})]}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:[r.map((h,g)=>e.jsxs("div",{className:`flex items-center justify-between bg-gradient-to-r ${x} rounded-xl px-4 py-3 hover:shadow-md transition-all`,children:[e.jsx("span",{className:"text-gray-800 font-medium",children:h}),e.jsx("button",{onClick:()=>d(g),className:"px-3 py-1 bg-red-100 text-red-600 text-sm rounded-lg hover:bg-red-200 transition-colors font-medium",children:"Remove"})]},h+g)),r.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(cs,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsxs("p",{children:["No ",t==="incomes"?"income":"expense"," heads defined"]})]})]})]})}function ev(t=[],s=[],n){let r,a;if(n.period==="custom")r=new Date(n.from),a=new Date(n.to);else{if(n.period==="lifetime")return[];{const o=new Date;r=new Date,n.period==="daily"?r.setDate(o.getDate()-1):n.period==="weekly"?r.setDate(o.getDate()-7):n.period==="monthly"?r.setMonth(o.getMonth()-1):n.period==="yearly"&&r.setFullYear(o.getFullYear()-1),a=o}}if(!r||!a)return[];const l=[],i=new Date(r);for(;i<=a;){const o=i.toISOString().slice(0,10),d=t.filter(x=>new Date(x.date).toISOString().slice(0,10)===o).reduce((x,m)=>x+(Number(m.amount)||0),0),u=s.filter(x=>new Date(x.date).toISOString().slice(0,10)===o).reduce((x,m)=>x+(Number(m.amount)||0),0);l.push({date:o,income:d,expense:u}),i.setDate(i.getDate()+1)}return l}function tv(t=[]){const s={};return(t||[]).forEach(n=>{const r=n.purpose||n.category||"Other";s[r]=(s[r]||0)+Number(n.amount||0)}),Object.entries(s).map(([n,r])=>({label:n,value:r}))}function qu({data:t}){if(!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-52 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fl,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data available"})]})});const s=t.reduce((u,x)=>u+x.value,0);if(s===0)return e.jsx("div",{className:"flex items-center justify-center h-52 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fl,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No expense recorded"})]})});const n=[{base:"#3b82f6",gradient:"url(#gradient0)"},{base:"#8b5cf6",gradient:"url(#gradient1)"},{base:"#ec4899",gradient:"url(#gradient2)"},{base:"#f59e0b",gradient:"url(#gradient3)"},{base:"#10b981",gradient:"url(#gradient4)"},{base:"#ef4444",gradient:"url(#gradient5)"},{base:"#06b6d4",gradient:"url(#gradient6)"},{base:"#a855f7",gradient:"url(#gradient7)"}];let r=-90;const a=120,l=120,i=90,o=60,d=t.map((u,x)=>{const m=u.value/s*360,h=r*Math.PI/180,g=(r+m)*Math.PI/180,w=a+i*Math.cos(h),j=l+i*Math.sin(h),A=a+i*Math.cos(g),b=l+i*Math.sin(g),p=a+o*Math.cos(g),v=l+o*Math.sin(g),y=a+o*Math.cos(h),N=l+o*Math.sin(h),C=m>180?1:0,E=`M${w},${j} A${i},${i} 0 ${C},1 ${A},${b} L${p},${v} A${o},${o} 0 ${C},0 ${y},${N} Z`,k=(u.value/s*100).toFixed(1);return r+=m,{path:E,color:n[x%n.length],label:u.label,percentage:k,value:u.value}});return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("svg",{width:"240",height:"240",className:"mx-auto",children:[e.jsx("defs",{children:n.map((u,x)=>e.jsxs("linearGradient",{id:`gradient${x}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:u.base,stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:u.base,stopOpacity:"0.6"})]},x))}),d.map((u,x)=>e.jsx("path",{d:u.path,fill:u.color.gradient,stroke:"white",strokeWidth:"2",className:"hover:opacity-80 transition-opacity cursor-pointer"},x)),e.jsx("text",{x:a,y:l-5,textAnchor:"middle",fontSize:"12",fill:"#6b7280",fontWeight:"500",children:"Total"}),e.jsx("text",{x:a,y:l+10,textAnchor:"middle",fontSize:"18",fill:"#1f2937",fontWeight:"bold",children:Ce(s)})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 w-full",children:d.map((u,x)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n[x%n.length].base}}),e.jsx("span",{className:"text-gray-700 font-medium truncate",children:u.label}),e.jsxs("span",{className:"text-gray-500 ml-auto",children:[u.percentage,"%"]})]},x))})]})}function Va(){return new Date().toISOString().slice(0,10)}function Ju(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1).toISOString().slice(0,10)}function ap(){const[t,s]=c.useState([]),[n,r]=c.useState([]),[a,l]=c.useState([]),[i,o]=c.useState(!1),[d,u]=c.useState(""),[x,m]=c.useState([]),[h,g]=c.useState(!1),[w,j]=c.useState(""),[A,b]=c.useState("monthly"),[p,v]=c.useState(""),[y,N]=c.useState("");c.useEffect(()=>{C();const D=new Date,$=D.getFullYear(),L=String(D.getMonth()+1).padStart(2,"0"),M=`${$}-${L}`;j(M),E(M)},[]);async function C(){o(!0);try{const[D,$,L]=await Promise.all([_.listCandidates().catch(()=>({candidates:[]})),_.listJobs().catch(()=>({jobs:[]})),_.listEmployers().catch(()=>({employers:[]}))]);s((D==null?void 0:D.candidates)||D||[]),r(($==null?void 0:$.jobs)||$||[]),l((L==null?void 0:L.employers)||L||[]),u("")}catch(D){u(D.message||"Failed to load")}finally{o(!1)}}async function E(D){g(!0);try{const $=await _.getTargets(D,null,null),L=($==null?void 0:$.targets)||[];console.log("All targets for month:",D,L);const M=L.filter(H=>H.targetType==="RecruitmentCandidate"||H.targetType==="RecruitmentRevenue");console.log("Filtered recruitment targets:",M),m(M)}catch($){console.error("Failed to load targets:",$)}finally{g(!1)}}const k=()=>{const D=[],$=new Date;for(let L=-12;L<=3;L++){const M=new Date($.getFullYear(),$.getMonth()+L,1),H=M.getFullYear(),Z=M.getMonth()+1,W=`${H}-${String(Z).padStart(2,"0")}`,F=M.toLocaleDateString("en-US",{month:"long",year:"numeric"});D.push({value:W,label:F})}return D},O=D=>{j(D),E(D)},U=()=>{if(A==="lifetime")return{from:null,to:null};if(A==="custom"){if(p&&y){const L=new Date(p);L.setHours(0,0,0,0);const M=new Date(y);return M.setHours(23,59,59,999),{from:L,to:M}}return{from:null,to:null}}const D=new Date;let $=new Date;return A==="daily"?$.setDate(D.getDate()-1):A==="weekly"?$.setDate(D.getDate()-7):A==="monthly"?$.setMonth(D.getMonth()-1):A==="yearly"&&$.setFullYear(D.getFullYear()-1),{from:$,to:D}},B=(D,$,L)=>{if(!D)return!1;const M=new Date(D).getTime();return!($&&M<$.getTime()||L&&M>L.getTime())},{from:R,to:S}=U(),P=ge.useMemo(()=>{const D=R?new Date(R):null,$=S?new Date(S):null,L=t.filter(se=>B(se.createdAt,D,$)||!D&&!$),M=n.filter(se=>B(se.createdAt,D,$)||!D&&!$),H=L.length,Z=L.filter(se=>se.status==="pending").length,W=M.filter(se=>se.status==="active").length,F=a.length,q=[];if($)for(let se=5;se>=0;se--){const I=new Date($);I.setMonth(I.getMonth()-se);const z=new Date(I.getFullYear(),I.getMonth(),1),G=new Date(I.getFullYear(),I.getMonth()+1,0,23,59,59,999),V=z.toLocaleString("en-US",{month:"short",year:"numeric"}),te=t.filter(K=>B(K.createdAt,z,G)).length,ae=t.filter(K=>K.status==="recruited"&&B(K.recruitedAt||K.updatedAt,z,G)).length;q.push({month:V,candidates:te,recruited:ae})}return{totalRecruitment:H,pendingCandidate:Z,activeJobPosition:W,totalEmployer:F,series:q}},[t,n,a,R,S]);return e.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Recruitment Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track candidates and job positions"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("select",{value:A,onChange:D=>b(D.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom"})]}),A==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:p,onChange:D=>v(D.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"}),e.jsx("span",{className:"text-gray-500 font-medium",children:"to"}),e.jsx("input",{type:"date",value:y,onChange:D=>N(D.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"})]})]})]}),d&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium",children:d})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Ae,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Recruitment"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:P.totalRecruitment})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Rt,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Pending Candidate"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:P.pendingCandidate})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Kh,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Active Job Position"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:P.activeJobPosition})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx($y,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Employer"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:P.totalEmployer})]})]})]}),e.jsx(sv,{}),!h&&e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg",children:e.jsx(Vt,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Team Targets"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Recruitment performance tracking"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5 text-gray-400"}),e.jsx("select",{value:w,onChange:D=>O(D.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-indigo-400 focus:border-indigo-500 focus:outline-none transition-colors font-medium text-gray-700",children:k().map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))})]})]}),x.length===0?e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-12 border-2 border-dashed border-gray-300 text-center",children:[e.jsx(Vt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"No Targets Set"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Contact your admin to set recruitment targets for this month"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.map(D=>{var W;const $=D.targetType==="RecruitmentCandidate",L=D.achieved||0,M=D.targetValue||0,H=M>0?Math.round(L/M*100):0,Z=((W=D.assignedTo)==null?void 0:W.name)||"Team";return e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-xl p-6 border-2 border-gray-200 hover:border-indigo-300 hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-lg shadow-md ${$?"bg-gradient-to-br from-blue-500 to-indigo-600":"bg-gradient-to-br from-green-500 to-emerald-600"}`,children:$?e.jsx(Ae,{className:"w-6 h-6 text-white"}):e.jsx($e,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:$?"Candidates":"Revenue"}),e.jsx("p",{className:"text-gray-500 text-sm",children:Z})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Achievement"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:$?L:Wt(L)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Target"}),e.jsx("p",{className:"text-xl font-semibold text-gray-600",children:$?M:Wt(M)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Progress"}),e.jsxs("span",{className:`font-bold ${H>=100?"text-green-600":H>=75?"text-blue-600":H>=50?"text-orange-600":"text-red-600"}`,children:[H,"%"]})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${H>=100?"bg-gradient-to-r from-green-500 to-emerald-600":H>=75?"bg-gradient-to-r from-blue-500 to-indigo-600":H>=50?"bg-gradient-to-r from-orange-500 to-amber-600":"bg-gradient-to-r from-red-500 to-rose-600"}`,style:{width:`${Math.min(H,100)}%`}})})]}),D.note&&e.jsxs("p",{className:"text-gray-600 text-sm mt-3 italic bg-gray-50 p-2 rounded border-l-4 border-indigo-400",children:['"',D.note,'"']})]})]},D._id)})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Candidate vs Recruited"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Last 6 months performance"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Candidates"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Recruited"})]})]})]}),e.jsx(nv,{data:P.series})]})]})}function sv(){const[t,s]=c.useState("monthly"),[n,r]=c.useState(Ju()),[a,l]=c.useState(Va()),[i,o]=c.useState(!1),[d,u]=c.useState(""),[x,m]=c.useState(""),h=async()=>{o(!0),u(""),m("");try{let g,w;t==="daily"?(g=Va(),w=Va()):t==="monthly"?(g=Ju(),w=Va()):t==="custom"&&(g=n,w=a);const[j,A,b,p,v]=await Promise.all([_.listCandidates().catch(()=>({candidates:[]})),_.listJobs().catch(()=>({jobs:[]})),_.listEmployers().catch(()=>({employers:[]})),_.listRecIncome().catch(()=>({items:[]})),_.listRecExpense().catch(()=>({items:[]}))]),y=(j==null?void 0:j.candidates)||[],N=(A==null?void 0:A.jobs)||[],C=(b==null?void 0:b.employers)||[],E=Array.isArray(p)?p:(p==null?void 0:p.items)||(p==null?void 0:p.income)||[],k=Array.isArray(v)?v:(v==null?void 0:v.items)||(v==null?void 0:v.expenses)||[],O=new Date(g),U=new Date(w);U.setHours(23,59,59,999);const B=y.filter(G=>{const V=new Date(G.createdAt||G.date);return V>=O&&V<=U}),R=N.filter(G=>{const V=new Date(G.createdAt||G.date);return V>=O&&V<=U}),S=E.filter(G=>{const V=new Date(G.date);return V>=O&&V<=U}),P=k.filter(G=>{const V=new Date(G.date);return V>=O&&V<=U}),D=B.length,$={};B.forEach(G=>{const V=G.status||"Unknown";$[V]=($[V]||0)+1});const L=R.length,M={};R.forEach(G=>{const V=G.status||"Unknown";M[V]=(M[V]||0)+1});const H=S.reduce((G,V)=>G+(Number(V.amount)||0),0),Z={};S.forEach(G=>{const V=G.source||"Others";Z[V]=(Z[V]||0)+(Number(G.amount)||0)});const W=P.reduce((G,V)=>G+(Number(V.amount)||0),0),F={};P.forEach(G=>{const V=G.purpose||"Others";F[V]=(F[V]||0)+(Number(G.amount)||0)});let q=`Recruitment Report
`;q+=`Period: ${g} to ${w}
`,q+=`Generated: ${new Date().toLocaleString()}

`,q+=`=== CANDIDATES ===
`,q+=`Total Candidates,${D}

`,q+=`Candidates by Status
`,q+=`Status,Count
`,Object.entries($).sort((G,V)=>V[1]-G[1]).forEach(([G,V])=>{q+=`${G},${V}
`}),q+=`
`,B.length>0&&(q+=`Candidate Details
`,q+=`Name,Phone,Email,Status,Job Position,Company,Created Date
`,B.forEach(G=>{var ne,de;const V=(G.name||"N/A").replace(/,/g,";"),te=G.phone||"N/A",ae=(G.email||"N/A").replace(/,/g,";"),K=G.status||"N/A",T=(((ne=G.jobId)==null?void 0:ne.title)||"N/A").replace(/,/g,";"),ee=(((de=G.employerId)==null?void 0:de.companyName)||"N/A").replace(/,/g,";"),Y=G.createdAt?new Date(G.createdAt).toLocaleDateString():"N/A";q+=`"${V}",${te},"${ae}",${K},"${T}","${ee}",${Y}
`}),q+=`
`),q+=`=== JOB POSITIONS ===
`,q+=`Total Jobs,${L}

`,q+=`Jobs by Status
`,q+=`Status,Count
`,Object.entries(M).sort((G,V)=>V[1]-G[1]).forEach(([G,V])=>{q+=`${G},${V}
`}),q+=`
`,R.length>0&&(q+=`Job Position Details
`,q+=`Job Title,Company,Location,Status,Salary,Requirements,Created Date
`,R.forEach(G=>{var ne;const V=(G.title||"N/A").replace(/,/g,";"),te=(((ne=G.employerId)==null?void 0:ne.companyName)||"N/A").replace(/,/g,";"),ae=(G.location||"N/A").replace(/,/g,";"),K=G.status||"N/A",T=(G.salary||"N/A").replace(/,/g,";"),ee=(G.requirements||"N/A").replace(/,/g,";").replace(/\n/g," "),Y=G.createdAt?new Date(G.createdAt).toLocaleDateString():"N/A";q+=`"${V}","${te}","${ae}",${K},"${T}","${ee}",${Y}
`}),q+=`
`),q+=`=== EMPLOYERS ===
`,q+=`Total Employers,${C.length}

`,C.length>0&&(q+=`Employer Details
`,q+=`Company Name,Contact Person,Phone,Email,Address,Industry
`,C.forEach(G=>{const V=(G.companyName||"N/A").replace(/,/g,";"),te=(G.contactPerson||"N/A").replace(/,/g,";"),ae=G.phone||"N/A",K=(G.email||"N/A").replace(/,/g,";"),T=(G.address||"N/A").replace(/,/g,";").replace(/\n/g," "),ee=(G.industry||"N/A").replace(/,/g,";");q+=`"${V}","${te}",${ae},"${K}","${T}","${ee}"
`}),q+=`
`),q+=`=== RECRUITMENT INCOME ===
`,q+=`Total Income,${H} BDT

`,q+=`Income by Source
`,q+=`Source Name,Amount (BDT)
`,Object.entries(Z).sort((G,V)=>V[1]-G[1]).forEach(([G,V])=>{q+=`${G},${V}
`}),q+=`
`,S.length>0&&(q+=`Detailed Income
`,q+=`Date,Source Name,Amount (BDT),Status,Notes
`,S.forEach(G=>{const V=new Date(G.date).toLocaleDateString(),te=(G.source||"N/A").replace(/,/g,";"),ae=G.status||"N/A",K=(G.notes||G.description||"N/A").replace(/,/g,";").replace(/\n/g," ");q+=`${V},"${te}",${G.amount||0},${ae},"${K}"
`}),q+=`
`),q+=`=== RECRUITMENT EXPENSES ===
`,q+=`Total Expenses,${W} BDT

`,q+=`Expenses by Purpose Name
`,q+=`Purpose Name,Amount (BDT)
`,Object.entries(F).sort((G,V)=>V[1]-G[1]).forEach(([G,V])=>{q+=`${G},${V}
`}),q+=`
`,P.length>0&&(q+=`Detailed Expenses
`,q+=`Date,Purpose Name,Amount (BDT),Notes
`,P.forEach(G=>{const V=new Date(G.date).toLocaleDateString(),te=(G.purpose||"N/A").replace(/,/g,";"),ae=(G.notes||G.description||"N/A").replace(/,/g,";").replace(/\n/g," ");q+=`${V},"${te}",${G.amount||0},"${ae}"
`}),q+=`
`),q+=`=== FINANCIAL SUMMARY ===
`,q+=`Total Income,${H} BDT
`,q+=`Total Expenses,${W} BDT
`,q+=`Net Profit,${H-W} BDT
`;const se=new Blob([q],{type:"text/csv;charset=utf-8;"}),I=URL.createObjectURL(se),z=document.createElement("a");z.href=I,z.download=`Recruitment_Report_${g}_to_${w}.csv`,z.click(),URL.revokeObjectURL(I),u(" Report downloaded successfully!")}catch(g){m("Failed to download report: "+g.message)}finally{o(!1)}};return e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg shadow-md",children:e.jsx(rs,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Download Comprehensive Reports"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Export detailed reports including candidates, jobs, employers, income, and expenses"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("select",{value:t,onChange:g=>s(g.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Today"}),e.jsx("option",{value:"monthly",children:"This Month"}),e.jsx("option",{value:"custom",children:"Custom Range"})]}),t==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:n,onChange:g=>r(g.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"}),e.jsx("span",{className:"text-gray-500 font-medium self-center",children:"to"}),e.jsx("input",{type:"date",value:a,onChange:g=>l(g.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"})]}),e.jsx("button",{onClick:h,disabled:i,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-bold hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-xl",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"w-4 h-4"}),"Download Report"]})})]})]}),d&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border-2 border-green-200 rounded-lg",children:e.jsx("p",{className:"text-green-700 font-medium text-sm",children:d})}),x&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border-2 border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium text-sm",children:x})})]})}function nv({data:t}){if(!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-52 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ps,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data available"})]})});const s=Math.max(...t.map(u=>Math.max(u.candidates||0,u.recruited||0)),1),n=40,r=10,a=n*2+r,l={left:50,right:30,top:30,bottom:60},i=l.left+l.right+(a+30)*t.length,o=300,d=o-l.top-l.bottom;return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("svg",{width:i,height:o,className:"min-w-full",children:[[0,.25,.5,.75,1].map((u,x)=>e.jsxs("g",{children:[e.jsx("line",{x1:l.left,y1:l.top+d*(1-u),x2:i-l.right,y2:l.top+d*(1-u),stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4,4"}),e.jsx("text",{x:l.left-10,y:l.top+d*(1-u)+4,textAnchor:"end",fontSize:"12",fill:"#6b7280",children:Math.round(s*u)})]},x)),t.map((u,x)=>{const m=l.left+x*(a+30),h=u.candidates/s*d,g=u.recruited/s*d;return e.jsxs("g",{children:[e.jsx("rect",{x:m,y:l.top+d-h,width:n,height:h,fill:"url(#candidatesGradient)",rx:"4"}),e.jsx("text",{x:m+n/2,y:l.top+d-h-5,textAnchor:"middle",fontSize:"12",fontWeight:"600",fill:"#3b82f6",children:u.candidates}),e.jsx("rect",{x:m+n+r,y:l.top+d-g,width:n,height:g,fill:"url(#recruitedGradient)",rx:"4"}),e.jsx("text",{x:m+n+r+n/2,y:l.top+d-g-5,textAnchor:"middle",fontSize:"12",fontWeight:"600",fill:"#10b981",children:u.recruited}),e.jsx("text",{x:m+a/2,y:o-l.bottom+20,textAnchor:"middle",fontSize:"12",fill:"#374151",fontWeight:"500",children:u.month})]},x)}),e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"candidatesGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:"0.6"})]}),e.jsxs("linearGradient",{id:"recruitedGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.6"})]})]})]})})}function Ga(){return new Date().toISOString().slice(0,10)}function Qu(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1).toISOString().slice(0,10)}function lp(){const[t,s]=c.useState([]),[n,r]=c.useState(""),[a,l]=c.useState(!1),[i,o]=c.useState("monthly"),[d,u]=c.useState(""),[x,m]=c.useState("");c.useEffect(()=>{h();const k=setInterval(h,3e4);return()=>clearInterval(k)},[]);async function h(){l(!0);try{const k=await _.listMGWorks().catch(()=>({works:[]})),O=(k==null?void 0:k.works)||k||[];s(Array.isArray(O)?O:[]),r("")}catch(k){r(k.message||"Failed to load")}finally{l(!1)}}const g=()=>{if(i==="lifetime")return{from:null,to:null};if(i==="custom"){if(d&&x){const U=new Date(d);U.setHours(0,0,0,0);const B=new Date(x);return B.setHours(23,59,59,999),{from:U,to:B}}return{from:null,to:null}}const k=new Date;let O=new Date;return i==="daily"?O.setDate(k.getDate()-1):i==="weekly"?O.setDate(k.getDate()-7):i==="monthly"?O.setMonth(k.getMonth()-1):i==="yearly"&&O.setFullYear(k.getFullYear()-1),{from:O,to:k}},w=(k,O,U)=>{if(!k)return!1;const B=new Date(k).getTime();return!(O&&B<O.getTime()||U&&B>U.getTime())},{from:j,to:A}=g(),b=c.useMemo(()=>{const k=j?new Date(j):null,O=A?new Date(A):null,U=t.filter(B=>w(B.createdAt,k,O)||!k&&!O);return{totalProduction:U.length,adDesign:U.filter(B=>B.type==="Ad").length,bannerDesign:U.filter(B=>B.type==="Banner").length,videoProduction:U.filter(B=>B.type==="Reel"||B.type==="Short"||B.type==="Explainer").length,other:U.filter(B=>B.type==="Other").length,queued:U.filter(B=>B.status==="Queued").length,inProgress:U.filter(B=>B.status==="InProgress"||B.status==="Review").length,done:U.filter(B=>B.status==="Done").length,hold:U.filter(B=>B.status==="Hold").length}},[t,j,A]),p=[{label:"Ad",value:b.adDesign,color:"#3b82f6"},{label:"Banner",value:b.bannerDesign,color:"#10b981"},{label:"Video (Reel/Short/Explainer)",value:b.videoProduction,color:"#f59e0b"},{label:"Other",value:b.other,color:"#6366f1"}].filter(k=>k.value>0),v=p.reduce((k,O)=>k+O.value,0),N=(()=>{if(v===0)return[];let k=-90;return p.map((O,U)=>{const B=O.value/v,R=B*360,S=k*Math.PI/180,P=(k+R)*Math.PI/180,D=50+40*Math.cos(S),$=50+40*Math.sin(S),L=50+40*Math.cos(P),M=50+40*Math.sin(P),H=R>180?1:0,Z=["M 50 50",`L ${D} ${$}`,`A 40 40 0 ${H} 1 ${L} ${M}`,"Z"].join(" ");return k+=R,{...O,path:Z,percentage:Math.round(B*100)}})})(),C=Math.max(b.queued,b.inProgress,b.done,1),E=[{label:"Queued",value:b.queued,color:"#ef4444",height:b.queued/C*100},{label:"In Progress",value:b.inProgress,color:"#3b82f6",height:b.inProgress/C*100},{label:"Done",value:b.done,color:"#10b981",height:b.done/C*100}];return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Motion Graphics Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Production analytics and performance metrics"})]}),a&&e.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-sm",children:"Updating..."})]})]}),n&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg",children:n}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-navy font-semibold mb-3",children:[e.jsx(fe,{size:20}),e.jsx("span",{children:"Time Period"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:i,onChange:k=>o(k.target.value),className:"border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom Range"})]}),i==="custom"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:d,onChange:k=>u(k.target.value),className:"border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"date",value:x,onChange:k=>m(k.target.value),className:"border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm mb-1",children:"Total Production"}),e.jsx("p",{className:"text-4xl font-bold",children:b.totalProduction})]}),e.jsx(_l,{size:48,className:"text-purple-200 opacity-80"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm mb-1",children:"Ad"}),e.jsx("p",{className:"text-4xl font-bold",children:b.adDesign})]}),e.jsx(By,{size:48,className:"text-blue-200 opacity-80"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm mb-1",children:"Banner"}),e.jsx("p",{className:"text-4xl font-bold",children:b.bannerDesign})]}),e.jsx(_y,{size:48,className:"text-green-200 opacity-80"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-100 text-sm mb-1",children:"Video (Reel/Short/Explainer)"}),e.jsx("p",{className:"text-4xl font-bold",children:b.videoProduction})]}),e.jsx(Qy,{size:48,className:"text-orange-200 opacity-80"})]})})]}),e.jsx(rv,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-navy mb-4",children:"Production Type Distribution"}),v===0?e.jsx("div",{className:"flex items-center justify-center h-64 text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_l,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No production data available"})]})}):e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-64 h-64",children:[N.map((k,O)=>e.jsx("g",{children:e.jsx("path",{d:k.path,fill:k.color,stroke:"white",strokeWidth:"0.5",className:"hover:opacity-80 transition-opacity cursor-pointer"})},O)),e.jsx("circle",{cx:"50",cy:"50",r:"20",fill:"white"}),e.jsx("text",{x:"50",y:"47",textAnchor:"middle",fontSize:"4",fontWeight:"600",fill:"#1e3a8a",children:"Total"}),e.jsx("text",{x:"50",y:"55",textAnchor:"middle",fontSize:"8",fontWeight:"700",fill:"#1e3a8a",children:v})]})}),e.jsx("div",{className:"flex-1 space-y-3",children:N.map((k,O)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:k.color}}),e.jsx("span",{className:"text-sm text-gray-700",children:k.label})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-bold text-navy",children:k.value}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",k.percentage,"%)"]})]})]},O))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-navy mb-4 flex items-center gap-2",children:[e.jsx(Et,{size:20}),"Status Distribution"]}),b.totalProduction===0?e.jsx("div",{className:"flex items-center justify-center h-64 text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Et,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No status data available"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-end justify-around gap-4 h-64 px-4",children:E.map((k,O)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-sm font-bold text-navy",children:k.value}),e.jsx("div",{className:"w-full rounded-t-lg transition-all duration-500 hover:opacity-80",style:{backgroundColor:k.color,height:`${k.height}%`,minHeight:k.value>0?"20px":"0"}}),e.jsx("div",{className:"text-xs text-gray-600 text-center font-medium",children:k.label})]},O))}),e.jsx("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t",children:E.map((k,O)=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:k.color}}),e.jsx("span",{className:"text-sm text-gray-600",children:k.label})]}),e.jsx("p",{className:"text-xl font-bold text-navy",children:k.value}),e.jsx("p",{className:"text-xs text-gray-500",children:b.totalProduction>0?`${Math.round(k.value/b.totalProduction*100)}%`:"0%"})]},O))})]})]})]})]})}function rv(){const[t,s]=c.useState("monthly"),[n,r]=c.useState(Qu()),[a,l]=c.useState(Ga()),[i,o]=c.useState(!1),[d,u]=c.useState(""),[x,m]=c.useState(""),h=async()=>{o(!0),u(""),m("");try{let g,w;t==="daily"?(g=Ga(),w=Ga()):t==="monthly"?(g=Qu(),w=Ga()):t==="custom"&&(g=n,w=a);const[j,A]=await Promise.all([_.listMGWorks().catch(()=>({works:[]})),_.listAllTasks().catch(()=>({tasks:[]}))]),b=(j==null?void 0:j.works)||j||[],p=(A==null?void 0:A.tasks)||[],v=new Date(g),y=new Date(w);y.setHours(23,59,59,999);const N=b.filter(W=>{const F=new Date(W.createdAt||W.date);return F>=v&&F<=y}),C=p.filter(W=>{var se;const F=new Date(W.createdAt||W.deadline),q=(se=W.assignedTo)==null?void 0:se.some(I=>I.role==="MotionGraphics");return F>=v&&F<=y&&q}),E=N.length,k={todo:C.filter(W=>W.status==="To-Do").length,inProgress:C.filter(W=>W.status==="In Progress").length,completed:C.filter(W=>W.status==="Completed").length,total:C.length},O={};N.forEach(W=>{const F=W.type||"Unknown";O[F]=(O[F]||0)+1});const U={};N.forEach(W=>{const F=W.status||"Unknown";U[F]=(U[F]||0)+1});const B={};N.forEach(W=>{const F=W.priority||"Unknown";B[F]=(B[F]||0)+1});const R={};N.forEach(W=>{const F=W.platform||"Unknown";R[F]=(R[F]||0)+1});let S=`Motion Graphics Report
`;S+=`Period: ${g} to ${w}
`,S+=`Generated: ${new Date().toLocaleString()}

`,S+=`=== PRODUCTION SUMMARY ===
`,S+=`Total Production,${E}

`,S+=`=== TASKS ===
`,S+=`Status,Count
`,S+=`To-Do,${k.todo}
`,S+=`In Progress,${k.inProgress}
`,S+=`Completed,${k.completed}
`,S+=`Total,${k.total}

`,C.length>0&&(S+=`Task Details
`,S+=`Task Name,Status,Priority,Deadline,Assigned To
`,C.forEach(W=>{var G;const F=(W.title||"Untitled").replace(/,/g,";"),q=W.status||"N/A",se=W.priority||"N/A",I=W.deadline?new Date(W.deadline).toLocaleDateString():"N/A",z=((G=W.assignedTo)==null?void 0:G.map(V=>V.name||"Unknown").join("; "))||"Unassigned";S+=`"${F}",${q},${se},${I},"${z}"
`}),S+=`
`),S+=`Production by Type
`,S+=`Type Name,Count
`,Object.entries(O).sort((W,F)=>F[1]-W[1]).forEach(([W,F])=>{S+=`${W},${F}
`}),S+=`
`,S+=`Production by Status
`,S+=`Status,Count
`,Object.entries(U).sort((W,F)=>F[1]-W[1]).forEach(([W,F])=>{S+=`${W},${F}
`}),S+=`
`,S+=`Production by Priority
`,S+=`Priority,Count
`,Object.entries(B).sort((W,F)=>F[1]-W[1]).forEach(([W,F])=>{S+=`${W},${F}
`}),S+=`
`,S+=`Production by Platform
`,S+=`Platform,Count
`,Object.entries(R).sort((W,F)=>F[1]-W[1]).forEach(([W,F])=>{S+=`${W},${F}
`}),S+=`
`,N.length>0&&(S+=`=== DETAILED PRODUCTION LIST ===
`,S+=`Title,Type,Status,Priority,Platform,Assignee,Deadline,Created Date,Notes
`,N.forEach(W=>{var K;const F=(W.title||"Untitled").replace(/,/g,";"),q=W.type||"N/A",se=W.status||"N/A",I=W.priority||"N/A",z=W.platform||"N/A",G=((K=W.assignedTo)==null?void 0:K.name)||"Unassigned",V=W.deadline?new Date(W.deadline).toLocaleDateString():"N/A",te=W.createdAt?new Date(W.createdAt).toLocaleDateString():"N/A",ae=(W.notes||W.description||"N/A").replace(/,/g,";").replace(/\n/g," ");S+=`"${F}",${q},${se},${I},${z},"${G}",${V},${te},"${ae}"
`}),S+=`
`);const P=N.filter(W=>W.status==="Done"),D=N.filter(W=>W.status==="InProgress"||W.status==="Review"),$=N.filter(W=>W.status==="Queued"),L=N.filter(W=>W.status==="Hold");S+=`=== PERFORMANCE METRICS ===
`,S+=`Metric,Value
`,S+=`Total Production,${E}
`,S+=`Completed Works,${P.length}
`,S+=`In Progress Works,${D.length}
`,S+=`Queued Works,${$.length}
`,S+=`On Hold Works,${L.length}
`,S+=`Production Completion Rate,${E>0?Math.round(P.length/E*100):0}%
`,S+=`Total Tasks,${k.total}
`,S+=`Completed Tasks,${k.completed}
`,S+=`In Progress Tasks,${k.inProgress}
`,S+=`Pending Tasks,${k.todo}
`,S+=`Task Completion Rate,${k.total>0?Math.round(k.completed/k.total*100):0}%
`;const M=new Blob([S],{type:"text/csv;charset=utf-8;"}),H=URL.createObjectURL(M),Z=document.createElement("a");Z.href=H,Z.download=`MG_Report_${g}_to_${w}.csv`,Z.click(),URL.revokeObjectURL(H),u(" Report downloaded successfully!")}catch(g){m("Failed to download report: "+g.message)}finally{o(!1)}};return e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border-2 border-gray-200 hover:border-purple-300 transition-colors",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg shadow-md",children:e.jsx(rs,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Download Comprehensive Reports"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Export detailed reports including tasks, production works, status, types, and performance metrics"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("select",{value:t,onChange:g=>s(g.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-purple-400 focus:border-purple-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Today"}),e.jsx("option",{value:"monthly",children:"This Month"}),e.jsx("option",{value:"custom",children:"Custom Range"})]}),t==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:n,onChange:g=>r(g.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-purple-400 focus:border-purple-500 focus:outline-none transition-colors"}),e.jsx("span",{className:"text-gray-500 font-medium self-center",children:"to"}),e.jsx("input",{type:"date",value:a,onChange:g=>l(g.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-purple-400 focus:border-purple-500 focus:outline-none transition-colors"})]}),e.jsx("button",{onClick:h,disabled:i,className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-xl font-bold hover:from-purple-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-xl",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"w-4 h-4"}),"Download Report"]})})]})]}),d&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border-2 border-green-200 rounded-lg",children:e.jsx("p",{className:"text-green-700 font-medium text-sm",children:d})}),x&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border-2 border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium text-sm",children:x})})]})}function ip(){const{user:t}=xe();if((t==null?void 0:t.role)!=="Coordinator"&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin")return e.jsx("div",{className:"text-royal",children:"Access denied"});const[s,n]=c.useState(null),[r,a]=c.useState([]),[l,i]=c.useState(!0);if(c.useEffect(()=>{(async()=>{try{const[u,x]=await Promise.all([_.getCoordinatorDashboardStats(),_.getPaymentNotifications()]);n(u),a(x.notifications||[])}catch(u){console.error("Load failed:",u)}finally{i(!1)}})()},[]),l)return e.jsx("div",{className:"p-6",children:"Loading..."});const o=({icon:d,label:u,value:x,color:m,link:h})=>e.jsx(Qs,{to:h,className:`bg-white rounded-2xl shadow-soft p-6 hover:shadow-lg transition-shadow border-l-4 ${m}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:u}),e.jsx("p",{className:"text-3xl font-bold text-navy",children:x})]}),e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center ${m.replace("border-","bg-").replace("-500","-100")}`,children:d})]})});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-navy",children:"Coordinator Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage due fees and payment collections"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(o,{icon:e.jsx(Ae,{size:28,className:"text-blue-600"}),label:"Total Students with Dues",value:(s==null?void 0:s.totalWithDues)||0,color:"border-blue-500",link:"/coordinator/due-fees"}),e.jsx(o,{icon:e.jsx(Lt,{size:28,className:"text-red-600"}),label:"Overdue Payments",value:(s==null?void 0:s.overdue)||0,color:"border-red-500",link:"/coordinator/notifications"}),e.jsx(o,{icon:e.jsx(fe,{size:28,className:"text-orange-600"}),label:"Due This Week",value:(s==null?void 0:s.dueThisWeek)||0,color:"border-orange-500",link:"/coordinator/notifications"}),e.jsx(o,{icon:e.jsx($e,{size:28,className:"text-green-600"}),label:"Total Due Amount",value:` ${((s==null?void 0:s.totalDueAmount)||0).toLocaleString()}`,color:"border-green-500",link:"/coordinator/due-fees"})]}),(t==null?void 0:t.role)==="Coordinator"&&e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-2xl shadow-lg p-6 mb-6 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Et,{size:40}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold",children:"Your Follow-ups Today"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:(s==null?void 0:s.myFollowUpsToday)||0})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy flex items-center gap-2",children:[e.jsx(fe,{className:"text-orange-500",size:24}),"Upcoming & Overdue Payments"]}),e.jsx(Qs,{to:"/coordinator/notifications",className:"text-blue-600 hover:underline text-sm font-medium",children:"View All"})]}),r.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No upcoming or overdue payments"}):e.jsx("div",{className:"space-y-3",children:r.slice(0,5).map(d=>{var u,x,m,h;return e.jsxs(Qs,{to:"/coordinator/due-fees",className:"flex items-center justify-between p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold text-navy",children:[(u=d.lead)==null?void 0:u.leadId,"  ",(x=d.lead)==null?void 0:x.name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[(m=d.lead)==null?void 0:m.phone," ",((h=d.lead)==null?void 0:h.email)&&` ${d.lead.email}`]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Course: ",d.courseName," | Due:  ",d.dueAmount||0]})]}),e.jsxs("div",{className:"text-right ml-4",children:[d.isOverdue?e.jsx("span",{className:"inline-block px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:"Overdue"}):e.jsxs("span",{className:"inline-block px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:[d.daysUntil," days left"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:new Date(d.nextPaymentDate).toLocaleDateString("en-GB")})]})]},d._id)})})]})]})}function av(){return new Date().toISOString().slice(0,10)}function lv(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1).toISOString().slice(0,10)}function iv(){var I,z,G;const[t,s]=c.useState("monthly"),[n,r]=c.useState(lv()),[a,l]=c.useState(av()),[i,o]=c.useState(null),[d,u]=c.useState([]),[x,m]=c.useState([]),[h,g]=c.useState([]),[w,j]=c.useState([]),[A,b]=c.useState([]),[p,v]=c.useState([]),[y,N]=c.useState([]),[C,E]=c.useState([]),[k,O]=c.useState("");function U(){if(t==="custom"&&n&&a)return{from:new Date(n),to:new Date(a)};if(t==="lifetime")return{from:null,to:null};const V=new Date;let te=new Date;return t==="daily"?te.setDate(V.getDate()-1):t==="weekly"?te.setDate(V.getDate()-7):t==="monthly"?te.setMonth(V.getMonth()-1):t==="yearly"&&te.setFullYear(V.getFullYear()-1),{from:te,to:V}}const B=async()=>{try{let V,te;if(t==="custom")V=n,te=a;else if(t==="lifetime")V=void 0,te=void 0;else{const pe=new Date,He=new Date;t==="daily"?He.setDate(pe.getDate()-1):t==="weekly"?He.setDate(pe.getDate()-7):t==="monthly"?He.setMonth(pe.getMonth()-1):t==="yearly"&&He.setFullYear(pe.getFullYear()-1),V=He.toISOString().slice(0,10),te=pe.toISOString().slice(0,10)}const ae=new Date().toISOString().slice(0,7),[K,T,ee,Y,ne,de,he,ce,ue]=await Promise.all([_.reportsOverview(V,te),_.listCourses().catch(()=>({courses:[]})),_.listLeads().catch(()=>({leads:[]})),_.listAdmissionLeads().catch(()=>({leads:[]})),_.listRecruited().catch(()=>[]),_.listAllTasks().catch(()=>({tasks:[]})),_.listIncome().catch(()=>[]),_.listExpenses().catch(()=>[]),_.getAdmissionTargets(ae).catch(()=>({targets:[]}))]);o(K),u((T==null?void 0:T.courses)||[]),m((ee==null?void 0:ee.leads)||[]),g((Y==null?void 0:Y.leads)||[]),j(Array.isArray(ne)?ne:(ne==null?void 0:ne.candidates)||[]),b((de==null?void 0:de.tasks)||[]),v(Array.isArray(he)?he:(he==null?void 0:he.income)||[]),N(Array.isArray(ce)?ce:(ce==null?void 0:ce.expenses)||[]),E((ue==null?void 0:ue.targets)||[]),O("")}catch(V){O(V.message||"Failed to load")}};c.useEffect(()=>{B()},[]);const{from:R,to:S}=U(),P=c.useMemo(()=>!R&&!S?x:x.filter(V=>{const te=new Date(V.createdAt||V.date||V._id&&null);return te&&(!R||te>=R)&&(!S||te<=S)}),[x,R,S]),D=c.useMemo(()=>!R&&!S?h:h.filter(V=>{const te=new Date(V.createdAt||V.date||V._id&&null);return te&&(!R||te>=R)&&(!S||te<=S)}),[h,R,S]);c.useMemo(()=>!R&&!S?A:A.filter(V=>{const te=new Date(V.createdAt||V.deadline||null);return te&&(!R||te>=R)&&(!S||te<=S)}),[A,R,S]);const $=((I=i==null?void 0:i.combined)==null?void 0:I.income)??0,L=((z=i==null?void 0:i.combined)==null?void 0:z.expense)??0,M=((G=i==null?void 0:i.combined)==null?void 0:G.net)??$-L,H=(d||[]).filter(V=>V.status==="Active").length,Z=P.length,W=D.filter(V=>(V.status||"").toLowerCase()==="admitted").length,F=(w||[]).length,q=c.useMemo(()=>{if(!R||!S)return[];const V=[],te=new Date(R);for(;te<=S;){const ae=te.toISOString().slice(0,10),K=(p||[]).filter(ee=>new Date(ee.date).toISOString().slice(0,10)===ae).reduce((ee,Y)=>ee+(Number(Y.amount)||0),0),T=(y||[]).filter(ee=>new Date(ee.date).toISOString().slice(0,10)===ae).reduce((ee,Y)=>ee+(Number(Y.amount)||0),0);V.push({date:ae,income:K,expense:T}),te.setDate(te.getDate()+1)}return V},[p,y,R,S]);c.useMemo(()=>{const V={};return(y||[]).forEach(te=>{const ae=te.category||te.purpose||"Other";V[ae]=(V[ae]||0)+Number(te.amount||0)}),V},[y]);const se=V=>{var te;(te=V==null?void 0:V.preventDefault)==null||te.call(V),B()};return e.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's your business overview"})]}),e.jsxs("form",{onSubmit:se,className:"flex flex-wrap items-center gap-2",children:[e.jsxs("select",{value:t,onChange:V=>s(V.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom"})]}),t==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",value:n,onChange:V=>r(V.target.value)}),e.jsx("span",{className:"text-gray-500 font-medium",children:"to"}),e.jsx("input",{type:"date",className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",value:a,onChange:V=>l(V.target.value)})]}),e.jsx("button",{className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-medium hover:shadow-lg transform hover:-translate-y-0.5 transition-all",children:"Apply"})]})]}),k&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium",children:k})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"group relative bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Et,{className:"w-5 h-5 text-white"})}),e.jsx(Iy,{className:"w-4 h-4 text-white/70"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Income"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Ce($)})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-red-500 to-pink-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(np,{className:"w-5 h-5 text-white"})}),e.jsx(Ry,{className:"w-4 h-4 text-white/70"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Expense"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Ce(L)})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx($e,{className:"w-5 h-5 text-white"})}),e.jsx(ps,{className:"w-4 h-4 text-white/70"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Net Balance"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Ce(M)})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Wn,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-full text-xs text-white font-medium",children:"Active"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Active Courses"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:H})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Ae,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-full text-xs text-white font-medium",children:"Leads"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Leads"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Z})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-cyan-500 to-teal-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(lc,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-full text-xs text-white font-medium",children:"Students"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Admitted Students"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:W})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-pink-500 to-rose-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Vn,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-full text-xs text-white font-medium",children:"Team"})]}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Recruited People"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:F})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Income vs Expense"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Financial trend over time"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Income"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Expense"})]})]})]}),e.jsx(ov,{data:q})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg",children:e.jsx(Vt,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Admission Targets"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Current month performance (view only)"})]})]}),C.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-xl",children:[e.jsx(Vt,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"No targets set for this month"}),e.jsx("p",{className:"text-sm mt-1",children:"Admins can set targets from the Admission Targets page"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gradient-to-r from-purple-50 to-blue-50",children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Course Name"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Target"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Achieved"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Progress"})]})}),e.jsx("tbody",{children:C.map((V,te)=>{var ee;const ae=V.percentage||0,K=ae>=100?"bg-green-500":ae>=75?"bg-blue-500":ae>=50?"bg-yellow-500":"bg-red-500",T=ae>=100?"text-green-600":ae>=75?"text-blue-600":ae>=50?"text-yellow-600":"text-red-600";return e.jsxs("tr",{className:`border-b hover:bg-gray-50 transition-colors ${te%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lc,{size:16,className:"text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:((ee=V.course)==null?void 0:ee.name)||"Unknown Course"})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-semibold",children:V.target})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-flex items-center justify-center px-3 py-1 ${K} bg-opacity-10 ${T} rounded-full text-sm font-semibold`,children:V.achieved})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"flex-1 max-w-xs bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`h-3 rounded-full ${K} transition-all duration-500 ease-out`,style:{width:`${Math.min(ae,100)}%`}})}),e.jsxs("span",{className:`text-sm font-bold ${T} min-w-[45px] text-right`,children:[ae,"%"]})]})})]},V._id)})})]})})]})]})]})}function ov({data:t}){if(!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-52 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ps,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data available"})]})});const a=Math.max(...t.map(x=>Math.max(x.income||0,x.expense||0)),1),l=(600-40*2)/Math.max(1,t.length-1),i=t.map((x,m)=>`${40+m*l},${180-(a?x.income/a*(220-40*2):0)}`).join(" "),o=t.map((x,m)=>`${40+m*l},${180-(a?x.expense/a*(220-40*2):0)}`).join(" "),d=`${i} ${40+(t.length-1)*l},180 40,180`,u=`${o} ${40+(t.length-1)*l},180 40,180`;return e.jsx("div",{className:"relative",children:e.jsxs("svg",{viewBox:"0 0 600 220",className:"w-full h-56",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"incomeGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.05"})]}),e.jsxs("linearGradient",{id:"expenseGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ef4444",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#ef4444",stopOpacity:"0.05"})]})]}),[0,.25,.5,.75,1].map((x,m)=>e.jsx("line",{x1:40,y1:180-(220-40*2)*x,x2:560,y2:180-(220-40*2)*x,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4,4"},m)),e.jsx("polygon",{fill:"url(#incomeGradient)",points:d}),e.jsx("polygon",{fill:"url(#expenseGradient)",points:u}),e.jsx("polyline",{fill:"none",stroke:"#10b981",strokeWidth:"3",points:i,strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{fill:"none",stroke:"#ef4444",strokeWidth:"3",points:o,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((x,m)=>{const h=40+m*l,g=180-(a?x.income/a*(220-40*2):0),w=180-(a?x.expense/a*(220-40*2):0);return e.jsxs("g",{children:[e.jsx("circle",{cx:h,cy:g,r:"4",fill:"#10b981",stroke:"white",strokeWidth:"2"}),e.jsx("circle",{cx:h,cy:w,r:"4",fill:"#ef4444",stroke:"white",strokeWidth:"2"})]},m)})]})})}function cv({data:t}){if(!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-52 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ps,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data available"})]})});const a=Math.max(...t.map(x=>Math.max(x.leads||0,x.admitted||0)),1),l=(700-40*2)/Math.max(1,t.length-1),i=t.map((x,m)=>`${40+m*l},${180-(a?x.leads/a*(220-40*2):0)}`).join(" "),o=t.map((x,m)=>`${40+m*l},${180-(a?x.admitted/a*(220-40*2):0)}`).join(" "),d=`${i} ${40+(t.length-1)*l},180 40,180`,u=`${o} ${40+(t.length-1)*l},180 40,180`;return e.jsx("div",{className:"relative",children:e.jsxs("svg",{viewBox:"0 0 700 220",className:"w-full h-56",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"leadsGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:"0.05"})]}),e.jsxs("linearGradient",{id:"admittedGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.05"})]})]}),[0,.25,.5,.75,1].map((x,m)=>e.jsx("line",{x1:40,y1:180-(220-40*2)*x,x2:660,y2:180-(220-40*2)*x,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4,4"},m)),e.jsx("polygon",{fill:"url(#leadsGradient)",points:d}),e.jsx("polygon",{fill:"url(#admittedGradient)",points:u}),e.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"3",points:i,strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{fill:"none",stroke:"#10b981",strokeWidth:"3",points:o,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((x,m)=>{const h=40+m*l,g=180-(a?x.leads/a*(220-40*2):0),w=180-(a?x.admitted/a*(220-40*2):0);return e.jsxs("g",{children:[e.jsx("circle",{cx:h,cy:g,r:"4",fill:"#3b82f6",stroke:"white",strokeWidth:"2"}),e.jsx("circle",{cx:h,cy:w,r:"4",fill:"#10b981",stroke:"white",strokeWidth:"2"})]},m)})]})})}const Xu=[{key:"Assigned",label:"Assigned"},{key:"Counseling",label:"Counseling"},{key:"In Follow Up",label:"In Follow-Up"},{key:"Admitted",label:"Admitted"},{key:"Not Admitted",label:"Not Admitted"}];function op(){var Z,W,F,q,se,I,z,G,V,te,ae,K;const{user:t}=xe(),[s,n]=c.useState(""),[r,a]=c.useState("monthly"),[l,i]=c.useState(""),[o,d]=c.useState(""),[u,x]=c.useState([]),[m,h]=c.useState([]),[g,w]=c.useState("All"),[j,A]=c.useState(!1),[b,p]=c.useState([]),[v,y]=c.useState("all"),[N,C]=c.useState(null),[E,k]=c.useState(!1),O=(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin";c.useEffect(()=>{U()},[]);async function U(){A(!0);try{const T=[_.listAdmissionLeads().catch(()=>({leads:[]})),_.listBatches().catch(()=>({batches:[]}))];O&&T.push(_.listAdmissionUsers().catch(()=>({users:[]})));const ee=await Promise.all(T),[Y,ne,de]=ee,he=(Y==null?void 0:Y.leads)||Y||[];if(x(Array.isArray(he)?he:[]),h((ne==null?void 0:ne.batches)||[]),O&&de){const ce=(de==null?void 0:de.users)||[];p(Array.isArray(ce)?ce:[]),B()}n("")}catch(T){n(T.message||"Failed to load")}finally{A(!1)}}async function B(){if(O)try{const{from:T,to:ee}=R(),Y=T?T.toISOString().slice(0,10):void 0,ne=ee?ee.toISOString().slice(0,10):void 0,de=v==="all"?void 0:v,he=await _.getAdmissionReports(de,Y,ne);C(he)}catch(T){console.error("Failed to load reports:",T)}}c.useEffect(()=>{O&&b.length>0&&B()},[v,r,l,o]);const R=()=>{if(r==="lifetime")return{from:null,to:null};if(r==="custom"){if(l&&o){const Y=new Date(l);Y.setHours(0,0,0,0);const ne=new Date(o);return ne.setHours(23,59,59,999),{from:Y,to:ne}}return{from:null,to:null}}const T=new Date;let ee=new Date;return r==="daily"?ee.setDate(T.getDate()-1):r==="weekly"?ee.setDate(T.getDate()-7):r==="monthly"?ee.setMonth(T.getMonth()-1):r==="yearly"&&ee.setFullYear(T.getFullYear()-1),{from:ee,to:T}},S=(T,ee,Y)=>{if(!T)return!1;const ne=new Date(T).getTime();return!(ee&&ne<ee.getTime()||Y&&ne>Y.getTime())},{from:P,to:D}=R(),$=ge.useMemo(()=>{const T=P?new Date(P):null,ee=D?new Date(D):null,Y=u.filter(ue=>S(ue.createdAt,T,ee)||!T&&!ee),ne={};ne.Assigned=Y.length,Xu.forEach(ue=>{ue.key!=="Assigned"&&(ne[ue.key]=Y.filter(pe=>pe.status===ue.key).length)});const de=[];if(T&&ee){const ue=new Date(T);for(;ue<=ee;){const pe=ue.toISOString().slice(0,10),He=u.filter(Oe=>{const Pe=new Date(Oe.createdAt);return Pe&&Pe.toISOString().slice(0,10)===pe}).length,It=u.filter(Oe=>{const Pe=Oe.admittedAt?new Date(Oe.admittedAt):null;return Pe&&Pe.toISOString().slice(0,10)===pe}).length;de.push({date:pe,leads:He,admitted:It}),ue.setDate(ue.getDate()+1)}}const he={totalLeads:Y.length,assigned:Y.filter(ue=>ue.status==="Assigned").length,counseling:Y.filter(ue=>ue.status==="Counseling").length,inFollowUp:Y.filter(ue=>ue.status==="In Follow Up").length,admitted:Y.filter(ue=>ue.status==="Admitted").length,notAdmitted:Y.filter(ue=>ue.status==="Not Admitted").length},ce=he.totalLeads>0?(he.admitted/he.totalLeads*100).toFixed(2):"0.00";return{counts:ne,series:de,reportMetrics:he,conversionRate:ce}},[u,P,D]),L=T=>({Assigned:e.jsx(Ms,{className:"w-5 h-5 text-white"}),Counseling:e.jsx(Yy,{className:"w-5 h-5 text-white"}),"In Follow Up":e.jsx(Ae,{className:"w-5 h-5 text-white"}),Admitted:e.jsx(lc,{className:"w-5 h-5 text-white"}),"Not Admitted":e.jsx($r,{className:"w-5 h-5 text-white"})})[T]||e.jsx(Ae,{className:"w-5 h-5 text-white"}),M=T=>({Assigned:"from-blue-500 to-indigo-600",Counseling:"from-purple-500 to-violet-600","In Follow Up":"from-orange-500 to-amber-600",Admitted:"from-green-500 to-emerald-600","Not Admitted":"from-red-500 to-pink-600"})[T]||"from-gray-500 to-slate-600",H=()=>{var T,ee,Y,ne,de,he;if(N){k(!0);try{let ce="";v==="all"?(ce=`ADMISSION TEAM REPORT
`,ce+=`Period: ${r==="custom"&&l&&o?`${l} to ${o}`:r}
`,ce+=`Generated: ${new Date().toLocaleString()}

`,ce+=`OVERALL TEAM SUMMARY
`,ce+=`Metric,Value
`,ce+=`Total Leads,${((T=$.reportMetrics)==null?void 0:T.totalLeads)||0}
`,ce+=`Assigned,${((ee=$.reportMetrics)==null?void 0:ee.assigned)||0}
`,ce+=`Counseling,${((Y=$.reportMetrics)==null?void 0:Y.counseling)||0}
`,ce+=`In Follow Up,${((ne=$.reportMetrics)==null?void 0:ne.inFollowUp)||0}
`,ce+=`Admitted,${((de=$.reportMetrics)==null?void 0:de.admitted)||0}
`,ce+=`Not Admitted,${((he=$.reportMetrics)==null?void 0:he.notAdmitted)||0}
`,ce+=`Conversion Rate,${$.conversionRate||"0.00"}%

`,N&&N.reports&&N.reports.length>0&&(ce+=`INDIVIDUAL REPORTS BY TEAM MEMBER

`,[...N.reports].sort((Pe,an)=>Pe.user.name.localeCompare(an.user.name)).forEach((Pe,an)=>{ce+=`${an+1}. ${Pe.user.name.toUpperCase()}
`,ce+=`Email: ${Pe.user.email}
`,ce+=`Total Leads,${Pe.stats.totalLeads}
`,ce+=`Assigned,${Pe.stats.assigned}
`,ce+=`Counseling,${Pe.stats.counseling}
`,ce+=`In Follow Up,${Pe.stats.inFollowUp}
`,ce+=`Admitted,${Pe.stats.admitted}
`,ce+=`Not Admitted,${Pe.stats.notAdmitted}
`,ce+=`Conversion Rate,${Pe.conversionRate}%

`}))):(ce=`Admission Report - ${N.user.name}
`,ce+=`Email: ${N.user.email}
`,ce+=`Period: ${r==="custom"&&l&&o?`${l} to ${o}`:r}
`,ce+=`Generated: ${new Date().toLocaleString()}

`,ce+=`SUMMARY
`,ce+=`Total Leads,${N.stats.totalLeads}
`,ce+=`Assigned,${N.stats.assigned}
`,ce+=`Counseling,${N.stats.counseling}
`,ce+=`In Follow Up,${N.stats.inFollowUp}
`,ce+=`Admitted,${N.stats.admitted}
`,ce+=`Not Admitted,${N.stats.notAdmitted}
`,ce+=`Conversion Rate,${N.conversionRate}%

`,ce+=`LEAD DETAILS
`,ce+=`Lead ID,Name,Phone,Email,Status,Course,Created At,Admitted At
`,N.leads&&N.leads.length>0&&N.leads.forEach(Oe=>{const Pe=[Oe.leadId||"",Oe.name||"",Oe.phone||"",Oe.email||"",Oe.status||"",Oe.interestedCourse||"",Oe.createdAt?new Date(Oe.createdAt).toLocaleDateString():"",Oe.admittedAt?new Date(Oe.admittedAt).toLocaleDateString():""];ce+=Pe.map(an=>`"${an}"`).join(",")+`
`}));const ue=new Blob([ce],{type:"text/csv;charset=utf-8;"}),pe=document.createElement("a"),He=URL.createObjectURL(ue);pe.setAttribute("href",He);const It=v==="all"?`admission-report-all-${new Date().toISOString().slice(0,10)}.csv`:`admission-report-${N.user.name.replace(/\s+/g,"-")}-${new Date().toISOString().slice(0,10)}.csv`;pe.setAttribute("download",It),pe.style.visibility="hidden",document.body.appendChild(pe),pe.click(),document.body.removeChild(pe)}catch(ce){console.error("Download failed:",ce),alert("Failed to download report. Please try again.")}finally{k(!1)}}};return e.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Admission Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track student admissions and pipeline"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("select",{value:r,onChange:T=>a(T.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom"})]}),r==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",value:l,onChange:T=>i(T.target.value)}),e.jsx("span",{className:"text-gray-500 font-medium",children:"to"}),e.jsx("input",{type:"date",className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",value:o,onChange:T=>d(T.target.value)})]})]})]}),"      ",s&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium",children:s})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:Xu.map(T=>e.jsxs("div",{className:`group relative bg-gradient-to-br ${M(T.key)} rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:L(T.key)})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:T.label}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:$.counts[T.key]??0})]})]},T.key))}),m.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Active Batches Overview"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Track progress across all batches"})]}),e.jsxs("select",{value:g,onChange:T=>w(T.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors text-sm",children:[e.jsx("option",{value:"All",children:" All Categories"}),[...new Set(m.filter(T=>T.status==="Active").map(T=>T.category))].map(T=>e.jsxs("option",{value:T,children:[" ",T]},T))]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:m.filter(T=>T.status==="Active"&&(g==="All"||T.category===g)).map(T=>{var de;const ee=((de=T.admittedStudents)==null?void 0:de.length)||0,Y=T.targetedStudent||0,ne=Y>0?Math.round(ee/Y*100):0;return e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-3 border border-blue-100 hover:border-blue-300 hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h4",{className:"font-bold text-gray-800 text-sm mb-1 line-clamp-1",title:T.batchName,children:T.batchName}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"inline-block px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs font-medium",children:T.category}),e.jsx("span",{className:"text-xs font-mono text-gray-500",children:T.batchId.split("-").pop()})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"bg-white rounded p-2 flex-1 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Target"}),e.jsx("div",{className:"text-lg font-bold text-gray-800",children:Y})]}),e.jsxs("div",{className:"bg-white rounded p-2 flex-1 text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Admitted"}),e.jsx("div",{className:"text-lg font-bold text-blue-600",children:ee})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`text-xs font-bold ${ne>=100?"text-green-600":ne>=75?"text-blue-600":ne>=50?"text-yellow-600":"text-orange-600"}`,children:[ne,"%"]}),ne>=100&&e.jsx("span",{className:"text-xs",children:""})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${ne>=100?"bg-gradient-to-r from-green-500 to-emerald-500":ne>=75?"bg-gradient-to-r from-blue-500 to-indigo-500":ne>=50?"bg-gradient-to-r from-yellow-500 to-amber-500":"bg-gradient-to-r from-orange-500 to-red-500"}`,style:{width:`${Math.min(ne,100)}%`}})}),ee<Y&&e.jsxs("div",{className:"text-center text-xs text-gray-500",children:[Y-ee," left"]})]})]},T._id)})}),m.filter(T=>T.status==="Active"&&(g==="All"||T.category===g)).length===0&&e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(Ae,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:g==="All"?"No active batches available":`No active batches in "${g}" category`})]})]}),O&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-xl border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Admission Team Reports"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Overall performance and individual metrics"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(pi,{className:"w-5 h-5 text-gray-500"}),e.jsxs("select",{value:v,onChange:T=>y(T.target.value),className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"all",children:" Overall Team Report"}),b.map(T=>e.jsxs("option",{value:T._id,children:[" ",T.name," - Individual Report"]},T._id))]})]}),e.jsxs("button",{onClick:H,disabled:(v==="all"?!$.reportMetrics:!N)||E,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl font-medium hover:shadow-lg transform hover:-translate-y-0.5 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[e.jsx(rs,{size:18}),E?"Downloading...":v==="all"?"Download All Team Reports":"Download Individual Report"]})]}),v==="all"&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ae,{size:18,className:"text-purple-600"}),"Overall Team Performance"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 text-center border border-blue-200",children:[e.jsx("div",{className:"text-xs text-blue-600 mb-1 font-medium",children:"Total Leads"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:((Z=$.reportMetrics)==null?void 0:Z.totalLeads)||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 text-center border border-green-200",children:[e.jsx("div",{className:"text-xs text-green-600 mb-1 font-medium",children:"Admitted"}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:((W=$.reportMetrics)==null?void 0:W.admitted)||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4 text-center border border-orange-200",children:[e.jsx("div",{className:"text-xs text-orange-600 mb-1 font-medium",children:"In Progress"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700",children:(((F=$.reportMetrics)==null?void 0:F.counseling)||0)+(((q=$.reportMetrics)==null?void 0:q.inFollowUp)||0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4 text-center border border-red-200",children:[e.jsx("div",{className:"text-xs text-red-600 mb-1 font-medium",children:"Not Admitted"}),e.jsx("div",{className:"text-2xl font-bold text-red-700",children:((se=$.reportMetrics)==null?void 0:se.notAdmitted)||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 text-center border border-purple-200",children:[e.jsx("div",{className:"text-xs text-purple-600 mb-1 font-medium",children:"Conversion Rate"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-700",children:[$.conversionRate||"0.00","%"]})]})]})]}),N&&v!=="all"&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Vn,{size:18,className:"text-blue-600"}),"Individual Report - ",(I=N.user)==null?void 0:I.name,e.jsxs("span",{className:"text-xs font-normal text-gray-500 ml-2",children:["(",(z=N.user)==null?void 0:z.email,")"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total Leads"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:((G=N.stats)==null?void 0:G.totalLeads)||0})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Admitted"}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:((V=N.stats)==null?void 0:V.admitted)||0})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"In Progress"}),e.jsx("div",{className:"text-xl font-bold text-orange-600",children:(((te=N.stats)==null?void 0:te.counseling)||0)+(((ae=N.stats)==null?void 0:ae.inFollowUp)||0)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Not Admitted"}),e.jsx("div",{className:"text-xl font-bold text-red-600",children:((K=N.stats)==null?void 0:K.notAdmitted)||0})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Conversion Rate"}),e.jsxs("div",{className:"text-xl font-bold text-purple-600",children:[N.conversionRate||0,"%"]})]})]}),N.leads&&N.leads.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h5",{className:"font-semibold text-gray-700 mb-2 text-sm",children:["Lead Details (",N.leads.length," total)"]}),e.jsxs("div",{className:"max-h-64 overflow-y-auto bg-white rounded-lg border border-gray-200",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-600",children:"Lead ID"}),e.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-600",children:"Name"}),e.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-600",children:"Status"}),e.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-600",children:"Course"}),e.jsx("th",{className:"text-left px-3 py-2 text-xs font-semibold text-gray-600",children:"Created"})]})}),e.jsx("tbody",{children:N.leads.slice(0,10).map((T,ee)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 text-xs font-mono",children:T.leadId}),e.jsx("td",{className:"px-3 py-2 text-xs",children:T.name}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${T.status==="Admitted"?"bg-green-100 text-green-700":T.status==="Not Admitted"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:T.status})}),e.jsx("td",{className:"px-3 py-2 text-xs",children:T.interestedCourse||"-"}),e.jsx("td",{className:"px-3 py-2 text-xs",children:T.createdAt?new Date(T.createdAt).toLocaleDateString():"-"})]},T._id||ee))})]}),N.leads.length>10&&e.jsxs("div",{className:"text-center py-2 text-xs text-gray-500 bg-gray-50",children:["Showing 10 of ",N.leads.length," leads. Download report for complete list."]})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Leads vs Admitted"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Conversion tracking over time"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Leads"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Admitted"})]})]})]}),e.jsx(cv,{data:$.series})]})]})}function Ya(){return new Date().toISOString().slice(0,10)}function Ku(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1).toISOString().slice(0,10)}function cp(){const[t,s]=c.useState(""),[n,r]=c.useState("monthly"),[a,l]=c.useState(""),[i,o]=c.useState(""),[d,u]=c.useState([]),[x,m]=c.useState([]),[h,g]=c.useState([]),[w,j]=c.useState(!1);c.useEffect(()=>{b()},[]);const A=()=>{if(n==="lifetime")return{from:null,to:null};if(n==="custom"&&a&&i)return{from:new Date(a),to:new Date(i)};const C=new Date;let E=new Date;return n==="daily"?E.setDate(C.getDate()-1):n==="weekly"?E.setDate(C.getDate()-7):n==="monthly"?E.setMonth(C.getMonth()-1):n==="yearly"&&E.setFullYear(C.getFullYear()-1),{from:E,to:C}};async function b(){j(!0);try{const[C,E,k]=await Promise.all([_.listLeads().catch(()=>({leads:[]})),_.listMyTasks().catch(()=>({tasks:[]})),_.listDMCosts().catch(()=>({items:[]}))]);u((C==null?void 0:C.leads)||[]),m((E==null?void 0:E.tasks)||[]);const O=Array.isArray(k)?k:(k==null?void 0:k.items)||(k==null?void 0:k.costs)||[];g(O||[]),s("")}catch(C){s(C.message||"Failed to load dashboard data")}finally{j(!1)}}const p=(C,E,k)=>{if(!C)return!1;const O=new Date(C).getTime();return!(E&&O<E.getTime()||k&&O>k.getTime())},{from:v,to:y}=A(),N=c.useMemo(()=>{const C=v?new Date(v):null,E=y?new Date(y):null,k=d.filter(L=>p(L.createdAt||L.date||L._id&&null,C,E)||!C&&!E),O=k.length,U={meta:0,linkedin:0,manual:0,others:0};k.forEach(L=>{const M=(L.source||"").toLowerCase();M.includes("meta")?U.meta++:M.includes("linkedin")||M.includes("linked in")?U.linkedin++:M.includes("manual")?U.manual++:U.others++});const B=x.filter(L=>p(L.createdAt||L.createdAt,C,E)||!C&&!E),R=B.filter(L=>(L.status||"").toLowerCase()==="completed").length,P=h.filter(L=>p(L.date||L.createdAt,C,E)||!C&&!E).reduce((L,M)=>L+(Number(M.amount)||0),0),D=[];if(C&&E){const L=new Date(C);for(;L<=E;){const M=L.toISOString().slice(0,10),H=d.filter(Z=>{const W=new Date(Z.createdAt||Z.date||Z._id&&null);return W&&W.toISOString().slice(0,10)===M}).length;D.push({date:M,value:H}),L.setDate(L.getDate()+1)}}const $=B.filter(L=>{const M=(L.category||"").toLowerCase();return(M.includes("content")||M.includes("published"))&&(L.status||"").toLowerCase()==="completed"}).length;return{totalLeads:O,sourceCounts:U,totalTasksCompleted:R,totalExpense:P,series:D,contentPublished:$}},[d,x,h,v,y]);return e.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Digital Marketing Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your marketing performance"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("select",{value:n,onChange:C=>r(C.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom"})]}),n==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:a,onChange:C=>l(C.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"}),e.jsx("span",{className:"text-gray-500 font-medium",children:"to"}),e.jsx("input",{type:"date",value:i,onChange:C=>o(C.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"})]})]})]}),t&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium",children:t})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Ae,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Leads"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:N.totalLeads})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(ud,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Meta Leads"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:N.sourceCounts.meta})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-cyan-500 to-teal-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(md,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"LinkedIn Leads"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:N.sourceCounts.linkedin})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(gt,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Manual Leads"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:N.sourceCounts.manual})]})]}),e.jsxs("div",{className:"group relative bg-gradient-to-br from-red-500 to-pink-600 rounded-xl p-4 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx($e,{className:"w-5 h-5 text-white"})})}),e.jsx("p",{className:"text-white/80 text-xs font-medium mb-1",children:"Total Expense"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:Wt(N.totalExpense)})]})]})]}),e.jsx(dv,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Leads Over Time"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Daily lead generation trend"})]})}),e.jsx(uv,{data:N.series})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Lead Sources"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Distribution by channel"})]}),e.jsx(mv,{parts:N.sourceCounts})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 shadow-xl",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Vt,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-sm font-medium",children:"Total Content Published"}),e.jsx("h3",{className:"text-4xl font-bold text-white mt-1",children:N.contentPublished}),e.jsx("p",{className:"text-white/60 text-xs mt-2",children:"Completed content tasks"})]})]})})]})}function dv(){const[t,s]=c.useState("monthly"),[n,r]=c.useState(Ku()),[a,l]=c.useState(Ya()),[i,o]=c.useState(!1),[d,u]=c.useState(""),[x,m]=c.useState(""),h=async()=>{o(!0),u(""),m("");try{let g,w;t==="daily"?(g=Ya(),w=Ya()):t==="monthly"?(g=Ku(),w=Ya()):t==="custom"&&(g=n,w=a);const[j,A,b,p,v]=await Promise.all([_.listLeads().catch(()=>({leads:[]})),_.listAllTasks().catch(()=>({tasks:[]})),_.listDMCosts().catch(()=>({items:[]})),_.listSocial().catch(()=>({metrics:{}})),_.listSEO().catch(()=>({items:[]}))]),y=(j==null?void 0:j.leads)||[],N=(A==null?void 0:A.tasks)||[],C=Array.isArray(b)?b:(b==null?void 0:b.items)||(b==null?void 0:b.costs)||[],E=(p==null?void 0:p.metrics)||{},k=Array.isArray(v)?v:(v==null?void 0:v.items)||(v==null?void 0:v.seo)||[],O=new Date(g),U=new Date(w);U.setHours(23,59,59,999);const B=y.filter(I=>{const z=new Date(I.createdAt||I.date);return z>=O&&z<=U}),R=N.filter(I=>{var G;const z=new Date(I.createdAt||I.deadline);return z>=O&&z<=U&&((G=I.assignedTo)==null?void 0:G.some(V=>V.role==="DigitalMarketing"))}),S=C.filter(I=>{const z=new Date(I.date);return z>=O&&z<=U}),P=k.filter(I=>{const z=new Date(I.date);return z>=O&&z<=U}),D=B.length,$={};B.forEach(I=>{const z=I.source||"Unknown";$[z]=($[z]||0)+1});const L={todo:R.filter(I=>I.status==="To-Do").length,inProgress:R.filter(I=>I.status==="In Progress").length,completed:R.filter(I=>I.status==="Completed").length,total:R.length},M=S.reduce((I,z)=>I+(Number(z.amount)||0),0),H={};S.forEach(I=>{const z=I.purpose||"Others";H[z]=(H[z]||0)+(Number(I.amount)||0)});const Z={};P.forEach(I=>{const z=I.typeOfWork||"Others";Z[z]=(Z[z]||0)+1});let W=`Digital Marketing Report
`;W+=`Period: ${g} to ${w}
`,W+=`Generated: ${new Date().toLocaleString()}

`,W+=`=== LEADS ===
`,W+=`Total Leads,${D}

`,W+=`Leads by Source
`,W+=`Source Name,Number of Leads
`,Object.entries($).sort((I,z)=>z[1]-I[1]).forEach(([I,z])=>{W+=`${I},${z}
`}),W+=`
`,W+=`=== TASKS ===
`,W+=`Status,Count
`,W+=`To-Do,${L.todo}
`,W+=`In Progress,${L.inProgress}
`,W+=`Completed,${L.completed}
`,W+=`Total,${L.total}

`,R.length>0&&(W+=`Task Details
`,W+=`Task Name,Status,Priority,Deadline,Assigned To
`,R.forEach(I=>{var K;const z=(I.title||"Untitled").replace(/,/g,";"),G=I.status||"N/A",V=I.priority||"N/A",te=I.deadline?new Date(I.deadline).toLocaleDateString():"N/A",ae=((K=I.assignedTo)==null?void 0:K.map(T=>T.name||"Unknown").join("; "))||"Unassigned";W+=`"${z}",${G},${V},${te},"${ae}"
`}),W+=`
`),W+=`=== MARKETING EXPENSES ===
`,W+=`Total Cost,${M} BDT

`,W+=`Cost by Purpose Name
`,W+=`Purpose Name,Amount (BDT)
`,Object.entries(H).sort((I,z)=>z[1]-I[1]).forEach(([I,z])=>{W+=`${I},${z}
`}),W+=`
`,W+=`=== SOCIAL MEDIA METRICS ===
`,W+=`Platform,Value
`,W+=`Facebook Followers,${E.facebookFollowers||0}
`,W+=`Instagram Followers,${E.instagramFollowers||0}
`,W+=`Facebook Group Members,${E.facebookGroupMembers||0}
`,W+=`YouTube Subscribers,${E.youtubeSubscribers||0}
`,W+=`LinkedIn Followers,${E.linkedInFollowers||0}
`,W+=`X (Twitter) Followers,${E.xFollowers||0}
`,W+=`Pinterest Views,${E.pinterestView||0}
`,W+=`Blogger Impressions,${E.bloggerImpression||0}
`,W+=`Total Reach,${E.totalReach||0}

`,W+=`=== SEO ACTIVITIES ===
`,W+=`Total Activities,${P.length}

`,W+=`Activities by Type
`,W+=`Type,Count
`,Object.entries(Z).forEach(([I,z])=>{W+=`${I},${z}
`}),W+=`
`,P.length>0&&(W+=`SEO Activity Details
`,W+=`Date,Type,Challenge,Details
`,P.forEach(I=>{const z=new Date(I.date).toLocaleDateString(),G=(I.typeOfWork||"").replace(/,/g,";"),V=(I.challenge||"").replace(/,/g,";").replace(/\n/g," "),te=(I.details||"").replace(/,/g,";").replace(/\n/g," ");W+=`${z},"${G}","${V}","${te}"
`}),W+=`
`),S.length>0&&(W+=`=== DETAILED EXPENSES ===
`,W+=`Date,Purpose Name,Amount (BDT),Notes
`,S.forEach(I=>{const z=new Date(I.date).toLocaleDateString(),G=(I.purpose||"N/A").replace(/,/g,";"),V=(I.notes||I.description||"N/A").replace(/,/g,";").replace(/\n/g," ");W+=`${z},"${G}",${I.amount||0},"${V}"
`}));const F=new Blob([W],{type:"text/csv;charset=utf-8;"}),q=URL.createObjectURL(F),se=document.createElement("a");se.href=q,se.download=`DM_Report_${g}_to_${w}.csv`,se.click(),URL.revokeObjectURL(q),u(" Report downloaded successfully!")}catch(g){m("Failed to download report: "+g.message)}finally{o(!1)}};return e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border-2 border-gray-200 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg shadow-md",children:e.jsx(rs,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Download Comprehensive Reports"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Export detailed reports including leads, tasks, costs, social metrics, and SEO activities"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("select",{value:t,onChange:g=>s(g.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[e.jsx("option",{value:"daily",children:"Today"}),e.jsx("option",{value:"monthly",children:"This Month"}),e.jsx("option",{value:"custom",children:"Custom Range"})]}),t==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:n,onChange:g=>r(g.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"}),e.jsx("span",{className:"text-gray-500 font-medium self-center",children:"to"}),e.jsx("input",{type:"date",value:a,onChange:g=>l(g.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl bg-white hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors"})]}),e.jsx("button",{onClick:h,disabled:i,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-bold hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-xl",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"w-4 h-4"}),"Download Report"]})})]})]}),d&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border-2 border-green-200 rounded-lg",children:e.jsx("p",{className:"text-green-700 font-medium text-sm",children:d})}),x&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border-2 border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium text-sm",children:x})})]})}function uv({data:t}){if(!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-52 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ps,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data available"})]})});const a=Math.max(...t.map(d=>d.value),1),l=(600-40*2)/Math.max(1,t.length-1),i=t.map((d,u)=>{const x=40+u*l,m=180-(a?d.value/a*(220-40*2):0);return`${x},${m}`}).join(" "),o=`${i} ${40+(t.length-1)*l},180 40,180`;return e.jsx("div",{className:"relative",children:e.jsxs("svg",{viewBox:"0 0 600 220",className:"w-full h-56",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:"0.05"})]})}),[0,.25,.5,.75,1].map((d,u)=>e.jsx("line",{x1:40,y1:180-(220-40*2)*d,x2:560,y2:180-(220-40*2)*d,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"4,4"},u)),e.jsx("polygon",{fill:"url(#lineGradient)",points:o}),e.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"3",points:i,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((d,u)=>{const x=40+u*l,m=180-(a?d.value/a*(220-40*2):0);return e.jsx("circle",{cx:x,cy:m,r:"4",fill:"#3b82f6",stroke:"white",strokeWidth:"2"},u)})]})})}function mv({parts:t}){const s=Object.values(t||{}).reduce((x,m)=>x+(m||0),0),n=Object.entries(t||{});if(s===0)return e.jsx("div",{className:"flex items-center justify-center h-48 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ps,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No data"})]})});let r=0;const a=160,l=a/2,i=a/2,o=a/2-4,d=o*.6,u=["#3b82f6","#8b5cf6","#06b6d4","#f59e0b"];return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsxs("svg",{width:a,height:a,viewBox:`0 0 ${a} ${a}`,className:"drop-shadow-md",children:[n.map(([x,m],h)=>{const g=r/s*Math.PI*2;r+=m||0;const w=r/s*Math.PI*2,j=l+o*Math.cos(g-Math.PI/2),A=i+o*Math.sin(g-Math.PI/2),b=l+o*Math.cos(w-Math.PI/2),p=i+o*Math.sin(w-Math.PI/2),v=l+d*Math.cos(g-Math.PI/2),y=i+d*Math.sin(g-Math.PI/2),N=l+d*Math.cos(w-Math.PI/2),C=i+d*Math.sin(w-Math.PI/2),E=w-g>Math.PI?1:0,k=`
              M ${j} ${A}
              A ${o} ${o} 0 ${E} 1 ${b} ${p}
              L ${N} ${C}
              A ${d} ${d} 0 ${E} 0 ${v} ${y}
              Z
            `;return e.jsx("path",{d:k,fill:u[h%u.length],stroke:"#fff",strokeWidth:"2",className:"hover:opacity-80 transition-opacity cursor-pointer"},x)}),e.jsx("circle",{cx:l,cy:i,r:d,fill:"white"}),e.jsx("text",{x:l,y:i-5,textAnchor:"middle",fontSize:"12",fontWeight:"600",fill:"#6b7280",children:"Total"}),e.jsx("text",{x:l,y:i+10,textAnchor:"middle",fontSize:"16",fontWeight:"700",fill:"#1f2937",children:s})]})}),e.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.map(([x,m],h)=>{const g=(m/s*100).toFixed(1);return e.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{style:{background:u[h%u.length]},className:"w-3 h-3 rounded-full shadow-sm"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:x})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[g,"%"]}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:m})]})]},x)})})]})}function xv(){const[t,s]=c.useState(0);return c.useEffect(()=>{(async()=>{const n=await _.listMyTasks().catch(()=>[]);s((n||[]).filter(r=>(r.status||"").toLowerCase()!=="done").length)})()},[]),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-xl font-bold text-navy",children:"My Dashboard"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("div",{className:"text-royal text-sm",children:"My Open Tasks"}),e.jsx("div",{className:"text-3xl font-extrabold",children:t})]})})]})}function hv(){const{user:t}=xe(),s=t==null?void 0:t.role;return s==="SuperAdmin"||s==="Admin"?e.jsx(iv,{}):s==="Accountant"?e.jsx(rp,{}):s==="Recruitment"?e.jsx(ap,{}):s==="MotionGraphics"?e.jsx(lp,{}):s==="Admission"?e.jsx(op,{}):s==="DigitalMarketing"?e.jsx(cp,{}):s==="Coordinator"?e.jsx(ip,{}):e.jsx(xv,{})}function pv(){const{user:t,updateMe:s}=xe(),[n,r]=c.useState((t==null?void 0:t.name)||""),[a,l]=c.useState((t==null?void 0:t.avatar)||""),[i,o]=c.useState(""),[d,u]=c.useState(""),[x,m]=c.useState(null),[h,g]=c.useState(null),w=async j=>{j.preventDefault(),m(null),g(null);try{const A={name:n,avatar:a};d&&(A.currentPassword=i,A.newPassword=d),await s(A),m("Profile updated"),o(""),u("")}catch(A){g((A==null?void 0:A.message)||"Update failed")}};return e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy mb-4",children:"Edit Profile"}),x&&e.jsx("div",{className:"mb-3 text-green-700",children:x}),h&&e.jsx("div",{className:"mb-3 text-red-600",children:h}),e.jsxs("form",{onSubmit:w,className:"bg-white shadow-soft rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:a,alt:"avatar",className:"w-20 h-20 rounded-full object-cover border-2 border-gold"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Avatar URL"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:a,onChange:j=>l(j.target.value)})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Full Name"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:n,onChange:j=>r(j.target.value)})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Current Password"}),e.jsx("input",{type:"password",className:"w-full border rounded-xl px-3 py-2",value:i,onChange:j=>o(j.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"New Password"}),e.jsx("input",{type:"password",className:"w-full border rounded-xl px-3 py-2",value:d,onChange:j=>u(j.target.value)})]})]}),e.jsx("button",{className:"mt-6 bg-gold text-navy rounded-xl px-5 py-2 font-semibold hover:bg-lightgold",children:"Save Changes"})]})]})}const fv=t=>new Date(t).toISOString().slice(0,16),Zu=(t=3)=>{const s=new Date;return s.setDate(s.getDate()+t),fv(s)};function gv(){const{user:t}=xe(),[s,n]=c.useState([]),[r,a]=c.useState([]),[l,i]=c.useState("InProgress"),[o,d]=c.useState(!1),[u,x]=c.useState({title:"",description:"",category:"",assignedTo:"",deadline:Zu(3)}),[m,h]=c.useState(null),[g,w]=c.useState(null),j=(t==null?void 0:t.role)==="SuperAdmin"||(t==null?void 0:t.role)==="Admin",A=async()=>{try{const{users:y}=await _.listUsers();n(y)}catch{}},b=async()=>{try{const{tasks:y}=await _.listAllTasks(l);a(y)}catch{}};c.useEffect(()=>{j&&A()},[j]),c.useEffect(()=>{j&&b()},[l,j]);const p=c.useMemo(()=>s.filter(y=>y.role!=="SuperAdmin"),[s]),v=async y=>{y.preventDefault(),h(null),w(null);try{await _.assignTask({...u}),d(!1),x({title:"",description:"",category:"",assignedTo:"",deadline:Zu(3)}),w("Task assigned"),b()}catch(N){h((N==null?void 0:N.message)||"Failed to assign")}};return j?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Assign Task"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:l,onChange:y=>i(y.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"InProgress",children:"In Progress"}),e.jsx("option",{value:"Completed",children:"Completed"})]}),e.jsx("button",{onClick:()=>d(!0),className:"bg-gold text-navy rounded-xl px-4 py-2 font-semibold hover:bg-lightgold",children:"+ Assign Task"})]})]}),g&&e.jsx("div",{className:"mb-2 text-green-700",children:g}),m&&e.jsx("div",{className:"mb-2 text-red-600",children:m}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Task"}),e.jsx("th",{className:"text-left p-3",children:"Assignee"}),e.jsx("th",{className:"text-left p-3",children:"Assigned By"})," ",e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Deadline"})]})}),e.jsxs("tbody",{children:[r.map(y=>{var N,C,E,k;return e.jsxs("tr",{className:"border-t",children:[e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"font-semibold text-navy",children:y.title}),y.description&&e.jsx("div",{className:"text-royal/80",children:y.description}),y.category&&e.jsxs("div",{className:"text-xs text-royal/70 mt-1",children:["Category: ",y.category]})]}),e.jsxs("td",{className:"p-3",children:[(N=y.assignedTo)==null?void 0:N.name," ",e.jsxs("span",{className:"text-xs text-royal/70",children:["(",(C=y.assignedTo)==null?void 0:C.role,")"]})]}),e.jsxs("td",{className:"p-3",children:[(E=y.assignedBy)==null?void 0:E.name," ",e.jsxs("span",{className:"text-xs text-royal/70",children:["(",(k=y.assignedBy)==null?void 0:k.role,")"]})]})," ",e.jsx("td",{className:"p-3",children:y.status==="InProgress"?"In Progress":"Completed"}),e.jsx("td",{className:"p-3",children:new Date(y.deadline).toLocaleString()})]},y._id)}),r.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:"5",children:"No tasks"})})]})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:e.jsxs("form",{onSubmit:v,className:"bg-white rounded-2xl shadow-soft p-4 w-full max-w-xl",children:[e.jsx("h2",{className:"text-xl font-bold text-navy mb-3",children:"Assign Task"}),e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Title *"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2 mb-3",value:u.title,onChange:y=>x(N=>({...N,title:y.target.value})),required:!0}),e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2 mb-3",rows:"3",value:u.description,onChange:y=>x(N=>({...N,description:y.target.value}))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Category"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:u.category,onChange:y=>x(N=>({...N,category:y.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Assign To *"}),e.jsxs("select",{className:"w-full border rounded-xl px-3 py-2",value:u.assignedTo,onChange:y=>x(N=>({...N,assignedTo:y.target.value})),required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select user"}),p.map(y=>e.jsxs("option",{value:y._id,children:[y.name,"  ",y.role]},y._id))]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Deadline *"}),e.jsx("input",{type:"datetime-local",className:"w-full border rounded-xl px-3 py-2",value:u.deadline,onChange:y=>x(N=>({...N,deadline:y.target.value})),required:!0})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded-xl bg-gold text-navy font-semibold hover:bg-lightgold",children:"Assign"})]})]})})]}):e.jsx("div",{className:"text-royal",children:"You do not have permission to view this page."})}const yv=3,em=t=>new Date(t).toLocaleString(),vv=t=>new Date(t).toISOString().slice(0,16),tm=(t=3)=>{const s=new Date;return s.setDate(s.getDate()+t),vv(s)},bv=(t,s,n)=>{if(s==="Completed")return n&&new Date(n)<=new Date(t)?"bg-green-50":"bg-red-50";const r=new Date,a=new Date(t),l=Math.floor((a-r)/(1e3*60*60*24));return l<=0?"bg-red-50":l<=yv?"bg-yellow-50":""};function jv(){const{user:t}=xe(),[s,n]=c.useState([]),[r,a]=c.useState("InProgress"),[l,i]=c.useState(!1),[o,d]=c.useState(null),[u,x]=c.useState(null),[m,h]=c.useState({title:"",description:"",category:"",deadline:tm(3)}),g=t&&t.role!=="SuperAdmin",w=async()=>{try{const{tasks:b}=await _.listMyTasks(r);n(b)}catch{}};c.useEffect(()=>{g&&w()},[r,g]);const j=async b=>{try{const p=b.status==="InProgress"?"Completed":"InProgress";await _.updateTaskStatus(b._id,p),x("Status updated"),w()}catch(p){d((p==null?void 0:p.message)||"Failed to update")}},A=async b=>{b.preventDefault(),d(null),x(null);try{await _.addSelfTask({...m}),i(!1),h({title:"",description:"",category:"",deadline:tm(3)}),x("Task added"),w()}catch(p){d((p==null?void 0:p.message)||"Failed to add")}};return g?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"My Task"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:r,onChange:b=>a(b.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"InProgress",children:"In Progress"}),e.jsx("option",{value:"Completed",children:"Completed"})]}),e.jsx("button",{onClick:()=>i(!0),className:"bg-gold text-navy rounded-xl px-4 py-2 font-semibold hover:bg-lightgold",children:"+ Add My Task"})]})]}),u&&e.jsx("div",{className:"mb-2 text-green-700",children:u}),o&&e.jsx("div",{className:"mb-2 text-red-600",children:o}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Task"}),e.jsx("th",{className:"text-left p-3",children:"Assigned By"})," ",e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Deadline"}),e.jsx("th",{className:"text-left p-3",children:"Completed"}),e.jsx("th",{className:"text-left p-3",children:"Action"})]})}),e.jsxs("tbody",{children:[s.map(b=>{var p,v;return e.jsxs("tr",{className:`border-t ${bv(b.deadline,b.status,b.completedAt)}`,children:[e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"font-semibold text-navy",children:b.title}),b.description&&e.jsx("div",{className:"text-royal/80",children:b.description}),b.category&&e.jsxs("div",{className:"text-xs text-royal/70 mt-1",children:["Category: ",b.category]})]}),e.jsxs("td",{className:"p-3",children:[(p=b.assignedBy)==null?void 0:p.name,e.jsxs("span",{className:"text-xs text-royal/70",children:[" (",(v=b.assignedBy)==null?void 0:v.role,")"]})]}),e.jsx("td",{className:"p-3",children:b.status==="InProgress"?"In Progress":"Completed"}),e.jsx("td",{className:"p-3",children:em(b.deadline)}),e.jsx("td",{className:"p-3",children:b.completedAt?em(b.completedAt):"-"}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>j(b),className:"px-3 py-1 rounded-lg border hover:bg-[#f3f6ff]",children:b.status==="InProgress"?"Mark Completed":"Mark In-Progress"})})]},b._id)}),s.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:"6",children:"No tasks"})})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:e.jsxs("form",{onSubmit:A,className:"bg-white rounded-2xl shadow-soft p-4 w-full max-w-xl",children:[e.jsx("h2",{className:"text-xl font-bold text-navy mb-3",children:"Add My Task"}),e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Title *"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2 mb-3",value:m.title,onChange:b=>h(p=>({...p,title:b.target.value})),required:!0}),e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2 mb-3",rows:"3",value:m.description,onChange:b=>h(p=>({...p,description:b.target.value}))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Category"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:m.category,onChange:b=>h(p=>({...p,category:b.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Deadline *"}),e.jsx("input",{type:"datetime-local",className:"w-full border rounded-xl px-3 py-2",value:m.deadline,onChange:b=>h(p=>({...p,deadline:b.target.value})),required:!0})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded-xl bg-gold text-navy font-semibold hover:bg-lightgold",children:"Add"})]})]})})]}):e.jsx("div",{className:"text-royal",children:"Super Admin has no My Task."})}function Nv(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return c.useMemo(()=>r=>{s.forEach(a=>a(r))},s)}const gi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xr(t){const s=Object.prototype.toString.call(t);return s==="[object Window]"||s==="[object global]"}function hd(t){return"nodeType"in t}function lt(t){var s,n;return t?xr(t)?t:hd(t)&&(s=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?s:window:window}function pd(t){const{Document:s}=lt(t);return t instanceof s}function Sa(t){return xr(t)?!1:t instanceof lt(t).HTMLElement}function dp(t){return t instanceof lt(t).SVGElement}function hr(t){return t?xr(t)?t.document:hd(t)?pd(t)?t:Sa(t)||dp(t)?t.ownerDocument:document:document:document}const Gt=gi?c.useLayoutEffect:c.useEffect;function yi(t){const s=c.useRef(t);return Gt(()=>{s.current=t}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return s.current==null?void 0:s.current(...r)},[])}function wv(){const t=c.useRef(null),s=c.useCallback((r,a)=>{t.current=setInterval(r,a)},[]),n=c.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[s,n]}function fa(t,s){s===void 0&&(s=[t]);const n=c.useRef(t);return Gt(()=>{n.current!==t&&(n.current=t)},s),n}function ka(t,s){const n=c.useRef();return c.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...s])}function Ul(t){const s=yi(t),n=c.useRef(null),r=c.useCallback(a=>{a!==n.current&&(s==null||s(a,n.current)),n.current=a},[]);return[n,r]}function Wl(t){const s=c.useRef();return c.useEffect(()=>{s.current=t},[t]),s.current}let to={};function Ca(t,s){return c.useMemo(()=>{if(s)return s;const n=to[t]==null?0:to[t]+1;return to[t]=n,t+"-"+n},[t,s])}function up(t){return function(s){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((l,i)=>{const o=Object.entries(i);for(const[d,u]of o){const x=l[d];x!=null&&(l[d]=x+t*u)}return l},{...s})}}const Kn=up(1),Hl=up(-1);function Sv(t){return"clientX"in t&&"clientY"in t}function vi(t){if(!t)return!1;const{KeyboardEvent:s}=lt(t.target);return s&&t instanceof s}function kv(t){if(!t)return!1;const{TouchEvent:s}=lt(t.target);return s&&t instanceof s}function Vl(t){if(kv(t)){if(t.touches&&t.touches.length){const{clientX:s,clientY:n}=t.touches[0];return{x:s,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:s,clientY:n}=t.changedTouches[0];return{x:s,y:n}}}return Sv(t)?{x:t.clientX,y:t.clientY}:null}const Zs=Object.freeze({Translate:{toString(t){if(!t)return;const{x:s,y:n}=t;return"translate3d("+(s?Math.round(s):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:s,scaleY:n}=t;return"scaleX("+s+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Zs.Translate.toString(t),Zs.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:s,duration:n,easing:r}=t;return s+" "+n+"ms "+r}}}),sm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Cv(t){return t.matches(sm)?t:t.querySelector(sm)}const Av={display:"none"};function Dv(t){let{id:s,value:n}=t;return ge.createElement("div",{id:s,style:Av},n)}function Tv(t){let{id:s,announcement:n,ariaLiveType:r="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ge.createElement("div",{id:s,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function Ev(){const[t,s]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&s(r)},[]),announcement:t}}const mp=c.createContext(null);function Mv(t){const s=c.useContext(mp);c.useEffect(()=>{if(!s)throw new Error("useDndMonitor must be used within a children of <DndContext>");return s(t)},[t,s])}function Pv(){const[t]=c.useState(()=>new Set),s=c.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[c.useCallback(r=>{let{type:a,event:l}=r;t.forEach(i=>{var o;return(o=i[a])==null?void 0:o.call(i,l)})},[t]),s]}const Lv={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Rv={onDragStart(t){let{active:s}=t;return"Picked up draggable item "+s.id+"."},onDragOver(t){let{active:s,over:n}=t;return n?"Draggable item "+s.id+" was moved over droppable area "+n.id+".":"Draggable item "+s.id+" is no longer over a droppable area."},onDragEnd(t){let{active:s,over:n}=t;return n?"Draggable item "+s.id+" was dropped over droppable area "+n.id:"Draggable item "+s.id+" was dropped."},onDragCancel(t){let{active:s}=t;return"Dragging was cancelled. Draggable item "+s.id+" was dropped."}};function Iv(t){let{announcements:s=Rv,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=Lv}=t;const{announce:l,announcement:i}=Ev(),o=Ca("DndLiveRegion"),[d,u]=c.useState(!1);if(c.useEffect(()=>{u(!0)},[]),Mv(c.useMemo(()=>({onDragStart(m){let{active:h}=m;l(s.onDragStart({active:h}))},onDragMove(m){let{active:h,over:g}=m;s.onDragMove&&l(s.onDragMove({active:h,over:g}))},onDragOver(m){let{active:h,over:g}=m;l(s.onDragOver({active:h,over:g}))},onDragEnd(m){let{active:h,over:g}=m;l(s.onDragEnd({active:h,over:g}))},onDragCancel(m){let{active:h,over:g}=m;l(s.onDragCancel({active:h,over:g}))}}),[l,s])),!d)return null;const x=ge.createElement(ge.Fragment,null,ge.createElement(Dv,{id:r,value:a.draggable}),ge.createElement(Tv,{id:o,announcement:i}));return n?Un.createPortal(x,n):x}var _e;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(_e||(_e={}));function Gl(){}function $v(t,s){return c.useMemo(()=>({sensor:t,options:s??{}}),[t,s])}function Ov(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return c.useMemo(()=>[...s].filter(r=>r!=null),[...s])}const Yt=Object.freeze({x:0,y:0});function Fv(t,s){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function _v(t,s){const n=Vl(t);if(!n)return"0 0";const r={x:(n.x-s.left)/s.width*100,y:(n.y-s.top)/s.height*100};return r.x+"% "+r.y+"%"}function zv(t,s){let{data:{value:n}}=t,{data:{value:r}}=s;return n-r}function Bv(t,s){let{data:{value:n}}=t,{data:{value:r}}=s;return r-n}function nm(t){let{left:s,top:n,height:r,width:a}=t;return[{x:s,y:n},{x:s+a,y:n},{x:s,y:n+r},{x:s+a,y:n+r}]}function Uv(t,s){if(!t||t.length===0)return null;const[n]=t;return n[s]}const Wv=t=>{let{collisionRect:s,droppableRects:n,droppableContainers:r}=t;const a=nm(s),l=[];for(const i of r){const{id:o}=i,d=n.get(o);if(d){const u=nm(d),x=a.reduce((h,g,w)=>h+Fv(u[w],g),0),m=Number((x/4).toFixed(4));l.push({id:o,data:{droppableContainer:i,value:m}})}}return l.sort(zv)};function Hv(t,s){const n=Math.max(s.top,t.top),r=Math.max(s.left,t.left),a=Math.min(s.left+s.width,t.left+t.width),l=Math.min(s.top+s.height,t.top+t.height),i=a-r,o=l-n;if(r<a&&n<l){const d=s.width*s.height,u=t.width*t.height,x=i*o,m=x/(d+u-x);return Number(m.toFixed(4))}return 0}const Vv=t=>{let{collisionRect:s,droppableRects:n,droppableContainers:r}=t;const a=[];for(const l of r){const{id:i}=l,o=n.get(i);if(o){const d=Hv(o,s);d>0&&a.push({id:i,data:{droppableContainer:l,value:d}})}}return a.sort(Bv)};function Gv(t,s,n){return{...t,scaleX:s&&n?s.width/n.width:1,scaleY:s&&n?s.height/n.height:1}}function xp(t,s){return t&&s?{x:t.left-s.left,y:t.top-s.top}:Yt}function Yv(t){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return a.reduce((i,o)=>({...i,top:i.top+t*o.y,bottom:i.bottom+t*o.y,left:i.left+t*o.x,right:i.right+t*o.x}),{...n})}}const qv=Yv(1);function hp(t){if(t.startsWith("matrix3d(")){const s=t.slice(9,-1).split(/, /);return{x:+s[12],y:+s[13],scaleX:+s[0],scaleY:+s[5]}}else if(t.startsWith("matrix(")){const s=t.slice(7,-1).split(/, /);return{x:+s[4],y:+s[5],scaleX:+s[0],scaleY:+s[3]}}return null}function Jv(t,s,n){const r=hp(s);if(!r)return t;const{scaleX:a,scaleY:l,x:i,y:o}=r,d=t.left-i-(1-a)*parseFloat(n),u=t.top-o-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),x=a?t.width/a:t.width,m=l?t.height/l:t.height;return{width:x,height:m,top:u,right:d+x,bottom:u+m,left:d}}const Qv={ignoreTransform:!1};function pr(t,s){s===void 0&&(s=Qv);let n=t.getBoundingClientRect();if(s.ignoreTransform){const{transform:u,transformOrigin:x}=lt(t).getComputedStyle(t);u&&(n=Jv(n,u,x))}const{top:r,left:a,width:l,height:i,bottom:o,right:d}=n;return{top:r,left:a,width:l,height:i,bottom:o,right:d}}function rm(t){return pr(t,{ignoreTransform:!0})}function Xv(t){const s=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:s,bottom:n,width:s,height:n}}function Kv(t,s){return s===void 0&&(s=lt(t).getComputedStyle(t)),s.position==="fixed"}function Zv(t,s){s===void 0&&(s=lt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const l=s[a];return typeof l=="string"?n.test(l):!1})}function fd(t,s){const n=[];function r(a){if(s!=null&&n.length>=s||!a)return n;if(pd(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Sa(a)||dp(a)||n.includes(a))return n;const l=lt(t).getComputedStyle(a);return a!==t&&Zv(a,l)&&n.push(a),Kv(a,l)?n:r(a.parentNode)}return t?r(t):n}function pp(t){const[s]=fd(t,1);return s??null}function so(t){return!gi||!t?null:xr(t)?t:hd(t)?pd(t)||t===hr(t).scrollingElement?window:Sa(t)?t:null:null}function fp(t){return xr(t)?t.scrollX:t.scrollLeft}function gp(t){return xr(t)?t.scrollY:t.scrollTop}function cc(t){return{x:fp(t),y:gp(t)}}var Ue;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ue||(Ue={}));function yp(t){return!gi||!t?!1:t===document.scrollingElement}function vp(t){const s={x:0,y:0},n=yp(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},a=t.scrollTop<=s.y,l=t.scrollLeft<=s.x,i=t.scrollTop>=r.y,o=t.scrollLeft>=r.x;return{isTop:a,isLeft:l,isBottom:i,isRight:o,maxScroll:r,minScroll:s}}const eb={x:.2,y:.2};function tb(t,s,n,r,a){let{top:l,left:i,right:o,bottom:d}=n;r===void 0&&(r=10),a===void 0&&(a=eb);const{isTop:u,isBottom:x,isLeft:m,isRight:h}=vp(t),g={x:0,y:0},w={x:0,y:0},j={height:s.height*a.y,width:s.width*a.x};return!u&&l<=s.top+j.height?(g.y=Ue.Backward,w.y=r*Math.abs((s.top+j.height-l)/j.height)):!x&&d>=s.bottom-j.height&&(g.y=Ue.Forward,w.y=r*Math.abs((s.bottom-j.height-d)/j.height)),!h&&o>=s.right-j.width?(g.x=Ue.Forward,w.x=r*Math.abs((s.right-j.width-o)/j.width)):!m&&i<=s.left+j.width&&(g.x=Ue.Backward,w.x=r*Math.abs((s.left+j.width-i)/j.width)),{direction:g,speed:w}}function sb(t){if(t===document.scrollingElement){const{innerWidth:l,innerHeight:i}=window;return{top:0,left:0,right:l,bottom:i,width:l,height:i}}const{top:s,left:n,right:r,bottom:a}=t.getBoundingClientRect();return{top:s,left:n,right:r,bottom:a,width:t.clientWidth,height:t.clientHeight}}function bp(t){return t.reduce((s,n)=>Kn(s,cc(n)),Yt)}function nb(t){return t.reduce((s,n)=>s+fp(n),0)}function rb(t){return t.reduce((s,n)=>s+gp(n),0)}function jp(t,s){if(s===void 0&&(s=pr),!t)return;const{top:n,left:r,bottom:a,right:l}=s(t);pp(t)&&(a<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const ab=[["x",["left","right"],nb],["y",["top","bottom"],rb]];class gd{constructor(s,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=fd(n),a=bp(r);this.rect={...s},this.width=s.width,this.height=s.height;for(const[l,i,o]of ab)for(const d of i)Object.defineProperty(this,d,{get:()=>{const u=o(r),x=a[l]-u;return this.rect[d]+x},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Yr{constructor(s){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=s}add(s,n,r){var a;(a=this.target)==null||a.addEventListener(s,n,r),this.listeners.push([s,n,r])}}function lb(t){const{EventTarget:s}=lt(t);return t instanceof s?t:hr(t)}function no(t,s){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof s=="number"?Math.sqrt(n**2+r**2)>s:"x"in s&&"y"in s?n>s.x&&r>s.y:"x"in s?n>s.x:"y"in s?r>s.y:!1}var kt;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(kt||(kt={}));function am(t){t.preventDefault()}function ib(t){t.stopPropagation()}var ve;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ve||(ve={}));const Np={start:[ve.Space,ve.Enter],cancel:[ve.Esc],end:[ve.Space,ve.Enter,ve.Tab]},ob=(t,s)=>{let{currentCoordinates:n}=s;switch(t.code){case ve.Right:return{...n,x:n.x+25};case ve.Left:return{...n,x:n.x-25};case ve.Down:return{...n,y:n.y+25};case ve.Up:return{...n,y:n.y-25}}};class wp{constructor(s){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=s;const{event:{target:n}}=s;this.props=s,this.listeners=new Yr(hr(n)),this.windowListeners=new Yr(lt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(kt.Resize,this.handleCancel),this.windowListeners.add(kt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(kt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:s,onStart:n}=this.props,r=s.node.current;r&&jp(r),n(Yt)}handleKeyDown(s){if(vi(s)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:l=Np,coordinateGetter:i=ob,scrollBehavior:o="smooth"}=a,{code:d}=s;if(l.end.includes(d)){this.handleEnd(s);return}if(l.cancel.includes(d)){this.handleCancel(s);return}const{collisionRect:u}=r.current,x=u?{x:u.left,y:u.top}:Yt;this.referenceCoordinates||(this.referenceCoordinates=x);const m=i(s,{active:n,context:r.current,currentCoordinates:x});if(m){const h=Hl(m,x),g={x:0,y:0},{scrollableAncestors:w}=r.current;for(const j of w){const A=s.code,{isTop:b,isRight:p,isLeft:v,isBottom:y,maxScroll:N,minScroll:C}=vp(j),E=sb(j),k={x:Math.min(A===ve.Right?E.right-E.width/2:E.right,Math.max(A===ve.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(A===ve.Down?E.bottom-E.height/2:E.bottom,Math.max(A===ve.Down?E.top:E.top+E.height/2,m.y))},O=A===ve.Right&&!p||A===ve.Left&&!v,U=A===ve.Down&&!y||A===ve.Up&&!b;if(O&&k.x!==m.x){const B=j.scrollLeft+h.x,R=A===ve.Right&&B<=N.x||A===ve.Left&&B>=C.x;if(R&&!h.y){j.scrollTo({left:B,behavior:o});return}R?g.x=j.scrollLeft-B:g.x=A===ve.Right?j.scrollLeft-N.x:j.scrollLeft-C.x,g.x&&j.scrollBy({left:-g.x,behavior:o});break}else if(U&&k.y!==m.y){const B=j.scrollTop+h.y,R=A===ve.Down&&B<=N.y||A===ve.Up&&B>=C.y;if(R&&!h.x){j.scrollTo({top:B,behavior:o});return}R?g.y=j.scrollTop-B:g.y=A===ve.Down?j.scrollTop-N.y:j.scrollTop-C.y,g.y&&j.scrollBy({top:-g.y,behavior:o});break}}this.handleMove(s,Kn(Hl(m,this.referenceCoordinates),g))}}}handleMove(s,n){const{onMove:r}=this.props;s.preventDefault(),r(n)}handleEnd(s){const{onEnd:n}=this.props;s.preventDefault(),this.detach(),n()}handleCancel(s){const{onCancel:n}=this.props;s.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}wp.activators=[{eventName:"onKeyDown",handler:(t,s,n)=>{let{keyboardCodes:r=Np,onActivation:a}=s,{active:l}=n;const{code:i}=t.nativeEvent;if(r.start.includes(i)){const o=l.activatorNode.current;return o&&t.target!==o?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function lm(t){return!!(t&&"distance"in t)}function im(t){return!!(t&&"delay"in t)}class yd{constructor(s,n,r){var a;r===void 0&&(r=lb(s.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=s,this.events=n;const{event:l}=s,{target:i}=l;this.props=s,this.events=n,this.document=hr(i),this.documentListeners=new Yr(this.document),this.listeners=new Yr(r),this.windowListeners=new Yr(lt(i)),this.initialCoordinates=(a=Vl(l))!=null?a:Yt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:s,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(s.move.name,this.handleMove,{passive:!1}),this.listeners.add(s.end.name,this.handleEnd),s.cancel&&this.listeners.add(s.cancel.name,this.handleCancel),this.windowListeners.add(kt.Resize,this.handleCancel),this.windowListeners.add(kt.DragStart,am),this.windowListeners.add(kt.VisibilityChange,this.handleCancel),this.windowListeners.add(kt.ContextMenu,am),this.documentListeners.add(kt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(im(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(lm(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(s,n){const{active:r,onPending:a}=this.props;a(r,s,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:s}=this,{onStart:n}=this.props;s&&(this.activated=!0,this.documentListeners.add(kt.Click,ib,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(kt.SelectionChange,this.removeTextSelection),n(s))}handleMove(s){var n;const{activated:r,initialCoordinates:a,props:l}=this,{onMove:i,options:{activationConstraint:o}}=l;if(!a)return;const d=(n=Vl(s))!=null?n:Yt,u=Hl(a,d);if(!r&&o){if(lm(o)){if(o.tolerance!=null&&no(u,o.tolerance))return this.handleCancel();if(no(u,o.distance))return this.handleStart()}if(im(o)&&no(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}s.cancelable&&s.preventDefault(),i(d)}handleEnd(){const{onAbort:s,onEnd:n}=this.props;this.detach(),this.activated||s(this.props.active),n()}handleCancel(){const{onAbort:s,onCancel:n}=this.props;this.detach(),this.activated||s(this.props.active),n()}handleKeydown(s){s.code===ve.Esc&&this.handleCancel()}removeTextSelection(){var s;(s=this.document.getSelection())==null||s.removeAllRanges()}}const cb={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class vd extends yd{constructor(s){const{event:n}=s,r=hr(n.target);super(s,cb,r)}}vd.activators=[{eventName:"onPointerDown",handler:(t,s)=>{let{nativeEvent:n}=t,{onActivation:r}=s;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const db={move:{name:"mousemove"},end:{name:"mouseup"}};var dc;(function(t){t[t.RightClick=2]="RightClick"})(dc||(dc={}));class ub extends yd{constructor(s){super(s,db,hr(s.event.target))}}ub.activators=[{eventName:"onMouseDown",handler:(t,s)=>{let{nativeEvent:n}=t,{onActivation:r}=s;return n.button===dc.RightClick?!1:(r==null||r({event:n}),!0)}}];const ro={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class mb extends yd{constructor(s){super(s,ro)}static setup(){return window.addEventListener(ro.move.name,s,{capture:!1,passive:!1}),function(){window.removeEventListener(ro.move.name,s)};function s(){}}}mb.activators=[{eventName:"onTouchStart",handler:(t,s)=>{let{nativeEvent:n}=t,{onActivation:r}=s;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var qr;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(qr||(qr={}));var Yl;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Yl||(Yl={}));function xb(t){let{acceleration:s,activator:n=qr.Pointer,canScroll:r,draggingRect:a,enabled:l,interval:i=5,order:o=Yl.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:x,delta:m,threshold:h}=t;const g=pb({delta:m,disabled:!l}),[w,j]=wv(),A=c.useRef({x:0,y:0}),b=c.useRef({x:0,y:0}),p=c.useMemo(()=>{switch(n){case qr.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case qr.DraggableRect:return a}},[n,a,d]),v=c.useRef(null),y=c.useCallback(()=>{const C=v.current;if(!C)return;const E=A.current.x*b.current.x,k=A.current.y*b.current.y;C.scrollBy(E,k)},[]),N=c.useMemo(()=>o===Yl.TreeOrder?[...u].reverse():u,[o,u]);c.useEffect(()=>{if(!l||!u.length||!p){j();return}for(const C of N){if((r==null?void 0:r(C))===!1)continue;const E=u.indexOf(C),k=x[E];if(!k)continue;const{direction:O,speed:U}=tb(C,k,p,s,h);for(const B of["x","y"])g[B][O[B]]||(U[B]=0,O[B]=0);if(U.x>0||U.y>0){j(),v.current=C,w(y,i),A.current=U,b.current=O;return}}A.current={x:0,y:0},b.current={x:0,y:0},j()},[s,y,r,j,l,i,JSON.stringify(p),JSON.stringify(g),w,u,N,x,JSON.stringify(h)])}const hb={x:{[Ue.Backward]:!1,[Ue.Forward]:!1},y:{[Ue.Backward]:!1,[Ue.Forward]:!1}};function pb(t){let{delta:s,disabled:n}=t;const r=Wl(s);return ka(a=>{if(n||!r||!a)return hb;const l={x:Math.sign(s.x-r.x),y:Math.sign(s.y-r.y)};return{x:{[Ue.Backward]:a.x[Ue.Backward]||l.x===-1,[Ue.Forward]:a.x[Ue.Forward]||l.x===1},y:{[Ue.Backward]:a.y[Ue.Backward]||l.y===-1,[Ue.Forward]:a.y[Ue.Forward]||l.y===1}}},[n,s,r])}function fb(t,s){const n=s!=null?t.get(s):void 0,r=n?n.node.current:null;return ka(a=>{var l;return s==null?null:(l=r??a)!=null?l:null},[r,s])}function gb(t,s){return c.useMemo(()=>t.reduce((n,r)=>{const{sensor:a}=r,l=a.activators.map(i=>({eventName:i.eventName,handler:s(i.handler,r)}));return[...n,...l]},[]),[t,s])}var ga;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ga||(ga={}));var uc;(function(t){t.Optimized="optimized"})(uc||(uc={}));const om=new Map;function yb(t,s){let{dragging:n,dependencies:r,config:a}=s;const[l,i]=c.useState(null),{frequency:o,measure:d,strategy:u}=a,x=c.useRef(t),m=A(),h=fa(m),g=c.useCallback(function(b){b===void 0&&(b=[]),!h.current&&i(p=>p===null?b:p.concat(b.filter(v=>!p.includes(v))))},[h]),w=c.useRef(null),j=ka(b=>{if(m&&!n)return om;if(!b||b===om||x.current!==t||l!=null){const p=new Map;for(let v of t){if(!v)continue;if(l&&l.length>0&&!l.includes(v.id)&&v.rect.current){p.set(v.id,v.rect.current);continue}const y=v.node.current,N=y?new gd(d(y),y):null;v.rect.current=N,N&&p.set(v.id,N)}return p}return b},[t,l,n,m,d]);return c.useEffect(()=>{x.current=t},[t]),c.useEffect(()=>{m||g()},[n,m]),c.useEffect(()=>{l&&l.length>0&&i(null)},[JSON.stringify(l)]),c.useEffect(()=>{m||typeof o!="number"||w.current!==null||(w.current=setTimeout(()=>{g(),w.current=null},o))},[o,m,g,...r]),{droppableRects:j,measureDroppableContainers:g,measuringScheduled:l!=null};function A(){switch(u){case ga.Always:return!1;case ga.BeforeDragging:return n;default:return!n}}}function bd(t,s){return ka(n=>t?n||(typeof s=="function"?s(t):t):null,[s,t])}function vb(t,s){return bd(t,s)}function bb(t){let{callback:s,disabled:n}=t;const r=yi(s),a=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,n]);return c.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function bi(t){let{callback:s,disabled:n}=t;const r=yi(s),a=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[n]);return c.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function jb(t){return new gd(pr(t),t)}function cm(t,s,n){s===void 0&&(s=jb);const[r,a]=c.useState(null);function l(){a(d=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=d??n)!=null?u:null}const x=s(t);return JSON.stringify(d)===JSON.stringify(x)?d:x})}const i=bb({callback(d){if(t)for(const u of d){const{type:x,target:m}=u;if(x==="childList"&&m instanceof HTMLElement&&m.contains(t)){l();break}}}}),o=bi({callback:l});return Gt(()=>{l(),t?(o==null||o.observe(t),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),i==null||i.disconnect())},[t]),r}function Nb(t){const s=bd(t);return xp(t,s)}const dm=[];function wb(t){const s=c.useRef(t),n=ka(r=>t?r&&r!==dm&&t&&s.current&&t.parentNode===s.current.parentNode?r:fd(t):dm,[t]);return c.useEffect(()=>{s.current=t},[t]),n}function Sb(t){const[s,n]=c.useState(null),r=c.useRef(t),a=c.useCallback(l=>{const i=so(l.target);i&&n(o=>o?(o.set(i,cc(i)),new Map(o)):null)},[]);return c.useEffect(()=>{const l=r.current;if(t!==l){i(l);const o=t.map(d=>{const u=so(d);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,cc(u)]):null}).filter(d=>d!=null);n(o.length?new Map(o):null),r.current=t}return()=>{i(t),i(l)};function i(o){o.forEach(d=>{const u=so(d);u==null||u.removeEventListener("scroll",a)})}},[a,t]),c.useMemo(()=>t.length?s?Array.from(s.values()).reduce((l,i)=>Kn(l,i),Yt):bp(t):Yt,[t,s])}function um(t,s){s===void 0&&(s=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},s),c.useEffect(()=>{const r=t!==Yt;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Hl(t,n.current):Yt}function kb(t){c.useEffect(()=>{if(!gi)return;const s=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of s)n==null||n()}},t.map(s=>{let{sensor:n}=s;return n}))}function Cb(t,s){return c.useMemo(()=>t.reduce((n,r)=>{let{eventName:a,handler:l}=r;return n[a]=i=>{l(i,s)},n},{}),[t,s])}function Sp(t){return c.useMemo(()=>t?Xv(t):null,[t])}const mm=[];function Ab(t,s){s===void 0&&(s=pr);const[n]=t,r=Sp(n?lt(n):null),[a,l]=c.useState(mm);function i(){l(()=>t.length?t.map(d=>yp(d)?r:new gd(s(d),d)):mm)}const o=bi({callback:i});return Gt(()=>{o==null||o.disconnect(),i(),t.forEach(d=>o==null?void 0:o.observe(d))},[t]),a}function kp(t){if(!t)return null;if(t.children.length>1)return t;const s=t.children[0];return Sa(s)?s:t}function Db(t){let{measure:s}=t;const[n,r]=c.useState(null),a=c.useCallback(u=>{for(const{target:x}of u)if(Sa(x)){r(m=>{const h=s(x);return m?{...m,width:h.width,height:h.height}:h});break}},[s]),l=bi({callback:a}),i=c.useCallback(u=>{const x=kp(u);l==null||l.disconnect(),x&&(l==null||l.observe(x)),r(x?s(x):null)},[s,l]),[o,d]=Ul(i);return c.useMemo(()=>({nodeRef:o,rect:n,setRef:d}),[n,o,d])}const Tb=[{sensor:vd,options:{}},{sensor:wp,options:{}}],Eb={current:{}},ul={draggable:{measure:rm},droppable:{measure:rm,strategy:ga.WhileDragging,frequency:uc.Optimized},dragOverlay:{measure:pr}};class Jr extends Map{get(s){var n;return s!=null&&(n=super.get(s))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(s=>{let{disabled:n}=s;return!n})}getNodeFor(s){var n,r;return(n=(r=this.get(s))==null?void 0:r.node.current)!=null?n:void 0}}const Mb={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Jr,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Gl},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ul,measureDroppableContainers:Gl,windowRect:null,measuringScheduled:!1},Cp={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Gl,draggableNodes:new Map,over:null,measureDroppableContainers:Gl},Aa=c.createContext(Cp),Ap=c.createContext(Mb);function Pb(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Jr}}}function Lb(t,s){switch(s.type){case _e.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:s.initialCoordinates,active:s.active}};case _e.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:s.coordinates.x-t.draggable.initialCoordinates.x,y:s.coordinates.y-t.draggable.initialCoordinates.y}}};case _e.DragEnd:case _e.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case _e.RegisterDroppable:{const{element:n}=s,{id:r}=n,a=new Jr(t.droppable.containers);return a.set(r,n),{...t,droppable:{...t.droppable,containers:a}}}case _e.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=s,l=t.droppable.containers.get(n);if(!l||r!==l.key)return t;const i=new Jr(t.droppable.containers);return i.set(n,{...l,disabled:a}),{...t,droppable:{...t.droppable,containers:i}}}case _e.UnregisterDroppable:{const{id:n,key:r}=s,a=t.droppable.containers.get(n);if(!a||r!==a.key)return t;const l=new Jr(t.droppable.containers);return l.delete(n),{...t,droppable:{...t.droppable,containers:l}}}default:return t}}function Rb(t){let{disabled:s}=t;const{active:n,activatorEvent:r,draggableNodes:a}=c.useContext(Aa),l=Wl(r),i=Wl(n==null?void 0:n.id);return c.useEffect(()=>{if(!s&&!r&&l&&i!=null){if(!vi(l)||document.activeElement===l.target)return;const o=a.get(i);if(!o)return;const{activatorNode:d,node:u}=o;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const x of[d.current,u.current]){if(!x)continue;const m=Cv(x);if(m){m.focus();break}}})}},[r,s,a,i,l]),null}function Dp(t,s){let{transform:n,...r}=s;return t!=null&&t.length?t.reduce((a,l)=>l({transform:a,...r}),n):n}function Ib(t){return c.useMemo(()=>({draggable:{...ul.draggable,...t==null?void 0:t.draggable},droppable:{...ul.droppable,...t==null?void 0:t.droppable},dragOverlay:{...ul.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function $b(t){let{activeNode:s,measure:n,initialRect:r,config:a=!0}=t;const l=c.useRef(!1),{x:i,y:o}=typeof a=="boolean"?{x:a,y:a}:a;Gt(()=>{if(!i&&!o||!s){l.current=!1;return}if(l.current||!r)return;const u=s==null?void 0:s.node.current;if(!u||u.isConnected===!1)return;const x=n(u),m=xp(x,r);if(i||(m.x=0),o||(m.y=0),l.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const h=pp(u);h&&h.scrollBy({top:m.y,left:m.x})}},[s,i,o,r,n])}const ji=c.createContext({...Yt,scaleX:1,scaleY:1});var Rs;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Rs||(Rs={}));const Ob=c.memo(function(s){var n,r,a,l;let{id:i,accessibility:o,autoScroll:d=!0,children:u,sensors:x=Tb,collisionDetection:m=Vv,measuring:h,modifiers:g,...w}=s;const j=c.useReducer(Lb,void 0,Pb),[A,b]=j,[p,v]=Pv(),[y,N]=c.useState(Rs.Uninitialized),C=y===Rs.Initialized,{draggable:{active:E,nodes:k,translate:O},droppable:{containers:U}}=A,B=E!=null?k.get(E):null,R=c.useRef({initial:null,translated:null}),S=c.useMemo(()=>{var Qe;return E!=null?{id:E,data:(Qe=B==null?void 0:B.data)!=null?Qe:Eb,rect:R}:null},[E,B]),P=c.useRef(null),[D,$]=c.useState(null),[L,M]=c.useState(null),H=fa(w,Object.values(w)),Z=Ca("DndDescribedBy",i),W=c.useMemo(()=>U.getEnabled(),[U]),F=Ib(h),{droppableRects:q,measureDroppableContainers:se,measuringScheduled:I}=yb(W,{dragging:C,dependencies:[O.x,O.y],config:F.droppable}),z=fb(k,E),G=c.useMemo(()=>L?Vl(L):null,[L]),V=Yp(),te=vb(z,F.draggable.measure);$b({activeNode:E!=null?k.get(E):null,config:V.layoutShiftCompensation,initialRect:te,measure:F.draggable.measure});const ae=cm(z,F.draggable.measure,te),K=cm(z?z.parentElement:null),T=c.useRef({activatorEvent:null,active:null,activeNode:z,collisionRect:null,collisions:null,droppableRects:q,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:U,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ee=U.getNodeFor((n=T.current.over)==null?void 0:n.id),Y=Db({measure:F.dragOverlay.measure}),ne=(r=Y.nodeRef.current)!=null?r:z,de=C?(a=Y.rect)!=null?a:ae:null,he=!!(Y.nodeRef.current&&Y.rect),ce=Nb(he?null:ae),ue=Sp(ne?lt(ne):null),pe=wb(C?ee??z:null),He=Ab(pe),It=Dp(g,{transform:{x:O.x-ce.x,y:O.y-ce.y,scaleX:1,scaleY:1},activatorEvent:L,active:S,activeNodeRect:ae,containerNodeRect:K,draggingNodeRect:de,over:T.current.over,overlayNodeRect:Y.rect,scrollableAncestors:pe,scrollableAncestorRects:He,windowRect:ue}),Oe=G?Kn(G,O):null,Pe=Sb(pe),an=um(Pe),Bp=um(Pe,[ae]),kn=Kn(It,an),Cn=de?qv(de,It):null,fr=S&&Cn?m({active:S,collisionRect:Cn,droppableRects:q,droppableContainers:W,pointerCoordinates:Oe}):null,jd=Uv(fr,"id"),[ws,Nd]=c.useState(null),Up=he?It:Kn(It,Bp),Wp=Gv(Up,(l=ws==null?void 0:ws.rect)!=null?l:null,ae),wi=c.useRef(null),wd=c.useCallback((Qe,xt)=>{let{sensor:ht,options:Ss}=xt;if(P.current==null)return;const wt=k.get(P.current);if(!wt)return;const pt=Qe.nativeEvent,Jt=new ht({active:P.current,activeNode:wt,event:pt,options:Ss,context:T,onAbort(Ve){if(!k.get(Ve))return;const{onDragAbort:Qt}=H.current,ls={id:Ve};Qt==null||Qt(ls),p({type:"onDragAbort",event:ls})},onPending(Ve,ks,Qt,ls){if(!k.get(Ve))return;const{onDragPending:yr}=H.current,Cs={id:Ve,constraint:ks,initialCoordinates:Qt,offset:ls};yr==null||yr(Cs),p({type:"onDragPending",event:Cs})},onStart(Ve){const ks=P.current;if(ks==null)return;const Qt=k.get(ks);if(!Qt)return;const{onDragStart:ls}=H.current,gr={activatorEvent:pt,active:{id:ks,data:Qt.data,rect:R}};Un.unstable_batchedUpdates(()=>{ls==null||ls(gr),N(Rs.Initializing),b({type:_e.DragStart,initialCoordinates:Ve,active:ks}),p({type:"onDragStart",event:gr}),$(wi.current),M(pt)})},onMove(Ve){b({type:_e.DragMove,coordinates:Ve})},onEnd:An(_e.DragEnd),onCancel:An(_e.DragCancel)});wi.current=Jt;function An(Ve){return async function(){const{active:Qt,collisions:ls,over:gr,scrollAdjustedTranslate:yr}=T.current;let Cs=null;if(Qt&&yr){const{cancelDrop:vr}=H.current;Cs={activatorEvent:pt,active:Qt,collisions:ls,delta:yr,over:gr},Ve===_e.DragEnd&&typeof vr=="function"&&await Promise.resolve(vr(Cs))&&(Ve=_e.DragCancel)}P.current=null,Un.unstable_batchedUpdates(()=>{b({type:Ve}),N(Rs.Uninitialized),Nd(null),$(null),M(null),wi.current=null;const vr=Ve===_e.DragEnd?"onDragEnd":"onDragCancel";if(Cs){const Si=H.current[vr];Si==null||Si(Cs),p({type:vr,event:Cs})}})}}},[k]),Hp=c.useCallback((Qe,xt)=>(ht,Ss)=>{const wt=ht.nativeEvent,pt=k.get(Ss);if(P.current!==null||!pt||wt.dndKit||wt.defaultPrevented)return;const Jt={active:pt};Qe(ht,xt.options,Jt)===!0&&(wt.dndKit={capturedBy:xt.sensor},P.current=Ss,wd(ht,xt))},[k,wd]),Sd=gb(x,Hp);kb(x),Gt(()=>{ae&&y===Rs.Initializing&&N(Rs.Initialized)},[ae,y]),c.useEffect(()=>{const{onDragMove:Qe}=H.current,{active:xt,activatorEvent:ht,collisions:Ss,over:wt}=T.current;if(!xt||!ht)return;const pt={active:xt,activatorEvent:ht,collisions:Ss,delta:{x:kn.x,y:kn.y},over:wt};Un.unstable_batchedUpdates(()=>{Qe==null||Qe(pt),p({type:"onDragMove",event:pt})})},[kn.x,kn.y]),c.useEffect(()=>{const{active:Qe,activatorEvent:xt,collisions:ht,droppableContainers:Ss,scrollAdjustedTranslate:wt}=T.current;if(!Qe||P.current==null||!xt||!wt)return;const{onDragOver:pt}=H.current,Jt=Ss.get(jd),An=Jt&&Jt.rect.current?{id:Jt.id,rect:Jt.rect.current,data:Jt.data,disabled:Jt.disabled}:null,Ve={active:Qe,activatorEvent:xt,collisions:ht,delta:{x:wt.x,y:wt.y},over:An};Un.unstable_batchedUpdates(()=>{Nd(An),pt==null||pt(Ve),p({type:"onDragOver",event:Ve})})},[jd]),Gt(()=>{T.current={activatorEvent:L,active:S,activeNode:z,collisionRect:Cn,collisions:fr,droppableRects:q,draggableNodes:k,draggingNode:ne,draggingNodeRect:de,droppableContainers:U,over:ws,scrollableAncestors:pe,scrollAdjustedTranslate:kn},R.current={initial:de,translated:Cn}},[S,z,fr,Cn,k,ne,de,q,U,ws,pe,kn]),xb({...V,delta:O,draggingRect:Cn,pointerCoordinates:Oe,scrollableAncestors:pe,scrollableAncestorRects:He});const Vp=c.useMemo(()=>({active:S,activeNode:z,activeNodeRect:ae,activatorEvent:L,collisions:fr,containerNodeRect:K,dragOverlay:Y,draggableNodes:k,droppableContainers:U,droppableRects:q,over:ws,measureDroppableContainers:se,scrollableAncestors:pe,scrollableAncestorRects:He,measuringConfiguration:F,measuringScheduled:I,windowRect:ue}),[S,z,ae,L,fr,K,Y,k,U,q,ws,se,pe,He,F,I,ue]),Gp=c.useMemo(()=>({activatorEvent:L,activators:Sd,active:S,activeNodeRect:ae,ariaDescribedById:{draggable:Z},dispatch:b,draggableNodes:k,over:ws,measureDroppableContainers:se}),[L,Sd,S,ae,b,Z,k,ws,se]);return ge.createElement(mp.Provider,{value:v},ge.createElement(Aa.Provider,{value:Gp},ge.createElement(Ap.Provider,{value:Vp},ge.createElement(ji.Provider,{value:Wp},u)),ge.createElement(Rb,{disabled:(o==null?void 0:o.restoreFocus)===!1})),ge.createElement(Iv,{...o,hiddenTextDescribedById:Z}));function Yp(){const Qe=(D==null?void 0:D.autoScrollEnabled)===!1,xt=typeof d=="object"?d.enabled===!1:d===!1,ht=C&&!Qe&&!xt;return typeof d=="object"?{...d,enabled:ht}:{enabled:ht}}}),Fb=c.createContext(null),xm="button",_b="Draggable";function zb(t){let{id:s,data:n,disabled:r=!1,attributes:a}=t;const l=Ca(_b),{activators:i,activatorEvent:o,active:d,activeNodeRect:u,ariaDescribedById:x,draggableNodes:m,over:h}=c.useContext(Aa),{role:g=xm,roleDescription:w="draggable",tabIndex:j=0}=a??{},A=(d==null?void 0:d.id)===s,b=c.useContext(A?ji:Fb),[p,v]=Ul(),[y,N]=Ul(),C=Cb(i,s),E=fa(n);Gt(()=>(m.set(s,{id:s,key:l,node:p,activatorNode:y,data:E}),()=>{const O=m.get(s);O&&O.key===l&&m.delete(s)}),[m,s]);const k=c.useMemo(()=>({role:g,tabIndex:j,"aria-disabled":r,"aria-pressed":A&&g===xm?!0:void 0,"aria-roledescription":w,"aria-describedby":x.draggable}),[r,g,j,A,w,x.draggable]);return{active:d,activatorEvent:o,activeNodeRect:u,attributes:k,isDragging:A,listeners:r?void 0:C,node:p,over:h,setNodeRef:v,setActivatorNodeRef:N,transform:b}}function Tp(){return c.useContext(Ap)}const Bb="Droppable",Ub={timeout:25};function Wb(t){let{data:s,disabled:n=!1,id:r,resizeObserverConfig:a}=t;const l=Ca(Bb),{active:i,dispatch:o,over:d,measureDroppableContainers:u}=c.useContext(Aa),x=c.useRef({disabled:n}),m=c.useRef(!1),h=c.useRef(null),g=c.useRef(null),{disabled:w,updateMeasurementsFor:j,timeout:A}={...Ub,...a},b=fa(j??r),p=c.useCallback(()=>{if(!m.current){m.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),g.current=null},A)},[A]),v=bi({callback:p,disabled:w||!i}),y=c.useCallback((k,O)=>{v&&(O&&(v.unobserve(O),m.current=!1),k&&v.observe(k))},[v]),[N,C]=Ul(y),E=fa(s);return c.useEffect(()=>{!v||!N.current||(v.disconnect(),m.current=!1,v.observe(N.current))},[N,v]),c.useEffect(()=>(o({type:_e.RegisterDroppable,element:{id:r,key:l,disabled:n,node:N,rect:h,data:E}}),()=>o({type:_e.UnregisterDroppable,key:l,id:r})),[r]),c.useEffect(()=>{n!==x.current.disabled&&(o({type:_e.SetDroppableDisabled,id:r,key:l,disabled:n}),x.current.disabled=n)},[r,l,n,o]),{active:i,rect:h,isOver:(d==null?void 0:d.id)===r,node:N,over:d,setNodeRef:C}}function Hb(t){let{animation:s,children:n}=t;const[r,a]=c.useState(null),[l,i]=c.useState(null),o=Wl(n);return!n&&!r&&o&&a(o),Gt(()=>{if(!l)return;const d=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(d==null||u==null){a(null);return}Promise.resolve(s(u,l)).then(()=>{a(null)})},[s,r,l]),ge.createElement(ge.Fragment,null,n,r?c.cloneElement(r,{ref:i}):null)}const Vb={x:0,y:0,scaleX:1,scaleY:1};function Gb(t){let{children:s}=t;return ge.createElement(Aa.Provider,{value:Cp},ge.createElement(ji.Provider,{value:Vb},s))}const Yb={position:"fixed",touchAction:"none"},qb=t=>vi(t)?"transform 250ms ease":void 0,Jb=c.forwardRef((t,s)=>{let{as:n,activatorEvent:r,adjustScale:a,children:l,className:i,rect:o,style:d,transform:u,transition:x=qb}=t;if(!o)return null;const m=a?u:{...u,scaleX:1,scaleY:1},h={...Yb,width:o.width,height:o.height,top:o.top,left:o.left,transform:Zs.Transform.toString(m),transformOrigin:a&&r?_v(r,o):void 0,transition:typeof x=="function"?x(r):x,...d};return ge.createElement(n,{className:i,style:h,ref:s},l)}),Qb=t=>s=>{let{active:n,dragOverlay:r}=s;const a={},{styles:l,className:i}=t;if(l!=null&&l.active)for(const[o,d]of Object.entries(l.active))d!==void 0&&(a[o]=n.node.style.getPropertyValue(o),n.node.style.setProperty(o,d));if(l!=null&&l.dragOverlay)for(const[o,d]of Object.entries(l.dragOverlay))d!==void 0&&r.node.style.setProperty(o,d);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[d,u]of Object.entries(a))n.node.style.setProperty(d,u);i!=null&&i.active&&n.node.classList.remove(i.active)}},Xb=t=>{let{transform:{initial:s,final:n}}=t;return[{transform:Zs.Transform.toString(s)},{transform:Zs.Transform.toString(n)}]},Kb={duration:250,easing:"ease",keyframes:Xb,sideEffects:Qb({styles:{active:{opacity:"0"}}})};function Zb(t){let{config:s,draggableNodes:n,droppableContainers:r,measuringConfiguration:a}=t;return yi((l,i)=>{if(s===null)return;const o=n.get(l);if(!o)return;const d=o.node.current;if(!d)return;const u=kp(i);if(!u)return;const{transform:x}=lt(i).getComputedStyle(i),m=hp(x);if(!m)return;const h=typeof s=="function"?s:ej(s);return jp(d,a.draggable.measure),h({active:{id:l,data:o.data,node:d,rect:a.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:i,rect:a.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:a,transform:m})})}function ej(t){const{duration:s,easing:n,sideEffects:r,keyframes:a}={...Kb,...t};return l=>{let{active:i,dragOverlay:o,transform:d,...u}=l;if(!s)return;const x={x:o.rect.left-i.rect.left,y:o.rect.top-i.rect.top},m={scaleX:d.scaleX!==1?i.rect.width*d.scaleX/o.rect.width:1,scaleY:d.scaleY!==1?i.rect.height*d.scaleY/o.rect.height:1},h={x:d.x-x.x,y:d.y-x.y,...m},g=a({...u,active:i,dragOverlay:o,transform:{initial:d,final:h}}),[w]=g,j=g[g.length-1];if(JSON.stringify(w)===JSON.stringify(j))return;const A=r==null?void 0:r({active:i,dragOverlay:o,...u}),b=o.node.animate(g,{duration:s,easing:n,fill:"forwards"});return new Promise(p=>{b.onfinish=()=>{A==null||A(),p()}})}}let hm=0;function tj(t){return c.useMemo(()=>{if(t!=null)return hm++,hm},[t])}const sj=ge.memo(t=>{let{adjustScale:s=!1,children:n,dropAnimation:r,style:a,transition:l,modifiers:i,wrapperElement:o="div",className:d,zIndex:u=999}=t;const{activatorEvent:x,active:m,activeNodeRect:h,containerNodeRect:g,draggableNodes:w,droppableContainers:j,dragOverlay:A,over:b,measuringConfiguration:p,scrollableAncestors:v,scrollableAncestorRects:y,windowRect:N}=Tp(),C=c.useContext(ji),E=tj(m==null?void 0:m.id),k=Dp(i,{activatorEvent:x,active:m,activeNodeRect:h,containerNodeRect:g,draggingNodeRect:A.rect,over:b,overlayNodeRect:A.rect,scrollableAncestors:v,scrollableAncestorRects:y,transform:C,windowRect:N}),O=bd(h),U=Zb({config:r,draggableNodes:w,droppableContainers:j,measuringConfiguration:p}),B=O?A.setRef:void 0;return ge.createElement(Gb,null,ge.createElement(Hb,{animation:U},m&&E?ge.createElement(Jb,{key:E,id:m.id,ref:B,as:o,activatorEvent:x,adjustScale:s,className:d,transition:l,rect:O,style:{zIndex:u,...a},transform:k},n):null))});function Ep(t,s,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(s,1)[0]),r}function nj(t,s){return t.reduce((n,r,a)=>{const l=s.get(r);return l&&(n[a]=l),n},Array(t.length))}function qa(t){return t!==null&&t>=0}function rj(t,s){if(t===s)return!0;if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==s[n])return!1;return!0}function aj(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Mp=t=>{let{rects:s,activeIndex:n,overIndex:r,index:a}=t;const l=Ep(s,r,n),i=s[a],o=l[a];return!o||!i?null:{x:o.left-i.left,y:o.top-i.top,scaleX:o.width/i.width,scaleY:o.height/i.height}},Ja={scaleX:1,scaleY:1},lj=t=>{var s;let{activeIndex:n,activeNodeRect:r,index:a,rects:l,overIndex:i}=t;const o=(s=l[n])!=null?s:r;if(!o)return null;if(a===n){const u=l[i];return u?{x:0,y:n<i?u.top+u.height-(o.top+o.height):u.top-o.top,...Ja}:null}const d=ij(l,a,n);return a>n&&a<=i?{x:0,y:-o.height-d,...Ja}:a<n&&a>=i?{x:0,y:o.height+d,...Ja}:{x:0,y:0,...Ja}};function ij(t,s,n){const r=t[s],a=t[s-1],l=t[s+1];return r?n<s?a?r.top-(a.top+a.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const Pp="Sortable",Lp=ge.createContext({activeIndex:-1,containerId:Pp,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Mp,disabled:{draggable:!1,droppable:!1}});function oj(t){let{children:s,id:n,items:r,strategy:a=Mp,disabled:l=!1}=t;const{active:i,dragOverlay:o,droppableRects:d,over:u,measureDroppableContainers:x}=Tp(),m=Ca(Pp,n),h=o.rect!==null,g=c.useMemo(()=>r.map(C=>typeof C=="object"&&"id"in C?C.id:C),[r]),w=i!=null,j=i?g.indexOf(i.id):-1,A=u?g.indexOf(u.id):-1,b=c.useRef(g),p=!rj(g,b.current),v=A!==-1&&j===-1||p,y=aj(l);Gt(()=>{p&&w&&x(g)},[p,g,w,x]),c.useEffect(()=>{b.current=g},[g]);const N=c.useMemo(()=>({activeIndex:j,containerId:m,disabled:y,disableTransforms:v,items:g,overIndex:A,useDragOverlay:h,sortedRects:nj(g,d),strategy:a}),[j,m,y.draggable,y.droppable,v,g,A,d,h,a]);return ge.createElement(Lp.Provider,{value:N},s)}const cj=t=>{let{id:s,items:n,activeIndex:r,overIndex:a}=t;return Ep(n,r,a).indexOf(s)},dj=t=>{let{containerId:s,isSorting:n,wasDragging:r,index:a,items:l,newIndex:i,previousItems:o,previousContainerId:d,transition:u}=t;return!u||!r||o!==l&&a===i?!1:n?!0:i!==a&&s===d},uj={duration:200,easing:"ease"},Rp="transform",mj=Zs.Transition.toString({property:Rp,duration:0,easing:"linear"}),xj={roleDescription:"sortable"};function hj(t){let{disabled:s,index:n,node:r,rect:a}=t;const[l,i]=c.useState(null),o=c.useRef(n);return Gt(()=>{if(!s&&n!==o.current&&r.current){const d=a.current;if(d){const u=pr(r.current,{ignoreTransform:!0}),x={x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height};(x.x||x.y)&&i(x)}}n!==o.current&&(o.current=n)},[s,n,r,a]),c.useEffect(()=>{l&&i(null)},[l]),l}function Ip(t){let{animateLayoutChanges:s=dj,attributes:n,disabled:r,data:a,getNewIndex:l=cj,id:i,strategy:o,resizeObserverConfig:d,transition:u=uj}=t;const{items:x,containerId:m,activeIndex:h,disabled:g,disableTransforms:w,sortedRects:j,overIndex:A,useDragOverlay:b,strategy:p}=c.useContext(Lp),v=pj(r,g),y=x.indexOf(i),N=c.useMemo(()=>({sortable:{containerId:m,index:y,items:x},...a}),[m,a,y,x]),C=c.useMemo(()=>x.slice(x.indexOf(i)),[x,i]),{rect:E,node:k,isOver:O,setNodeRef:U}=Wb({id:i,data:N,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...d}}),{active:B,activatorEvent:R,activeNodeRect:S,attributes:P,setNodeRef:D,listeners:$,isDragging:L,over:M,setActivatorNodeRef:H,transform:Z}=zb({id:i,data:N,attributes:{...xj,...n},disabled:v.draggable}),W=Nv(U,D),F=!!B,q=F&&!w&&qa(h)&&qa(A),se=!b&&L,I=se&&q?Z:null,G=q?I??(o??p)({rects:j,activeNodeRect:S,activeIndex:h,overIndex:A,index:y}):null,V=qa(h)&&qa(A)?l({id:i,items:x,activeIndex:h,overIndex:A}):y,te=B==null?void 0:B.id,ae=c.useRef({activeId:te,items:x,newIndex:V,containerId:m}),K=x!==ae.current.items,T=s({active:B,containerId:m,isDragging:L,isSorting:F,id:i,index:y,items:x,newIndex:ae.current.newIndex,previousItems:ae.current.items,previousContainerId:ae.current.containerId,transition:u,wasDragging:ae.current.activeId!=null}),ee=hj({disabled:!T,index:y,node:k,rect:E});return c.useEffect(()=>{F&&ae.current.newIndex!==V&&(ae.current.newIndex=V),m!==ae.current.containerId&&(ae.current.containerId=m),x!==ae.current.items&&(ae.current.items=x)},[F,V,m,x]),c.useEffect(()=>{if(te===ae.current.activeId)return;if(te!=null&&ae.current.activeId==null){ae.current.activeId=te;return}const ne=setTimeout(()=>{ae.current.activeId=te},50);return()=>clearTimeout(ne)},[te]),{active:B,activeIndex:h,attributes:P,data:N,rect:E,index:y,newIndex:V,items:x,isOver:O,isSorting:F,isDragging:L,listeners:$,node:k,overIndex:A,over:M,setNodeRef:W,setActivatorNodeRef:H,setDroppableNodeRef:U,setDraggableNodeRef:D,transform:ee??G,transition:Y()};function Y(){if(ee||K&&ae.current.newIndex===y)return mj;if(!(se&&!vi(R)||!u)&&(F||T))return Zs.Transition.toString({...u,property:Rp})}}function pj(t,s){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:s.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:s.droppable}}ve.Down,ve.Right,ve.Up,ve.Left;const $p=6048e5,fj=864e5,pm=Symbol.for("constructDateFrom");function en(t,s){return typeof t=="function"?t(s):t&&typeof t=="object"&&pm in t?t[pm](s):t instanceof Date?new t.constructor(s):new Date(s)}function qt(t,s){return en(s||t,t)}let gj={};function Ni(){return gj}function ya(t,s){var o,d,u,x;const n=Ni(),r=(s==null?void 0:s.weekStartsOn)??((d=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:d.weekStartsOn)??n.weekStartsOn??((x=(u=n.locale)==null?void 0:u.options)==null?void 0:x.weekStartsOn)??0,a=qt(t,s==null?void 0:s.in),l=a.getDay(),i=(l<r?7:0)+l-r;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function ql(t,s){return ya(t,{...s,weekStartsOn:1})}function Op(t,s){const n=qt(t,s==null?void 0:s.in),r=n.getFullYear(),a=en(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const l=ql(a),i=en(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=ql(i);return n.getTime()>=l.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function fm(t){const s=qt(t),n=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return n.setUTCFullYear(s.getFullYear()),+t-+n}function yj(t,...s){const n=en.bind(null,s.find(r=>typeof r=="object"));return s.map(n)}function gm(t,s){const n=qt(t,s==null?void 0:s.in);return n.setHours(0,0,0,0),n}function vj(t,s,n){const[r,a]=yj(n==null?void 0:n.in,t,s),l=gm(r),i=gm(a),o=+l-fm(l),d=+i-fm(i);return Math.round((o-d)/fj)}function bj(t,s){const n=Op(t,s),r=en(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),ql(r)}function jj(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Nj(t){return!(!jj(t)&&typeof t!="number"||isNaN(+qt(t)))}function wj(t,s){const n=qt(t,s==null?void 0:s.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Sj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},kj=(t,s,n)=>{let r;const a=Sj[t];return typeof a=="string"?r=a:s===1?r=a.one:r=a.other.replace("{{count}}",s.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ao(t){return(s={})=>{const n=s.width?String(s.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Cj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Aj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Dj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tj={date:ao({formats:Cj,defaultWidth:"full"}),time:ao({formats:Aj,defaultWidth:"full"}),dateTime:ao({formats:Dj,defaultWidth:"full"})},Ej={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Mj=(t,s,n,r)=>Ej[t];function Dr(t){return(s,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;a=t.formattingValues[o]||t.formattingValues[i]}else{const i=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[o]||t.values[i]}const l=t.argumentCallback?t.argumentCallback(s):s;return a[l]}}const Pj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Lj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Rj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ij={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$j={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Oj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Fj=(t,s)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},_j={ordinalNumber:Fj,era:Dr({values:Pj,defaultWidth:"wide"}),quarter:Dr({values:Lj,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Dr({values:Rj,defaultWidth:"wide"}),day:Dr({values:Ij,defaultWidth:"wide"}),dayPeriod:Dr({values:$j,defaultWidth:"wide",formattingValues:Oj,defaultFormattingWidth:"wide"})};function Tr(t){return(s,n={})=>{const r=n.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],l=s.match(a);if(!l)return null;const i=l[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(o)?Bj(o,m=>m.test(i)):zj(o,m=>m.test(i));let u;u=t.valueCallback?t.valueCallback(d):d,u=n.valueCallback?n.valueCallback(u):u;const x=s.slice(i.length);return{value:u,rest:x}}}function zj(t,s){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&s(t[n]))return n}function Bj(t,s){for(let n=0;n<t.length;n++)if(s(t[n]))return n}function Uj(t){return(s,n={})=>{const r=s.match(t.matchPattern);if(!r)return null;const a=r[0],l=s.match(t.parsePattern);if(!l)return null;let i=t.valueCallback?t.valueCallback(l[0]):l[0];i=n.valueCallback?n.valueCallback(i):i;const o=s.slice(a.length);return{value:i,rest:o}}}const Wj=/^(\d+)(th|st|nd|rd)?/i,Hj=/\d+/i,Vj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Gj={any:[/^b/i,/^(a|c)/i]},Yj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qj={any:[/1/i,/2/i,/3/i,/4/i]},Jj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Qj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Xj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Kj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Zj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eN={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tN={ordinalNumber:Uj({matchPattern:Wj,parsePattern:Hj,valueCallback:t=>parseInt(t,10)}),era:Tr({matchPatterns:Vj,defaultMatchWidth:"wide",parsePatterns:Gj,defaultParseWidth:"any"}),quarter:Tr({matchPatterns:Yj,defaultMatchWidth:"wide",parsePatterns:qj,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Tr({matchPatterns:Jj,defaultMatchWidth:"wide",parsePatterns:Qj,defaultParseWidth:"any"}),day:Tr({matchPatterns:Xj,defaultMatchWidth:"wide",parsePatterns:Kj,defaultParseWidth:"any"}),dayPeriod:Tr({matchPatterns:Zj,defaultMatchWidth:"any",parsePatterns:eN,defaultParseWidth:"any"})},sN={code:"en-US",formatDistance:kj,formatLong:Tj,formatRelative:Mj,localize:_j,match:tN,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nN(t,s){const n=qt(t,s==null?void 0:s.in);return vj(n,wj(n))+1}function rN(t,s){const n=qt(t,s==null?void 0:s.in),r=+ql(n)-+bj(n);return Math.round(r/$p)+1}function Fp(t,s){var x,m,h,g;const n=qt(t,s==null?void 0:s.in),r=n.getFullYear(),a=Ni(),l=(s==null?void 0:s.firstWeekContainsDate)??((m=(x=s==null?void 0:s.locale)==null?void 0:x.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(h=a.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??1,i=en((s==null?void 0:s.in)||t,0);i.setFullYear(r+1,0,l),i.setHours(0,0,0,0);const o=ya(i,s),d=en((s==null?void 0:s.in)||t,0);d.setFullYear(r,0,l),d.setHours(0,0,0,0);const u=ya(d,s);return+n>=+o?r+1:+n>=+u?r:r-1}function aN(t,s){var o,d,u,x;const n=Ni(),r=(s==null?void 0:s.firstWeekContainsDate)??((d=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:d.firstWeekContainsDate)??n.firstWeekContainsDate??((x=(u=n.locale)==null?void 0:u.options)==null?void 0:x.firstWeekContainsDate)??1,a=Fp(t,s),l=en((s==null?void 0:s.in)||t,0);return l.setFullYear(a,0,r),l.setHours(0,0,0,0),ya(l,s)}function lN(t,s){const n=qt(t,s==null?void 0:s.in),r=+ya(n,s)-+aN(n,s);return Math.round(r/$p)+1}function be(t,s){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(s,"0");return n+r}const Ts={y(t,s){const n=t.getFullYear(),r=n>0?n:1-n;return be(s==="yy"?r%100:r,s.length)},M(t,s){const n=t.getMonth();return s==="M"?String(n+1):be(n+1,2)},d(t,s){return be(t.getDate(),s.length)},a(t,s){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,s){return be(t.getHours()%12||12,s.length)},H(t,s){return be(t.getHours(),s.length)},m(t,s){return be(t.getMinutes(),s.length)},s(t,s){return be(t.getSeconds(),s.length)},S(t,s){const n=s.length,r=t.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return be(a,s.length)}},Tn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ym={G:function(t,s,n){const r=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,s,n){if(s==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Ts.y(t,s)},Y:function(t,s,n,r){const a=Fp(t,r),l=a>0?a:1-a;if(s==="YY"){const i=l%100;return be(i,2)}return s==="Yo"?n.ordinalNumber(l,{unit:"year"}):be(l,s.length)},R:function(t,s){const n=Op(t);return be(n,s.length)},u:function(t,s){const n=t.getFullYear();return be(n,s.length)},Q:function(t,s,n){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(r);case"QQ":return be(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,s,n){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(r);case"qq":return be(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,s,n){const r=t.getMonth();switch(s){case"M":case"MM":return Ts.M(t,s);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,s,n){const r=t.getMonth();switch(s){case"L":return String(r+1);case"LL":return be(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,s,n,r){const a=lN(t,r);return s==="wo"?n.ordinalNumber(a,{unit:"week"}):be(a,s.length)},I:function(t,s,n){const r=rN(t);return s==="Io"?n.ordinalNumber(r,{unit:"week"}):be(r,s.length)},d:function(t,s,n){return s==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ts.d(t,s)},D:function(t,s,n){const r=nN(t);return s==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):be(r,s.length)},E:function(t,s,n){const r=t.getDay();switch(s){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,s,n,r){const a=t.getDay(),l=(a-r.weekStartsOn+8)%7||7;switch(s){case"e":return String(l);case"ee":return be(l,2);case"eo":return n.ordinalNumber(l,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,s,n,r){const a=t.getDay(),l=(a-r.weekStartsOn+8)%7||7;switch(s){case"c":return String(l);case"cc":return be(l,s.length);case"co":return n.ordinalNumber(l,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,s,n){const r=t.getDay(),a=r===0?7:r;switch(s){case"i":return String(a);case"ii":return be(a,s.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,s,n){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,s,n){const r=t.getHours();let a;switch(r===12?a=Tn.noon:r===0?a=Tn.midnight:a=r/12>=1?"pm":"am",s){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,s,n){const r=t.getHours();let a;switch(r>=17?a=Tn.evening:r>=12?a=Tn.afternoon:r>=4?a=Tn.morning:a=Tn.night,s){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,s,n){if(s==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ts.h(t,s)},H:function(t,s,n){return s==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ts.H(t,s)},K:function(t,s,n){const r=t.getHours()%12;return s==="Ko"?n.ordinalNumber(r,{unit:"hour"}):be(r,s.length)},k:function(t,s,n){let r=t.getHours();return r===0&&(r=24),s==="ko"?n.ordinalNumber(r,{unit:"hour"}):be(r,s.length)},m:function(t,s,n){return s==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ts.m(t,s)},s:function(t,s,n){return s==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ts.s(t,s)},S:function(t,s){return Ts.S(t,s)},X:function(t,s,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(s){case"X":return bm(r);case"XXXX":case"XX":return cn(r);case"XXXXX":case"XXX":default:return cn(r,":")}},x:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"x":return bm(r);case"xxxx":case"xx":return cn(r);case"xxxxx":case"xxx":default:return cn(r,":")}},O:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+vm(r,":");case"OOOO":default:return"GMT"+cn(r,":")}},z:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+vm(r,":");case"zzzz":default:return"GMT"+cn(r,":")}},t:function(t,s,n){const r=Math.trunc(+t/1e3);return be(r,s.length)},T:function(t,s,n){return be(+t,s.length)}};function vm(t,s=""){const n=t>0?"-":"+",r=Math.abs(t),a=Math.trunc(r/60),l=r%60;return l===0?n+String(a):n+String(a)+s+be(l,2)}function bm(t,s){return t%60===0?(t>0?"-":"+")+be(Math.abs(t)/60,2):cn(t,s)}function cn(t,s=""){const n=t>0?"-":"+",r=Math.abs(t),a=be(Math.trunc(r/60),2),l=be(r%60,2);return n+a+s+l}const jm=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},_p=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},iN=(t,s)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return jm(t,s);let l;switch(r){case"P":l=s.dateTime({width:"short"});break;case"PP":l=s.dateTime({width:"medium"});break;case"PPP":l=s.dateTime({width:"long"});break;case"PPPP":default:l=s.dateTime({width:"full"});break}return l.replace("{{date}}",jm(r,s)).replace("{{time}}",_p(a,s))},oN={p:_p,P:iN},cN=/^D+$/,dN=/^Y+$/,uN=["D","DD","YY","YYYY"];function mN(t){return cN.test(t)}function xN(t){return dN.test(t)}function hN(t,s,n){const r=pN(t,s,n);if(console.warn(r),uN.includes(t))throw new RangeError(r)}function pN(t,s,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const fN=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gN=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yN=/^'([^]*?)'?$/,vN=/''/g,bN=/[a-zA-Z]/;function Er(t,s,n){var x,m,h,g;const r=Ni(),a=r.locale??sN,l=r.firstWeekContainsDate??((m=(x=r.locale)==null?void 0:x.options)==null?void 0:m.firstWeekContainsDate)??1,i=r.weekStartsOn??((g=(h=r.locale)==null?void 0:h.options)==null?void 0:g.weekStartsOn)??0,o=qt(t,n==null?void 0:n.in);if(!Nj(o))throw new RangeError("Invalid time value");let d=s.match(gN).map(w=>{const j=w[0];if(j==="p"||j==="P"){const A=oN[j];return A(w,a.formatLong)}return w}).join("").match(fN).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const j=w[0];if(j==="'")return{isToken:!1,value:jN(w)};if(ym[j])return{isToken:!0,value:w};if(j.match(bN))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(d=a.localize.preprocessor(o,d));const u={firstWeekContainsDate:l,weekStartsOn:i,locale:a};return d.map(w=>{if(!w.isToken)return w.value;const j=w.value;(xN(j)||mN(j))&&hN(j,s,String(t));const A=ym[j[0]];return A(o,j,a.localize,u)}).join("")}function jN(t){const s=t.match(yN);return s?s[1].replace(vN,"'"):t}const NN={Low:"#60A5FA",Medium:"#FBBF24",High:"#F97316",Critical:"#EF4444"},wN={"To Do":"#9CA3AF","In Progress":"#3B82F6","In Review":"#8B5CF6",Completed:"#22C55E",Backlog:"#6B7280"},SN=["Admission","Accounting","Recruitment","Digital Marketing","Motion Graphics","SEO","Social Media","Content Creation","Administration","Management"],kN=["Low","Medium","High","Critical"],CN=["To Do","In Progress","In Review","Completed"];function AN({task:t,taskId:s,isOpen:n,onClose:r,onUpdate:a}){var P,D,$,L,M,H,Z,W,F,q,se;const{user:l}=xe(),[i,o]=c.useState(t||null),[d,u]=c.useState(!t),[x,m]=c.useState(!1),[h,g]=c.useState({}),[w,j]=c.useState(""),[A,b]=c.useState(""),[p,v]=c.useState([]);c.useEffect(()=>{var I;t&&(o(t),g({title:t.title,description:t.description,status:t.status,priority:t.priority,dueDate:t.dueDate?t.dueDate.split("T")[0]:"",tags:t.tags||[],assignedTo:((I=t.assignedTo)==null?void 0:I.map(z=>z._id||z))||[]}),u(!1))},[t]),c.useEffect(()=>{n&&(s||t)&&(t||y(),N())},[n,s,t]);const y=async()=>{var I;if(s)try{u(!0);const V=((["SuperAdmin","Admin"].includes(l==null?void 0:l.role)?await _.listAllTasks():await _.listMyTasks()).tasks||[]).find(te=>te._id===s);V&&(o(V),g({title:V.title,description:V.description,status:V.status,priority:V.priority,dueDate:V.dueDate?V.dueDate.split("T")[0]:"",tags:V.tags||[],assignedTo:((I=V.assignedTo)==null?void 0:I.map(te=>te._id||te))||[]}))}catch(z){console.error("Error loading task:",z)}finally{u(!1)}},N=async()=>{try{const I=await _.listUsers(),z=I.users||I.data||[];v(z)}catch(I){console.error("Error loading users:",I)}},C=async()=>{try{await _.updateTask(s,h),await y(),m(!1),a&&a()}catch(I){console.error("Error updating task:",I),alert("Failed to update task")}},E=async()=>{if(w.trim())try{await _.addTaskComment(s,{text:w}),j(""),await y()}catch(I){console.error("Error adding comment:",I),alert("Failed to add comment")}},k=async(I,z)=>{try{await _.updateChecklistItem(s,I,z),await y()}catch(G){console.error("Error updating checklist:",G)}},O=async()=>{if(A.trim())try{const I=[...i.checklist||[],{text:A,completed:!1}];await _.updateTask(s,{checklist:I}),b(""),await y()}catch(I){console.error("Error adding checklist item:",I)}},U=async()=>{if(confirm("Are you sure you want to delete this task?"))try{await _.deleteTask(s),a&&a(),r()}catch(I){console.error("Error deleting task:",I),alert("Failed to delete task")}},B=(l==null?void 0:l.role)==="SuperAdmin"||(l==null?void 0:l.role)==="Admin",R=(P=i==null?void 0:i.assignedTo)==null?void 0:P.some(I=>I._id===(l==null?void 0:l._id)),S=B||((D=i==null?void 0:i.assignedBy)==null?void 0:D._id)===(l==null?void 0:l._id)||R;return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Task Details"}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(fi,{size:20})})]}),d?e.jsx("div",{className:"p-8 text-center",children:"Loading..."}):i?e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),x?e.jsx("input",{type:"text",value:h.title,onChange:I=>g({...h,title:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:i.title})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Wu,{size:16})," Status"]}),x?e.jsx("select",{value:h.status,onChange:I=>g({...h,status:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:CN.map(I=>e.jsx("option",{value:I,children:I},I))}):e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-white text-sm font-medium",style:{backgroundColor:wN[i.status]},children:i.status})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Wu,{size:16})," Priority"]}),x?e.jsx("select",{value:h.priority,onChange:I=>g({...h,priority:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:kN.map(I=>e.jsx("option",{value:I,children:I},I))}):e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-white text-sm font-medium",style:{backgroundColor:NN[i.priority]},children:i.priority})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(fe,{size:16})," Due Date"]}),x?e.jsx("input",{type:"date",value:h.dueDate,onChange:I=>g({...h,dueDate:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}):i.dueDate?e.jsx("p",{className:"text-gray-900",children:Er(new Date(i.dueDate),"MMM dd, yyyy")}):e.jsx("p",{className:"text-gray-400",children:"No due date"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),x?e.jsx("textarea",{value:h.description,onChange:I=>g({...h,description:I.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:i.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(Ae,{size:16})," Assigned To"]}),x?e.jsx("select",{multiple:!0,value:h.assignedTo,onChange:I=>g({...h,assignedTo:Array.from(I.target.selectedOptions,z=>z.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",size:5,children:p.map(I=>e.jsx("option",{value:I._id,children:I.name||I.fullName},I._id))}):e.jsx("div",{className:"flex flex-wrap gap-2",children:($=i.assignedTo)==null?void 0:$.map(I=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[e.jsx(ir,{size:14}),I.name||I.fullName]},I._id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(xd,{size:16})," Tags"]}),x?e.jsx("div",{className:"flex flex-wrap gap-2",children:SN.map(I=>e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:h.tags.includes(I),onChange:z=>{z.target.checked?g({...h,tags:[...h.tags,I]}):g({...h,tags:h.tags.filter(G=>G!==I)})},className:"mr-2"}),e.jsx("span",{className:"text-sm",children:I})]},I))}):e.jsx("div",{className:"flex flex-wrap gap-2",children:(L=i.tags)==null?void 0:L.map(I=>e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm",children:I},I))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(oc,{size:16})," Checklist",((M=i.checklist)==null?void 0:M.length)>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",i.checklist.filter(I=>I.completed).length,"/",i.checklist.length," completed)"]})]}),e.jsxs("div",{className:"space-y-2",children:[(H=i.checklist)==null?void 0:H.map(I=>e.jsxs("div",{className:"flex items-start gap-2 p-2 hover:bg-gray-50 rounded",children:[e.jsx("input",{type:"checkbox",checked:I.completed,onChange:z=>k(I._id,z.target.checked),disabled:!S,className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm ${I.completed?"line-through text-gray-500":"text-gray-900"}`,children:I.text}),I.completed&&I.completedBy&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Completed by ",I.completedBy.name||I.completedBy.fullName," on ",Er(new Date(I.completedAt),"MMM dd, yyyy")]})]})]},I._id)),S&&e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("input",{type:"text",value:A,onChange:I=>b(I.target.value),onKeyPress:I=>I.key==="Enter"&&O(),placeholder:"Add checklist item...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:e.jsx(as,{size:16})})]})]})]}),((Z=i.attachments)==null?void 0:Z.length)>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(ic,{size:16})," Attachments"]}),e.jsx("div",{className:"space-y-2",children:i.attachments.map(I=>{var z,G;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-md",children:[e.jsx(ic,{size:16,className:"text-gray-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:I.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded by ",((z=I.uploadedBy)==null?void 0:z.name)||((G=I.uploadedBy)==null?void 0:G.fullName)," on ",Er(new Date(I.uploadedAt),"MMM dd, yyyy")]})]}),e.jsx("a",{href:I.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-200 rounded transition-colors",children:e.jsx(rs,{size:16})})]},I._id)})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(sp,{size:16})," Comments (",((W=i.comments)==null?void 0:W.length)||0,")"]}),e.jsx("div",{className:"space-y-4 mb-4",children:(F=i.comments)==null?void 0:F.map(I=>{var z,G,V;return e.jsxs("div",{className:"bg-gray-50 rounded-md p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ir,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"font-medium text-sm text-gray-900",children:((z=I.author)==null?void 0:z.name)||((G=I.author)==null?void 0:G.fullName)}),e.jsx("span",{className:"text-xs text-gray-500",children:Er(new Date(I.createdAt),"MMM dd, yyyy HH:mm")})]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:I.text}),((V=I.mentions)==null?void 0:V.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:I.mentions.map(te=>e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["@",te.name||te.fullName]},te._id))})]},I._id)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{value:w,onChange:I=>j(I.target.value),placeholder:"Add a comment...",rows:2,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:E,disabled:!w.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Bl,{size:16})})]})]}),e.jsx("div",{className:"border-t pt-4 mt-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Assigned By:"})," ",((q=i.assignedBy)==null?void 0:q.name)||((se=i.assignedBy)==null?void 0:se.fullName)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",Er(new Date(i.createdAt),"MMM dd, yyyy")]})]})})]}):e.jsx("div",{className:"p-8 text-center",children:"Task not found"}),!d&&i&&e.jsxs("div",{className:"border-t p-4 flex items-center justify-between bg-gray-50",children:[e.jsx("div",{className:"flex gap-2",children:B&&e.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[e.jsx(jn,{size:16}),"Delete Task"]})}),e.jsx("div",{className:"flex gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{var I;m(!1),g({title:i.title,description:i.description,status:i.status,priority:i.priority,dueDate:i.dueDate?i.dueDate.split("T")[0]:"",tags:i.tags||[],assignedTo:((I=i.assignedTo)==null?void 0:I.map(z=>z._id))||[]})},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]}):e.jsxs(e.Fragment,{children:[S&&e.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Edit Task"}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:"Close"})]})})]})]})}):null}const DN=["Admission","Accounting","Recruitment","Digital Marketing","Motion Graphics","SEO","Social Media","Content Creation","Administration","Management"],TN=["Low","Medium","High","Critical"];function EN({isOpen:t,onClose:s,onCreated:n}){const{user:r}=xe(),[a,l]=c.useState([]),[i,o]=c.useState(!1),[d,u]=c.useState(!1),[x,m]=c.useState({title:"",description:"",assignedTo:[],dueDate:"",priority:"Medium",tags:[],checklist:[]}),[h,g]=c.useState(""),w=(r==null?void 0:r.role)==="SuperAdmin"||(r==null?void 0:r.role)==="Admin";c.useEffect(()=>{t&&(j(),m({title:"",description:"",assignedTo:[],dueDate:"",priority:"Medium",tags:[],checklist:[]}),g(""))},[t]);const j=async()=>{try{const y=await _.listUsers();console.log("Loaded users:",y);const N=y.data||y.users||[];console.log("Users list:",N);const C=N.filter(E=>E.role!=="SuperAdmin");console.log("Filtered users (excluding SuperAdmin):",C),l(C)}catch(y){console.error("Error loading users:",y)}},A=()=>{h.trim()&&(m({...x,checklist:[...x.checklist,{text:h,completed:!1}]}),g(""))},b=y=>{m({...x,checklist:x.checklist.filter((N,C)=>C!==y)})},p=y=>{x.tags.includes(y)?m({...x,tags:x.tags.filter(N=>N!==y)}):m({...x,tags:[...x.tags,y]})},v=async y=>{if(y.preventDefault(),!x.title.trim()){alert("Please enter a task title");return}if(x.assignedTo.length===0){alert("Please assign the task to at least one user");return}o(!0);try{await _.assignTask({title:x.title,description:x.description,assignedTo:x.assignedTo,dueDate:x.dueDate||void 0,priority:x.priority,tags:x.tags,checklist:x.checklist.filter(N=>N.text.trim())}),n&&n(),s()}catch(N){console.error("Error creating task:",N),alert("Failed to create task. Please try again.")}finally{o(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:w?"Assign New Task":"Create New Task"}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",disabled:i,children:e.jsx(fi,{size:20})})]}),e.jsxs("form",{onSubmit:v,className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Task Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:x.title,onChange:y=>m({...x,title:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task title...",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:y=>m({...x,description:y.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task description..."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[w?"Assign To Employee(s)":"Assign To"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),!w&&e.jsx("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:y=>{const N=y.target.checked;u(N),N&&(r!=null&&r._id)?m({...x,assignedTo:[r._id]}):m({...x,assignedTo:[]})},className:"mr-2 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Assign this task to myself"})]})}),(w||!d)&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{multiple:!0,value:x.assignedTo,onChange:y=>m({...x,assignedTo:Array.from(y.target.selectedOptions,N=>N.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",size:6,required:!d,disabled:!w&&d,children:[e.jsxs("option",{value:"",disabled:!0,className:"text-gray-400",children:["-- Select ",w?"Employee(s)":"User(s)"," --"]}),a.length===0?e.jsx("option",{disabled:!0,children:"Loading users..."}):a.map(y=>e.jsxs("option",{value:y._id,children:[y.name||y.fullName||"Unknown"," (",y.role,")"]},y._id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl (Windows) or Cmd (Mac) to select multiple users"}),w&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Note: SuperAdmins are excluded from the list"})]}),!w&&d&&r&&e.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded",children:e.jsxs("p",{className:"text-sm text-green-900",children:[" Task will be assigned to: ",e.jsx("strong",{children:r.name||r.fullName})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsx("select",{value:x.priority,onChange:y=>m({...x,priority:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:TN.map(y=>e.jsx("option",{value:y,children:y},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),e.jsx("input",{type:"date",value:x.dueDate,onChange:y=>m({...x,dueDate:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:DN.map(y=>e.jsx("button",{type:"button",onClick:()=>p(y),className:`px-3 py-1 rounded-full text-sm transition-colors ${x.tags.includes(y)?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:y},y))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Checklist"}),e.jsx("div",{className:"space-y-2 mb-2",children:x.checklist.map((y,N)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"flex-1 text-sm text-gray-900",children:y.text}),e.jsx("button",{type:"button",onClick:()=>b(N),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:e.jsx(Vy,{size:16,className:"text-red-600"})})]},N))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:h,onChange:y=>g(y.target.value),onKeyPress:y=>y.key==="Enter"&&(y.preventDefault(),A()),placeholder:"Add checklist item...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:e.jsx(as,{size:16})})]})]})]}),e.jsxs("div",{className:"border-t p-4 flex items-center justify-end gap-2 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:s,disabled:i,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",onClick:v,disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:i?"Creating...":"Create Task"})]})]})}):null}const Os={Backlog:{bg:"bg-gray-100",text:"text-gray-600",border:"border-gray-300",dot:"bg-gray-400"},"To Do":{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300",dot:"bg-gray-500"},"In Progress":{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300",dot:"bg-blue-500"},"In Review":{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300",dot:"bg-purple-500"},Completed:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",dot:"bg-green-500"},Overdue:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",dot:"bg-red-600"}},Nm={Low:{bg:"bg-blue-100",text:"text-blue-600",dot:"bg-blue-400"},Medium:{bg:"bg-yellow-100",text:"text-yellow-600",dot:"bg-yellow-500"},High:{bg:"bg-orange-100",text:"text-orange-600",dot:"bg-orange-500"},Critical:{bg:"bg-red-100",text:"text-red-600",dot:"bg-red-500"}},MN=["Admission","Accounting","Recruitment","Digital Marketing","Motion Graphics","SEO","Social Media","Content Creation","Administration","Management"],PN=["Backlog","To Do","In Progress","In Review","Completed"];function LN(t,s){if(!t||s==="Completed")return null;const n=new Date,a=new Date(t)-n,l=Math.ceil(a/(1e3*60*60*24));return l<0?{bg:"bg-red-100",text:"text-red-700",icon:"text-red-600",label:"Overdue"}:l<=1?{bg:"bg-red-50",text:"text-red-600",icon:"text-red-500",label:l===0?"Due Today":"Due Tomorrow"}:l<=3?{bg:"bg-orange-50",text:"text-orange-600",icon:"text-orange-500",label:`${l} days left`}:l<=7?{bg:"bg-yellow-50",text:"text-yellow-600",icon:"text-yellow-500",label:`${l} days left`}:{bg:"bg-gray-50",text:"text-gray-600",icon:"text-gray-500",label:null}}function zp({task:t,onClick:s,isDragging:n,onStatusChange:r,onDeadlineRequest:a}){var C,E,k,O,U,B,R;if(!t)return null;const[l,i]=c.useState(!1),[o,d]=c.useState(!1),{attributes:u,listeners:x,setNodeRef:m,transform:h,transition:g}=Ip({id:t._id}),w={transform:Zs.Transform.toString(h),transition:g,opacity:n?.5:1},j=t.dueDate&&t.status!=="Completed"&&new Date(t.dueDate)<new Date,A=j?Os.Overdue:Os[t.status]||Os["To Do"],b=Nm[t.priority]||Nm.Medium,p=LN(t.dueDate,t.status),v=((C=t.checklist)==null?void 0:C.length)>0?`${t.checklist.filter(S=>S.completed).length}/${t.checklist.length}`:null,N={Backlog:["To Do"],"To Do":["In Progress","Completed"],"In Progress":["In Review","Completed"],"In Review":["Completed","To Do"],Completed:["To Do","In Progress"]}[t.status]||[];return e.jsxs("div",{ref:m,style:w,className:`bg-white rounded-lg shadow-md border-l-4 ${((E=b==null?void 0:b.dot)==null?void 0:E.replace("bg-","border-"))||"border-gray-400"} p-4 mb-2.5 hover:shadow-lg transition-all cursor-pointer group`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full ${(b==null?void 0:b.bg)||"bg-gray-100"} ${(b==null?void 0:b.text)||"text-gray-700"} font-bold uppercase tracking-wide`,children:t.priority||"Medium"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:S=>{S.stopPropagation(),d(!o)},className:"p-1.5 opacity-0 group-hover:opacity-100 hover:bg-gray-100 rounded-lg transition",children:e.jsx(Fy,{size:16,className:"text-gray-600"})}),o&&e.jsx("div",{className:"absolute right-0 top-8 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:e.jsx("button",{onClick:S=>{S.stopPropagation(),a==null||a(),d(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:" Request Deadline Change"})})]}),j&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-600 font-semibold flex items-center gap-1 animate-pulse",children:[e.jsx(Lt,{size:12})," Overdue"]})]}),e.jsx("h3",{className:"font-bold text-navy mb-3 text-sm leading-tight cursor-pointer hover:text-blue-600",onClick:s,children:t.title}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-2.5 mb-3 space-y-1.5",children:[t.assignedBy&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-blue-700 font-medium",children:[e.jsx(ir,{size:13,className:"text-blue-600"}),e.jsx("span",{className:"text-gray-600",children:"From:"})]}),e.jsx("span",{className:"font-semibold text-blue-900",children:t.assignedBy.name||t.assignedBy.fullName})]}),((k=t.assignedTo)==null?void 0:k.length)>0&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-purple-700 font-medium",children:[e.jsx(Ae,{size:13,className:"text-purple-600"}),e.jsx("span",{className:"text-gray-600",children:"To:"})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.assignedTo.map((S,P)=>e.jsx("span",{className:"font-semibold text-purple-900 bg-white px-2 py-0.5 rounded",children:S.name||S.fullName||"Unknown"},S._id||P))})]})]}),t.description&&e.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2 italic",children:t.description}),((O=t.tags)==null?void 0:O.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:t.tags.map(S=>e.jsxs("span",{className:"text-xs px-2.5 py-1 rounded-full bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 font-medium border border-gray-300",children:[e.jsx(xd,{size:10,className:"inline mr-1"}),S]},S))}),e.jsxs("div",{className:"space-y-2 text-xs pt-3 border-t border-gray-200",children:[t.dueDate&&e.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-2 rounded-lg ${(p==null?void 0:p.bg)||"bg-gray-50"} border ${((U=p==null?void 0:p.bg)==null?void 0:U.replace("bg-","border-").replace("-100","-200"))||"border-gray-200"}`,children:[e.jsx(fe,{size:14,className:`${(p==null?void 0:p.icon)||"text-gray-500"} flex-shrink-0`}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:`font-semibold ${(p==null?void 0:p.text)||"text-gray-600"}`,children:new Date(t.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(p==null?void 0:p.label)&&e.jsx("span",{className:`px-2 py-0.5 rounded-full font-bold ${p.bg} ${p.text}`,children:p.label})]})]}),e.jsx("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[v&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-white rounded border border-green-200",children:[e.jsx(dd,{size:13,className:"text-green-600"}),e.jsx("span",{className:"font-semibold text-green-700",children:v})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-white rounded border border-blue-200 cursor-pointer hover:bg-blue-50 transition",onClick:s,title:"Click to view comments",children:[e.jsx(sp,{size:13,className:"text-blue-600"}),e.jsx("span",{className:"font-semibold text-blue-700",children:((B=t.comments)==null?void 0:B.length)||0})]}),((R=t.attachments)==null?void 0:R.length)>0&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-white rounded border border-purple-200",children:[e.jsx(ic,{size:13,className:"text-purple-600"}),e.jsx("span",{className:"font-semibold text-purple-700",children:t.attachments.length})]})]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:S=>{S.stopPropagation(),i(!l)},className:`w-full py-2.5 px-3 rounded-lg font-semibold text-sm border-2 transition-all flex items-center justify-between ${A==null?void 0:A.bg} ${A==null?void 0:A.text} ${A==null?void 0:A.border}`,children:[e.jsxs("span",{children:["Status: ",t.status]}),e.jsx("span",{className:"text-lg",children:""})]}),l&&e.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white border-2 border-gray-300 rounded-lg shadow-lg z-50",children:N.map(S=>{var P,D;return e.jsxs("button",{onClick:$=>{$.stopPropagation(),r==null||r(t._id,S),i(!1)},className:`w-full text-left px-4 py-2.5 text-sm font-semibold border-b border-gray-200 hover:${(P=Os[S])==null?void 0:P.bg} transition ${(D=Os[S])==null?void 0:D.text}`,children:[" Move to ",S]},S)})})]})]})]})}function RN({column:t,tasks:s,onCardClick:n,onAddTask:r,activeId:a,isAdmin:l}){var m,h,g;const i=s.filter(w=>w.boardColumn===t),o=i.length,d=i.map(w=>w._id),{setNodeRef:u,isOver:x}=Ip({id:t,data:{type:"column",accepts:["task"]}});return e.jsxs("div",{ref:u,className:`flex-1 min-w-[260px] max-w-[280px] bg-gradient-to-b from-gray-50 to-gray-100 rounded-xl p-3 transition-all ${x?"bg-gradient-to-b from-blue-50 to-blue-100 border-2 border-blue-400 shadow-lg":"border-2 border-gray-200"}`,children:[e.jsx("div",{className:"mb-4 pb-3 border-b-2 border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${((m=Os[t])==null?void 0:m.dot)||"bg-gray-400"} shadow-md`}),e.jsx("h2",{className:"font-bold text-navy text-base",children:t}),e.jsx("span",{className:`text-xs font-bold px-2.5 py-1 rounded-full ${((h=Os[t])==null?void 0:h.bg)||"bg-gray-200"} ${((g=Os[t])==null?void 0:g.text)||"text-gray-700"}`,children:o})]}),e.jsx("button",{onClick:()=>r(t),className:"p-2 hover:bg-white rounded-lg transition shadow-sm border border-gray-300 hover:border-blue-400 hover:shadow-md",title:l?"Assign task":"Create task",children:e.jsx(as,{size:18,className:"text-gray-600"})})]})}),e.jsx(oj,{items:d,strategy:lj,children:e.jsxs("div",{className:"space-y-3 max-h-[calc(100vh-250px)] overflow-y-auto",children:[i.map(w=>e.jsx(zp,{task:w,onClick:j=>handleCardClick(w,j),isDragging:a===w._id,onStatusChange:handleStatusChange,onDeadlineRequest:()=>handleDeadlineRequest()},w._id)),o===0&&e.jsx("div",{className:"text-center text-gray-400 text-sm py-8",children:"No tasks"})]})})]})}function IN(){var D,$;const{user:t}=xe(),[s,n]=c.useState([]),[r,a]=c.useState(!0),[l,i]=c.useState(""),[o,d]=c.useState(""),[u,x]=c.useState([]),[m,h]=c.useState(""),[g,w]=c.useState(""),[j,A]=c.useState(null),[b,p]=c.useState(!1),[v,y]=c.useState(null),N=Ov($v(vd,{activationConstraint:{distance:8}})),C=async()=>{try{a(!0);const M=["SuperAdmin","Admin"].includes(t==null?void 0:t.role)?await _.listAllTasks():await _.listMyTasks();n(M.tasks||[])}catch(L){console.error("Failed to load tasks:",L)}finally{a(!1)}};c.useEffect(()=>{C()},[]),c.useEffect(()=>{const L=sessionStorage.getItem("openTaskId"),M=sessionStorage.getItem("openTaskData");if(L){if(s.length>0){const H=s.find(Z=>Z._id===L);if(H){A(H),sessionStorage.removeItem("openTaskId"),sessionStorage.removeItem("openTaskData");return}}if(M)try{const H=JSON.parse(M);A(H),sessionStorage.removeItem("openTaskId"),sessionStorage.removeItem("openTaskData")}catch(H){console.error("Failed to parse task data:",H),sessionStorage.removeItem("openTaskId"),sessionStorage.removeItem("openTaskData")}}},[s]);const E=ge.useMemo(()=>{const L=new Map;return s.forEach(M=>{var H;M.assignedBy&&L.set(M.assignedBy._id,M.assignedBy),(H=M.assignedTo)==null||H.forEach(Z=>{Z&&L.set(Z._id,Z)})}),Array.from(L.values()).sort((M,H)=>(M.name||M.fullName||"").localeCompare(H.name||H.fullName||""))},[s]),k=s.filter(L=>{var M,H;return!(l&&!L.title.toLowerCase().includes(l.toLowerCase())||o&&L.priority!==o||u.length>0&&!u.some(Z=>{var W;return(W=L.tags)==null?void 0:W.includes(Z)})||m&&((M=L.assignedBy)==null?void 0:M._id)!==m||g&&!((H=L.assignedTo)!=null&&H.some(Z=>Z._id===g)))}),O=(L,M)=>{M!=null&&M.defaultPrevented||A(L)},U=async(L,M)=>{try{await _.updateTaskStatus(L,M),await C()}catch(H){console.error("Error updating task status:",H),alert("Failed to update task status")}},B=()=>{const L=s.find(M=>M._id===(j==null?void 0:j._id));L&&A(L)},R=L=>{p(!0)},S=L=>{y(L.active.id)},P=async L=>{const{active:M,over:H}=L;if(y(null),!H)return;const Z=M.id,W=H.id,F=s.find(q=>q._id===Z);if(!(!F||F.boardColumn===W))try{await _.updateBoardPosition(Z,{boardColumn:W,boardPosition:0}),await C()}catch(q){console.error("Error moving task:",q),alert("Failed to move task")}};return r?e.jsx("div",{className:"p-6 text-center text-royal",children:"Loading tasks..."}):e.jsxs(e.Fragment,{children:[e.jsxs(Ob,{sensors:N,collisionDetection:Wv,onDragStart:S,onDragEnd:P,children:[e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Task Board"}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm",children:["SuperAdmin","Admin"].includes(t==null?void 0:t.role)?`Manage and track all team tasks  ${k.length} tasks`:`Your assigned tasks  ${k.length} tasks`})]}),e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl font-semibold",children:[e.jsx(as,{size:20}),["SuperAdmin","Admin"].includes(t==null?void 0:t.role)?"Assign Task":"New Task"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(pn,{size:18,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search tasks by title...",value:l,onChange:L=>i(L.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[e.jsxs("select",{value:o,onChange:L=>d(L.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-sm",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"Low",children:" Low"}),e.jsx("option",{value:"Medium",children:" Medium"}),e.jsx("option",{value:"High",children:" High"}),e.jsx("option",{value:"Critical",children:" Critical"})]}),e.jsxs("select",{value:u[0]||"",onChange:L=>x(L.target.value?[L.target.value]:[]),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-sm",children:[e.jsx("option",{value:"",children:"All Tags"}),MN.map(L=>e.jsx("option",{value:L,children:L},L))]}),["SuperAdmin","Admin"].includes(t==null?void 0:t.role)&&e.jsxs("select",{value:m,onChange:L=>h(L.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-sm",children:[e.jsx("option",{value:"",children:" Assigned By: All"}),E.filter(L=>s.some(M=>{var H;return((H=M.assignedBy)==null?void 0:H._id)===L._id})).map(L=>e.jsx("option",{value:L._id,children:L.name||L.fullName},L._id))]}),["SuperAdmin","Admin"].includes(t==null?void 0:t.role)&&e.jsxs("select",{value:g,onChange:L=>w(L.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-sm",children:[e.jsx("option",{value:"",children:" Assigned To: All"}),E.filter(L=>s.some(M=>{var H;return(H=M.assignedTo)==null?void 0:H.some(Z=>Z._id===L._id)})).map(L=>e.jsx("option",{value:L._id,children:L.name||L.fullName},L._id))]}),(l||o||u.length>0||m||g)&&e.jsx("button",{onClick:()=>{i(""),d(""),x([]),h(""),w("")},className:"px-4 py-2.5 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors font-medium text-sm",children:"Clear Filters"})]}),(o||u.length>0||m||g)&&e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Active Filters:"}),o&&e.jsxs("span",{className:"text-xs px-2.5 py-1 bg-blue-100 text-blue-700 rounded-full font-medium",children:["Priority: ",o]}),u.map(L=>e.jsxs("span",{className:"text-xs px-2.5 py-1 bg-purple-100 text-purple-700 rounded-full font-medium",children:["Tag: ",L]},L)),m&&e.jsxs("span",{className:"text-xs px-2.5 py-1 bg-green-100 text-green-700 rounded-full font-medium",children:["From: ",((D=E.find(L=>L._id===m))==null?void 0:D.name)||"Unknown"]}),g&&e.jsxs("span",{className:"text-xs px-2.5 py-1 bg-orange-100 text-orange-700 rounded-full font-medium",children:["To: ",(($=E.find(L=>L._id===g))==null?void 0:$.name)||"Unknown"]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-x-auto",children:e.jsx("div",{className:"flex gap-4 min-w-max pb-4",children:PN.map(L=>e.jsx(RN,{column:L,tasks:k,onCardClick:O,onAddTask:R,activeId:v,isAdmin:["SuperAdmin","Admin"].includes(t==null?void 0:t.role)},L))})})]}),e.jsx(sj,{children:v?e.jsx(zp,{task:s.find(L=>L._id===v),onClick:()=>{},isDragging:!0,onStatusChange:U,onDeadlineRequest:()=>B()}):null})]}),j&&e.jsx(AN,{task:j,taskId:j._id,isOpen:!!j,onClose:()=>A(null),onUpdate:C}),e.jsx(EN,{isOpen:b,onClose:()=>p(!1),onCreated:C})]})}function $N(){const{user:t}=xe(),[s,n]=c.useState([]),[r,a]=c.useState(!1),[l,i]=c.useState(null),[o,d]=c.useState({name:"",email:"",role:"Admission",department:"",designation:"",phone:"",avatar:"",displayOrder:0}),[u,x]=c.useState(null),[m,h]=c.useState(null),g=(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin";console.log("DEBUG Employee Page - User:",t),console.log("DEBUG Employee Page - canEdit:",g);const w=async()=>{try{const{users:y}=await _.listUsers();n(y)}catch(y){x((y==null?void 0:y.message)||"Failed to load")}};c.useEffect(()=>{w()},[]);const j=c.useMemo(()=>[...s].sort((y,N)=>{const C=y.displayOrder||0,E=N.displayOrder||0;return C===E?(y.name||"").localeCompare(N.name||""):C-E}),[s]),A=()=>{i(null),d({name:"",email:"",role:"Admission",department:"",designation:"",phone:"",avatar:"",displayOrder:0}),a(!0)},b=y=>{i(y._id),d({name:y.name||"",email:y.email||"",role:y.role||"Admission",department:y.department||"",designation:y.designation||"",phone:y.phone||"",avatar:y.avatar||"",displayOrder:y.displayOrder||0}),a(!0)},p=async y=>{y.preventDefault(),x(null),h(null);try{l?(await _.updateUser(l,o),h("Employee updated")):(await _.createUser({...o,password:"password123"}),h("Employee created (default password: password123)")),a(!1),w()}catch(N){x((N==null?void 0:N.message)||"Failed")}},v=async y=>{if(confirm("Delete this employee?"))try{await _.deleteUser(y),h("Employee deleted"),w()}catch(N){x((N==null?void 0:N.message)||"Delete failed")}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Employee List"}),g&&e.jsx("button",{onClick:A,className:"bg-gold text-navy rounded-xl px-4 py-2 font-semibold hover:bg-lightgold",children:"+ Add Employee"})]}),m&&e.jsx("div",{className:"mb-2 text-green-700",children:m}),u&&e.jsx("div",{className:"mb-2 text-red-600",children:u}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Order"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Role"}),e.jsx("th",{className:"text-left p-3",children:"Department"}),e.jsx("th",{className:"text-left p-3",children:"Designation"}),e.jsx("th",{className:"text-left p-3",children:"Email"}),e.jsx("th",{className:"text-left p-3",children:"Phone"}),g&&e.jsx("th",{className:"text-left p-3",children:"Action"})]})}),e.jsxs("tbody",{children:[j.map((y,N)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 text-navy font-semibold",children:y.displayOrder||0}),e.jsxs("td",{className:"p-3 flex items-center gap-2",children:[e.jsx("img",{src:y.avatar,className:"w-8 h-8 rounded-full border",alt:y.name}),e.jsx("div",{children:e.jsx("div",{className:"font-semibold text-navy",children:y.name})})]}),e.jsx("td",{className:"p-3",children:y.role}),e.jsx("td",{className:"p-3",children:y.department||"-"}),e.jsx("td",{className:"p-3",children:y.designation||"-"}),e.jsx("td",{className:"p-3",children:y.email}),e.jsx("td",{className:"p-3",children:y.phone||"-"}),g&&e.jsxs("td",{className:"p-3",children:[e.jsx("button",{onClick:()=>b(y),className:"px-3 py-1 rounded-lg border mr-2",children:"Edit"}),((t==null?void 0:t.role)==="SuperAdmin"||y.role!=="SuperAdmin")&&e.jsx("button",{onClick:()=>v(y._id),className:"px-3 py-1 rounded-lg border hover:bg-red-50",children:"Delete"})]})]},y._id)),j.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:g?8:7,children:"No employees"})})]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:e.jsxs("form",{onSubmit:p,className:"bg-white rounded-2xl shadow-soft p-4 w-full max-w-xl",children:[e.jsx("h2",{className:"text-xl font-bold text-navy mb-3",children:l?"Edit Employee":"Add Employee"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Display Order *"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",type:"number",min:"0",required:!0,value:o.displayOrder,onChange:y=>d(N=>({...N,displayOrder:parseInt(y.target.value)||0})),placeholder:"e.g., 1, 2, 3..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers appear first (1, 2, 3...)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Name *"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",required:!0,value:o.name,onChange:y=>d(N=>({...N,name:y.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Email *"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",required:!0,type:"email",value:o.email,onChange:y=>d(N=>({...N,email:y.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Role *"}),e.jsxs("select",{className:"w-full border rounded-xl px-3 py-2",value:o.role,onChange:y=>d(N=>({...N,role:y.target.value})),children:[(t==null?void 0:t.role)==="SuperAdmin"&&e.jsx("option",{children:"SuperAdmin"}),e.jsx("option",{children:"Admin"}),e.jsx("option",{children:"Accountant"}),e.jsx("option",{children:"Admission"}),e.jsx("option",{children:"Recruitment"}),e.jsx("option",{children:"DigitalMarketing"}),e.jsx("option",{children:"MotionGraphics"}),e.jsx("option",{children:"Coordinator"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Department"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:o.department,onChange:y=>d(N=>({...N,department:y.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Designation"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:o.designation,onChange:y=>d(N=>({...N,designation:y.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Phone"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:o.phone,onChange:y=>d(N=>({...N,phone:y.target.value}))})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Avatar URL"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:o.avatar,onChange:y=>d(N=>({...N,avatar:y.target.value}))})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),g&&e.jsx("button",{className:"px-4 py-2 rounded-xl bg-gold text-navy font-semibold hover:bg-lightgold",children:l?"Save":"Create"})]})]})})]})}function ON(){const{user:t}=xe(),[s,n]=c.useState([]),[r,a]=c.useState("All"),[l,i]=c.useState(!1),[o,d]=c.useState(!1),[u,x]=c.useState(null),[m,h]=c.useState(null),[g,w]=c.useState({name:"",category:"",duration:"",regularFee:0,discountFee:0,teacher:"",details:"",status:"Active"}),[j,A]=c.useState(null),[b,p]=c.useState(null),v=(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin",y=["All",...new Set(s.map(R=>R.category).filter(Boolean))],N=r==="All"?s:s.filter(R=>R.category===r),C=async()=>{try{const{courses:R}=await _.listCourses();n(R)}catch(R){A((R==null?void 0:R.message)||"Failed to load")}};c.useEffect(()=>{C()},[]);const E=()=>{h(null),w({name:"",category:"",duration:"",regularFee:0,discountFee:0,teacher:"",details:"",status:"Active"}),i(!0)},k=R=>{x(R),d(!0)},O=R=>{h(R._id),w({name:R.name,category:R.category,duration:R.duration,regularFee:R.regularFee,discountFee:R.discountFee,teacher:R.teacher,details:R.details,status:R.status}),i(!0)},U=async R=>{R.preventDefault(),A(null),p(null);try{m?(await _.updateCourse(m,{...g}),p("Course updated")):(await _.createCourse({...g}),p("Course created")),i(!1),C()}catch(S){A((S==null?void 0:S.message)||"Failed")}},B=async R=>{if(confirm("Delete this course?"))try{await _.deleteCourse(R),p("Course deleted"),C()}catch(S){A((S==null?void 0:S.message)||"Delete failed")}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Courses"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("select",{value:r,onChange:R=>a(R.target.value),className:"border rounded-xl px-4 py-2 text-sm",children:y.map(R=>e.jsx("option",{value:R,children:R==="All"?" All Categories":` ${R}`},R))}),v&&e.jsx("button",{onClick:E,className:"bg-gold text-navy rounded-xl px-4 py-2 font-semibold hover:bg-lightgold",children:"+ Add Course"})]})]}),b&&e.jsx("div",{className:"mb-2 p-3 bg-green-100 text-green-700 rounded-xl",children:b}),j&&e.jsx("div",{className:"mb-2 p-3 bg-red-100 text-red-600 rounded-xl",children:j}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Course ID"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Category"}),e.jsx("th",{className:"text-left p-3",children:"Duration"}),e.jsx("th",{className:"text-left p-3",children:"Regular Fee"}),e.jsx("th",{className:"text-left p-3",children:"Discount Fee"}),e.jsx("th",{className:"text-left p-3",children:"Teacher"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Action"})]})}),e.jsxs("tbody",{children:[N.map(R=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:R.courseId}),e.jsx("td",{className:"p-3 font-semibold text-navy",children:R.name}),e.jsx("td",{className:"p-3",children:R.category?e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-medium",children:R.category}):"-"}),e.jsx("td",{className:"p-3",children:R.duration||"-"}),e.jsxs("td",{className:"p-3",children:[" ",R.regularFee]}),e.jsxs("td",{className:"p-3",children:[" ",R.discountFee]}),e.jsx("td",{className:"p-3",children:R.teacher||"-"}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${R.status==="Active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:R.status})}),e.jsxs("td",{className:"p-3",children:[e.jsx("button",{onClick:()=>k(R),className:"px-3 py-1 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 mr-2",children:"View"}),v&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>O(R),className:"px-3 py-1 rounded-lg border mr-2",children:"Edit"}),e.jsx("button",{onClick:()=>B(R._id),className:"px-3 py-1 rounded-lg border hover:bg-red-50",children:"Delete"})]})]})]},R._id)),N.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70 text-center",colSpan:"9",children:s.length===0?"No courses":"No courses in this category"})})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:e.jsxs("form",{onSubmit:U,className:"bg-white rounded-2xl shadow-soft p-4 w-full max-w-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-navy mb-3",children:m?"Edit Course":"Add Course"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Course Name *"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",required:!0,value:g.name,onChange:R=>w(S=>({...S,name:R.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Category"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:g.category,onChange:R=>w(S=>({...S,category:R.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Duration"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:g.duration,onChange:R=>w(S=>({...S,duration:R.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Regular Fee"}),e.jsx("input",{type:"number",className:"w-full border rounded-xl px-3 py-2",value:g.regularFee,onChange:R=>w(S=>({...S,regularFee:R.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Discount Fee"}),e.jsx("input",{type:"number",className:"w-full border rounded-xl px-3 py-2",value:g.discountFee,onChange:R=>w(S=>({...S,discountFee:R.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Teacher"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2",value:g.teacher,onChange:R=>w(S=>({...S,teacher:R.target.value}))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Details"}),e.jsx("textarea",{rows:"3",className:"w-full border rounded-xl px-3 py-2",value:g.details,onChange:R=>w(S=>({...S,details:R.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border rounded-xl px-3 py-2",value:g.status,onChange:R=>w(S=>({...S,status:R.target.value})),children:[e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Inactive"})]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),v&&e.jsx("button",{className:"px-4 py-2 rounded-xl bg-gold text-navy font-semibold hover:bg-lightgold",children:m?"Save":"Create"})]})]})}),o&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-soft p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-navy",children:"Course Details"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Course ID"}),e.jsx("div",{className:"text-lg font-semibold text-navy",children:u.courseId})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Status"}),e.jsx("div",{className:`text-lg font-semibold ${u.status==="Active"?"text-green-600":"text-gray-600"}`,children:u.status})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-blue-600 mb-1",children:"Course Name"}),e.jsx("div",{className:"text-xl font-bold text-navy",children:u.name})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Category"}),e.jsx("div",{className:"text-lg font-semibold text-navy",children:u.category||"Not specified"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Duration"}),e.jsx("div",{className:"text-lg font-semibold text-navy",children:u.duration||"Not specified"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl border-2 border-yellow-200",children:[e.jsx("div",{className:"text-sm text-yellow-700 mb-1",children:"Regular Fee"}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-800",children:[" ",u.regularFee.toLocaleString()]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border-2 border-green-200",children:[e.jsx("div",{className:"text-sm text-green-700 mb-1",children:"Discount Fee"}),e.jsxs("div",{className:"text-2xl font-bold text-green-800",children:[" ",u.discountFee.toLocaleString()]}),u.regularFee>u.discountFee&&e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Save ",(u.regularFee-u.discountFee).toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Teacher/Instructor"}),e.jsx("div",{className:"text-lg font-semibold text-purple-800",children:u.teacher||"Not assigned"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Course Details"}),e.jsx("div",{className:"text-gray-800 whitespace-pre-wrap",children:u.details||"No details provided"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Created:"})," ",new Date(u.createdAt).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Updated:"})," ",new Date(u.updatedAt).toLocaleString()]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>d(!1),className:"px-6 py-2 rounded-xl bg-navy text-white font-semibold hover:bg-navy/90",children:"Close"})})]})})]})}function FN(){return new Date().toISOString().slice(0,10)}function _N(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1).toISOString().slice(0,10)}function zN(t){const s=Object.keys(t[0]||{});return[s.join(","),...t.map(r=>s.map(a=>JSON.stringify(r[a]??"")).join(","))].join(`
`)}function BN(){const[t,s]=c.useState(_N()),[n,r]=c.useState(FN()),[a,l]=c.useState(null),[i,o]=c.useState(!0),[d,u]=c.useState(""),x=async()=>{o(!0);try{const w=await _.reportsOverview(t,n);l(w),u("")}catch(w){u(w.message||"Failed to load")}finally{o(!1)}};c.useEffect(()=>{x()},[]);const m=w=>{w.preventDefault(),x()},h=c.useMemo(()=>a?[{title:"Accounting  Income",val:a.accounting.income},{title:"Accounting  Expense",val:a.accounting.expense},{title:"Accounting  Net",val:a.accounting.net},{title:"Admission  Collected",val:a.admission.collected},{title:"Recruitment  Income",val:a.recruitment.income},{title:"Recruitment  Expense",val:a.recruitment.expense},{title:"Recruitment  Net",val:a.recruitment.net},{title:"Digital Marketing  Cost",val:a.dm.cost},{title:"Combined  Income",val:a.combined.income},{title:"Combined  Expense",val:a.combined.expense},{title:"Combined  Net",val:a.combined.net}]:[],[a]),g=c.useMemo(()=>{if(!a)return"";const w=[{Section:"Accounting",Metric:"Income",Amount:a.accounting.income},{Section:"Accounting",Metric:"Expense",Amount:a.accounting.expense},{Section:"Accounting",Metric:"Net",Amount:a.accounting.net},{Section:"Admission",Metric:"Collected",Amount:a.admission.collected},{Section:"Recruitment",Metric:"Income",Amount:a.recruitment.income},{Section:"Recruitment",Metric:"Expense",Amount:a.recruitment.expense},{Section:"Recruitment",Metric:"Net",Amount:a.recruitment.net},{Section:"Digital Marketing",Metric:"Cost",Amount:a.dm.cost},{Section:"Combined",Metric:"Income",Amount:a.combined.income},{Section:"Combined",Metric:"Expense",Amount:a.combined.expense},{Section:"Combined",Metric:"Net",Amount:a.combined.net}],j=new Blob([zN(w)],{type:"text/csv;charset=utf-8;"});return URL.createObjectURL(j)},[a]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-bold text-navy",children:"Consolidated Reports"}),e.jsxs("form",{onSubmit:m,className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",className:"input",value:t,onChange:w=>s(w.target.value)}),e.jsx("span",{className:"text-royal",children:"to"}),e.jsx("input",{type:"date",className:"input",value:n,onChange:w=>r(w.target.value)}),e.jsx("button",{className:"btn btn-primary",children:"Apply"}),g&&e.jsx("a",{className:"btn",href:g,download:`reports_${t}_to_${n}.csv`,children:"Export CSV"})]})]}),d&&e.jsx("div",{className:"text-red-600",children:d}),i&&e.jsx("div",{children:"Loading"}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:h.map((w,j)=>e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("div",{className:"text-royal text-sm",children:w.title}),e.jsx("div",{className:`text-2xl font-extrabold ${w.title.includes("Net")?w.val>=0?"text-green-600":"text-red-600":"text-navy"}`,children:Wt(w.val)})]},j))}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("div",{className:"font-semibold text-navy mb-2",children:"Summary"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-royal",children:[e.jsx("th",{className:"py-2",children:"Section"}),e.jsx("th",{children:"Metric"}),e.jsx("th",{children:"Amount"})]})}),e.jsxs("tbody",{children:[e.jsx(Ot,{s:"Accounting",m:"Income",a:a.accounting.income}),e.jsx(Ot,{s:"Accounting",m:"Expense",a:a.accounting.expense}),e.jsx(Ot,{s:"Accounting",m:"Net",a:a.accounting.net}),e.jsx(Ot,{s:"Admission",m:"Collected",a:a.admission.collected}),e.jsx(Ot,{s:"Recruitment",m:"Income",a:a.recruitment.income}),e.jsx(Ot,{s:"Recruitment",m:"Expense",a:a.recruitment.expense}),e.jsx(Ot,{s:"Recruitment",m:"Net",a:a.recruitment.net}),e.jsx(Ot,{s:"Digital Marketing",m:"Cost",a:a.dm.cost}),e.jsx(Ot,{s:"Combined",m:"Income",a:a.combined.income}),e.jsx(Ot,{s:"Combined",m:"Expense",a:a.combined.expense}),e.jsx(Ot,{s:"Combined",m:"Net",a:a.combined.net})]})]})})]})]})]})}function Ot({s:t,m:s,a:n}){return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:t}),e.jsx("td",{children:s}),e.jsx("td",{className:"font-semibold",children:Wt(n)})]})}function Qa(t){if(!t)return"-";try{return new Date(t).toLocaleString()}catch{return t}}function UN(){const{user:t}=xe(),[s,n]=c.useState("All Leads"),[r,a]=c.useState("All"),[l,i]=c.useState([]),[o,d]=c.useState([]),[u,x]=c.useState(null),[m,h]=c.useState(!1),[g,w]=c.useState(null),[j,A]=c.useState(!1),b=async()=>{try{let v=s==="All Leads"?void 0:s;s==="Unassigned"&&(v="Assigned");const[y,N]=await Promise.all([_.listLeads(v),_.listAdmissionUsers().catch(()=>({users:[]}))]);let C=(y==null?void 0:y.leads)||[];s==="Unassigned"&&(C=C.filter(E=>!E.assignedTo)),i(C),d((N==null?void 0:N.users)||[]),x(null)}catch(v){x(v.message)}};c.useEffect(()=>{b()},[s]);const p=ge.useMemo(()=>r==="All"?l:r==="Unassigned"?l.filter(v=>!v.assignedTo):l.filter(v=>{var y;return((y=v.assignedTo)==null?void 0:y._id)===r}),[l,r]);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Leads Center (View-only)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:r,onChange:v=>a(v.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"All",children:" All Members"}),e.jsx("option",{value:"Unassigned",children:" Unassigned"}),o.map(v=>e.jsxs("option",{value:v._id,children:[" ",v.name]},v._id))]}),e.jsxs("select",{value:s,onChange:v=>n(v.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{children:"All Leads"}),e.jsx("option",{children:"Unassigned"}),e.jsx("option",{children:"Assigned"}),e.jsx("option",{children:"Counseling"}),e.jsx("option",{children:"In Follow Up"}),e.jsx("option",{children:"Admitted"}),e.jsx("option",{children:"Not Admitted"})]})]})]}),u&&e.jsx("div",{className:"mb-2 text-red-600",children:u}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Lead ID"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Phone / Email"}),e.jsx("th",{className:"text-left p-3",children:"Interested Course"}),e.jsx("th",{className:"text-left p-3",children:"Source"}),e.jsx("th",{className:"text-left p-3",children:"Lead Status"}),e.jsx("th",{className:"text-left p-3",children:"Assigned To"}),((t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin"||(t==null?void 0:t.role)==="Admission")&&e.jsx("th",{className:"text-left p-3",children:"History"})]})}),e.jsxs("tbody",{children:[p.map(v=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:v.leadId}),e.jsx("td",{className:"p-3",children:v.name}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{children:v.phone}),e.jsx("div",{className:"text-xs text-royal/70",children:v.email||"-"})]}),e.jsx("td",{className:"p-3",children:v.interestedCourse||"-"}),e.jsx("td",{className:"p-3",children:v.source}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v.status==="Admitted"?"bg-green-100 text-green-700":v.status==="Not Admitted"?"bg-red-100 text-red-700":v.status==="Counseling"?"bg-blue-100 text-blue-700":v.status==="In Follow Up"?"bg-yellow-100 text-yellow-700":v.status==="Assigned"&&v.assignedTo?"bg-purple-100 text-purple-700":v.status==="Assigned"&&!v.assignedTo?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:v.status==="Assigned"&&!v.assignedTo?"Unassigned":v.status||"New"})}),e.jsx("td",{className:"p-3",children:v.assignedTo?`${v.assignedTo.name} (${v.assignedTo.role})`:"-"}),((t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin"||(t==null?void 0:t.role)==="Admission")&&e.jsx("td",{className:"p-3",children:e.jsx("button",{disabled:j,onClick:async()=>{try{x(null),A(!0);const y=await _.getLeadHistory(v._id);w(y.lead||y),h(!0)}catch(y){x(y.message)}finally{A(!1)}},className:"px-3 py-1 rounded-xl border hover:bg-[#f3f6ff]",children:j?"Loading":"History"})})]},v._id)),p.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:7,children:"No leads for selected filters"})})]})]})}),m&&g&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>h(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-2xl shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Lead History  ",g.leadId]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{children:["Assigned At: ",e.jsx("strong",{children:Qa(g.assignedAt||g.updatedAt)})]}),e.jsxs("div",{children:["Counseling At: ",e.jsx("strong",{children:Qa(g.counselingAt||g.updatedAt)})]}),e.jsxs("div",{children:["Admitted At: ",e.jsx("strong",{children:Qa(g.admittedAt||g.updatedAt)})]}),e.jsxs("div",{children:["Follow-ups (",(g.followUps||[]).length,"):"]}),e.jsx("div",{className:"pl-2",children:(g.followUps||[]).length===0?e.jsx("div",{className:"text-royal/70",children:"No follow-ups"}):(g.followUps||[]).map((v,y)=>{var N;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"text-sm font-medium",children:[Qa(v.at)," ",(N=v.by)!=null&&N.name?`  ${v.by.name}`:""]}),e.jsx("div",{className:"text-royal/70",children:v.note||"-"})]},y)})})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{onClick:()=>h(!1),className:"px-3 py-2 rounded-xl border",children:"Close"})})]})]})]})}function WN(){const{user:t}=xe(),[s,n]=c.useState({name:"",phone:"",email:"",interestedCourse:"",source:"Manually Generated Lead"}),[r,a]=c.useState(""),[l,i]=c.useState(null),[o,d]=c.useState(null),[u,x]=c.useState(null),[m,h]=c.useState(!1),g=(t==null?void 0:t.role)==="DigitalMarketing",w=async b=>{b.preventDefault(),i(null),d(null),h(!0);try{await _.createLead(s),i("Lead added successfully! "),n({name:"",phone:"",email:"",interestedCourse:"",source:"Manually Generated Lead"})}catch(p){d(p.message)}finally{h(!1)}},j=async b=>{b.preventDefault(),i(null),d(null),h(!0);try{const{created:p,skipped:v}=await _.bulkUploadLeads(r);i(`Bulk upload completed!  Created: ${p} leads |  Skipped: ${v} duplicates/invalid`),a("")}catch(p){d(p.message)}finally{h(!1)}},A=b=>b.includes("Meta")?ud:b.includes("LinkedIn")?md:b.includes("Manual")?Gy:zy;return g?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Lead Entry"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Add new leads individually or upload in bulk via CSV"})]}),l&&e.jsxs("div",{className:"p-4 bg-green-50 border-l-4 border-green-500 rounded-lg flex items-start gap-3",children:[e.jsx(et,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-green-800 font-medium",children:l})})]}),o&&e.jsxs("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 rounded-lg flex items-start gap-3",children:[e.jsx(Lt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-red-800 font-medium",children:o})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("form",{onSubmit:w,className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 p-5",children:e.jsxs("div",{className:"flex items-center gap-3 text-white",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(eo,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Add Single Lead"}),e.jsx("p",{className:"text-sm text-white/80",children:"Enter lead details manually"})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(eo,{className:"w-4 h-4 text-blue-600"}),"Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full border-2 border-gray-200 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:outline-none transition-colors",placeholder:"Enter lead's full name",required:!0,value:s.name,onChange:b=>n(p=>({...p,name:b.target.value}))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(dl,{className:"w-4 h-4 text-green-600"}),"Phone Number"]}),e.jsx("input",{type:"tel",className:"w-full border-2 border-gray-200 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:outline-none transition-colors",placeholder:"+880 1XXX-XXXXXX",value:s.phone,onChange:b=>n(p=>({...p,phone:b.target.value}))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(tp,{className:"w-4 h-4 text-purple-600"}),"Email Address"]}),e.jsx("input",{type:"email",className:"w-full border-2 border-gray-200 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:outline-none transition-colors",placeholder:"email@example.com",value:s.email,onChange:b=>n(p=>({...p,email:b.target.value}))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Wn,{className:"w-4 h-4 text-orange-600"}),"Interested Course"]}),e.jsx("input",{type:"text",className:"w-full border-2 border-gray-200 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:outline-none transition-colors",placeholder:"e.g., Graphic Design, Web Development",value:s.interestedCourse,onChange:b=>n(p=>({...p,interestedCourse:b.target.value}))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(xd,{className:"w-4 h-4 text-pink-600"}),"Lead Source"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-lg px-4 py-2.5 focus:border-blue-500 focus:outline-none transition-colors appearance-none bg-white pr-10",value:s.source,onChange:b=>n(p=>({...p,source:b.target.value})),children:[e.jsx("option",{children:"Meta Lead"}),e.jsx("option",{children:"LinkedIn Lead"}),e.jsx("option",{children:"Manually Generated Lead"}),e.jsx("option",{children:"Others"})]}),ge.createElement(A(s.source),{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg px-6 py-3 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Adding Lead..."]}):e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"w-5 h-5"}),"Add Lead"]})})]})]}),e.jsxs("form",{onSubmit:j,className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-pink-600 p-5",children:e.jsxs("div",{className:"flex items-center gap-3 text-white",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Zi,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Bulk Upload (CSV)"}),e.jsx("p",{className:"text-sm text-white/80",children:"Import multiple leads at once"})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gt,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Required CSV Format"}),e.jsx("p",{className:"text-xs text-blue-700 mb-2",children:"Your CSV file must have these exact headers:"}),e.jsx("code",{className:"block bg-white px-3 py-2 rounded border border-blue-300 text-xs text-gray-800 font-mono",children:"Name,Phone,Email,InterestedCourse,Source"}),e.jsx("p",{className:"text-xs text-blue-600 mt-2",children:" First row should be headers, data starts from second row"})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Zi,{className:"w-4 h-4 text-orange-600"}),"Upload CSV File"]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"file",accept:".csv,text/csv",className:"w-full border-2 border-dashed border-gray-300 rounded-lg px-4 py-8 text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-gradient-to-r file:from-orange-500 file:to-pink-600 file:text-white file:font-semibold hover:file:shadow-lg file:cursor-pointer cursor-pointer hover:border-orange-400 transition-colors",onChange:async b=>{x(null),d(null),i(null);const p=b.target.files&&b.target.files[0];if(!p)return;const v=(p.name||"").toLowerCase();if(!(p.type==="text/csv"||v.endsWith(".csv"))){x("Please select a valid CSV file (.csv)");return}try{const N=await p.text();a(N),i(`File loaded: ${p.name} (${(p.size/1024).toFixed(1)} KB)`)}catch{x("Unable to read file. Please try again.")}}})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-300"}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"OR"}),e.jsx("div",{className:"flex-1 h-px bg-gray-300"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(gt,{className:"w-4 h-4 text-pink-600"}),"Paste CSV Content"]}),e.jsx("textarea",{rows:"8",className:"w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-orange-500 focus:outline-none transition-colors font-mono text-sm resize-none",placeholder:`Name,Phone,Email,InterestedCourse,Source
John Doe,01712345678,john@example.com,Graphic Design,Meta Lead
Jane Smith,01798765432,jane@example.com,Web Development,LinkedIn Lead`,value:r,onChange:b=>a(b.target.value)}),r&&e.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:[" ",r.split(`
`).filter(b=>b.trim()).length-1," leads detected"]})]}),u&&e.jsx("div",{className:"p-3 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsx("p",{className:"text-red-800 text-sm",children:u})}),e.jsx("button",{type:"submit",disabled:m||!r,className:"w-full bg-gradient-to-r from-orange-500 to-pink-600 text-white rounded-lg px-6 py-3 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zi,{className:"w-5 h-5"}),"Upload CSV"]})})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-xl text-gray-600",children:"Only Digital Marketing can add or upload leads."})]})})}function HN(){const{user:t}=xe(),[s,n]=c.useState("Assigned"),[r,a]=c.useState("All"),[l,i]=c.useState("All"),[o,d]=c.useState("date-desc"),[u,x]=c.useState([]),[m,h]=c.useState([]),[g,w]=c.useState([]),[j,A]=c.useState([]),[b,p]=c.useState(null),[v,y]=c.useState(null),[N,C]=c.useState(!1),[E,k]=c.useState(null),[O,U]=c.useState(!1),[B,R]=c.useState(!1),[S,P]=c.useState(""),[D,$]=c.useState(null),[L,M]=c.useState(0),H=(t==null?void 0:t.role)==="DigitalMarketing",Z=async()=>{try{const z=s==="Unassigned"?"Assigned":s,G=[s==="All Leads"?_.listLeads():_.listLeads(z),_.listCourses()];H&&(G.push(_.listAdmissionUsers()),G.push(_.getTodayAssignments()));const V=await Promise.all(G),te=V[0],ae=V[1],K=H?V[2]:{users:[]},T=H?V[3]:null;let ee=(te==null?void 0:te.leads)||[];s==="Unassigned"&&(ee=ee.filter(Y=>!Y.assignedTo)),h(ee),x((ae==null?void 0:ae.courses)||[]),w((K==null?void 0:K.users)||[]),A([]),T&&($(T.grouped||{}),M(T.total||0)),y(null)}catch(z){y(z.message)}};c.useEffect(()=>{Z()},[s]);const W=async(z,G)=>{p(null),y(null);try{await _.assignLead(z,G),p("Lead assigned"),Z()}catch(V){y(V.message)}},F=async()=>{if(!(j.length===0||!S)){p(null),y(null),R(!0);try{const z=await _.bulkAssignLeads(j,S);p(z.message||`${j.length} lead(s) assigned`),P(""),Z()}catch(z){y(z.message)}finally{R(!1)}}},q=()=>{j.length===I.length?A([]):A(I.map(z=>z._id))},se=z=>{A(G=>G.includes(z)?G.filter(V=>V!==z):[...G,z])},I=c.useMemo(()=>{let z=m;return r!=="All"&&(z=z.filter(V=>V.interestedCourse===r)),l!=="All"&&(l==="Unassigned"?z=z.filter(V=>!V.assignedTo):z=z.filter(V=>{var te;return((te=V.assignedTo)==null?void 0:te._id)===l})),[...z].sort((V,te)=>{var ae,K,T,ee;if(o==="date-desc")return new Date(te.createdAt)-new Date(V.createdAt);if(o==="date-asc")return new Date(V.createdAt)-new Date(te.createdAt);if(o==="member-asc"){const Y=((ae=V.assignedTo)==null?void 0:ae.name)||"Unassigned",ne=((K=te.assignedTo)==null?void 0:K.name)||"Unassigned";return Y.localeCompare(ne)}else if(o==="member-desc"){const Y=((T=V.assignedTo)==null?void 0:T.name)||"Unassigned";return(((ee=te.assignedTo)==null?void 0:ee.name)||"Unassigned").localeCompare(Y)}return 0})},[m,r,l,o]);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Leads Center"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:o,onChange:z=>d(z.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"date-desc",children:" Newest First"}),e.jsx("option",{value:"date-asc",children:" Oldest First"}),e.jsx("option",{value:"member-asc",children:" Member (A-Z)"}),e.jsx("option",{value:"member-desc",children:" Member (Z-A)"})]}),e.jsxs("select",{value:l,onChange:z=>i(z.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"All",children:" All Members"}),e.jsx("option",{value:"Unassigned",children:" Unassigned"}),g.map(z=>e.jsxs("option",{value:z._id,children:[" ",z.name]},z._id))]}),e.jsxs("select",{value:r,onChange:z=>a(z.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"All",children:" All Courses"}),u.map(z=>e.jsx("option",{value:z.name,children:z.name},z._id))]}),e.jsxs("select",{value:s,onChange:z=>n(z.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{children:"All Leads"}),e.jsx("option",{children:"Unassigned"}),e.jsx("option",{children:"Assigned"}),e.jsx("option",{children:"Counseling"}),e.jsx("option",{children:"In Follow Up"}),e.jsx("option",{children:"Admitted"}),e.jsx("option",{children:"Not Admitted"})]})]})]}),b&&e.jsx("div",{className:"mb-2 p-3 bg-green-100 text-green-700 rounded-xl",children:b}),v&&e.jsx("div",{className:"mb-2 p-3 bg-red-100 text-red-600 rounded-xl",children:v}),H&&D&&Object.keys(D).length>0&&e.jsxs("div",{className:"mb-4 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 rounded-2xl p-5 shadow-lg border border-blue-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:" Today's Lead Assignments"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:new Date().toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-xl shadow-md",children:[e.jsx("div",{className:"text-xs font-medium opacity-90",children:"Total Assigned"}),e.jsx("div",{className:"text-3xl font-bold",children:L})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(D).map(([z,G])=>{const V=Object.values(G).reduce((te,ae)=>te+ae,0);return e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-200 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white text-sm font-bold",children:z.charAt(0).toUpperCase()}),z]}),e.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-lg text-sm font-bold",children:V})]}),e.jsx("div",{className:"space-y-2",children:Object.entries(G).map(([te,ae])=>e.jsxs("div",{className:"flex items-center justify-between text-sm bg-gray-50 rounded-lg px-3 py-2",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:te}),e.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-0.5 rounded-md font-bold text-xs",children:ae})]},te))})]},z)})})]}),H&&j.length>0&&e.jsxs("div",{className:"mb-3 p-3 bg-blue-50 rounded-xl flex items-center gap-3",children:[e.jsxs("span",{className:"font-medium text-blue-900",children:[j.length," lead(s) selected"]}),e.jsxs("select",{value:S,onChange:z=>P(z.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Admission Member"}),g.map(z=>e.jsx("option",{value:z._id,children:z.name},z._id))]}),e.jsx("button",{onClick:F,disabled:B||!S,className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:B?"Assigning...":"Bulk Assign"}),e.jsx("button",{onClick:()=>A([]),className:"px-3 py-2 text-royal hover:text-red-600",children:"Clear Selection"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[H&&e.jsx("th",{className:"p-3",children:e.jsx("input",{type:"checkbox",checked:I.length>0&&j.length===I.length,onChange:q,className:"w-4 h-4 cursor-pointer"})}),e.jsx("th",{className:"text-left p-3",children:"Lead ID"}),e.jsx("th",{className:"text-left p-3",children:"Added Date"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Phone / Email"}),e.jsx("th",{className:"text-left p-3",children:"Interested Course"}),e.jsx("th",{className:"text-left p-3",children:"Source"}),e.jsx("th",{className:"text-left p-3",children:"Lead Status"}),e.jsx("th",{className:"text-left p-3",children:"Assigned To"}),((t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin"||(t==null?void 0:t.role)==="Admission"||(t==null?void 0:t.role)==="DigitalMarketing")&&e.jsx("th",{className:"text-left p-3",children:"History"}),H&&e.jsx("th",{className:"text-left p-3",children:"Action"})]})}),e.jsxs("tbody",{children:[I.map(z=>{var G;return e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[H&&e.jsx("td",{className:"p-3",children:e.jsx("input",{type:"checkbox",checked:j.includes(z._id),onChange:()=>se(z._id),className:"w-4 h-4 cursor-pointer"})}),e.jsx("td",{className:"p-3",children:z.leadId}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"text-sm",children:new Date(z.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),e.jsx("div",{className:"text-xs text-royal/70",children:new Date(z.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("td",{className:"p-3",children:z.name}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{children:z.phone}),e.jsx("div",{className:"text-xs text-royal/70",children:z.email||"-"})]}),e.jsx("td",{className:"p-3",children:z.interestedCourse||"-"}),e.jsx("td",{className:"p-3",children:z.source}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z.status==="Admitted"?"bg-green-100 text-green-700":z.status==="Not Admitted"?"bg-red-100 text-red-700":z.status==="Counseling"?"bg-blue-100 text-blue-700":z.status==="In Follow Up"?"bg-yellow-100 text-yellow-700":z.status==="Assigned"&&z.assignedTo?"bg-purple-100 text-purple-700":z.status==="Assigned"&&!z.assignedTo?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:z.status==="Assigned"&&!z.assignedTo?"Unassigned":z.status||"New"})}),e.jsx("td",{className:"p-3",children:z.assignedTo?`${z.assignedTo.name} (${z.assignedTo.role})`:"-"}),((t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin"||(t==null?void 0:t.role)==="Admission"||(t==null?void 0:t.role)==="DigitalMarketing")&&e.jsx("td",{className:"p-3",children:e.jsx("button",{disabled:O,onClick:async()=>{try{y(null),U(!0);const V=await _.getLeadHistory(z._id);k(V.lead||V),C(!0)}catch(V){y(V.message)}finally{U(!1)}},className:"px-3 py-1 rounded-xl border hover:bg-[#f3f6ff]",children:O?"Loading":"History"})}),H&&e.jsx("td",{className:"p-3",children:e.jsx(VN,{current:((G=z.assignedTo)==null?void 0:G._id)||"",options:g,onChange:V=>W(z._id,V)})})]},z._id)}),I.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70 text-center",colSpan:H?11:9,children:m.length===0?"No leads":"No leads match the selected filters"})})]})]})}),N&&E&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>C(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-2xl shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Lead History  ",E.leadId]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-royal/70 min-w-[140px]",children:"Created At:"}),e.jsx("strong",{children:E.createdAt?new Date(E.createdAt).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"-"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-royal/70 min-w-[140px]",children:"Assigned At:"}),e.jsx("strong",{children:E.assignedAt?new Date(E.assignedAt).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):e.jsx("span",{className:"text-royal/50",children:"Not yet assigned"})})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-royal/70 min-w-[140px]",children:"Counseling At:"}),e.jsx("strong",{children:E.counselingAt?new Date(E.counselingAt).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):e.jsx("span",{className:"text-royal/50",children:"Not yet in counseling"})})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-royal/70 min-w-[140px]",children:"Admitted At:"}),e.jsx("strong",{children:E.admittedAt?new Date(E.admittedAt).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):e.jsx("span",{className:"text-royal/50",children:"Not yet admitted"})})]}),e.jsxs("div",{className:"border-t pt-3 mt-2",children:[e.jsxs("div",{className:"font-medium mb-2",children:["Follow-ups (",(E.followUps||[]).length,")"]}),e.jsx("div",{className:"pl-2",children:(E.followUps||[]).length===0?e.jsx("div",{className:"text-royal/70 italic",children:"No follow-ups yet"}):(E.followUps||[]).map((z,G)=>{var V;return e.jsxs("div",{className:"mb-3 p-2 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium text-royal",children:[new Date(z.at).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),((V=z.by)==null?void 0:V.name)&&e.jsxs("span",{className:"ml-2 text-blue-600",children:[" ",z.by.name]})]}),e.jsx("div",{className:"text-sm text-royal/70 mt-1",children:z.note||"No notes"})]},G)})})]})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 bg-royal text-white rounded-xl hover:bg-royal/90",children:"Close"})})]})]})]})}function VN({current:t,options:s,onChange:n}){const[r,a]=c.useState(t||"");return c.useEffect(()=>a(t||""),[t]),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{className:"border rounded-xl px-3 py-2",value:r,onChange:l=>a(l.target.value),children:[e.jsx("option",{value:"",children:"Select Admission Member"}),s.map(l=>e.jsx("option",{value:l._id,children:l.name},l._id))]}),e.jsx("button",{disabled:!r,onClick:()=>n(r),className:"px-3 py-1 rounded-lg border hover:bg-[#f3f6ff]",children:"Assign"})]})}function GN(){const{user:t}=xe();return(t==null?void 0:t.role)!=="DigitalMarketing"?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-xl text-gray-600",children:"Only Digital Marketing can access this page."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Digital Marketing Metrics"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track expenses, social media performance, and SEO activities"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsx(YN,{}),e.jsx(qN,{}),e.jsx(JN,{})]})]})}function YN(){const[t,s]=c.useState([]),[n,r]=c.useState({date:new Date().toISOString().slice(0,10),purpose:"Meta Ads",amount:0}),[a,l]=c.useState(null),[i,o]=c.useState(null),d=async()=>{try{const g=await _.listDMCosts();let w=[];Array.isArray(g)?w=g:Array.isArray(g==null?void 0:g.costs)?w=g.costs:Array.isArray(g==null?void 0:g.items)&&(w=g.items),s(w)}catch(g){o(g.message)}};c.useEffect(()=>{d()},[]);const u=async g=>{g.preventDefault(),l(null),o(null);try{await _.createDMCost(n),l("Cost added successfully!"),r({date:new Date().toISOString().slice(0,10),purpose:"Meta Ads",amount:0}),d()}catch(w){o(w.message)}},x=async g=>{if(confirm("Are you sure you want to delete this cost entry?"))try{await _.deleteDMCost(g),d()}catch(w){o(w.message)}},m=c.useMemo(()=>{const g=t.reduce((j,A)=>j+(Number(A.amount)||0),0),w={};return t.forEach(j=>{w[j.purpose]=(w[j.purpose]||0)+(Number(j.amount)||0)}),{total:g,byPurpose:w}},[t]),h={"Meta Ads":"bg-blue-100 text-blue-800","LinkedIn Ads":"bg-cyan-100 text-cyan-800","Software Purchase":"bg-purple-100 text-purple-800",Subscription:"bg-orange-100 text-orange-800",Others:"bg-gray-100 text-gray-800"};return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 p-5",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx($e,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Marketing Expenses"}),e.jsx("p",{className:"text-sm text-white/80",children:"Track your advertising costs"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/80",children:"Total Spent"}),e.jsx("p",{className:"text-2xl font-bold",children:Ce(m.total)})]})]})}),e.jsxs("div",{className:"p-5",children:[a&&e.jsxs("div",{className:"mb-3 p-3 bg-green-50 border-l-4 border-green-500 text-green-700 rounded-lg",children:[" ",a]}),i&&e.jsxs("div",{className:"mb-3 p-3 bg-red-50 border-l-4 border-red-500 text-red-700 rounded-lg",children:[" ",i]}),Object.keys(m.byPurpose).length>0&&e.jsx("div",{className:"mb-4 grid grid-cols-2 gap-2",children:Object.entries(m.byPurpose).map(([g,w])=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600",children:g}),e.jsx("div",{className:"text-sm font-bold text-gray-800",children:Ce(w)})]},g))}),e.jsxs("form",{onSubmit:u,className:"mb-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(as,{className:"w-4 h-4 text-gray-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Add New Expense"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Date"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-pink-500 focus:outline-none transition-colors",value:n.date,onChange:g=>r(w=>({...w,date:g.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Purpose"}),e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-pink-500 focus:outline-none transition-colors",value:n.purpose,onChange:g=>r(w=>({...w,purpose:g.target.value})),required:!0,children:[e.jsx("option",{children:"Meta Ads"}),e.jsx("option",{children:"LinkedIn Ads"}),e.jsx("option",{children:"Software Purchase"}),e.jsx("option",{children:"Subscription"}),e.jsx("option",{children:"Others"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Amount (BDT)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-pink-500 focus:outline-none transition-colors",value:n.amount,onChange:g=>r(w=>({...w,amount:g.target.value})),placeholder:"0.00",required:!0})]}),e.jsxs("button",{className:"w-full bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-lg px-4 py-2.5 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(as,{className:"w-4 h-4"}),"Add Expense"]})]})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx($e,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No expenses recorded yet"})]}):t.map(g=>e.jsx("div",{className:"group bg-gray-50 hover:bg-gray-100 rounded-lg p-3 border border-gray-200 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(fe,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600",children:new Date(g.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${h[g.purpose]||h.Others}`,children:g.purpose}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:Ce(g.amount)})]})]}),e.jsx("button",{onClick:()=>x(g._id),className:"opacity-0 group-hover:opacity-100 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete",children:e.jsx(jn,{className:"w-4 h-4"})})]})},g._id))})]})]})}function qN(){const[t,s]=c.useState([]),[n,r]=c.useState({date:new Date().toISOString().slice(0,10),facebookFollowers:0,instagramFollowers:0,facebookGroupMembers:0,youtubeSubscribers:0,linkedInFollowers:0,xFollowers:0,pinterestView:0,bloggerImpression:0,totalReach:0}),[a,l]=c.useState(null),[i,o]=c.useState(null),d=async()=>{try{const h=await _.listSocial(),g=(h==null?void 0:h.metrics)||(h==null?void 0:h.social)||{};if(g&&Object.keys(g).length){const w={facebookFollowers:g.facebookFollowers||0,instagramFollowers:g.instagramFollowers||0,facebookGroupMembers:g.facebookGroupMembers||0,youtubeSubscribers:g.youtubeSubscribers||0,linkedInFollowers:g.linkedInFollowers||0,xFollowers:g.xFollowers||0,pinterestView:g.pinterestView||0,bloggerImpression:g.bloggerImpression||0,totalReach:g.totalReach||0};r(j=>({...j,...w})),s([{_id:(h==null?void 0:h.updatedAt)||"latest",date:(h==null?void 0:h.updatedAt)||n.date,...w}])}else s([])}catch(h){o(h.message)}};c.useEffect(()=>{d()},[]);const u=async h=>{h.preventDefault(),l(null),o(null);try{await _.createSocial(n),l("Social metrics updated successfully!"),d()}catch(g){o(g.message)}},x=[{key:"facebookFollowers",label:"Facebook",icon:ud,color:"from-blue-500 to-blue-600"},{key:"instagramFollowers",label:"Instagram",icon:Uy,color:"from-pink-500 to-purple-600"},{key:"facebookGroupMembers",label:"FB Group",icon:Ae,color:"from-blue-400 to-blue-500"},{key:"youtubeSubscribers",label:"YouTube",icon:Xy,color:"from-red-500 to-red-600"},{key:"linkedInFollowers",label:"LinkedIn",icon:md,color:"from-cyan-500 to-cyan-600"},{key:"xFollowers",label:"X (Twitter)",icon:Jy,color:"from-gray-700 to-gray-800"},{key:"pinterestView",label:"Pinterest",icon:hi,color:"from-red-600 to-red-700"},{key:"bloggerImpression",label:"Blogger",icon:gt,color:"from-orange-500 to-orange-600"},{key:"totalReach",label:"Total Reach",icon:Vt,color:"from-green-500 to-green-600"}],m=c.useMemo(()=>n.facebookFollowers+n.instagramFollowers+n.facebookGroupMembers+n.youtubeSubscribers+n.linkedInFollowers+n.xFollowers,[n]);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 p-5",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Et,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Social Media Metrics"}),e.jsx("p",{className:"text-sm text-white/80",children:"Track your social presence"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/80",children:"Total Followers"}),e.jsx("p",{className:"text-2xl font-bold",children:m.toLocaleString()})]})]})}),e.jsxs("div",{className:"p-5",children:[a&&e.jsxs("div",{className:"mb-3 p-3 bg-green-50 border-l-4 border-green-500 text-green-700 rounded-lg",children:[" ",a]}),i&&e.jsxs("div",{className:"mb-3 p-3 bg-red-50 border-l-4 border-red-500 text-red-700 rounded-lg",children:[" ",i]}),t.length>0&&e.jsx("div",{className:"mb-4 grid grid-cols-2 gap-2",children:x.map(h=>{const g=h.icon,w=n[h.key];return e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-lg p-3 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`p-1.5 bg-gradient-to-r ${h.color} rounded-lg`,children:e.jsx(g,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:h.label})]}),e.jsx("div",{className:"text-lg font-bold text-gray-800",children:w.toLocaleString()})]},h.key)})}),e.jsxs("form",{onSubmit:u,className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Et,{className:"w-4 h-4 text-purple-600"}),e.jsx("h3",{className:"text-sm font-semibold text-purple-900",children:"Update Metrics"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Date"}),e.jsx("input",{type:"date",className:"w-full border-2 border-purple-200 rounded-lg px-3 py-2 focus:border-purple-500 focus:outline-none transition-colors bg-white",value:n.date,onChange:h=>r(g=>({...g,date:h.target.value})),required:!0})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:x.map(h=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 mb-1 flex items-center gap-1",children:[e.jsx(h.icon,{className:"w-3 h-3"}),h.label]}),e.jsx("input",{type:"number",min:"0",className:"w-full border-2 border-purple-200 rounded-lg px-3 py-2 focus:border-purple-500 focus:outline-none transition-colors bg-white text-sm",value:n[h.key],onChange:g=>r(w=>({...w,[h.key]:Number(g.target.value)}))})]},h.key))}),e.jsxs("button",{className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 text-white rounded-lg px-4 py-2.5 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(Et,{className:"w-4 h-4"}),"Update Metrics"]})]}),t.length>0&&e.jsxs("div",{className:"mt-3 text-xs text-gray-500 text-center",children:["Last updated: ",new Date(t[0].date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})]})]})}function JN(){const[t,s]=c.useState([]),[n,r]=c.useState(!1),[a,l]=c.useState({date:new Date().toISOString().slice(0,10),typeOfWork:"Blogpost",challenge:"",details:""}),[i,o]=c.useState(null),[d,u]=c.useState(null),x=async()=>{try{const w=await _.listSEO();let j=[];Array.isArray(w)?j=w:Array.isArray(w==null?void 0:w.seo)?j=w.seo:Array.isArray(w==null?void 0:w.items)&&(j=w.items),s(j)}catch(w){u(w.message)}};c.useEffect(()=>{x()},[]);const m=async w=>{w.preventDefault(),o(null),u(null);try{await _.createSEO(a),o("SEO report added successfully!"),l({date:new Date().toISOString().slice(0,10),typeOfWork:"Blogpost",challenge:"",details:""}),r(!1),x()}catch(j){u(j.message)}},h={Blogpost:"bg-green-100 text-green-800",Backlink:"bg-blue-100 text-blue-800","Social Bookmarking":"bg-purple-100 text-purple-800","Keyword Research":"bg-orange-100 text-orange-800",Others:"bg-gray-100 text-gray-800"},g=c.useMemo(()=>{const w={};return t.forEach(j=>{w[j.typeOfWork]=(w[j.typeOfWork]||0)+1}),{total:t.length,byType:w}},[t]);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-teal-600 p-5",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(pn,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"SEO Activities"}),e.jsx("p",{className:"text-sm text-white/80",children:"Track your SEO work"})]})]}),e.jsxs("button",{onClick:()=>r(!0),className:"bg-white text-green-600 rounded-lg px-4 py-2 font-semibold hover:bg-green-50 transition-colors flex items-center gap-2",children:[e.jsx(as,{className:"w-4 h-4"}),"Add Report"]})]})}),e.jsxs("div",{className:"p-5",children:[i&&e.jsxs("div",{className:"mb-3 p-3 bg-green-50 border-l-4 border-green-500 text-green-700 rounded-lg",children:[" ",i]}),d&&e.jsxs("div",{className:"mb-3 p-3 bg-red-50 border-l-4 border-red-500 text-red-700 rounded-lg",children:[" ",d]}),g.total>0&&e.jsxs("div",{className:"mb-4 bg-gradient-to-br from-green-50 to-teal-50 rounded-xl p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-green-900",children:"Summary"}),e.jsxs("span",{className:"bg-green-600 text-white px-3 py-1 rounded-lg text-sm font-bold",children:[g.total," Reports"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(g.byType).map(([w,j])=>e.jsxs("div",{className:"bg-white rounded-lg p-2 border border-green-200",children:[e.jsx("div",{className:"text-xs text-gray-600",children:w}),e.jsx("div",{className:"text-lg font-bold text-gray-800",children:j})]},w))})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(pn,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No SEO reports yet"}),e.jsx("button",{onClick:()=>r(!0),className:"mt-3 text-green-600 hover:text-green-700 font-medium text-sm",children:"Add your first report "})]}):t.map(w=>e.jsxs("div",{className:"bg-gray-50 hover:bg-gray-100 rounded-lg p-3 border border-gray-200 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600",children:new Date(w.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${h[w.typeOfWork]||h.Others}`,children:w.typeOfWork})]}),w.challenge&&e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Challenge:"}),e.jsx("p",{className:"text-sm text-gray-700 mt-0.5",children:w.challenge})]}),w.details&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Details:"}),e.jsx("p",{className:"text-sm text-gray-700 mt-0.5",children:w.details})]})]},w._id))})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("form",{onSubmit:m,className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-teal-600 rounded-lg",children:e.jsx(pn,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Add SEO Report"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-green-500 focus:outline-none transition-colors",value:a.date,onChange:w=>l(j=>({...j,date:w.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type of Work"}),e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-green-500 focus:outline-none transition-colors",value:a.typeOfWork,onChange:w=>l(j=>({...j,typeOfWork:w.target.value})),required:!0,children:[e.jsx("option",{children:"Blogpost"}),e.jsx("option",{children:"Backlink"}),e.jsx("option",{children:"Social Bookmarking"}),e.jsx("option",{children:"Keyword Research"}),e.jsx("option",{children:"Others"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Challenge"}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-green-500 focus:outline-none transition-colors",value:a.challenge,onChange:w=>l(j=>({...j,challenge:w.target.value})),placeholder:"What challenges did you face?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Details"}),e.jsx("textarea",{rows:"4",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-green-500 focus:outline-none transition-colors resize-none",value:a.details,onChange:w=>l(j=>({...j,details:w.target.value})),placeholder:"Describe the work you did..."})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-5 py-2.5 rounded-lg border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-5 py-2.5 rounded-lg bg-gradient-to-r from-green-500 to-teal-600 text-white font-semibold hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx(as,{className:"w-4 h-4"}),"Save Report"]})]})]})})]})}function Es(t){if(!t)return"-";try{return new Date(t).toLocaleString()}catch{return t}}const wm=[{key:"Assigned",path:"/admission/assigned",label:"Assigned Lead"},{key:"Counseling",path:"/admission/counseling",label:"Counseling"},{key:"In Follow Up",path:"/admission/follow-up",label:"In Follow-Up"},{key:"Admitted",path:"/admission/admitted",label:"Admitted"},{key:"Not Admitted",path:"/admission/not-admitted",label:"Not Admitted"}];function Mr(){const{user:t}=xe(),s=rn(),n=c.useMemo(()=>{const r=wm.find(a=>a.path===s.pathname);return r?r.key:"Assigned"},[s.pathname]);return(t==null?void 0:t.role)!=="Admission"&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin"?e.jsx("div",{className:"text-royal",children:"Access denied"}):e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-navy mb-3",children:"Admission Pipeline"}),e.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[wm.map(r=>e.jsx(Qs,{to:r.path,className:`px-3 py-1.5 rounded-xl border ${n===r.key?"bg-gold text-navy border-gold":"hover:bg-[#f3f6ff]"}`,children:r.label},r.key)),n==="Admitted"&&(t==null?void 0:t.role)==="Admission"&&e.jsx(Qs,{to:"/admission/fees",className:"ml-auto px-3 py-1.5 rounded-xl bg-gold text-navy font-semibold",children:"Admission Fees"})]}),e.jsx(QN,{status:n,canAct:(t==null?void 0:t.role)==="Admission"})]})}function QN({status:t,canAct:s}){const[n,r]=c.useState([]),[a,l]=c.useState(""),[i,o]=c.useState(null),[d,u]=c.useState(null),[x,m]=c.useState(!1),[h,g]=c.useState(""),[w,j]=c.useState(null),[A,b]=c.useState(""),[p,v]=c.useState(!1),[y,N]=c.useState(""),[C,E]=c.useState(null),[k,O]=c.useState(!1),[U,B]=c.useState(null),[R,S]=c.useState(!1),[P,D]=c.useState(!1),[$,L]=c.useState(null),[M,H]=c.useState(""),[Z,W]=c.useState(""),[F,q]=c.useState([]),[se,I]=c.useState([]),[z,G]=c.useState(!1),V=async()=>{try{const{leads:Y}=await _.listAdmissionLeads(t);r(Y||[]),u(null)}catch(Y){u(Y.message)}},te=async()=>{G(!0);try{const[Y,ne]=await Promise.all([_.listCourses(),_.listBatches("Active")]);q((Y==null?void 0:Y.courses)||[]),I((ne==null?void 0:ne.batches)||[])}catch(Y){console.error("Failed to load courses/batches:",Y),u("Failed to load courses/batches: "+Y.message)}finally{G(!1)}};c.useEffect(()=>{V()},[t]);const ae=async(Y,ne,de="",he="",ce="",ue="")=>{o(null),u(null);try{await _.updateLeadStatus(Y,ne,de,he,ce,ue),o(`Status updated to ${ne}`),m(!1),g(""),j(null),b(""),v(!1),N(""),E(null),D(!1),L(null),H(""),W(""),O(!1),B(null),S(!1),V()}catch(pe){u(pe.message)}},K=Y=>{L(Y),H(""),W(""),D(!0),te()},T=c.useMemo(()=>{if(!a.trim())return n;const Y=a.toLowerCase();return n.filter(ne=>{var de,he,ce,ue,pe,He,It;return((de=ne.leadId)==null?void 0:de.toLowerCase().includes(Y))||((he=ne.name)==null?void 0:he.toLowerCase().includes(Y))||((ce=ne.phone)==null?void 0:ce.includes(Y))||((ue=ne.email)==null?void 0:ue.toLowerCase().includes(Y))||((pe=ne.interestedCourse)==null?void 0:pe.toLowerCase().includes(Y))||((It=(He=ne.assignedTo)==null?void 0:He.name)==null?void 0:It.toLowerCase().includes(Y))})},[n,a]),ee=Y=>s?t==="Assigned"?e.jsx(is,{onClick:()=>ae(Y._id,"Counseling"),children:"Start Counseling"}):t==="Counseling"?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(is,{onClick:()=>K(Y._id),children:"Admitted"}),e.jsx(is,{onClick:()=>{j(Y._id),g(""),b(""),m(!0)},children:"Follow-Up"}),e.jsx(is,{variant:"danger",onClick:()=>{E(Y._id),N(""),v(!0)},children:"Not Admitted"}),e.jsx(is,{onClick:async()=>{try{u(null),S(!0);const ne=await _.getLeadHistory(Y._id);B(ne.lead||ne),O(!0)}catch(ne){u(ne.message)}finally{S(!1)}},children:R?"Loading":"History"})]}):t==="In Follow Up"?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(is,{onClick:()=>K(Y._id),children:"Admitted"}),e.jsx(is,{onClick:()=>{j(Y._id),g(""),b(""),m(!0)},children:"Follow-Up Again"}),e.jsx(is,{variant:"danger",onClick:()=>{E(Y._id),N(""),v(!0)},children:"Not Admitted"}),e.jsx(is,{onClick:async()=>{try{u(null),S(!0);const ne=await _.getLeadHistory(Y._id);B(ne.lead||ne),O(!0)}catch(ne){u(ne.message)}finally{S(!1)}},children:R?"Loading":"History"})]}):e.jsx("span",{className:"text-royal/60",children:""}):null;return e.jsxs("div",{children:[i&&e.jsx("div",{className:"mb-2 text-green-700",children:i}),d&&e.jsx("div",{className:"mb-2 text-red-600",children:d}),e.jsxs("div",{className:"mb-4 bg-white rounded-xl shadow-soft p-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:" Search by Lead ID, Name, Phone, Email, Course, or Assigned Member...",className:"w-full border border-blue-300 rounded-lg px-4 py-3 pl-10 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 bg-blue-50",value:a,onChange:Y=>l(Y.target.value)}),e.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),a&&e.jsx("button",{type:"button",onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 bg-white rounded-full p-1",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&e.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:[" Showing ",T.length," of ",n.length," lead(s)"]})]}),P&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>D(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-6 z-10 w-full max-w-md shadow-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-navy mb-4",children:"Admit Student"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Course ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:M,onChange:Y=>H(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-gold",disabled:z,required:!0,children:[e.jsx("option",{value:"",children:z?"Loading...":"Select a course"}),F.map(Y=>e.jsxs("option",{value:Y._id,children:[Y.name," (",Y.courseId,")"]},Y._id))]}),F.length===0&&!z&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"No courses available"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Batch ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:Z,onChange:Y=>W(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-gold",disabled:z,required:!0,children:[e.jsx("option",{value:"",children:z?"Loading...":"Select a batch"}),se.map(Y=>{var ne;return e.jsxs("option",{value:Y._id,children:[Y.batchName," - ",Y.category," (",((ne=Y.admittedStudents)==null?void 0:ne.length)||0,"/",Y.targetedStudent,")"]},Y._id)})]}),se.length===0&&!z&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"No active batches available. Contact admin to create a batch."})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{D(!1),L(null),H(""),W("")},className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>ae($,"Admitted","",M,Z),className:"px-4 py-2 rounded-xl bg-gold text-navy font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!M||!Z||z,children:"Confirm Admission"})]})]})]}),x&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>m(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-lg shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Add Follow-Up Note"}),e.jsx("textarea",{rows:6,className:"w-full border rounded-xl px-3 py-2 mb-3",value:h,onChange:Y=>g(Y.target.value),placeholder:"Enter follow-up note (optional)"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Next Follow-Up Date"}),e.jsx("input",{type:"date",value:A,onChange:Y=>b(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-gold",placeholder:"Select next follow-up date"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),g(""),j(null),b("")},className:"px-3 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>ae(w,"In Follow Up",h,"","",A),className:"px-3 py-2 rounded-xl bg-gold text-navy",children:"Save Follow-Up"})]})]})]}),k&&U&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>O(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-2xl shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Lead History  ",U.leadId]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{children:["Assigned At: ",e.jsx("strong",{children:Es(U.assignedAt||U.updatedAt)})]}),e.jsxs("div",{children:["Counseling At: ",e.jsx("strong",{children:Es(U.counselingAt||U.updatedAt)})]}),e.jsxs("div",{children:["Admitted At: ",e.jsx("strong",{children:Es(U.admittedAt||U.updatedAt)})]}),e.jsxs("div",{children:["Follow-ups (",(U.followUps||[]).length,"):"]}),e.jsx("div",{className:"pl-2",children:(U.followUps||[]).length===0?e.jsx("div",{className:"text-royal/70",children:"No follow-ups"}):(U.followUps||[]).map((Y,ne)=>{var de;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"text-sm font-medium",children:[Es(Y.at)," ",(de=Y.by)!=null&&de.name?`  ${Y.by.name}`:""]}),e.jsx("div",{className:"text-royal/70",children:Y.note||"-"})]},ne)})})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{onClick:()=>O(!1),className:"px-3 py-2 rounded-xl border",children:"Close"})})]})]}),p&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>v(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-lg shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Reason for Not Admitted"}),e.jsx("textarea",{rows:6,className:"w-full border rounded-xl px-3 py-2 mb-3",value:y,onChange:Y=>N(Y.target.value),placeholder:"Enter reason (optional)"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{v(!1),N(""),E(null)},className:"px-3 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>ae(C,"Not Admitted",y),className:"px-3 py-2 rounded-xl bg-red-600 text-white",children:"Save"})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Lead ID"}),e.jsx("th",{className:"p-3 text-left",children:"Name"}),e.jsx("th",{className:"p-3 text-left",children:"Phone / Email"}),e.jsx("th",{className:"p-3 text-left",children:"Course"}),e.jsx("th",{className:"p-3 text-left",children:"Source"}),e.jsx("th",{className:"p-3 text-left",children:"Assigned To"}),t==="Assigned"&&e.jsx("th",{className:"p-3 text-left",children:"Assigned At"}),t==="Counseling"&&e.jsx("th",{className:"p-3 text-left",children:"Counseling At"}),t==="In Follow Up"&&e.jsx("th",{className:"p-3 text-left",children:"Follow-Ups"}),t==="Admitted"&&e.jsx("th",{className:"p-3 text-left",children:"Admitted At"}),e.jsx("th",{className:"p-3 text-left",children:"Action"})]})}),e.jsxs("tbody",{children:[T.map(Y=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{children:Y.leadId}),(Y.followUps||[]).length>0&&e.jsxs("div",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full",children:[(Y.followUps||[]).length," FU"]})]})}),e.jsx("td",{className:"p-3",children:Y.name}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{children:Y.phone}),e.jsx("div",{className:"text-xs text-royal/70",children:Y.email||"-"})]}),e.jsx("td",{className:"p-3",children:Y.interestedCourse||"-"}),e.jsx("td",{className:"p-3",children:Y.source}),e.jsx("td",{className:"p-3",children:Y.assignedTo?Y.assignedTo.name:"-"}),t==="Assigned"&&e.jsx("td",{className:"p-3",children:Es(Y.assignedAt||Y.updatedAt)}),t==="Counseling"&&e.jsx("td",{className:"p-3",children:Es(Y.counselingAt||Y.updatedAt)}),t==="In Follow Up"&&e.jsx("td",{className:"p-3",children:(Y.followUps||[]).length===0?e.jsx("div",{className:"text-royal/70",children:"No follow-ups"}):e.jsx("div",{className:"flex flex-col gap-1",children:(Y.followUps||[]).map((ne,de)=>{var he;return e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium",children:Es(ne.at)}),e.jsxs("div",{className:"text-royal/70",children:[ne.note||"-"," ",(he=ne.by)!=null&&he.name?`  ${ne.by.name}`:""]})]},de)})})}),t==="Admitted"&&e.jsx("td",{className:"p-3",children:Es(Y.admittedAt||Y.updatedAt)}),e.jsx("td",{className:"p-3",children:ee(Y)})]},Y._id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:"7",children:"No leads"})}),n.length>0&&T.length===0&&e.jsx("tr",{children:e.jsxs("td",{className:"p-4 text-royal/70 text-center",colSpan:"7",children:['No leads found matching "',a,'"']})})]})]})})]})}function is({children:t,onClick:s,variant:n="default"}){const r=n==="danger"?"px-3 py-1 rounded-lg border text-red-700 hover:bg-red-50":"px-3 py-1 rounded-lg border hover:bg-[#f3f6ff]";return e.jsx("button",{onClick:s,className:r,children:t})}function XN(){var E,k,O,U;const{user:t}=xe();if((t==null?void 0:t.role)!=="Admission"&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin"&&(t==null?void 0:t.role)!=="Accountant"&&(t==null?void 0:t.role)!=="Coordinator")return e.jsx("div",{className:"text-royal",children:"Access denied"});const[s,n]=c.useState([]),[r,a]=c.useState([]),[l,i]=c.useState(""),[o,d]=c.useState(!1),[u,x]=c.useState(!1),[m,h]=c.useState(null),[g,w]=c.useState(null),[j,A]=c.useState(null),[b,p]=c.useState({leadId:"",courseName:"",totalAmount:"",nowPaying:"",method:"Bkash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""}),v=(t==null?void 0:t.role)==="Admission",y=async()=>{try{const[{fees:B},R]=await Promise.all([_.listAdmissionFees(),_.listAdmissionLeads()]);n(B||[]);const S=((R==null?void 0:R.leads)||[]).filter(P=>P.status!=="Admitted"&&P.status!=="Not Admitted");a(S)}catch(B){A(B.message)}};c.useEffect(()=>{y()},[]);const N=async B=>{B.preventDefault(),w(null),A(null);try{const R=Number(b.totalAmount)||0,S=Number(b.nowPaying)||0,P={...b,amount:S,totalAmount:R,dueAmount:R-S};await _.createAdmissionFee(P),w("Fee submitted for review"),d(!1),p({leadId:"",courseName:"",totalAmount:"",nowPaying:"",method:"Bkash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""}),i(""),y()}catch(R){A(R.message)}},C=ge.useMemo(()=>{if(!l.trim())return r;const B=l.toLowerCase();return r.filter(R=>{var S,P,D,$;return((S=R.leadId)==null?void 0:S.toLowerCase().includes(B))||((P=R.name)==null?void 0:P.toLowerCase().includes(B))||((D=R.phone)==null?void 0:D.includes(B))||(($=R.email)==null?void 0:$.toLowerCase().includes(B))})},[r,l]);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Admission Fees Collection"}),v&&e.jsx("button",{onClick:()=>d(!0),className:"bg-gold text-navy rounded-xl px-4 py-2 font-semibold",children:"Collect Admission Fees"})]}),g&&e.jsx("div",{className:"mb-2 text-green-700",children:g}),j&&e.jsx("div",{className:"mb-2 text-red-600",children:j}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Lead"}),e.jsx("th",{className:"p-3 text-left",children:"Course"}),e.jsx("th",{className:"p-3 text-left",children:"Total Amount"}),e.jsx("th",{className:"p-3 text-left",children:"Paid"}),e.jsx("th",{className:"p-3 text-left",children:"Due"}),e.jsx("th",{className:"p-3 text-left",children:"Method"}),e.jsx("th",{className:"p-3 text-left",children:"Payment Date"}),e.jsx("th",{className:"p-3 text-left",children:"Status"}),e.jsx("th",{className:"p-3 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[s.map(B=>{var R,S,P,D;return e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsxs("td",{className:"p-3",children:[(R=B.lead)==null?void 0:R.leadId,"  ",(S=B.lead)==null?void 0:S.name,e.jsxs("div",{className:"text-xs text-royal/70",children:[(P=B.lead)==null?void 0:P.phone," ",(D=B.lead)!=null&&D.email?` ${B.lead.email}`:""]})]}),e.jsx("td",{className:"p-3",children:B.courseName}),e.jsxs("td",{className:"p-3 font-semibold",children:[" ",B.totalAmount||0]}),e.jsxs("td",{className:"p-3 text-green-600 font-semibold",children:[" ",B.amount||0]}),e.jsxs("td",{className:"p-3 text-orange-600 font-semibold",children:[" ",B.dueAmount||0]}),e.jsx("td",{className:"p-3",children:B.method}),e.jsx("td",{className:"p-3",children:new Date(B.paymentDate).toLocaleDateString()}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B.status==="Approved"?"bg-green-100 text-green-700":B.status==="Rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:B.status})}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("button",{onClick:()=>{h(B),x(!0)},className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-500 text-white rounded-lg text-xs font-medium hover:bg-blue-600 transition-colors",children:[e.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Details"]})})]},B._id)}),s.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:"9",children:"No fees yet"})})]})]})}),o&&v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:e.jsxs("form",{onSubmit:N,className:"bg-white rounded-2xl shadow-2xl p-5 w-full max-w-lg transform transition-all max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[#053867]",children:"Collect Admission Fees"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Fill in the payment details"})]}),e.jsx("button",{type:"button",onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsxs("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Select Student (Your Assigned Leads - Not Admitted) *"]}),e.jsxs("div",{className:"relative mb-2",children:[e.jsx("input",{type:"text",placeholder:" Search by Lead ID, Name, Phone, or Email...",className:"w-full border border-blue-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 bg-blue-50",value:l,onChange:B=>i(B.target.value)}),l&&e.jsx("button",{type:"button",onClick:()=>i(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white max-h-48",required:!0,size:"5",value:b.leadId,onChange:B=>p(R=>({...R,leadId:B.target.value})),children:[e.jsx("option",{value:"",children:"Choose student..."}),C.length===0&&l&&e.jsxs("option",{value:"",disabled:!0,children:['No leads found matching "',l,'"']}),C.length===0&&!l&&e.jsx("option",{value:"",disabled:!0,children:"No eligible leads assigned to you"}),C.map(B=>e.jsxs("option",{value:B._id,children:[B.leadId,"  ",B.name," (",B.phone,")  Status: ",B.status]},B._id))]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" Showing ",C.length," of ",r.length," eligible lead(s)"]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Course Name *"}),e.jsx("input",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0,placeholder:"e.g., Graphics Design Professional",value:b.courseName,onChange:B=>p(R=>({...R,courseName:B.target.value}))})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Total Amount *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:""}),e.jsx("input",{type:"number",className:"w-full border border-green-300 rounded-lg pl-7 pr-3 py-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-green-400 bg-green-50",required:!0,placeholder:"0",min:"0",value:b.totalAmount||"",onChange:B=>p(R=>({...R,totalAmount:B.target.value}))})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Now Paying *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:""}),e.jsx("input",{type:"number",className:"w-full border border-orange-300 rounded-lg pl-7 pr-3 py-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-orange-400 bg-orange-50",required:!0,placeholder:"0",min:"0",value:b.nowPaying||"",onChange:B=>p(R=>({...R,nowPaying:B.target.value}))})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Payment Method *"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white",value:b.method,onChange:B=>p(f={...f,method:B.target.value}),children:[e.jsx("option",{children:"Bkash"}),e.jsx("option",{children:"Nagad"}),e.jsx("option",{children:"Rocket"}),e.jsx("option",{children:"Bank Transfer"}),e.jsx("option",{children:"Cash on Hand"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Payment Date *"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0,value:b.paymentDate,onChange:B=>p(f={...f,paymentDate:B.target.value})})]})})]}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Next Payment Date (Optional)"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",value:b.nextPaymentDate||"",onChange:B=>p(R=>({...R,nextPaymentDate:B.target.value}))})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-[#053867] mb-1.5 block",children:"Additional Note"}),e.jsx("textarea",{rows:"2",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 resize-none",placeholder:"Add any additional information...",value:b.note||"",onChange:B=>p(R=>({...R,note:B.target.value}))})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 mt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 text-sm font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-gradient-to-r from-[#F7BA23] to-[#f5a623] text-[#053867] text-sm font-bold hover:shadow-lg transition-all flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Submit"]})]})]})}),u&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-4 mb-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[#053867]",children:"Fee Collection Details"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Complete information about this payment"})]}),e.jsx("button",{type:"button",onClick:()=>{x(!1),h(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Student Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Lead ID:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:(E=m.lead)==null?void 0:E.leadId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:(k=m.lead)==null?void 0:k.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:(O=m.lead)==null?void 0:O.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:((U=m.lead)==null?void 0:U.email)||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Payment Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Course:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:m.courseName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:m.method})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("p",{className:"font-bold text-lg text-[#053867]",children:[" ",m.totalAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Amount Paid:"}),e.jsxs("p",{className:"font-bold text-lg text-green-600",children:[" ",m.amount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Due Amount:"}),e.jsxs("p",{className:"font-bold text-lg text-orange-600",children:[" ",m.dueAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("p",{children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${m.status==="Approved"?"bg-green-100 text-green-700":m.status==="Rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:m.status})})]})]})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Important Dates"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Date:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:new Date(m.paymentDate).toLocaleDateString("en-GB")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Next Payment Date:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:m.nextPaymentDate?new Date(m.nextPaymentDate).toLocaleDateString("en-GB"):"Not set"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Submitted At:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:new Date(m.createdAt).toLocaleString("en-GB")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Last Updated:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:new Date(m.updatedAt).toLocaleString("en-GB")})]})]})]}),m.note&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-2 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Additional Notes"]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:m.note})]})]}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{x(!1),h(null)},className:"px-6 py-2 rounded-lg bg-gray-100 text-gray-700 text-sm font-medium hover:bg-gray-200 transition-colors",children:"Close"})})]})})]})}function KN(){var A,b,p,v,y;const{user:t}=xe();if((t==null?void 0:t.role)!=="Accountant")return e.jsx("div",{className:"text-royal",children:"Only Accountant can approve fees."});const[s,n]=c.useState("Pending"),[r,a]=c.useState([]),[l,i]=c.useState(!1),[o,d]=c.useState(null),[u,x]=c.useState(null),[m,h]=c.useState(null),g=async()=>{try{const{fees:N}=await _.listFeesForApproval(s);a(N||[]),h(null)}catch(N){h(N.message)}};c.useEffect(()=>{g()},[s]);const w=async N=>{x(null),h(null);try{await _.approveFee(N),x("Approved"),g()}catch(C){h(C.message)}},j=async N=>{x(null),h(null);try{await _.rejectFee(N),x("Rejected"),g()}catch(C){h(C.message)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Fees Approval"}),e.jsxs("select",{value:s,onChange:N=>n(N.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{children:"Pending"}),e.jsx("option",{children:"Approved"}),e.jsx("option",{children:"Rejected"})]})]}),u&&e.jsx("div",{className:"mb-2 text-green-700",children:u}),m&&e.jsx("div",{className:"mb-2 text-red-600",children:m}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Lead"}),e.jsx("th",{className:"p-3 text-left",children:"Course"}),e.jsx("th",{className:"p-3 text-left",children:"Total Amount"}),e.jsx("th",{className:"p-3 text-left",children:"Paid"}),e.jsx("th",{className:"p-3 text-left",children:"Due"}),e.jsx("th",{className:"p-3 text-left",children:"Method"}),e.jsx("th",{className:"p-3 text-left",children:"Payment Date"}),e.jsx("th",{className:"p-3 text-left",children:"Submitted By"}),e.jsx("th",{className:"p-3 text-left",children:"Status"}),e.jsx("th",{className:"p-3 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[r.map(N=>{var C,E,k,O,U;return e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsxs("td",{className:"p-3",children:[(C=N.lead)==null?void 0:C.leadId,"  ",(E=N.lead)==null?void 0:E.name,e.jsxs("div",{className:"text-xs text-royal/70",children:[(k=N.lead)==null?void 0:k.phone," ",(O=N.lead)!=null&&O.email?` ${N.lead.email}`:""]})]}),e.jsx("td",{className:"p-3",children:N.courseName}),e.jsxs("td",{className:"p-3 font-semibold",children:[" ",N.totalAmount||0]}),e.jsxs("td",{className:"p-3 text-green-600 font-semibold",children:[" ",N.amount||0]}),e.jsxs("td",{className:"p-3 text-orange-600 font-semibold",children:[" ",N.dueAmount||0]}),e.jsx("td",{className:"p-3",children:N.method}),e.jsx("td",{className:"p-3",children:new Date(N.paymentDate).toLocaleDateString()}),e.jsx("td",{className:"p-3",children:((U=N.submittedBy)==null?void 0:U.name)||"-"}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N.status==="Approved"?"bg-green-100 text-green-700":N.status==="Rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:N.status})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("button",{onClick:()=>{d(N),i(!0)},className:"inline-flex items-center gap-1 px-2.5 py-1.5 bg-blue-500 text-white rounded-lg text-xs font-medium hover:bg-blue-600 transition-colors",children:[e.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Details"]}),s==="Pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>w(N._id),className:"px-2.5 py-1.5 rounded-lg text-xs font-medium bg-green-500 text-white hover:bg-green-600 transition-colors",children:"Approve"}),e.jsx("button",{onClick:()=>j(N._id),className:"px-2.5 py-1.5 rounded-lg text-xs font-medium bg-red-500 text-white hover:bg-red-600 transition-colors",children:"Reject"})]})]})})]},N._id)}),r.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:"10",children:"No items"})})]})]})}),l&&o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-4 mb-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[#053867]",children:"Fee Collection Details"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Complete information about this payment"})]}),e.jsx("button",{type:"button",onClick:()=>{i(!1),d(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Student Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Lead ID:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:(A=o.lead)==null?void 0:A.leadId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:(b=o.lead)==null?void 0:b.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:(p=o.lead)==null?void 0:p.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:((v=o.lead)==null?void 0:v.email)||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Payment Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Course:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:o.courseName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:o.method})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("p",{className:"font-bold text-lg text-[#053867]",children:[" ",o.totalAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Amount Paid:"}),e.jsxs("p",{className:"font-bold text-lg text-green-600",children:[" ",o.amount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Due Amount:"}),e.jsxs("p",{className:"font-bold text-lg text-orange-600",children:[" ",o.dueAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("p",{children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${o.status==="Approved"?"bg-green-100 text-green-700":o.status==="Rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:o.status})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Submitted By:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:((y=o.submittedBy)==null?void 0:y.name)||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Important Dates"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Date:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:new Date(o.paymentDate).toLocaleDateString("en-GB")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Next Payment Date:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:o.nextPaymentDate?new Date(o.nextPaymentDate).toLocaleDateString("en-GB"):"Not set"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Submitted At:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:new Date(o.createdAt).toLocaleString("en-GB")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Last Updated:"}),e.jsx("p",{className:"font-semibold text-[#053867]",children:new Date(o.updatedAt).toLocaleString("en-GB")})]})]})]}),o.note&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#053867] mb-2 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Additional Notes"]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:o.note})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t border-gray-200",children:[s==="Pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{w(o._id),i(!1),d(null)},className:"px-5 py-2 rounded-lg bg-green-500 text-white text-sm font-medium hover:bg-green-600 transition-colors",children:"Approve"}),e.jsx("button",{onClick:()=>{j(o._id),i(!1),d(null)},className:"px-5 py-2 rounded-lg bg-red-500 text-white text-sm font-medium hover:bg-red-600 transition-colors",children:"Reject"})]}),e.jsx("button",{onClick:()=>{i(!1),d(null)},className:"px-6 py-2 rounded-lg bg-gray-100 text-gray-700 text-sm font-medium hover:bg-gray-200 transition-colors",children:"Close"})]})]})})]})}function ZN(){var B,R,S,P,D,$,L;const{user:t}=xe(),[s,n]=c.useState([]),[r,a]=c.useState("Pending"),[l,i]=c.useState(!1),[o,d]=c.useState(null),[u,x]=c.useState(null),[m,h]=c.useState(!1),[g,w]=c.useState(null),[j,A]=c.useState(""),[b,p]=c.useState(!1),y=(t==null?void 0:t.role)==="Accountant",N=async()=>{i(!0),d(null);try{const M=await _.getDueCollections(r);n(M.dueCollections||[])}catch(M){d(M.message)}finally{i(!1)}};c.useEffect(()=>{N()},[r]);const C=async M=>{p(!0),d(null),x(null);try{await _.approveDueCollection(M,j),x("Due collection approved successfully!"),h(!1),A(""),N()}catch(H){d(H.message)}finally{p(!1)}},E=async M=>{if(!j.trim()){d("Please provide a reason for rejection");return}p(!0),d(null),x(null);try{await _.rejectDueCollection(M,j),x("Due collection rejected"),h(!1),A(""),N()}catch(H){d(H.message)}finally{p(!1)}},k=M=>{w(M),A(M.reviewNote||""),h(!0),d(null)},O=M=>M?new Date(M).toLocaleDateString("en-GB"):"",U=M=>M==="Approved"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-green-100 text-green-700 text-xs font-semibold",children:[e.jsx(et,{className:"w-3 h-3"})," Approved"]}):M==="Rejected"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-red-100 text-red-700 text-xs font-semibold",children:[e.jsx(xs,{className:"w-3 h-3"})," Rejected"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-yellow-100 text-yellow-700 text-xs font-semibold",children:[e.jsx(Rt,{className:"w-3 h-3"})," Pending"]});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy",children:"Due Collection Approval"}),e.jsx("p",{className:"text-royal/60 mt-1",children:"Review and approve due fee collections from coordinators"})]})}),u&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-green-700 font-medium",children:u})}),o&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-700 font-medium",children:o})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft p-2 inline-flex gap-2",children:["Pending","Approved","Rejected","All"].map(M=>e.jsx("button",{onClick:()=>a(M==="All"?"":M),className:`px-4 py-2 rounded-xl font-medium transition-all ${r===(M==="All"?"":M)?"bg-gradient-to-r from-gold to-yellow-500 text-navy shadow-md":"text-royal/60 hover:text-royal hover:bg-gray-50"}`,children:M},M))}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-hidden",children:l?e.jsx("div",{className:"p-8 text-center text-royal/60",children:"Loading..."}):s.length===0?e.jsx("div",{className:"p-8 text-center text-royal/60",children:"No due collections found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Lead ID"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Student Name"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Amount"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Payment Date"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Coordinator"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Submitted"}),e.jsx("th",{className:"p-3 text-left text-sm font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:s.map((M,H)=>{var Z,W,F;return e.jsxs("tr",{className:`border-t border-gray-100 hover:bg-gray-50 transition-colors ${H%2===0?"bg-white":"bg-gray-50/30"}`,children:[e.jsx("td",{className:"p-3 text-sm font-medium text-royal",children:((Z=M.lead)==null?void 0:Z.leadId)||""}),e.jsx("td",{className:"p-3 text-sm text-royal",children:((W=M.lead)==null?void 0:W.name)||""}),e.jsx("td",{className:"p-3 text-sm font-bold text-green-600",children:Ce(M.amount||0)}),e.jsx("td",{className:"p-3 text-sm text-royal",children:O(M.paymentDate)}),e.jsx("td",{className:"p-3 text-sm text-royal",children:((F=M.coordinator)==null?void 0:F.name)||""}),e.jsx("td",{className:"p-3 text-sm",children:U(M.status)}),e.jsx("td",{className:"p-3 text-sm text-royal/60",children:O(M.submittedAt)}),e.jsx("td",{className:"p-3",children:e.jsxs("button",{onClick:()=>k(M),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-royal/10 text-royal hover:bg-royal/20 transition-colors text-sm font-medium",children:[e.jsx(hi,{className:"w-4 h-4"}),"View"]})})]},M._id)})})]})})}),m&&g&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>h(!1)}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl z-10 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-navy to-royal p-6 text-white",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Due Collection Details"}),e.jsx("p",{className:"text-white/80 mt-1",children:"Review and take action on this due collection"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-navy flex items-center gap-2",children:[e.jsx(ir,{className:"w-5 h-5"}),"Student Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Lead ID:"}),e.jsx("p",{className:"font-semibold text-royal",children:((B=g.lead)==null?void 0:B.leadId)||""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Name:"}),e.jsx("p",{className:"font-semibold text-royal",children:((R=g.lead)==null?void 0:R.name)||""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Phone:"}),e.jsx("p",{className:"font-semibold text-royal",children:((S=g.lead)==null?void 0:S.phone)||""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Email:"}),e.jsx("p",{className:"font-semibold text-royal",children:((P=g.lead)==null?void 0:P.email)||""})]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-navy flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"}),"Payment Details"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Amount Collected:"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:Ce(g.amount||0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Payment Method:"}),e.jsxs("p",{className:"font-semibold text-royal flex items-center gap-1",children:[e.jsx(ac,{className:"w-4 h-4"}),g.paymentMethod||"Cash"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Payment Date:"}),e.jsxs("p",{className:"font-semibold text-royal flex items-center gap-1",children:[e.jsx(fe,{className:"w-4 h-4"}),O(g.paymentDate)]})]}),g.nextPaymentDate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-royal/60",children:"Next Payment Date:"}),e.jsxs("p",{className:"font-semibold text-royal flex items-center gap-1",children:[e.jsx(fe,{className:"w-4 h-4"}),O(g.nextPaymentDate)]})]})]}),g.note&&e.jsxs("div",{className:"pt-2 border-t border-green-200",children:[e.jsx("span",{className:"text-royal/60 text-sm",children:"Coordinator Note:"}),e.jsx("p",{className:"text-royal mt-1",children:g.note})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-navy",children:"Collected By"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold text-royal",children:((D=g.coordinator)==null?void 0:D.name)||""}),e.jsx("p",{className:"text-royal/60",children:(($=g.coordinator)==null?void 0:$.email)||""}),e.jsxs("p",{className:"text-royal/60 text-xs mt-1",children:["Submitted: ",O(g.submittedAt)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-4",children:[e.jsx("span",{className:"text-sm font-medium text-royal",children:"Current Status:"}),U(g.status)]}),g.status==="Pending"&&y&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Review Note (Optional for approval, required for rejection)"}),e.jsx("textarea",{value:j,onChange:M=>A(M.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-gold",placeholder:"Add your review comments..."})]}),g.status!=="Pending"&&g.reviewedBy&&e.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-navy",children:"Review Information"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-royal/60",children:"Reviewed By:"})," ",e.jsx("span",{className:"font-semibold text-royal",children:((L=g.reviewedBy)==null?void 0:L.name)||""})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-royal/60",children:"Reviewed At:"})," ",e.jsx("span",{className:"font-semibold text-royal",children:O(g.reviewedAt)})]}),g.reviewNote&&e.jsxs("div",{className:"pt-2 border-t border-purple-200",children:[e.jsx("span",{className:"text-royal/60",children:"Review Note:"}),e.jsx("p",{className:"text-royal mt-1",children:g.reviewNote})]})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 p-6 flex justify-end gap-3 border-t",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-6 py-2.5 rounded-xl border border-gray-300 hover:bg-gray-100 transition-colors font-medium",disabled:b,children:"Close"}),g.status==="Pending"&&y&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>E(g._id),className:"px-6 py-2.5 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-colors font-medium disabled:opacity-50",disabled:b,children:b?"Processing...":"Reject"}),e.jsx("button",{type:"button",onClick:()=>C(g._id),className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 transition-colors font-medium shadow-lg disabled:opacity-50",disabled:b,children:b?"Processing...":"Approve"})]})]})]})]})]})}function ew(){const{user:t}=xe(),s=(t==null?void 0:t.role)==="Accountant";if(!s&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin")return e.jsx("div",{className:"text-royal",children:"Access denied"});const[n,r]=c.useState([]),[a,l]=c.useState({date:new Date().toISOString().slice(0,10),source:"Other",amount:0,note:""}),[i,o]=c.useState(!1),d=Sn(),[u,x]=c.useState(null),[m,h]=c.useState(null),g=async()=>{try{const{income:j}=await _.listIncome();r(j||[])}catch(j){h(j.message)}};c.useEffect(()=>{g()},[]);const w=async j=>{var A;(A=j==null?void 0:j.preventDefault)==null||A.call(j),x(null),h(null);try{await _.addIncome(a),x("Income added"),l({...a,amount:0}),o(!1),g()}catch(b){h(b.message)}};return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Income"})}),u&&e.jsx("div",{className:"mb-2 text-green-700",children:u}),m&&e.jsx("div",{className:"mb-2 text-red-600",children:m}),s&&e.jsx("div",{className:"mb-3",children:e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 bg-gold text-navy rounded-xl px-4 py-2",children:[e.jsx(ep,{className:"w-5 h-5"})," Add Income"]})}),i&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>o(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-lg shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Add Income"}),e.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 gap-2",children:[e.jsx("input",{type:"date",className:"border rounded-xl px-3 py-2",value:a.date,onChange:j=>l(A=>({...A,date:j.target.value}))}),e.jsx(tw,{kind:"incomes",value:a.source,onChange:j=>l(A=>({...A,source:j}))}),e.jsx("div",{className:"text-right text-sm mt-1",children:e.jsx("button",{type:"button",onClick:()=>{o(!1),d("/accounting/dashboard?openHeads=1")},className:"text-blue-600 underline",children:"Manage Account Heads"})}),e.jsx("input",{type:"number",className:"border rounded-xl px-3 py-2",placeholder:"Amount",value:a.amount,onChange:j=>l(A=>({...A,amount:Number(j.target.value)}))}),e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Note",value:a.note,onChange:j=>l(A=>({...A,note:j.target.value}))}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{className:"bg-gold text-navy rounded-xl px-4 py-2",children:"Add"})]})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Date"}),e.jsx("th",{className:"p-3 text-left",children:"Source"}),e.jsx("th",{className:"p-3 text-left",children:"Amount"}),e.jsx("th",{className:"p-3 text-left",children:"Note"})]})}),e.jsxs("tbody",{children:[n.map(j=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:new Date(j.date).toLocaleDateString()}),e.jsx("td",{className:"p-3",children:j.source}),e.jsx("td",{className:"p-3",children:Ce(j.amount)}),e.jsx("td",{className:"p-3",children:j.note||"-"})]},j._id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:"4",children:"No entries"})})]})]})})]})}function tw({kind:t="incomes",value:s,onChange:n}){let r={};try{r=JSON.parse(localStorage.getItem("accountHeads")||"{}")}catch{r={}}const a=r&&r[t]?r[t]:[],[l,i]=c.useState(""),o=s||"",d=u=>{n(u==="__other__"?l:u)};return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Purpose"}),e.jsxs("select",{className:"border rounded-xl px-3 py-2 w-full mb-2",value:o||"",onChange:u=>d(u.target.value),children:[!a||a.length===0?e.jsx("option",{value:"",children:"No heads defined"}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"-- select purpose --"}),a.map(u=>e.jsx("option",{value:u,children:u},u))]}),e.jsx("option",{value:"__other__",children:"Other (enter manually)"})]}),o==="__other__"||!o&&l?e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Enter purpose",value:l,onChange:u=>{i(u.target.value),n(u.target.value)}}):null]})}function sw({kind:t="expenses",value:s,onChange:n}){let r={};try{r=JSON.parse(localStorage.getItem("accountHeads")||"{}")}catch{r={}}const a=r&&r[t]?r[t]:[],[l,i]=c.useState(""),o=s||"",d=u=>{n(u==="__other__"?l:u)};return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Purpose"}),e.jsxs("select",{className:"border rounded-xl px-3 py-2 w-full mb-2",value:o||"",onChange:u=>d(u.target.value),children:[!a||a.length===0?e.jsx("option",{value:"",children:"No heads defined"}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"-- select purpose --"}),a.map(u=>e.jsx("option",{value:u,children:u},u))]}),e.jsx("option",{value:"__other__",children:"Other (enter manually)"})]}),o==="__other__"||!o&&l?e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Enter purpose",value:l,onChange:u=>{i(u.target.value),n(u.target.value)}}):null]})}function nw(){const{user:t}=xe(),s=(t==null?void 0:t.role)==="Accountant";if(!s&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin")return e.jsx("div",{className:"text-royal",children:"Access denied"});const[n,r]=c.useState([]),[a,l]=c.useState({date:new Date().toISOString().slice(0,10),purpose:"",amount:0,note:""}),[i,o]=c.useState(!1),d=Sn(),[u,x]=c.useState(null),[m,h]=c.useState(null),g=async()=>{try{const{expenses:A}=await _.listExpenses();r(A||[])}catch(A){h(A.message)}};c.useEffect(()=>{g()},[]);const w=async A=>{var b;(b=A==null?void 0:A.preventDefault)==null||b.call(A),x(null),h(null);try{await _.addExpense(a),x("Expense added"),l({...a,purpose:"",amount:0,note:""}),o(!1),g()}catch(p){h(p.message)}},j=async A=>{if(confirm("Delete expense?"))try{await _.deleteExpense(A),g()}catch(b){h(b.message)}};return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Expense"})}),u&&e.jsx("div",{className:"mb-2 text-green-700",children:u}),m&&e.jsx("div",{className:"mb-2 text-red-600",children:m}),s&&e.jsx("div",{className:"mb-3",children:e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 bg-gold text-navy rounded-xl px-4 py-2",children:[e.jsx(ep,{className:"w-5 h-5"})," Add Expense"]})}),i&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>o(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-lg shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Add Expense"}),e.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 gap-2",children:[e.jsx("input",{type:"date",className:"border rounded-xl px-3 py-2",value:a.date,onChange:A=>l(b=>({...b,date:A.target.value}))}),e.jsx(sw,{kind:"expenses",value:a.purpose,onChange:A=>l(b=>({...b,purpose:A}))}),e.jsx("div",{className:"text-right text-sm mt-1",children:e.jsx("button",{type:"button",onClick:()=>{o(!1),d("/accounting/dashboard?openHeads=1")},className:"text-blue-600 underline",children:"Manage Account Heads"})}),e.jsx("input",{type:"number",className:"border rounded-xl px-3 py-2",placeholder:"Amount",value:a.amount,onChange:A=>l(b=>({...b,amount:Number(A.target.value)}))}),e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Note",value:a.note,onChange:A=>l(b=>({...b,note:A.target.value}))}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{className:"bg-gold text-navy rounded-xl px-4 py-2",children:"Add"})]})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Date"}),e.jsx("th",{className:"p-3 text-left",children:"Purpose"}),e.jsx("th",{className:"p-3 text-left",children:"Amount"}),e.jsx("th",{className:"p-3 text-left",children:"Note"}),s&&e.jsx("th",{className:"p-3 text-left",children:"Action"})]})}),e.jsxs("tbody",{children:[n.map(A=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:new Date(A.date).toLocaleDateString()}),e.jsx("td",{className:"p-3",children:A.purpose}),e.jsx("td",{className:"p-3",children:Ce(A.amount)}),e.jsx("td",{className:"p-3",children:A.note||"-"}),s&&e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>j(A._id),className:"px-3 py-1 rounded-lg border hover:bg-red-50 text-red-700",children:"Delete"})})]},A._id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:s?5:4,children:"No entries"})})]})]})})]})}function rw(){const[t,s]=c.useState([]),[n,r]=c.useState([]),[a,l]=c.useState(!1),[i,o]=c.useState(null),[d,u]=c.useState({userId:"",accountNo:"",bankName:"",branchName:""});c.useEffect(()=>{(async()=>(await x(),m()))()},[]);const x=async()=>{try{const p=await(_.listUsersPublic?_.listUsersPublic():_.listUsers()),v=Array.isArray(p)?p:(p==null?void 0:p.users)||[];return s(v),v}catch(p){return console.error("Failed to load users",p),s([]),[]}},m=()=>{try{const p=localStorage.getItem("employeeBankRecords"),v=p?JSON.parse(p):[];r(v)}catch{r([])}},h=p=>{localStorage.setItem("employeeBankRecords",JSON.stringify(p)),r(p)},g=async()=>{const p=!t||t.length===0?await x():t;o(null),u({userId:p&&p[0]?p[0]._id:"",accountNo:"",bankName:"",branchName:""}),l(!0)},w=p=>{o(p.id),u({userId:p.userId,accountNo:p.accountNo,bankName:p.bankName,branchName:p.branchName}),l(!0)},j=p=>{var v;if((v=p==null?void 0:p.preventDefault)==null||v.call(p),!d.userId||!d.accountNo)return alert("Select employee and enter account number");if(i){const y=n.map(N=>N.id===i?{...N,...d}:N);h(y)}else{const N=[{id:`b_${Date.now()}`,...d},...n];h(N)}l(!1)},A=p=>{if(!confirm("Delete bank record?"))return;const v=n.filter(y=>y.id!==p);h(v)},b=p=>t.find(v=>v._id===p)||{};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Employee Bank Accounts"}),e.jsx("div",{children:e.jsx("button",{onClick:g,className:"bg-gold text-navy rounded-xl px-4 py-2",children:"+ Add Bank Account"})})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Emp Id"}),e.jsx("th",{className:"p-3 text-left",children:"Name"}),e.jsx("th",{className:"p-3 text-left",children:"Designation"}),e.jsx("th",{className:"p-3 text-left",children:"Account No"}),e.jsx("th",{className:"p-3 text-left",children:"Bank Name"}),e.jsx("th",{className:"p-3 text-left",children:"Branch Name"}),e.jsx("th",{className:"p-3 text-left",children:"Action"})]})}),e.jsxs("tbody",{children:[n.map(p=>{const v=b(p.userId);return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:(v._id||"").slice(0,8)}),e.jsx("td",{className:"p-3",children:v.name||"-"}),e.jsx("td",{className:"p-3",children:v.designation||"-"}),e.jsx("td",{className:"p-3",children:p.accountNo}),e.jsx("td",{className:"p-3",children:p.bankName}),e.jsx("td",{className:"p-3",children:p.branchName}),e.jsxs("td",{className:"p-3",children:[e.jsx("button",{onClick:()=>w(p),className:"px-3 py-1 rounded-lg border mr-2",children:"Edit"}),e.jsx("button",{onClick:()=>A(p.id),className:"px-3 py-1 rounded-lg border hover:bg-red-50 text-red-700",children:"Delete"})]})]},p.id)}),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:7,children:"No bank accounts"})})]})]})}),a&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>l(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-lg shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:i?"Edit Bank Account":"Add Bank Account"}),e.jsxs("form",{onSubmit:j,className:"grid grid-cols-1 gap-2",children:[e.jsx("label",{className:"text-sm text-royal",children:"Employee"}),e.jsx("select",{className:"border rounded-xl px-3 py-2",value:d.userId,onChange:p=>u(v=>({...v,userId:p.target.value})),children:!t||t.length===0?e.jsx("option",{value:"",children:"Loading employees..."}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"-- select employee --"}),t.map(p=>e.jsxs("option",{value:p._id,children:[p.name," (",p.designation||"",")"]},p._id))]})}),e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Account No",value:d.accountNo,onChange:p=>u(v=>({...v,accountNo:p.target.value}))}),e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Bank Name",value:d.bankName,onChange:p=>u(v=>({...v,bankName:p.target.value}))}),e.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Branch Name",value:d.branchName,onChange:p=>u(v=>({...v,branchName:p.target.value}))}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{className:"bg-gold text-navy rounded-xl px-4 py-2",children:i?"Save":"Add"})]})]})]})]})]})}function aw(){const[t,s]=c.useState([]),[n,r]=c.useState([]),[a,l]=c.useState(!1),[i,o]=c.useState(null),[d,u]=c.useState({userId:"",totalSalary:0});c.useEffect(()=>{(async()=>(await x(),m()))()},[]);const x=async()=>{try{const p=await(_.listUsersPublic?_.listUsersPublic():_.listUsers()),v=Array.isArray(p)?p:(p==null?void 0:p.users)||[];return s(v),v}catch{return s([]),[]}},m=()=>{try{const p=localStorage.getItem("employeeSalaryRecords");r(p?JSON.parse(p):[])}catch{r([])}},h=p=>{localStorage.setItem("employeeSalaryRecords",JSON.stringify(p)),r(p)},g=async()=>{const p=!t||t.length===0?await x():t;o(null),u({userId:p&&p[0]?p[0]._id:"",totalSalary:0}),l(!0)},w=p=>{o(p.id),u({userId:p.userId,totalSalary:p.totalSalary}),l(!0)},j=p=>{var v;if((v=p==null?void 0:p.preventDefault)==null||v.call(p),!d.userId)return alert("Select employee");if(i){const y=n.map(N=>N.id===i?{...N,...d}:N);h(y)}else{const N=[{id:`s_${Date.now()}`,...d},...n];h(N)}l(!1)},A=p=>{confirm("Delete salary record?")&&h(n.filter(v=>v.id!==p))},b=p=>t.find(v=>v._id===p)||{};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Employee Salary"}),e.jsx("div",{children:e.jsx("button",{onClick:g,className:"bg-gold text-navy rounded-xl px-4 py-2",children:"+ Add Salary"})})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Emp Id"}),e.jsx("th",{className:"p-3 text-left",children:"Name"}),e.jsx("th",{className:"p-3 text-left",children:"Designation"}),e.jsx("th",{className:"p-3 text-left",children:"Total Salary"}),e.jsx("th",{className:"p-3 text-left",children:"Action"})]})}),e.jsxs("tbody",{children:[n.map(p=>{const v=b(p.userId);return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3",children:(v._id||"").slice(0,8)}),e.jsx("td",{className:"p-3",children:v.name||"-"}),e.jsx("td",{className:"p-3",children:v.designation||"-"}),e.jsx("td",{className:"p-3",children:Ce(p.totalSalary||0)}),e.jsxs("td",{className:"p-3",children:[e.jsx("button",{onClick:()=>w(p),className:"px-3 py-1 rounded-lg border mr-2",children:"Edit"}),e.jsx("button",{onClick:()=>A(p.id),className:"px-3 py-1 rounded-lg border hover:bg-red-50 text-red-700",children:"Delete"})]})]},p.id)}),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-royal/70",colSpan:5,children:"No salary records"})})]})]})}),a&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>l(!1)}),e.jsxs("div",{className:"bg-white rounded-xl p-4 z-10 w-full max-w-lg shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:i?"Edit Salary":"Add Salary"}),e.jsxs("form",{onSubmit:j,className:"grid grid-cols-1 gap-2",children:[e.jsx("label",{className:"text-sm text-royal",children:"Employee"}),e.jsx("select",{className:"border rounded-xl px-3 py-2",value:d.userId,onChange:p=>u(v=>({...v,userId:p.target.value})),children:!t||t.length===0?e.jsx("option",{value:"",children:"Loading employees..."}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"-- select employee --"}),t.map(p=>e.jsxs("option",{value:p._id,children:[p.name," (",p.designation||"",")"]},p._id))]})}),e.jsx("input",{type:"number",className:"border rounded-xl px-3 py-2",placeholder:"Total Salary",value:d.totalSalary,onChange:p=>u(v=>({...v,totalSalary:Number(p.target.value)}))}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{className:"bg-gold text-navy rounded-xl px-4 py-2",children:i?"Save":"Add"})]})]})]})]})]})}const lw=[{key:"",label:"All"},{key:"pending",label:"Pending"},{key:"recruited",label:"Recruited"}];function iw(){const[t,s]=c.useState(""),[n,r]=c.useState([]),[a,l]=c.useState([]),[i,o]=c.useState([]),[d,u]=c.useState(!1),[x,m]=c.useState(null),h=async(g=t)=>{const w=await _.listCandidates(g);r(w)};return c.useEffect(()=>{h("")},[]),c.useEffect(()=>{(async()=>(l(await _.listEmployers()),o(await _.listJobs())))()},[]),c.useEffect(()=>{h(t)},[t]),e.jsxs("div",{className:"p-4 md:p-6 space-y-4 font-[Poppins]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-[#053867]",children:"Candidates"}),e.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Add Candidate"})]}),e.jsx("div",{className:"flex gap-2",children:lw.map(g=>e.jsx("button",{onClick:()=>s(g.key),className:`px-3 py-1.5 rounded-full border ${g.key===t?"bg-[#253985] text-white":"bg-white text-[#253985] border-[#253985]"}`,children:g.label},g.key))}),e.jsx("div",{className:"bg-white shadow rounded-2xl p-4 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-[#053867]",children:[e.jsx("th",{className:"py-2",children:"CanID"}),e.jsx("th",{className:"py-2",children:"Name"}),e.jsx("th",{className:"py-2",children:"Interest"}),e.jsx("th",{className:"py-2",children:"Source"}),e.jsx("th",{className:"py-2",children:"Trained"}),e.jsx("th",{className:"py-2",children:"Date"}),e.jsx("th",{className:"py-2",children:"CV"}),e.jsx("th",{className:"py-2",children:"Action"})]})}),e.jsxs("tbody",{children:[n.map(g=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:g.canId}),e.jsx("td",{className:"py-2",children:g.name}),e.jsx("td",{className:"py-2",children:g.jobInterest}),e.jsx("td",{className:"py-2",children:g.source}),e.jsx("td",{className:"py-2",children:g.trained?"Yes":"No"}),e.jsx("td",{className:"py-2",children:new Date(g.date).toLocaleDateString("en-GB")}),e.jsx("td",{className:"py-2",children:g.cvLink?e.jsx("a",{className:"text-[#253985] underline",href:g.cvLink,target:"_blank",children:"View"}):"-"}),e.jsx("td",{className:"py-2",children:g.recruited?e.jsx("span",{className:"px-2 py-1 rounded bg-green-100 text-green-700",children:"Recruited"}):e.jsx("button",{onClick:()=>m(g),className:"px-3 py-1 rounded-xl bg-[#253985] text-white",children:"Recruit"})})]},g._id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-2 text-gray-500",colSpan:8,children:"No candidates"})})]})]})}),d&&e.jsx(ow,{onClose:()=>u(!1),onSaved:()=>{u(!1),h()}}),x&&e.jsx(cw,{candidate:x,employers:a,jobs:i.filter(g=>g.status==="Active"),onClose:()=>m(null),onSaved:()=>{m(null),h(t)}})]})}function ow({onClose:t,onSaved:s}){const[n,r]=c.useState({canId:"",name:"",jobInterest:"",source:"Facebook",trained:!1,cvLink:""}),[a,l]=c.useState(!1),[i,o]=c.useState(""),d=async m=>{if(!m.trim()){o("");return}l(!0);try{const g=(await _.listCandidates()).some(w=>w.canId.toLowerCase()===m.trim().toLowerCase());o(g?"This Candidate ID already exists":"")}catch(h){console.error("Validation error:",h)}finally{l(!1)}},u=m=>{r(h=>({...h,canId:m})),o("")},x=async()=>{if(!n.canId)return alert("Candidate ID is required");if(i)return alert(i);if(!n.name||!n.jobInterest)return alert("Name & Job Interest required");try{await _.addCandidate(n),s()}catch(m){alert(m.message||"Failed to add candidate")}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-6 w-full max-w-2xl space-y-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-[#053867]",children:"Add New Candidate"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Fill in the candidate information below"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-4",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-5 h-5 text-[#253985]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.jsx("span",{className:"text-sm font-semibold text-[#053867]",children:"Candidate ID *"})]}),e.jsx("input",{type:"text",value:n.canId,onChange:m=>u(m.target.value),onBlur:()=>d(n.canId),className:`w-full border-2 rounded-xl px-4 py-3 text-lg font-mono focus:outline-none focus:ring-2 transition-all ${i?"border-red-400 focus:ring-red-400 bg-red-50":"border-blue-300 focus:ring-blue-400 bg-white"}`,placeholder:"e.g., CAN-2025-0001"}),e.jsxs("div",{className:"mt-2 min-h-[20px]",children:[a&&e.jsxs("span",{className:"text-xs text-blue-600 flex items-center gap-1",children:[e.jsxs("svg",{className:"animate-spin h-3 w-3",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking availability..."]}),i&&e.jsxs("span",{className:"text-xs text-red-600 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),i]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"Name *"}),e.jsx("input",{type:"text",value:n.name,onChange:m=>r(h=>({...h,name:m.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all",placeholder:"Full name"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"Job Interest *"}),e.jsx("input",{type:"text",value:n.jobInterest,onChange:m=>r(h=>({...h,jobInterest:m.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all",placeholder:"e.g., Software Developer"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"CV Source"}),e.jsx("select",{value:n.source,onChange:m=>r(h=>({...h,source:m.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all bg-white",children:["Facebook","LinkedIn","Bdjobs","Reference","Prime Academy","Others"].map(m=>e.jsx("option",{value:m,children:m},m))})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"CV Link"}),e.jsx("input",{type:"url",value:n.cvLink,onChange:m=>r(h=>({...h,cvLink:m.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all",placeholder:"Google Drive or OneDrive link"})]})})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.trained,onChange:m=>r(h=>({...h,trained:m.target.checked})),className:"w-5 h-5 text-[#253985] border-2 border-gray-300 rounded focus:ring-2 focus:ring-[#253985] cursor-pointer"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867]",children:"Trained by Prime Academy"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Check if this candidate completed training"})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:t,className:"px-6 py-2.5 rounded-xl bg-gray-100 text-gray-700 font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:x,disabled:a||!!i,className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-[#253985] to-[#053867] text-white font-medium hover:shadow-lg transform hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Candidate"]})]})]})})}function cw({candidate:t,employers:s,jobs:n,onClose:r,onSaved:a}){const[l,i]=c.useState({employerId:"",jobId:"",date:new Date().toISOString().slice(0,10)}),[o,d]=c.useState(!1),u=async()=>{if(!l.employerId||!l.jobId)return alert("Please select employer and job position");d(!0);try{await _.recruitCandidate(t._id,l),a()}catch(x){alert(x.message||"Failed to recruit candidate")}finally{d(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-6 w-full max-w-lg space-y-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-[#253985]",children:"Recruit Candidate"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("span",{className:"font-semibold",children:t.name}),"  ",t.canId]})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"Select Employer *"}),e.jsxs("select",{value:l.employerId,onChange:x=>i(m=>({...m,employerId:x.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all bg-white",children:[e.jsx("option",{value:"",children:"Choose an employer..."}),s.map(x=>e.jsxs("option",{value:x._id,children:[x.name," (",x.empId,")"]},x._id))]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"Select Job Position *"}),e.jsxs("select",{value:l.jobId,onChange:x=>i(m=>({...m,jobId:x.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all bg-white",children:[e.jsx("option",{value:"",children:"Choose a job position..."}),n.map(x=>e.jsxs("option",{value:x._id,children:[x.position,"  ",x.jobId]},x._id))]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-[#053867] mb-2 block",children:"Recruitment Date"}),e.jsx("input",{type:"date",value:l.date,onChange:x=>i(m=>({...m,date:x.target.value})),className:"w-full border-2 border-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent transition-all"})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:r,disabled:o,className:"px-6 py-2.5 rounded-xl bg-gray-100 text-gray-700 font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:u,disabled:o,className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 text-white font-medium hover:shadow-lg transform hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Confirm Recruitment"]})})]})]})})}function dw(){const[t,s]=c.useState([]),[n,r]=c.useState([]),[a,l]=c.useState(!1),i=async()=>s(await _.listJobs());return c.useEffect(()=>{i(),(async()=>r(await _.listEmployers()))()},[]),e.jsxs("div",{className:"p-4 md:p-6 space-y-4 font-[Poppins]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-[#053867]",children:"Job Positions"}),e.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Add Job"})]}),e.jsx("div",{className:"bg-white shadow rounded-2xl p-4 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-[#053867]",children:[e.jsx("th",{className:"py-2",children:"JobID"}),e.jsx("th",{className:"py-2",children:"Position"}),e.jsx("th",{className:"py-2",children:"Employer"}),e.jsx("th",{className:"py-2",children:"Salary"}),e.jsx("th",{className:"py-2",children:"Deadline"}),e.jsx("th",{className:"py-2",children:"Status"})]})}),e.jsxs("tbody",{children:[t.map(o=>{var d;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:o.jobId}),e.jsx("td",{className:"py-2",children:o.position}),e.jsx("td",{className:"py-2",children:((d=o.employer)==null?void 0:d.name)||"-"}),e.jsx("td",{className:"py-2",children:o.salaryRange||"-"}),e.jsx("td",{className:"py-2",children:o.deadline?new Date(o.deadline).toLocaleDateString("en-GB"):"-"}),e.jsx("td",{className:"py-2",children:o.status})]},o._id)}),t.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-2 text-gray-500",colSpan:6,children:"No jobs"})})]})]})}),a&&e.jsx(uw,{employers:n,onClose:()=>l(!1),onSaved:()=>{l(!1),i()}})]})}function uw({employers:t,onClose:s,onSaved:n}){const[r,a]=c.useState({jobId:"",position:"",employerId:"",salaryRange:"",deadline:"",status:"Active"}),[l,i]=c.useState(!1),[o,d]=c.useState(""),u=async h=>{if(!h.trim()){d("");return}i(!0);try{const w=(await _.listJobs()).some(j=>j.jobId.toLowerCase()===h.trim().toLowerCase());d(w?"This Job ID already exists":"")}catch(g){console.error("Validation error:",g)}finally{i(!1)}},x=h=>{a(g=>({...g,jobId:h})),d("")},m=async()=>{if(!r.jobId)return alert("Job ID is required");if(o)return alert(o);if(!r.position||!r.employerId)return alert("Position & Employer required");await _.addJob(r),n()};return e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-xl space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-[#253985]",children:"Add Job Position"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-3",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-5 h-5 text-[#253985]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.jsx("span",{className:"text-sm font-semibold text-[#053867]",children:"Job ID *"})]}),e.jsx("input",{type:"text",value:r.jobId,onChange:h=>x(h.target.value),onBlur:()=>u(r.jobId),className:`w-full border-2 rounded-xl px-4 py-2.5 text-lg font-mono focus:outline-none focus:ring-2 transition-all ${o?"border-red-400 focus:ring-red-400 bg-red-50":"border-blue-300 focus:ring-blue-400 bg-white"}`,placeholder:"e.g., JOB-2025-0001"}),e.jsxs("div",{className:"mt-2 min-h-[20px]",children:[l&&e.jsxs("span",{className:"text-xs text-blue-600 flex items-center gap-1",children:[e.jsxs("svg",{className:"animate-spin h-3 w-3",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking availability..."]}),o&&e.jsxs("span",{className:"text-xs text-red-600 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),o]})]})]})}),e.jsx(lo,{label:"Position *",value:r.position,onChange:h=>a(g=>({...g,position:h}))}),e.jsx(Sm,{label:"Employer *",value:r.employerId,onChange:h=>a(g=>({...g,employerId:h})),options:t.map(h=>({label:`${h.name} (${h.empId})`,value:h._id}))}),e.jsx(lo,{label:"Salary Range",value:r.salaryRange,onChange:h=>a(g=>({...g,salaryRange:h}))}),e.jsx(lo,{label:"Deadline",type:"date",value:r.deadline,onChange:h=>a(g=>({...g,deadline:h}))}),e.jsx(Sm,{label:"Status",value:r.status,onChange:h=>a(g=>({...g,status:h})),options:["Active","Inactive"].map(h=>({label:h,value:h}))}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 rounded-2xl bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:m,className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Save"})]})]})})}function lo({label:t,value:s,onChange:n,type:r="text"}){return e.jsxs("label",{className:"text-sm text-[#053867] space-y-1 block",children:[e.jsx("span",{children:t}),e.jsx("input",{type:r,value:s,onChange:a=>n(a.target.value),className:"w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#253985]"})]})}function Sm({label:t,value:s,onChange:n,options:r}){return e.jsxs("label",{className:"text-sm text-[#053867] space-y-1 block",children:[e.jsx("span",{children:t}),e.jsxs("select",{value:s,onChange:a=>n(a.target.value),className:"w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#253985]",children:[e.jsx("option",{value:"",children:"Select..."}),r.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]})}function mw(){const[t,s]=c.useState([]),[n,r]=c.useState(!1),a=async()=>s(await _.listEmployers());return c.useEffect(()=>{a()},[]),e.jsxs("div",{className:"p-4 md:p-6 space-y-4 font-[Poppins]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-[#053867]",children:"Employers"}),e.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Add Employer"})]}),e.jsx("div",{className:"bg-white shadow rounded-2xl p-4 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-[#053867]",children:[e.jsx("th",{className:"py-2",children:"EmpID"}),e.jsx("th",{className:"py-2",children:"Name"}),e.jsx("th",{className:"py-2",children:"Address"}),e.jsx("th",{className:"py-2",children:"Job Location"}),e.jsx("th",{className:"py-2",children:"MoU Date"})]})}),e.jsxs("tbody",{children:[t.map(l=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:l.empId}),e.jsx("td",{className:"py-2",children:l.name}),e.jsx("td",{className:"py-2",children:l.address||"-"}),e.jsx("td",{className:"py-2",children:l.jobLocation||"-"}),e.jsx("td",{className:"py-2",children:l.mouDate?new Date(l.mouDate).toLocaleDateString("en-GB"):"-"})]},l._id)),t.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-2 text-gray-500",colSpan:5,children:"No employers"})})]})]})}),n&&e.jsx(xw,{onClose:()=>r(!1),onSaved:()=>{r(!1),a()}})]})}function xw({onClose:t,onSaved:s}){const[n,r]=c.useState({empId:"",name:"",address:"",jobLocation:"",mouDate:""}),[a,l]=c.useState(!1),[i,o]=c.useState(""),d=async m=>{if(!m.trim()){o("");return}l(!0);try{const g=(await _.listEmployers()).some(w=>w.empId.toLowerCase()===m.trim().toLowerCase());o(g?"This Employer ID already exists":"")}catch(h){console.error("Validation error:",h)}finally{l(!1)}},u=m=>{r(h=>({...h,empId:m})),o("")},x=async()=>{if(!n.empId)return alert("Employer ID is required");if(i)return alert(i);if(!n.name)return alert("Name is required");await _.addEmployer(n),s()};return e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-xl space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-[#253985]",children:"Add Employer"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-3",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-5 h-5 text-[#253985]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.jsx("span",{className:"text-sm font-semibold text-[#053867]",children:"Employer ID *"})]}),e.jsx("input",{type:"text",value:n.empId,onChange:m=>u(m.target.value),onBlur:()=>d(n.empId),className:`w-full border-2 rounded-xl px-4 py-2.5 text-lg font-mono focus:outline-none focus:ring-2 transition-all ${i?"border-red-400 focus:ring-red-400 bg-red-50":"border-blue-300 focus:ring-blue-400 bg-white"}`,placeholder:"e.g., EMP-2025-0001"}),e.jsxs("div",{className:"mt-2 min-h-[20px]",children:[a&&e.jsxs("span",{className:"text-xs text-blue-600 flex items-center gap-1",children:[e.jsxs("svg",{className:"animate-spin h-3 w-3",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking availability..."]}),i&&e.jsxs("span",{className:"text-xs text-red-600 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),i]})]})]})}),e.jsx(Xa,{label:"Name *",value:n.name,onChange:m=>r(h=>({...h,name:m}))}),e.jsx(Xa,{label:"Address",value:n.address,onChange:m=>r(h=>({...h,address:m}))}),e.jsx(Xa,{label:"Job Location",value:n.jobLocation,onChange:m=>r(h=>({...h,jobLocation:m}))}),e.jsx(Xa,{label:"MoU Date",type:"date",value:n.mouDate,onChange:m=>r(h=>({...h,mouDate:m}))}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-2xl bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:x,className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Save"})]})]})})}function Xa({label:t,value:s,onChange:n,type:r="text"}){return e.jsxs("label",{className:"text-sm text-[#053867] space-y-1 block",children:[e.jsx("span",{children:t}),e.jsx("input",{type:r,value:s,onChange:a=>n(a.target.value),className:"w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#253985]"})]})}function hw(){const{user:t}=xe(),[s,n]=c.useState([]),[r,a]=c.useState(!1),[l,i]=c.useState(!1),[o,d]=c.useState("All"),[u,x]=c.useState(null),m=(t==null?void 0:t.role)==="Accountant"||(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin",h=(t==null?void 0:t.role)==="Recruitment"||(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin",g=async()=>{i(!0);try{const N=await _.listRecIncome();n(Array.isArray(N)?N:[])}finally{i(!1)}};c.useEffect(()=>{g()},[]);const w=c.useMemo(()=>o==="All"?s:s.filter(N=>N.status===o),[s,o]),j=c.useMemo(()=>s.filter(N=>N.status==="Approved").reduce((N,C)=>N+(Number(C.amount)||0),0),[s]),A=c.useMemo(()=>s.filter(N=>N.status==="Pending").reduce((N,C)=>N+(Number(C.amount)||0),0),[s]),b=async N=>{if(confirm("Approve this income entry?"))try{await _.approveRecIncome(N),g()}catch(C){alert(C.message||"Failed to approve")}},p=async(N,C)=>{try{await _.rejectRecIncome(N,C),x(null),g()}catch(E){alert(E.message||"Failed to reject")}},v=async N=>{if(confirm("Delete this income entry?"))try{await _.deleteRecIncome(N),g()}catch(C){alert(C.message||"Failed to delete")}},y=N=>{switch(N){case"Approved":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-medium",children:[e.jsx(et,{size:14}),"Approved"]});case"Rejected":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-red-100 text-red-700 text-xs font-medium",children:[e.jsx(xs,{size:14}),"Rejected"]});case"Pending":default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-medium",children:[e.jsx(Rt,{size:14}),"Waiting for Approval"]})}};return e.jsxs("div",{className:"p-4 md:p-6 space-y-4 font-[Poppins]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-[#053867]",children:"Recruitment Income"}),h&&e.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49] font-medium",children:"Add Income"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsx("div",{className:"text-sm opacity-90",children:"Approved Income"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:Wt(j)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsx("div",{className:"text-sm opacity-90",children:"Pending Approval"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:Wt(A)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsx("div",{className:"text-sm opacity-90",children:"Total Entries"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:s.length})]})]}),e.jsx("div",{className:"flex gap-2 border-b border-gray-200",children:["All","Pending","Approved","Rejected"].map(N=>e.jsxs("button",{onClick:()=>d(N),className:`px-4 py-2 font-medium transition-colors ${o===N?"text-[#253985] border-b-2 border-[#253985]":"text-gray-500 hover:text-gray-700"}`,children:[N," (",s.filter(C=>N==="All"||C.status===N).length,")"]},N))}),e.jsxs("div",{className:"bg-white shadow rounded-2xl p-4 overflow-x-auto",children:[l&&e.jsx("div",{className:"text-sm text-gray-500 mb-3",children:"Loading"}),e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-[#053867] border-b-2",children:[e.jsx("th",{className:"py-3 px-2",children:"Date"}),e.jsx("th",{className:"py-3 px-2",children:"Source"}),e.jsx("th",{className:"py-3 px-2",children:"Income From"}),e.jsx("th",{className:"py-3 px-2",children:"Income For"}),e.jsx("th",{className:"py-3 px-2",children:"Description"}),e.jsx("th",{className:"py-3 px-2",children:"Amount"}),e.jsx("th",{className:"py-3 px-2",children:"Status"}),e.jsx("th",{className:"py-3 px-2",children:"Submitted By"}),m&&e.jsx("th",{className:"py-3 px-2",children:"Actions"})]})}),e.jsxs("tbody",{children:[w.map(N=>{var C,E,k;return e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-2",children:N.date?new Date(N.date).toLocaleDateString("en-GB"):"-"}),e.jsx("td",{className:"py-3 px-2 font-medium",children:N.source||"-"}),e.jsx("td",{className:"py-3 px-2 text-gray-600",children:((C=N.incomeFrom)==null?void 0:C.name)||"-"}),e.jsx("td",{className:"py-3 px-2 text-gray-600",children:((E=N.incomeFor)==null?void 0:E.name)||"-"}),e.jsx("td",{className:"py-3 px-2 text-gray-600",children:N.description||"-"}),e.jsx("td",{className:"py-3 px-2 font-semibold",children:Wt(N.amount)}),e.jsx("td",{className:"py-3 px-2",children:y(N.status)}),e.jsx("td",{className:"py-3 px-2 text-gray-600",children:((k=N.submittedBy)==null?void 0:k.name)||"-"}),m&&e.jsx("td",{className:"py-3 px-2",children:e.jsxs("div",{className:"flex gap-2",children:[N.status==="Pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>b(N._id),className:"px-3 py-1 rounded-xl bg-green-100 text-green-700 hover:bg-green-200 text-xs font-medium",children:"Approve"}),e.jsx("button",{onClick:()=>x(N),className:"px-3 py-1 rounded-xl bg-red-100 text-red-700 hover:bg-red-200 text-xs font-medium",children:"Reject"})]}),((t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin")&&e.jsx("button",{onClick:()=>v(N._id),className:"px-3 py-1 rounded-xl bg-gray-100 text-gray-700 hover:bg-gray-200 text-xs font-medium",children:"Delete"})]})})]},N._id)}),w.length===0&&e.jsx("tr",{children:e.jsxs("td",{className:"py-8 text-center text-gray-500",colSpan:m?9:8,children:["No ",o!=="All"?o.toLowerCase():""," income entries"]})})]})]})]}),r&&e.jsx(pw,{onClose:()=>a(!1),onSaved:()=>{a(!1),g()}}),u&&e.jsx(fw,{income:u,onClose:()=>x(null),onReject:N=>p(u._id,N)})]})}function pw({onClose:t,onSaved:s}){const[n,r]=c.useState({date:new Date().toISOString().slice(0,10),source:"",amount:"",description:"",incomeFrom:"",incomeFor:""}),[a,l]=c.useState([]),[i,o]=c.useState([]),[d,u]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const[h,g]=await Promise.all([_.listEmployers(),_.listRecruited()]);l(Array.isArray(h)?h:[]),o(Array.isArray(g)?g:[])}catch(h){console.error("Failed to load dropdown data:",h)}finally{u(!1)}})()},[]);const x=async()=>{if(!n.source)return alert("Source is required");const m=Number(n.amount);if(!m||m<=0)return alert("Enter a valid amount");if(!n.incomeFrom)return alert("Income From (Employer) is required");if(!n.incomeFor)return alert("Income For (Candidate) is required");try{await _.addRecIncome({date:n.date,source:n.source,amount:m,description:n.description,incomeFrom:n.incomeFrom,incomeFor:n.incomeFor}),s()}catch(h){alert(h.message||"Failed to submit income")}};return e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-lg space-y-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"text-[#253985]",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-[#253985]",children:"Submit Income for Approval"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"This income will be sent to the Accountant for approval before being counted."}),d?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading form data..."}):e.jsxs(e.Fragment,{children:[e.jsx(Or,{label:"Date",type:"date",value:n.date,onChange:m=>r(h=>({...h,date:m}))}),e.jsx(Or,{label:"Source",value:n.source,onChange:m=>r(h=>({...h,source:m})),placeholder:"Commission, Training Fee, Placement Fee, etc."}),e.jsx(km,{label:"Income From (Employer) *",value:n.incomeFrom,onChange:m=>r(h=>({...h,incomeFrom:m})),options:a.map(m=>({value:m._id,label:m.name})),placeholder:"Select employer..."}),e.jsx(km,{label:"Income For (Recruited Candidate) *",value:n.incomeFor,onChange:m=>r(h=>({...h,incomeFor:m})),options:i.map(m=>({value:m._id,label:`${m.name} (${m.canId})`})),placeholder:"Select candidate..."}),e.jsx(Or,{label:"Amount (BDT)",type:"number",value:n.amount,onChange:m=>r(h=>({...h,amount:m}))}),e.jsx(Or,{label:"Description (Optional)",value:n.description,onChange:m=>r(h=>({...h,description:m})),placeholder:"Additional details about this income",multiline:!0}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-2xl bg-gray-100 hover:bg-gray-200 font-medium",children:"Cancel"}),e.jsx("button",{onClick:x,className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49] font-medium",children:"Submit for Approval"})]})]})]})})}function km({label:t,value:s,onChange:n,options:r,placeholder:a}){const[l,i]=c.useState(""),[o,d]=c.useState(!1),u=r.filter(m=>m.label.toLowerCase().includes(l.toLowerCase())),x=r.find(m=>m.value===s);return e.jsxs("label",{className:"text-sm text-[#053867] space-y-1 block relative",children:[e.jsx("span",{className:"font-medium",children:t}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{onClick:()=>d(!o),className:"w-full border border-gray-300 rounded-xl px-3 py-2 cursor-pointer bg-white hover:border-[#253985] focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent flex justify-between items-center",children:[e.jsx("span",{className:x?"text-gray-900":"text-gray-400",children:x?x.label:a}),e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-xl shadow-lg max-h-60 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b",children:e.jsx("input",{type:"text",value:l,onChange:m=>i(m.target.value),placeholder:"Search...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#253985] text-sm",onClick:m=>m.stopPropagation()})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length===0?e.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No results found"}):u.map(m=>e.jsx("div",{onClick:()=>{n(m.value),d(!1),i("")},className:`px-3 py-2 cursor-pointer hover:bg-gray-100 text-sm ${m.value===s?"bg-blue-50 text-[#253985] font-medium":""}`,children:m.label},m.value))})]})]}),o&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)})]})}function fw({income:t,onClose:s,onReject:n}){var i;const[r,a]=c.useState(""),l=()=>{if(!r.trim())return alert("Please provide a rejection reason");n(r)};return e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"text-red-600",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-red-600",children:"Reject Income Entry"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[e.jsx("div",{className:"font-medium text-gray-700",children:t.source}),e.jsx("div",{className:"text-gray-600",children:Wt(t.amount)}),e.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:["Submitted by: ",((i=t.submittedBy)==null?void 0:i.name)||"Unknown"]})]}),e.jsx(Or,{label:"Rejection Reason",value:r,onChange:a,placeholder:"Explain why this income is being rejected",multiline:!0}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 rounded-2xl bg-gray-100 hover:bg-gray-200 font-medium",children:"Cancel"}),e.jsx("button",{onClick:l,className:"px-4 py-2 rounded-2xl bg-red-600 text-white hover:bg-red-700 font-medium",children:"Reject Entry"})]})]})})}function Or({label:t,value:s,onChange:n,type:r="text",placeholder:a="",multiline:l=!1}){return e.jsxs("label",{className:"text-sm text-[#053867] space-y-1 block",children:[e.jsx("span",{className:"font-medium",children:t}),l?e.jsx("textarea",{value:s,placeholder:a,onChange:i=>n(i.target.value),rows:3,className:"w-full border border-gray-300 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent"}):e.jsx("input",{type:r,value:s,placeholder:a,onChange:i=>n(i.target.value),className:"w-full border border-gray-300 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#253985] focus:border-transparent"})]})}function gw(){const[t,s]=c.useState([]),[n,r]=c.useState(!1),[a,l]=c.useState(!1),i=async()=>{l(!0);try{const u=await _.listRecExpense();s(Array.isArray(u)?u:[])}finally{l(!1)}};c.useEffect(()=>{i()},[]);const o=c.useMemo(()=>t.reduce((u,x)=>u+(Number(x.amount)||0),0),[t]),d=async u=>{confirm("Delete this expense entry?")&&(await _.deleteRecExpense(u),i())};return e.jsxs("div",{className:"p-4 md:p-6 space-y-4 font-[Poppins]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-[#053867]",children:"Recruitment Expense"}),e.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Add Expense"})]}),e.jsxs("div",{className:"bg-white shadow rounded-2xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"text-[#253985] font-semibold",children:["Total: ",e.jsx("span",{className:"font-bold",children:Wt(o)})]}),a&&e.jsx("div",{className:"text-sm text-gray-500",children:"Loading"})]}),e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-[#053867]",children:[e.jsx("th",{className:"py-2",children:"Date"}),e.jsx("th",{className:"py-2",children:"Purpose"}),e.jsx("th",{className:"py-2",children:"Amount"}),e.jsx("th",{className:"py-2",children:"Action"})]})}),e.jsxs("tbody",{children:[t.map(u=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:u.date?new Date(u.date).toLocaleDateString("en-GB"):"-"}),e.jsx("td",{className:"py-2",children:u.purpose||"-"}),e.jsx("td",{className:"py-2",children:Wt(u.amount)}),e.jsx("td",{className:"py-2",children:e.jsx("button",{onClick:()=>d(u._id),className:"px-3 py-1 rounded-xl bg-red-100 text-red-700 hover:bg-red-200",children:"Delete"})})]},u._id)),t.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-3 text-gray-500",colSpan:4,children:"No expense entries"})})]})]})]}),n&&e.jsx(yw,{onClose:()=>r(!1),onSaved:()=>{r(!1),i()}})]})}function yw({onClose:t,onSaved:s}){const[n,r]=c.useState({date:new Date().toISOString().slice(0,10),purpose:"",amount:""}),a=async()=>{if(!n.purpose)return alert("Purpose is required");const l=Number(n.amount);if(!l||l<=0)return alert("Enter a valid amount");await _.addRecExpense({date:n.date,purpose:n.purpose,amount:l}),s()};return e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 w-full max-w-lg space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#253985]",children:"Add Expense"}),e.jsx(io,{label:"Date",type:"date",value:n.date,onChange:l=>r(i=>({...i,date:l}))}),e.jsx(io,{label:"Purpose",value:n.purpose,onChange:l=>r(i=>({...i,purpose:l})),placeholder:"Candidate Screening / Travel / HR Event"}),e.jsx(io,{label:"Amount (BDT)",type:"number",value:n.amount,onChange:l=>r(i=>({...i,amount:l}))}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-2xl bg-gray-100",children:"Cancel"}),e.jsx("button",{onClick:a,className:"px-4 py-2 rounded-2xl bg-[#F7BA23] text-[#053867] hover:bg-[#F3CE49]",children:"Save"})]})]})})}function io({label:t,value:s,onChange:n,type:r="text",placeholder:a=""}){return e.jsxs("label",{className:"text-sm text-[#053867] space-y-1 block",children:[e.jsx("span",{children:t}),e.jsx("input",{type:r,value:s,placeholder:a,onChange:l=>n(l.target.value),className:"w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#253985]"})]})}function vw(){const[t,s]=c.useState([]),[n,r]=c.useState({}),[a,l]=c.useState(!1),[i,o]=c.useState(""),[d,u]=c.useState(!1),[x,m]=c.useState(null),[h,g]=c.useState(!1),[w,j]=c.useState(""),[A,b]=c.useState([]),p=["Reel","Short","Explainer","Ad","Banner","Other"],v=["Facebook","Instagram","YouTube","TikTok","X","Other"],[y,N]=c.useState("monthly"),[C,E]=c.useState(""),[k,O]=c.useState(""),[U,B]=c.useState(""),[R,S]=c.useState("");async function P(){l(!0),o("");try{const[F,q]=await Promise.all([_.listMGWorks(),_.mgStats()]),se=Array.isArray(F)?F:(F==null?void 0:F.list)||(F==null?void 0:F.items)||[];s(se),r(q||{})}catch(F){o(F.message||"Failed to load")}finally{l(!1)}}async function D(F){g(!0),j("");try{if(!F.title||!F.date)throw new Error("Title and date are required");const q={...F||{}};if(q.assignedTo&&!H[q.assignedTo]){const se=A.find(I=>I.name===q.assignedTo||I.email===q.assignedTo);se&&(q.assignedTo=se._id||se.id||se.email)}q._id?await _.updateMGWork(q._id,q):await _.createMGWork(q),await P(),u(!1)}catch(q){j(q.message||"Save failed")}finally{g(!1)}}function $(){m({}),j(""),u(!0)}function L(F){m(F||{}),j(""),u(!0)}async function M(F){if(F&&confirm("Delete this work item?"))try{await _.deleteMGWork(F),await P()}catch(q){alert(q.message||"Delete failed")}}c.useEffect(()=>{const F=new Date;let q=new Date;q.setMonth(F.getMonth()-1),E(q.toISOString().slice(0,10)),O(F.toISOString().slice(0,10)),P(),(async()=>{try{const se=await _.listUsersPublic(),I=Array.isArray(se)?se:(se==null?void 0:se.users)||[];b(I)}catch{}})()},[]);const H=c.useMemo(()=>{const F={};return A.forEach(q=>{const se=q._id||q.id||q.email;F[se]=q.name||q.email||se}),F},[A]);c.useEffect(()=>{(async()=>{try{r(await _.mgStats())}catch{}})()},[y,C,k]);const Z=c.useMemo(()=>{const F=(R||"").trim().toLowerCase();let q=C?new Date(C):null,se=k?new Date(k):null;return se&&se.setHours(23,59,59,999),t.filter(I=>{try{const z=I!=null&&I.date?new Date(I.date):I!=null&&I.createdAt?new Date(I.createdAt):null;if(q&&z&&z<q||se&&z&&z>se||U&&U!=="all"&&(I.status||"").toLowerCase()!==U.toLowerCase())return!1;if(!F)return!0;const G=I.assignedTo&&H[I.assignedTo]?H[I.assignedTo]:I.assignedTo||"";return`${I.title||""} ${G} ${I.type||""} ${I.platform||""} ${I.notes||""}`.toLowerCase().includes(F)}catch{return!0}})},[t,C,k,U,R]),W=c.useMemo(()=>{const F={total:t.length,queued:0,inProgress:0,review:0,done:0,hold:0};return t.forEach(q=>{const se=(q.status||"").toLowerCase();se==="queued"?F.queued++:se==="inprogress"?F.inProgress++:se==="review"?F.review++:se==="done"?F.done++:se==="hold"&&F.hold++}),F},[t]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-bold text-navy",children:"Motion Graphics  Production Log"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:P,className:"bg-royal text-white px-3 py-2 rounded-xl",children:"Refresh"})})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:gap-4 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-slate",children:"Range"}),e.jsxs("select",{value:y,onChange:F=>{const q=F.target.value;N(q);const se=new Date;let I=new Date;q==="daily"?I.setDate(se.getDate()-1):q==="weekly"?I.setDate(se.getDate()-7):q==="monthly"?I.setMonth(se.getMonth()-1):q==="yearly"?I.setFullYear(se.getFullYear()-1):q==="lifetime"&&(I=null),q!=="custom"&&(I?E(I.toISOString().slice(0,10)):(E(""),O("")),O(se.toISOString().slice(0,10)))},className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"}),e.jsx("option",{value:"lifetime",children:"Lifetime"}),e.jsx("option",{value:"custom",children:"Custom"})]}),y==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:C,onChange:F=>E(F.target.value),className:"border rounded-xl px-3 py-2"}),e.jsx("input",{type:"date",value:k,onChange:F=>O(F.target.value),className:"border rounded-xl px-3 py-2"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-slate",children:"Status"}),e.jsxs("select",{value:U,onChange:F=>B(F.target.value),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"Queued",children:"Queued"}),e.jsx("option",{value:"InProgress",children:"In Progress"}),e.jsx("option",{value:"Review",children:"Review"}),e.jsx("option",{value:"Done",children:"Done"}),e.jsx("option",{value:"Hold",children:"Hold"})]})]}),e.jsx("div",{className:"flex-1 flex items-center",children:e.jsx("input",{placeholder:"Search title, assignee, notes...",value:R,onChange:F=>S(F.target.value),className:"w-full border rounded-xl px-3 py-2"})})]})}),i&&e.jsx("div",{className:"text-red-600",children:i}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{k:"total",label:"Total",v:W.total},{k:"queued",label:"Queued",v:W.queued},{k:"inProgress",label:"In Progress",v:W.inProgress},{k:"done",label:"Done",v:W.done}].map(F=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm",children:[e.jsx("div",{className:"text-royal text-sm",children:F.label}),e.jsx("div",{className:"text-3xl font-extrabold",children:F.v??0})]},F.k))}),e.jsx("div",{children:a?e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3 md:hidden",children:[Z.map(F=>e.jsxs("div",{className:"bg-white p-3 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate",children:Uu(F.date)}),e.jsx("div",{className:"font-semibold text-navy",children:F.title}),e.jsxs("div",{className:"text-xs text-slate",children:[F.type,"  ",F.platform,"  ",F.durationSec?`${Math.round(F.durationSec/60)}m`:""]})]}),e.jsxs("div",{className:"text-sm text-right",children:[e.jsx("div",{className:"px-2 py-1 rounded-full bg-slate-100 text-slate-800 text-xs",children:F.status}),e.jsx("div",{className:"text-xs text-slate mt-2",children:H[F.assignedTo]||F.assignedTo||"-"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("button",{onClick:()=>L(F),className:"text-royal text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>M(F._id),className:"text-red-600 text-sm",children:"Delete"}),F.assetLink&&e.jsx("a",{className:"text-royal text-sm",href:F.assetLink,target:"_blank",rel:"noreferrer",children:"Asset"})]}),F.notes&&e.jsx("div",{className:"mt-2 text-xs text-slate",children:F.notes})]},F._id||`${F.title}-${F.date}`)),Z.length===0&&e.jsx("div",{className:"text-slate",children:"No results"})]}),e.jsxs("div",{className:"hidden md:block bg-white rounded-xl shadow-sm overflow-auto",children:[e.jsxs("div",{className:"p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate",children:["Showing ",Z.length," of ",t.length," items"]}),e.jsx("div",{children:e.jsx("button",{onClick:$,className:"bg-royal text-white px-3 py-2 rounded-xl",children:"New Work"})})]}),e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-slate text-sm",children:[e.jsx("th",{className:"px-4 py-3",children:"Date"}),e.jsx("th",{className:"px-4 py-3",children:"Title"}),e.jsx("th",{className:"px-4 py-3",children:"Type"}),e.jsx("th",{className:"px-4 py-3",children:"Platform"}),e.jsx("th",{className:"px-4 py-3",children:"Assigned"}),e.jsx("th",{className:"px-4 py-3",children:"Duration"}),e.jsx("th",{className:"px-4 py-3",children:"Status"}),e.jsx("th",{className:"px-4 py-3",children:"Notes"}),e.jsx("th",{className:"px-4 py-3",children:"Actions"})]})}),e.jsxs("tbody",{children:[Z.map(F=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:Uu(F.date)}),e.jsx("td",{className:"px-4 py-3 align-top text-sm font-semibold",children:F.title}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:F.type}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:F.platform}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:H[F.assignedTo]||F.assignedTo||"-"}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:F.durationSec?`${Math.round(F.durationSec/60)}m`:"-"}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:e.jsx("span",{className:"px-2 py-1 rounded-full bg-slate-100 text-slate-800 text-xs",children:F.status})}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:F.notes?F.notes.length>120?`${F.notes.slice(0,120)}...`:F.notes:"-"}),e.jsx("td",{className:"px-4 py-3 align-top text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>L(F),className:"text-royal text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>M(F._id),className:"text-red-600 text-sm",children:"Delete"})]})})]},F._id||`${F.title}-${F.date}`)),Z.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-6 text-slate",colSpan:9,children:"No results"})})]})]})]})]})}),e.jsx(bw,{visible:d,payload:x,setPayload:m,onClose:()=>u(!1),onSave:D,saving:h,error:w,users:A,types:p,platforms:v})]})}function bw({visible:t,payload:s,setPayload:n,onClose:r,onSave:a,saving:l,error:i,users:o,types:d,platforms:u}){const[x,m]=c.useState(""),[h,g]=c.useState(!1),[w,j]=c.useState(-1),A=c.useRef(null),[b,p]=c.useState("");if(c.useEffect(()=>{const C=setTimeout(()=>p(x||""),150);return()=>clearTimeout(C)},[x]),c.useEffect(()=>{if(!s){m("");return}const C=o&&o.find(k=>s.assignedTo&&(k._id===s.assignedTo||k.id===s.assignedTo));if(C){m(C.name||C.email);return}const E=o&&o.find(k=>k.name&&s.assignedTo&&k.name===s.assignedTo||k.email&&s.assignedTo&&k.email===s.assignedTo);m(E?E.name||E.email:s.assignedTo||"")},[s,o]),!t)return null;const v=b&&o?o.filter(C=>{const E=b.toLowerCase();return C.name&&C.name.toLowerCase().includes(E)||C.email&&C.email.toLowerCase().includes(E)}).slice(0,6):[];function y(C){const E=C._id||C.id||C.email,k=C.name||C.email||E;n(O=>({...O||{},assignedTo:E})),m(k),g(!1),j(-1)}function N(C){!v||v.length===0||(C.key==="ArrowDown"?(C.preventDefault(),j(E=>E>=v.length-1?0:E+1),g(!0)):C.key==="ArrowUp"?(C.preventDefault(),j(E=>E<=0?v.length-1:E-1),g(!0)):C.key==="Enter"?w>=0&&w<v.length&&(C.preventDefault(),y(v[w])):C.key==="Escape"&&(g(!1),j(-1)))}return e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[s&&s._id?"Edit":"New"," MG Work"]}),e.jsx("button",{onClick:r,className:"text-slate",children:"Close"})]}),i&&e.jsx("div",{className:"text-red-600 mt-2",children:i}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[e.jsx("input",{type:"date",value:(s==null?void 0:s.date)||"",onChange:C=>n(E=>({...E,date:C.target.value})),className:"border rounded-xl px-3 py-2"}),e.jsx("input",{placeholder:"Title",value:(s==null?void 0:s.title)||"",onChange:C=>n(E=>({...E,title:C.target.value})),className:"border rounded-xl px-3 py-2"}),e.jsx("select",{value:(s==null?void 0:s.type)||d[0],onChange:C=>n(E=>({...E,type:C.target.value})),className:"border rounded-xl px-3 py-2",children:d.map(C=>e.jsx("option",{value:C,children:C},C))}),e.jsx("select",{value:(s==null?void 0:s.platform)||u[0],onChange:C=>n(E=>({...E,platform:C.target.value})),className:"border rounded-xl px-3 py-2",children:u.map(C=>e.jsx("option",{value:C,children:C},C))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:A,id:"mg-assigned-input","aria-autocomplete":"list","aria-controls":"mg-assigned-listbox","aria-expanded":h,"aria-activedescendant":w>=0&&v[w]?`mg-assigned-opt-${w}`:void 0,placeholder:"Assigned To (type to search)",value:x||"",onChange:C=>{m(C.target.value),n(E=>({...E,assignedTo:C.target.value})),g(!0),j(-1)},onFocus:()=>g(!0),onKeyDown:N,className:"border rounded-xl px-3 py-2 w-full"}),h&&v.length>0&&e.jsx("div",{id:"mg-assigned-listbox",role:"listbox","aria-labelledby":"mg-assigned-input",className:"absolute z-40 bg-white border mt-1 rounded-lg w-full max-h-44 overflow-auto shadow-sm",children:v.map((C,E)=>e.jsxs("div",{id:`mg-assigned-opt-${E}`,role:"option","aria-selected":E===w,onMouseDown:()=>y(C),className:`px-3 py-2 cursor-pointer ${E===w?"bg-slate-100":"hover:bg-slate-50"}`,children:[e.jsx("div",{className:"text-sm font-medium",children:C.name||C.email}),C.email&&e.jsx("div",{className:"text-xs text-slate",children:C.email})]},C._id||C.email))})]}),e.jsx("input",{placeholder:"Duration (sec)",type:"number",value:(s==null?void 0:s.durationSec)||"",onChange:C=>n(E=>({...E,durationSec:Number(C.target.value)})),className:"border rounded-xl px-3 py-2"}),e.jsx("input",{placeholder:"Asset Link",value:(s==null?void 0:s.assetLink)||"",onChange:C=>n(E=>({...E,assetLink:C.target.value})),className:"border rounded-xl px-3 py-2 md:col-span-2"}),e.jsxs("select",{value:(s==null?void 0:s.status)||"Queued",onChange:C=>n(E=>({...E,status:C.target.value})),className:"border rounded-xl px-3 py-2",children:[e.jsx("option",{children:"Queued"}),e.jsx("option",{children:"InProgress"}),e.jsx("option",{children:"Review"}),e.jsx("option",{children:"Done"}),e.jsx("option",{children:"Hold"})]}),e.jsx("textarea",{placeholder:"Notes",value:(s==null?void 0:s.notes)||"",onChange:C=>n(E=>({...E,notes:C.target.value})),className:"border rounded-xl px-3 py-2 md:col-span-2"})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:r,className:"px-3 py-2 rounded-xl border",children:"Cancel"}),e.jsx("button",{onClick:()=>a(s),disabled:l,className:"px-3 py-2 rounded-xl bg-royal text-white",children:l?"Saving...":"Save"})]})]})})}function jw(){var H,Z,W,F,q,se,I,z,G,V,te,ae;const{user:t}=xe();if((t==null?void 0:t.role)!=="Coordinator"&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin")return e.jsx("div",{className:"text-royal",children:"Access denied"});const[s,n]=c.useState([]),[r,a]=c.useState([]),[l,i]=c.useState(""),[o,d]=c.useState(!0),[u,x]=c.useState(!1),[m,h]=c.useState(null),[g,w]=c.useState(null),[j,A]=c.useState(!1),[b,p]=c.useState(!1),[v,y]=c.useState(null),[N,C]=c.useState(null),[E,k]=c.useState({followUpType:"Call",note:"",amountPromised:"",updatedNextPaymentDate:""}),[O,U]=c.useState({collectingAmount:"",paymentMethod:"Cash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""}),B=async()=>{try{const{students:K}=await _.getStudentsWithDues();n(K||[]),a(K||[]);const T=sessionStorage.getItem("openPaymentId");if(T&&K&&K.length>0){const ee=K.find(Y=>Y._id===T);ee&&(setTimeout(()=>{R(ee)},100),sessionStorage.removeItem("openPaymentId"),sessionStorage.removeItem("openPaymentData"))}}catch(K){C(K.message)}finally{d(!1)}};c.useEffect(()=>{B()},[]),c.useEffect(()=>{if(l.trim()==="")a(s);else{const K=l.toLowerCase(),T=s.filter(ee=>{var Y,ne,de,he,ce,ue,pe;return((ne=(Y=ee.lead)==null?void 0:Y.leadId)==null?void 0:ne.toLowerCase().includes(K))||((he=(de=ee.lead)==null?void 0:de.name)==null?void 0:he.toLowerCase().includes(K))||((ue=(ce=ee.lead)==null?void 0:ce.phone)==null?void 0:ue.includes(K))||((pe=ee.courseName)==null?void 0:pe.toLowerCase().includes(K))});a(T)}},[l,s]);const R=async K=>{h(K),x(!0);try{const T=await _.getStudentHistory(K._id);w(T)}catch(T){C(T.message)}},S=()=>{x(!1),h(null),w(null),A(!1),p(!1),k({followUpType:"Call",note:"",amountPromised:"",updatedNextPaymentDate:""}),U({collectingAmount:"",paymentMethod:"Cash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""})},P=K=>{h(K),p(!0),U({collectingAmount:"",paymentMethod:"Cash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""})},D=K=>{h(K),A(!0),k({followUpType:"Call",note:"",amountPromised:"",updatedNextPaymentDate:""})},$=async K=>{if(K.preventDefault(),y(null),C(null),(t==null?void 0:t.role)!=="Coordinator"){C("Only Coordinators can add follow-ups");return}try{await _.addFollowUp({admissionFeeId:m._id,leadId:m.lead._id,...E,amountPromised:Number(E.amountPromised)||0}),y("Follow-up added successfully"),A(!1),k({followUpType:"Call",note:"",amountPromised:"",updatedNextPaymentDate:""}),h(null),B()}catch(T){C(T.message)}},L=async K=>{if(K.preventDefault(),y(null),C(null),(t==null?void 0:t.role)!=="Coordinator"){C("Only Coordinators can collect payments");return}const T=Number(O.collectingAmount)||0;if(T<=0){C("Collecting amount must be greater than 0");return}if(T>m.dueAmount){C(`Cannot collect more than due amount (${m.dueAmount})`);return}try{await _.updateAdmissionFeePayment({admissionFeeId:m._id,additionalPayment:T,paymentMethod:O.paymentMethod,paymentDate:O.paymentDate,nextPaymentDate:O.nextPaymentDate,note:O.note}),y(`Successfully submitted due collection of ${T} for approval`),p(!1),U({collectingAmount:"",paymentMethod:"Cash",paymentDate:new Date().toISOString().slice(0,10),nextPaymentDate:"",note:""}),h(null),B()}catch(ee){C(ee.message)}};if(o)return e.jsx("div",{className:"p-6",children:"Loading..."});const M=K=>{if(!K)return!1;const T=new Date;return T.setHours(0,0,0,0),new Date(K)<T};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy",children:"Due Fees Collection"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and follow up on pending student payments"})]})}),v&&e.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg",children:v}),N&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:N}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(pn,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by Lead ID, Name, Phone, or Course...",value:l,onChange:K=>i(K.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Student"}),e.jsx("th",{className:"p-3 text-left",children:"Course"}),e.jsx("th",{className:"p-3 text-left",children:"Total Amount"}),e.jsx("th",{className:"p-3 text-left",children:"Paid"}),e.jsx("th",{className:"p-3 text-left",children:"Due"}),e.jsx("th",{className:"p-3 text-left",children:"Next Payment"}),e.jsx("th",{className:"p-3 text-left",children:"Admitted Date"}),e.jsx("th",{className:"p-3 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[r.map(K=>{var T,ee,Y,ne,de,he;return e.jsxs("tr",{className:`border-t hover:bg-gray-50 ${M(K.nextPaymentDate)?"bg-red-50":""}`,children:[e.jsxs("td",{className:"p-3",children:[e.jsxs("div",{className:"font-semibold text-navy",children:[(T=K.lead)==null?void 0:T.leadId,"  ",(ee=K.lead)==null?void 0:ee.name]}),e.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-3 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(dl,{size:12}),(Y=K.lead)==null?void 0:Y.phone]}),((ne=K.lead)==null?void 0:ne.email)&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(tp,{size:12}),(de=K.lead)==null?void 0:de.email]})]})]}),e.jsx("td",{className:"p-3",children:K.courseName}),e.jsxs("td",{className:"p-3 font-semibold",children:[" ",K.totalAmount||0]}),e.jsxs("td",{className:"p-3 text-green-600 font-semibold",children:[" ",K.amount||0]}),e.jsxs("td",{className:"p-3 text-orange-600 font-bold",children:[" ",K.dueAmount||0]}),e.jsx("td",{className:"p-3",children:K.nextPaymentDate?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:new Date(K.nextPaymentDate).toLocaleDateString("en-GB")}),M(K.nextPaymentDate)&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-red-600 font-medium mt-1",children:[e.jsx(Lt,{size:12}),"Overdue"]})]}):e.jsx("span",{className:"text-gray-400",children:"Not set"})}),e.jsx("td",{className:"p-3",children:(he=K.lead)!=null&&he.admittedAt?new Date(K.lead.admittedAt).toLocaleDateString("en-GB"):"N/A"}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{onClick:()=>P(K),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-green-500 text-white rounded-lg text-xs font-medium hover:bg-green-600 transition-colors",children:[e.jsx($e,{size:14}),"Collect Due"]}),e.jsxs("button",{onClick:()=>D(K),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-orange-500 text-white rounded-lg text-xs font-medium hover:bg-orange-600 transition-colors",children:[e.jsx(dl,{size:14}),"Follow Up"]}),e.jsxs("button",{onClick:()=>R(K),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-500 text-white rounded-lg text-xs font-medium hover:bg-blue-600 transition-colors",children:[e.jsx(hi,{size:14}),"Details"]})]})})]},K._id)}),r.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-8 text-center text-gray-500",children:l?"No students found matching your search":"No students with due fees"})})]})]})}),u&&m&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto my-8",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-navy",children:"Student Payment Details"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(H=m.lead)==null?void 0:H.leadId,"  ",(Z=m.lead)==null?void 0:Z.name]})]}),e.jsx("button",{onClick:S,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-bold text-navy mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Student Information"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Lead ID:"})," ",e.jsx("span",{className:"font-semibold",children:(W=m.lead)==null?void 0:W.leadId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"})," ",e.jsx("span",{className:"font-semibold",children:(F=m.lead)==null?void 0:F.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",e.jsx("span",{className:"font-semibold",children:(q=m.lead)==null?void 0:q.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"})," ",e.jsx("span",{className:"font-semibold",children:((se=m.lead)==null?void 0:se.email)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Admitted:"})," ",e.jsx("span",{className:"font-semibold",children:(I=m.lead)!=null&&I.admittedAt?new Date(m.lead.admittedAt).toLocaleDateString("en-GB"):"N/A"})]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-bold text-navy mb-3 flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"}),"Payment Summary"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Course:"})," ",e.jsx("span",{className:"font-semibold",children:m.courseName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"})," ",e.jsxs("span",{className:"font-bold text-lg",children:[" ",m.totalAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Amount Paid:"})," ",e.jsxs("span",{className:"font-bold text-lg text-green-600",children:[" ",m.amount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Due Amount:"})," ",e.jsxs("span",{className:"font-bold text-lg text-orange-600",children:[" ",m.dueAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"})," ",e.jsx("span",{className:"font-semibold",children:m.method})]})]})]})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-bold text-navy mb-3 flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5"}),"Important Dates"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payment Date:"}),e.jsx("p",{className:"font-semibold",children:new Date(m.paymentDate).toLocaleDateString("en-GB")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Next Payment Date:"}),e.jsx("p",{className:"font-semibold",children:m.nextPaymentDate?new Date(m.nextPaymentDate).toLocaleDateString("en-GB"):"Not set"}),M(m.nextPaymentDate)&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-red-600 font-medium mt-1",children:[e.jsx(Lt,{size:12}),"Overdue"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Submitted:"}),e.jsx("p",{className:"font-semibold",children:new Date(m.createdAt).toLocaleDateString("en-GB")})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-bold text-navy flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Follow-up History (",((z=g.followUps)==null?void 0:z.length)||0,")"]}),(t==null?void 0:t.role)==="Coordinator"&&e.jsx("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors",children:"Add Follow-up"})]}),g.followUps&&g.followUps.length>0?e.jsx("div",{className:"space-y-3",children:g.followUps.map(K=>{var T;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{children:[e.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium mr-2",children:K.followUpType}),e.jsxs("span",{className:"text-xs text-gray-600",children:["by ",(T=K.coordinator)==null?void 0:T.name,"  ",new Date(K.createdAt).toLocaleString("en-GB")]})]})}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap mb-2",children:K.note}),(K.amountPromised>0||K.updatedNextPaymentDate)&&e.jsxs("div",{className:"flex gap-4 text-xs text-gray-600 mt-2 pt-2 border-t",children:[K.amountPromised>0&&e.jsxs("span",{children:["Amount Promised:  ",K.amountPromised]}),K.updatedNextPaymentDate&&e.jsxs("span",{children:["Next Payment Updated: ",new Date(K.updatedNextPaymentDate).toLocaleDateString("en-GB")]})]})]},K._id)})}):e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No follow-ups yet"})]}),j&&(t==null?void 0:t.role)==="Coordinator"&&e.jsxs("div",{className:"bg-white border-2 border-blue-300 rounded-xl p-5",children:[e.jsx("h4",{className:"font-bold text-navy mb-4",children:"Add New Follow-up"}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Follow-up Type *"}),e.jsxs("select",{value:E.followUpType,onChange:K=>k(T=>({...T,followUpType:K.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{children:"Call"}),e.jsx("option",{children:"SMS"}),e.jsx("option",{children:"Email"}),e.jsx("option",{children:"Visit"}),e.jsx("option",{children:"WhatsApp"}),e.jsx("option",{children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Notes *"}),e.jsx("textarea",{rows:"3",value:E.note,onChange:K=>k(T=>({...T,note:K.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Enter follow-up details...",required:!0})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Amount Promised (Optional)"}),e.jsx("input",{type:"number",value:E.amountPromised,onChange:K=>k(T=>({...T,amountPromised:K.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Update Next Payment Date (Optional)"}),e.jsx("input",{type:"date",value:E.updatedNextPaymentDate,onChange:K=>k(T=>({...T,updatedNextPaymentDate:K.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>{A(!1),k({followUpType:"Call",note:"",amountPromised:"",updatedNextPaymentDate:""})},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors",children:"Save Follow-up"})]})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 p-4 flex justify-end",children:e.jsx("button",{onClick:S,className:"px-6 py-2 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors",children:"Close"})})]})}),b&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-navy",children:"Collect Due Payment"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(G=m.lead)==null?void 0:G.leadId,"  ",(V=m.lead)==null?void 0:V.name]})]}),e.jsx("button",{onClick:()=>{p(!1),h(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:L,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-bold text-navy mb-3 flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"}),"Payment Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("p",{className:"font-bold text-lg",children:[" ",m.totalAmount||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Paid So Far:"}),e.jsxs("p",{className:"font-bold text-lg text-green-600",children:[" ",m.amount||0]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Due Amount:"}),e.jsxs("p",{className:"font-bold text-2xl text-orange-600",children:[" ",m.dueAmount||0]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Collecting Amount Now *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-semibold",children:""}),e.jsx("input",{type:"number",value:O.collectingAmount,onChange:K=>U(T=>({...T,collectingAmount:K.target.value})),className:"w-full border-2 border-green-300 rounded-lg pl-8 pr-3 py-3 text-lg font-bold focus:outline-none focus:ring-2 focus:ring-green-500 bg-green-50",placeholder:"0",min:"1",max:m.dueAmount,required:!0})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Maximum:  ",m.dueAmount]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Payment Method *"}),e.jsxs("select",{value:O.paymentMethod,onChange:K=>U(T=>({...T,paymentMethod:K.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select payment method"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Mobile Banking (bKash)",children:"Mobile Banking (bKash)"}),e.jsx("option",{value:"Mobile Banking (Nagad)",children:"Mobile Banking (Nagad)"}),e.jsx("option",{value:"Mobile Banking (Rocket)",children:"Mobile Banking (Rocket)"}),e.jsx("option",{value:"Check",children:"Check"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Payment Date *"}),e.jsx("input",{type:"date",value:O.paymentDate,onChange:K=>U(T=>({...T,paymentDate:K.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Next Payment Date (Optional)"}),e.jsx("input",{type:"date",value:O.nextPaymentDate,onChange:K=>U(T=>({...T,nextPaymentDate:K.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.nextPaymentDate&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Current: ",new Date(m.nextPaymentDate).toLocaleDateString("en-GB")]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Set when customer will make next payment"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Note (Optional)"}),e.jsx("textarea",{rows:"2",value:O.note,onChange:K=>U(T=>({...T,note:K.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Add any notes about this collection..."})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>{p(!1),h(null)},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg text-sm font-bold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx($e,{size:16}),"Collect Payment"]})]})]})]})}),j&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-navy",children:"Add Follow-up"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(te=m.lead)==null?void 0:te.leadId,"  ",(ae=m.lead)==null?void 0:ae.name]})]}),e.jsx("button",{onClick:()=>{A(!1),h(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:$,className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Current Due Amount:"}),e.jsxs("span",{className:"font-bold text-xl text-orange-600",children:[" ",m.dueAmount||0]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Follow-up Type *"}),e.jsxs("select",{value:E.followUpType,onChange:K=>k(T=>({...T,followUpType:K.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{children:"Call"}),e.jsx("option",{children:"SMS"}),e.jsx("option",{children:"Email"}),e.jsx("option",{children:"Visit"}),e.jsx("option",{children:"WhatsApp"}),e.jsx("option",{children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Notes *"}),e.jsx("textarea",{rows:"3",value:E.note,onChange:K=>k(T=>({...T,note:K.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Enter follow-up details, conversation summary, student response...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Amount Promised (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:""}),e.jsx("input",{type:"number",value:E.amountPromised,onChange:K=>k(T=>({...T,amountPromised:K.target.value})),className:"w-full border border-gray-300 rounded-lg pl-8 pr-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-navy mb-1.5",children:"Update Next Payment Date (Optional)"}),e.jsx("input",{type:"date",value:E.updatedNextPaymentDate,onChange:K=>k(T=>({...T,updatedNextPaymentDate:K.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.nextPaymentDate&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Current: ",new Date(m.nextPaymentDate).toLocaleDateString("en-GB")]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>{A(!1),h(null)},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg text-sm font-bold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(dl,{size:16}),"Save Follow-up"]})]})]})]})})]})}function Nw(){const{user:t}=xe();if((t==null?void 0:t.role)!=="Coordinator"&&(t==null?void 0:t.role)!=="Admin"&&(t==null?void 0:t.role)!=="SuperAdmin")return e.jsx("div",{className:"text-royal",children:"Access denied"});const[s,n]=c.useState([]),[r,a]=c.useState(!0);if(c.useEffect(()=>{(async()=>{try{const{notifications:d}=await _.getPaymentNotifications();n(d||[])}catch(d){console.error(d)}finally{a(!1)}})()},[]),r)return e.jsx("div",{className:"p-6",children:"Loading..."});const l=s.filter(o=>o.isOverdue),i=s.filter(o=>!o.isOverdue);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-navy",children:"Payment Reminders"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Upcoming and overdue payment notifications"})]}),l.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Lt,{className:"text-red-600",size:24}),e.jsxs("h2",{className:"text-xl font-bold text-red-600",children:["Overdue Payments (",l.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:l.map(o=>{var d,u,x,m;return e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-5 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-navy",children:[(d=o.lead)==null?void 0:d.leadId,"  ",(u=o.lead)==null?void 0:u.name]}),e.jsx("span",{className:"px-3 py-1 bg-red-600 text-white rounded-full text-xs font-bold",children:"OVERDUE"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-2 text-sm text-gray-700",children:[e.jsxs("div",{children:[" ",(x=o.lead)==null?void 0:x.phone]}),((m=o.lead)==null?void 0:m.email)&&e.jsxs("div",{children:[" ",o.lead.email]}),e.jsxs("div",{children:[" Course: ",o.courseName]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($e,{size:14}),"Due:  ",o.dueAmount||0]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{size:14}),"Expected: ",new Date(o.nextPaymentDate).toLocaleDateString("en-GB")]})]})]}),e.jsx(Qs,{to:"/coordinator/due-fees",className:"ml-4 px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors",children:"Follow Up"})]})},o._id)})})]}),i.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(fe,{className:"text-orange-600",size:24}),e.jsxs("h2",{className:"text-xl font-bold text-orange-600",children:["Upcoming Payments (",i.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:i.map(o=>{var d,u,x,m;return e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-5 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-navy",children:[(d=o.lead)==null?void 0:d.leadId,"  ",(u=o.lead)==null?void 0:u.name]}),e.jsxs("span",{className:"px-3 py-1 bg-orange-500 text-white rounded-full text-xs font-bold",children:[o.daysUntil," DAYS LEFT"]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-2 text-sm text-gray-700",children:[e.jsxs("div",{children:[" ",(x=o.lead)==null?void 0:x.phone]}),((m=o.lead)==null?void 0:m.email)&&e.jsxs("div",{children:[" ",o.lead.email]}),e.jsxs("div",{children:[" Course: ",o.courseName]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($e,{size:14}),"Due:  ",o.dueAmount||0]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{size:14}),"Due Date: ",new Date(o.nextPaymentDate).toLocaleDateString("en-GB")]})]})]}),e.jsx(Qs,{to:"/coordinator/due-fees",className:"ml-4 px-4 py-2 bg-orange-500 text-white rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors",children:"View Details"})]})},o._id)})})]}),s.length===0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-soft p-12 text-center",children:[e.jsx(fe,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No upcoming or overdue payments"})]})]})}function ww(){const{user:t}=xe(),[s,n]=c.useState("leave"),[r,a]=c.useState([]),[l,i]=c.useState([]),[o,d]=c.useState([]),[u,x]=c.useState([]),[m,h]=c.useState(!1),[g,w]=c.useState(!1),[j,A]=c.useState(null),[b,p]=c.useState(""),[v,y]=c.useState(""),[N,C]=c.useState(null),[E,k]=c.useState(null),[O,U]=c.useState(!1),[B,R]=c.useState(null),[S,P]=c.useState(null),[D,$]=c.useState({leaveType:"Casual Leave",startDate:"",endDate:"",reason:"",handoverTo:""}),[L,M]=c.useState({applicationType:"TA/DA",purpose:"",travelDate:"",destination:"",amount:"",description:""}),H=(t==null?void 0:t.role)==="SuperAdmin";c.useEffect(()=>{H||(Z(),W(),F())},[]),c.useEffect(()=>{const T=async()=>{const ee=sessionStorage.getItem("openHandoverRequestId"),Y=sessionStorage.getItem("handoverNotificationId");if(ee&&o.length>0){console.log(" Opening handover modal for request:",ee);const ne=o.find(de=>de._id===ee);if(ne&&(A(ne),n("handover"),Y))try{await _.markNotificationRead(Y)}catch(de){console.error("Failed to mark notification as read:",de)}sessionStorage.removeItem("openHandoverRequestId"),sessionStorage.removeItem("handoverNotificationId")}};o.length>0&&T()},[o]);const Z=async()=>{try{const[T,ee]=await Promise.all([_.getMyLeaveApplications(),_.getMyTADAApplications()]);a(T.applications||[]),i(ee.applications||[])}catch(T){k(T.message)}},W=async()=>{try{const T=await _.listUsers();x((T.users||[]).filter(ee=>ee.role!=="SuperAdmin"&&ee._id!==(t==null?void 0:t.id)))}catch(T){console.error("Failed to load employees:",T)}},F=async()=>{try{const T=await _.getHandoverRequests();d(T.requests||[])}catch(T){console.error("Failed to load handover requests:",T)}},q=async T=>{T.preventDefault(),C(null),k(null),U(!0);try{const ee={...D};ee.handoverTo||delete ee.handoverTo,B?(await _.updateLeaveApplication(B,ee),C("Leave application updated successfully! "),R(null)):(await _.createLeaveApplication(ee),C("Leave application submitted successfully! ")),$({leaveType:"Casual Leave",startDate:"",endDate:"",reason:"",handoverTo:""}),h(!1),Z()}catch(ee){k(ee.message)}finally{U(!1)}},se=async()=>{if(j){if(b==="deny"&&!v.trim()){k("Please provide a reason for denying the handover");return}U(!0),C(null),k(null);try{b==="accept"?(await _.acceptHandover(j._id,v),C("Handover request accepted successfully! ")):(await _.denyHandover(j._id,v),C("Handover request denied")),A(null),y(""),p(""),F(),Z(),window.scrollTo({top:0,behavior:"smooth"})}catch(T){k(T.message)}finally{U(!1)}}},I=async T=>{T.preventDefault(),C(null),k(null),U(!0);try{S?(await _.updateTADAApplication(S,L),C("TA/DA application updated successfully! "),P(null)):(await _.createTADAApplication(L),C("TA/DA application submitted successfully! ")),M({applicationType:"TA/DA",purpose:"",travelDate:"",destination:"",amount:"",description:""}),w(!1),Z()}catch(ee){k(ee.message)}finally{U(!1)}},z=T=>{var ee;R(T._id),$({leaveType:T.leaveType,startDate:T.startDate.split("T")[0],endDate:T.endDate.split("T")[0],reason:T.reason,handoverTo:((ee=T.handoverTo)==null?void 0:ee._id)||""}),h(!0),window.scrollTo({top:0,behavior:"smooth"})},G=async T=>{if(confirm("Are you sure you want to delete this leave application? This action cannot be undone.")){U(!0),C(null),k(null);try{await _.deleteLeaveApplication(T),C("Leave application deleted successfully"),Z(),window.scrollTo({top:0,behavior:"smooth"})}catch(ee){k(ee.message)}finally{U(!1)}}},V=T=>{P(T._id),M({applicationType:T.applicationType,purpose:T.purpose,travelDate:T.travelDate.split("T")[0],destination:T.destination||"",amount:T.amount,description:T.description||""}),w(!0),window.scrollTo({top:0,behavior:"smooth"})},te=async T=>{if(confirm("Are you sure you want to delete this TA/DA application? This action cannot be undone.")){U(!0),C(null),k(null);try{await _.deleteTADAApplication(T),C("TA/DA application deleted successfully"),Z(),window.scrollTo({top:0,behavior:"smooth"})}catch(ee){k(ee.message)}finally{U(!1)}}},ae=T=>({Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800",Paid:"bg-blue-100 text-blue-800"})[T]||"bg-gray-100 text-gray-800",K=T=>{switch(T){case"Approved":return et;case"Rejected":return xs;case"Paid":return et;default:return Rt}};return H?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-xl text-gray-600",children:"SuperAdmin cannot apply for leave or TA/DA."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"My Applications"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Apply for leave and travel allowance"})]}),N&&e.jsxs("div",{className:"p-4 bg-green-50 border-l-4 border-green-500 rounded-lg flex items-start gap-3",children:[e.jsx(et,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-green-800 font-medium",children:N})]}),E&&e.jsxs("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 rounded-lg flex items-start gap-3",children:[e.jsx(Lt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-red-800 font-medium",children:E})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>h(!0),className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl p-6 hover:shadow-lg transition-all flex items-center justify-center gap-3",children:[e.jsx(fe,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-semibold",children:"Apply for Leave"})]}),e.jsxs("button",{onClick:()=>w(!0),className:"bg-gradient-to-r from-orange-500 to-pink-600 text-white rounded-xl p-6 hover:shadow-lg transition-all flex items-center justify-center gap-3",children:[e.jsx(Hn,{className:"w-6 h-6"}),e.jsx("span",{className:"text-lg font-semibold",children:"Apply for TA/DA"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>n("leave"),className:`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center gap-2 ${s==="leave"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(fe,{className:"w-5 h-5"}),"Leave Applications (",r.length,")"]}),e.jsxs("button",{onClick:()=>n("tada"),className:`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center gap-2 ${s==="tada"?"bg-orange-50 text-orange-600 border-b-2 border-orange-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(Hn,{className:"w-5 h-5"}),"TA/DA Applications (",l.length,")"]}),e.jsxs("button",{onClick:()=>n("handover"),className:`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center gap-2 ${s==="handover"?"bg-green-50 text-green-600 border-b-2 border-green-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(Ae,{className:"w-5 h-5"}),"Handover Requests (",o.length,")"]})]}),e.jsxs("div",{className:"p-6",children:[s==="leave"&&e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(fe,{className:"w-16 h-16 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No leave applications yet"})]}):r.map(T=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${ae(T.status)}`,children:[ge.createElement(K(T.status),{className:"w-4 h-4 inline mr-1"}),T.status]}),e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:T.leaveType})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(T.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Start Date"}),e.jsx("p",{className:"font-medium text-gray-800",children:new Date(T.startDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"End Date"}),e.jsx("p",{className:"font-medium text-gray-800",children:new Date(T.endDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Duration"}),e.jsxs("p",{className:"font-medium text-gray-800",children:[T.totalDays," day(s)"]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Reason"}),e.jsx("p",{className:"text-sm text-gray-700",children:T.reason})]}),T.handoverTo&&e.jsxs("div",{className:"p-3 rounded-lg bg-indigo-50 mb-3",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-600 mb-1 flex items-center gap-1",children:[e.jsx(Ae,{className:"w-3 h-3"}),"Responsibility Handover"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-800",children:[T.handoverTo.name," (",T.handoverTo.role,")"]}),T.handoverNote&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:T.handoverNote})]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T.handoverStatus==="Accepted"?"bg-green-100 text-green-800":T.handoverStatus==="Denied"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[T.handoverStatus==="Accepted"&&e.jsx(Vn,{className:"w-3 h-3 inline mr-1"}),T.handoverStatus==="Denied"&&e.jsx($r,{className:"w-3 h-3 inline mr-1"}),T.handoverStatus==="Pending"&&e.jsx(Rt,{className:"w-3 h-3 inline mr-1"}),T.handoverStatus]})]})]}),T.reviewNote&&e.jsxs("div",{className:`p-3 rounded-lg ${T.status==="Approved"?"bg-green-50":"bg-red-50"}`,children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Review Note"}),e.jsx("p",{className:"text-sm text-gray-700",children:T.reviewNote}),T.reviewedBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["by ",T.reviewedBy.name," on ",new Date(T.reviewedAt).toLocaleDateString()]})]}),T.status==="Pending"&&e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>z(T),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Vu,{className:"w-4 h-4"}),"Edit"]}),e.jsxs("button",{onClick:()=>G(T._id),className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(jn,{className:"w-4 h-4"}),"Delete"]})]})]},T._id))}),s==="tada"&&e.jsx("div",{className:"space-y-4",children:l.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(Hn,{className:"w-16 h-16 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No TA/DA applications yet"})]}):l.map(T=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${ae(T.adminStatus)}`,children:[ge.createElement(K(T.adminStatus),{className:"w-4 h-4 inline mr-1"}),"Admin: ",T.adminStatus]}),T.adminStatus==="Approved"&&e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${ae(T.paymentStatus)}`,children:[ge.createElement(K(T.paymentStatus),{className:"w-4 h-4 inline mr-1"}),"Payment: ",T.paymentStatus]}),e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:T.applicationType})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(T.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Travel Date"}),e.jsx("p",{className:"font-medium text-gray-800",children:new Date(T.travelDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Amount"}),e.jsx("p",{className:"font-medium text-gray-800 text-lg",children:Ce(T.amount)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Destination"}),e.jsx("p",{className:"font-medium text-gray-800",children:T.destination})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Purpose"}),e.jsx("p",{className:"text-sm text-gray-700",children:T.purpose})]}),T.description&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700",children:T.description})]}),T.adminReviewNote&&e.jsxs("div",{className:`p-3 rounded-lg mb-2 ${T.adminStatus==="Approved"?"bg-green-50":"bg-red-50"}`,children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Admin Review"}),e.jsx("p",{className:"text-sm text-gray-700",children:T.adminReviewNote}),T.adminReviewedBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["by ",T.adminReviewedBy.name," on ",new Date(T.adminReviewedAt).toLocaleDateString()]})]}),T.paymentNote&&e.jsxs("div",{className:"p-3 rounded-lg bg-blue-50",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Payment Note"}),e.jsx("p",{className:"text-sm text-gray-700",children:T.paymentNote}),T.paidBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Paid by ",T.paidBy.name," on ",new Date(T.paidAt).toLocaleDateString()]})]}),T.adminStatus==="Pending"&&e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>V(T),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Vu,{className:"w-4 h-4"}),"Edit"]}),e.jsxs("button",{onClick:()=>te(T._id),className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(jn,{className:"w-4 h-4"}),"Delete"]})]})]},T._id))}),s==="handover"&&e.jsx("div",{className:"space-y-4",children:o.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(Ae,{className:"w-16 h-16 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No handover requests"})]}):o.map(T=>e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-white rounded-lg p-5 border border-indigo-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:T.employee.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:T.employee.name}),e.jsx("p",{className:"text-xs text-gray-500",children:T.employee.role})]})]}),e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:T.leaveType})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(T.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3 p-3 bg-white rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Start Date"}),e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:new Date(T.startDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"End Date"}),e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:new Date(T.endDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Duration"}),e.jsxs("p",{className:"font-medium text-gray-800 text-sm",children:[T.totalDays," day(s)"]})]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Leave Reason"}),e.jsx("p",{className:"text-sm text-gray-700",children:T.reason})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>{A(T),p("accept")},className:"flex-1 bg-gradient-to-r from-green-500 to-teal-600 text-white py-2.5 rounded-lg font-medium hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(Vn,{className:"w-5 h-5"}),"Accept Handover"]}),e.jsxs("button",{onClick:()=>{A(T),p("deny")},className:"flex-1 bg-gradient-to-r from-red-500 to-pink-600 text-white py-2.5 rounded-lg font-medium hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx($r,{className:"w-5 h-5"}),"Deny Handover"]})]})]},T._id))})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-lg",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${b==="accept"?"bg-gradient-to-r from-green-500 to-teal-600":"bg-gradient-to-r from-red-500 to-pink-600"}`,children:b==="accept"?e.jsx(Vn,{className:"w-5 h-5 text-white"}):e.jsx($r,{className:"w-5 h-5 text-white"})}),e.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:[b==="accept"?"Accept":"Deny"," Handover"]})]})}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["From: ",e.jsx("span",{className:"font-semibold text-gray-800",children:j.employee.name})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Leave Type: ",e.jsx("span",{className:"font-semibold text-gray-800",children:j.leaveType})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Duration: ",e.jsxs("span",{className:"font-semibold text-gray-800",children:[j.totalDays," day(s)"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:b==="accept"?"Note (Optional)":"Reason for Denial *"}),e.jsx("textarea",{rows:"3",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none resize-none",value:v,onChange:T=>y(T.target.value),placeholder:b==="accept"?"Add any notes...":"Please explain why you are denying this request...",required:b==="deny"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{p(""),y("")},className:"px-5 py-2.5 rounded-lg border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50",children:"Back"}),e.jsx("button",{onClick:se,disabled:O||b==="deny"&&!v.trim(),className:`px-5 py-2.5 rounded-lg font-medium text-white ${b==="accept"?"bg-gradient-to-r from-green-500 to-teal-600 hover:shadow-lg":"bg-gradient-to-r from-red-500 to-pink-600 hover:shadow-lg"} disabled:opacity-50 transition-all`,children:O?"Processing...":b==="accept"?"Confirm Accept":"Confirm Deny"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg",children:e.jsx(Ae,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Handover Request"})]}),e.jsx("button",{onClick:()=>{A(null),y(""),p("")},className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsxs("p",{className:"text-sm font-semibold text-indigo-900 mb-3",children:[j.employee.name," has requested you to handle their responsibilities"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Leave Type:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:j.leaveType})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Duration:"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[j.totalDays," day(s)"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"From:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:new Date(j.startDate).toLocaleDateString("en-GB")})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"To:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:new Date(j.endDate).toLocaleDateString("en-GB")})]}),j.reason&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-indigo-200",children:[e.jsx("span",{className:"text-xs text-gray-600 block mb-1",children:"Reason:"}),e.jsx("p",{className:"text-sm text-gray-700",children:j.reason})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>p("deny"),className:"flex-1 px-5 py-3 rounded-lg border-2 border-red-200 text-red-600 font-medium hover:bg-red-50 transition flex items-center justify-center gap-2",children:[e.jsx($r,{size:18}),"Deny"]}),e.jsxs("button",{onClick:()=>p("accept"),className:"flex-1 px-5 py-3 rounded-lg bg-gradient-to-r from-green-500 to-teal-600 text-white font-medium hover:shadow-lg transition flex items-center justify-center gap-2",children:[e.jsx(Vn,{size:18}),"Accept"]})]})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("form",{onSubmit:q,className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:e.jsx(fe,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:B?"Edit Leave Application":"Apply for Leave"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Leave Type *"}),e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none",value:D.leaveType,onChange:T=>$(ee=>({...ee,leaveType:T.target.value})),required:!0,children:[e.jsx("option",{children:"Sick Leave"}),e.jsx("option",{children:"Casual Leave"}),e.jsx("option",{children:"Annual Leave"}),e.jsx("option",{children:"Emergency Leave"}),e.jsx("option",{children:"Unpaid Leave"}),e.jsx("option",{children:"Other"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none",value:D.startDate,onChange:T=>$(ee=>({...ee,startDate:T.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none",value:D.endDate,onChange:T=>$(ee=>({...ee,endDate:T.target.value})),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Responsibility Handover To"}),e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none",value:D.handoverTo,onChange:T=>$(ee=>({...ee,handoverTo:T.target.value})),children:[e.jsx("option",{value:"",children:"-- No Handover Required --"}),u.map(T=>e.jsxs("option",{value:T._id,children:[T.name," (",T.role,")"]},T._id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Select a colleague to handle your responsibilities during leave"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),e.jsx("textarea",{rows:"4",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none resize-none",value:D.reason,onChange:T=>$(ee=>({...ee,reason:T.target.value})),placeholder:"Please explain your reason for leave...",required:!0})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),R(null),$({leaveType:"Casual Leave",startDate:"",endDate:"",reason:"",handoverTo:""})},className:"px-5 py-2.5 rounded-lg border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:O,className:"px-5 py-2.5 rounded-lg bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50",children:O?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bl,{className:"w-4 h-4"}),"Submit Application"]})})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("form",{onSubmit:I,className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-orange-500 to-pink-600 rounded-lg",children:e.jsx(Hn,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:S?"Edit TA/DA Application":"Apply for TA/DA"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Application Type *"}),e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none",value:L.applicationType,onChange:T=>M(ee=>({...ee,applicationType:T.target.value})),required:!0,children:[e.jsx("option",{children:"TA"}),e.jsx("option",{children:"DA"}),e.jsx("option",{children:"TA/DA"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Travel Date *"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none",value:L.travelDate,onChange:T=>M(ee=>({...ee,travelDate:T.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (BDT) *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none",value:L.amount,onChange:T=>M(ee=>({...ee,amount:T.target.value})),placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination *"}),e.jsx("input",{type:"text",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none",value:L.destination,onChange:T=>M(ee=>({...ee,destination:T.target.value})),placeholder:"e.g., Dhaka to Chittagong",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose *"}),e.jsx("input",{type:"text",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none",value:L.purpose,onChange:T=>M(ee=>({...ee,purpose:T.target.value})),placeholder:"e.g., Business meeting, Training session",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{rows:"3",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none resize-none",value:L.description,onChange:T=>M(ee=>({...ee,description:T.target.value})),placeholder:"Additional details about your travel..."})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{w(!1),P(null),M({applicationType:"TA/DA",purpose:"",travelDate:"",destination:"",amount:"",description:""})},className:"px-5 py-2.5 rounded-lg border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:O,className:"px-5 py-2.5 rounded-lg bg-gradient-to-r from-orange-500 to-pink-600 text-white font-semibold hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50",children:O?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bl,{className:"w-4 h-4"}),"Submit Application"]})})]})]})})]})}function Sw(){const[t,s]=c.useState("leave"),[n,r]=c.useState("Pending"),[a,l]=c.useState("Pending"),[i,o]=c.useState([]),[d,u]=c.useState([]),[x,m]=c.useState(null),[h,g]=c.useState(!1),[w,j]=c.useState(""),[A,b]=c.useState(""),[p,v]=c.useState(!1),[y,N]=c.useState(null),[C,E]=c.useState(null);c.useEffect(()=>{k(),O()},[]),c.useEffect(()=>{k()},[n]),c.useEffect(()=>{O()},[a]);const k=async()=>{try{const D=await _.getAllLeaveApplications(n==="All"?"":n);o(D.applications||[])}catch(D){E(D.message)}},O=async()=>{try{const D=await _.getAdminTADAApplications(a==="All"?"":a);u(D.applications||[])}catch(D){E(D.message)}},U=async()=>{v(!0),E(null),N(null);try{A==="approve"?(await _.approveLeaveApplication(x._id,w),N(`Leave application approved for ${x.employee.name}`)):(await _.rejectLeaveApplication(x._id,w),N(`Leave application rejected for ${x.employee.name}`)),g(!1),j(""),k()}catch(D){E(D.message)}finally{v(!1)}},B=async()=>{v(!0),E(null),N(null);try{A==="approve"?(await _.approveTADAApplication(x._id,w),N(`TA/DA application approved for ${x.employee.name}`)):(await _.rejectTADAApplication(x._id,w),N(`TA/DA application rejected for ${x.employee.name}`)),g(!1),j(""),O()}catch(D){E(D.message)}finally{v(!1)}},R=(D,$)=>{m(D),b("approve"),g(!0)},S=(D,$)=>{m(D),b("reject"),j(""),g(!0)},P=D=>({Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800"})[D]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Application Approvals"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Review and approve leave and TA/DA applications"})]}),y&&e.jsx("div",{className:"p-4 bg-green-50 border-l-4 border-green-500 rounded-lg",children:e.jsx("p",{className:"text-green-800 font-medium",children:y})}),C&&e.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsx("p",{className:"text-red-800 font-medium",children:C})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>s("leave"),className:`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center gap-2 ${t==="leave"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(fe,{className:"w-5 h-5"}),"Leave Applications"]}),e.jsxs("button",{onClick:()=>s("tada"),className:`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center gap-2 ${t==="tada"?"bg-orange-50 text-orange-600 border-b-2 border-orange-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(Hn,{className:"w-5 h-5"}),"TA/DA Applications"]})]}),e.jsxs("div",{className:"p-6",children:[t==="leave"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),e.jsxs("select",{value:n,onChange:D=>r(D.target.value),className:"border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Pending"}),e.jsx("option",{children:"Approved"}),e.jsx("option",{children:"Rejected"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",i.length," applications)"]})]}),i.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(fe,{className:"w-16 h-16 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No leave applications"})]}):e.jsx("div",{className:"space-y-3",children:i.map(D=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:D.employee.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:D.employee.name}),e.jsx("p",{className:"text-xs text-gray-500",children:D.employee.role})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${P(D.status)}`,children:D.status}),e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:D.leaveType})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3 bg-white rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Start Date"}),e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:new Date(D.startDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"End Date"}),e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:new Date(D.endDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Duration"}),e.jsxs("p",{className:"font-medium text-gray-800 text-sm",children:[D.totalDays," day(s)"]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Reason"}),e.jsx("p",{className:"text-sm text-gray-700",children:D.reason})]}),D.handoverTo&&e.jsxs("div",{className:"mb-3 p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsxs("p",{className:"text-xs font-medium text-indigo-700 mb-2 flex items-center gap-1",children:[e.jsx(Ae,{className:"w-3 h-3"}),"Responsibility Handover"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:D.handoverTo.name}),e.jsx("p",{className:"text-xs text-gray-600",children:D.handoverTo.role}),D.handoverNote&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1 italic",children:['"',D.handoverNote,'"']})]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${D.handoverStatus==="Accepted"?"bg-green-100 text-green-800":D.handoverStatus==="Denied"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[D.handoverStatus==="Accepted"&&" ",D.handoverStatus==="Denied"&&" ",D.handoverStatus==="Pending"&&" ",D.handoverStatus]})]})]}),D.status==="Pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>R(D),className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg px-4 py-2 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(et,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>S(D),className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg px-4 py-2 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4"}),"Reject"]})]}),D.reviewNote&&e.jsxs("div",{className:`mt-3 p-3 rounded-lg ${D.status==="Approved"?"bg-green-50":"bg-red-50"}`,children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Review Note"}),e.jsx("p",{className:"text-sm text-gray-700",children:D.reviewNote}),D.reviewedBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["by ",D.reviewedBy.name," on ",new Date(D.reviewedAt).toLocaleDateString()]})]})]},D._id))})]}),t==="tada"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),e.jsxs("select",{value:a,onChange:D=>l(D.target.value),className:"border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-orange-500 focus:outline-none",children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Pending"}),e.jsx("option",{children:"Approved"}),e.jsx("option",{children:"Rejected"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",d.length," applications)"]})]}),d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(Hn,{className:"w-16 h-16 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No TA/DA applications"})]}):e.jsx("div",{className:"space-y-3",children:d.map(D=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-orange-500 to-pink-600 flex items-center justify-center text-white font-bold",children:D.employee.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:D.employee.name}),e.jsx("p",{className:"text-xs text-gray-500",children:D.employee.role})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${P(D.adminStatus)}`,children:D.adminStatus}),e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:D.applicationType})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3 bg-white rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Travel Date"}),e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:new Date(D.travelDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Amount"}),e.jsx("p",{className:"font-bold text-gray-800 text-lg",children:Ce(D.amount)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Destination"}),e.jsx("p",{className:"font-medium text-gray-800",children:D.destination})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Purpose"}),e.jsx("p",{className:"text-sm text-gray-700",children:D.purpose})]}),D.description&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700",children:D.description})]}),D.adminStatus==="Pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>R(D),className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg px-4 py-2 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(et,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>S(D),className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg px-4 py-2 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4"}),"Reject"]})]}),D.adminReviewNote&&e.jsxs("div",{className:`mt-3 p-3 rounded-lg ${D.adminStatus==="Approved"?"bg-green-50":"bg-red-50"}`,children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Admin Review"}),e.jsx("p",{className:"text-sm text-gray-700",children:D.adminReviewNote}),D.adminReviewedBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["by ",D.adminReviewedBy.name," on ",new Date(D.adminReviewedAt).toLocaleDateString()]})]}),D.adminStatus==="Approved"&&e.jsx("div",{className:"mt-3 p-3 rounded-lg bg-blue-50 border border-blue-200",children:e.jsxs("p",{className:"text-xs font-medium text-blue-800",children:[" Approved - Sent to Accountant for payment ",D.paymentStatus==="Paid"?"(Already Paid)":"(Pending Payment)"]})})]},D._id))})]})]})]}),h&&x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${A==="approve"?"bg-green-100":"bg-red-100"}`,children:A==="approve"?e.jsx(et,{className:"w-6 h-6 text-green-600"}):e.jsx(xs,{className:"w-6 h-6 text-red-600"})}),e.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:[A==="approve"?"Approve":"Reject"," Application"]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Employee:"}),e.jsx("p",{className:"font-semibold text-gray-800",children:x.employee.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:A==="approve"?"Review Note (Optional)":"Rejection Reason *"}),e.jsx("textarea",{rows:"4",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-blue-500 focus:outline-none resize-none",value:w,onChange:D=>j(D.target.value),placeholder:A==="approve"?"Add any comments...":"Please provide a reason for rejection...",required:A==="reject"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{g(!1),j("")},className:"px-5 py-2.5 rounded-lg border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:t==="leave"?U:B,disabled:p||A==="reject"&&!w,className:`px-5 py-2.5 rounded-lg text-white font-semibold hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50 ${A==="approve"?"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-red-500 to-red-600"}`,children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[A==="approve"?e.jsx(et,{className:"w-4 h-4"}):e.jsx(xs,{className:"w-4 h-4"}),"Confirm ",A==="approve"?"Approval":"Rejection"]})})]})]})})]})}function kw(){const[t,s]=c.useState("Pending"),[n,r]=c.useState([]),[a,l]=c.useState(null),[i,o]=c.useState(!1),[d,u]=c.useState(""),[x,m]=c.useState(!1),[h,g]=c.useState(null),[w,j]=c.useState(null);c.useEffect(()=>{A()},[t]);const A=async()=>{try{const y=await _.getAccountantTADAApplications(t==="All"?"":t);r(y.applications||[])}catch(y){j(y.message)}},b=async()=>{m(!0),j(null),g(null);try{await _.payTADAApplication(a._id,d),g(`Payment processed for ${a.employee.name} - ${Ce(a.amount)}`),o(!1),u(""),A()}catch(y){j(y.message)}finally{m(!1)}},p=n.filter(y=>y.paymentStatus==="Pending").reduce((y,N)=>y+N.amount,0),v=n.filter(y=>y.paymentStatus==="Paid").reduce((y,N)=>y+N.amount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"TA/DA Payments"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Process approved travel allowance and dearness allowance payments"})]}),h&&e.jsxs("div",{className:"p-4 bg-green-50 border-l-4 border-green-500 rounded-lg flex items-start gap-3",children:[e.jsx(et,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-green-800 font-medium",children:h})]}),w&&e.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsx("p",{className:"text-red-800 font-medium",children:w})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl p-6 shadow-lg text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/80 mb-1",children:"Pending Payments"}),e.jsx("p",{className:"text-3xl font-bold",children:Ce(p)})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Rt,{className:"w-8 h-8"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-teal-600 rounded-xl p-6 shadow-lg text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/80 mb-1",children:"Paid Total"}),e.jsx("p",{className:"text-3xl font-bold",children:Ce(v)})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(et,{className:"w-8 h-8"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Payment Status:"}),e.jsxs("select",{value:t,onChange:y=>s(y.target.value),className:"border-2 border-gray-200 rounded-lg px-4 py-2 focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Pending"}),e.jsx("option",{children:"Paid"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",n.length," applications)"]})]})}),e.jsx("div",{className:"p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx($e,{className:"w-16 h-16 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No TA/DA applications for payment"})]}):e.jsx("div",{className:"space-y-4",children:n.map(y=>{var N,C;return e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-lg p-5 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg",children:y.employee.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800 text-lg",children:y.employee.name}),e.jsx("p",{className:"text-sm text-gray-500",children:y.employee.role})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[y.paymentStatus==="Pending"?e.jsxs("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(Rt,{className:"w-4 h-4"}),"Pending Payment"]}):e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(et,{className:"w-4 h-4"}),"Paid"]}),e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:y.applicationType})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(fe,{className:"w-3 h-3"}),"Travel Date"]}),e.jsx("p",{className:"font-medium text-gray-800",children:new Date(y.travelDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(Wy,{className:"w-3 h-3"}),"Destination"]}),e.jsx("p",{className:"font-medium text-gray-800",children:y.destination})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx($e,{className:"w-3 h-3"}),"Amount"]}),e.jsx("p",{className:"font-bold text-gray-800 text-xl",children:Ce(y.amount)})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(gt,{className:"w-3 h-3"}),"Purpose"]}),e.jsx("p",{className:"text-sm text-gray-700",children:y.purpose})]}),y.description&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700",children:y.description})]}),y.adminReviewNote&&e.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Admin Approval Note"}),e.jsx("p",{className:"text-sm text-gray-700",children:y.adminReviewNote}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Approved by ",(N=y.adminReviewedBy)==null?void 0:N.name," on ",new Date(y.adminReviewedAt).toLocaleDateString()]})]}),y.paymentStatus==="Pending"?e.jsxs("button",{onClick:()=>{l(y),o(!0)},className:"w-full bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-lg px-6 py-3 font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"}),"Process Payment - ",Ce(y.amount)]}):e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Payment Confirmation"}),y.paymentNote&&e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:y.paymentNote}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Paid by ",(C=y.paidBy)==null?void 0:C.name," on ",new Date(y.paidAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]},y._id)})})})]}),i&&a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx($e,{className:"w-6 h-6 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Process Payment"})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Employee:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:a.employee.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Type:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:a.applicationType})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Amount:"}),e.jsx("span",{className:"font-bold text-gray-800 text-xl",children:Ce(a.amount)})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Note (Optional)"}),e.jsx("textarea",{rows:"3",className:"w-full border-2 border-gray-200 rounded-lg px-3 py-2 focus:border-green-500 focus:outline-none resize-none",value:d,onChange:y=>u(y.target.value),placeholder:"Add payment confirmation details or transaction reference..."})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{o(!1),u("")},className:"px-5 py-2.5 rounded-lg border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:b,disabled:x,className:"px-5 py-2.5 rounded-lg bg-gradient-to-r from-green-500 to-teal-600 text-white font-semibold hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(et,{className:"w-4 h-4"}),"Confirm Payment"]})})]})]})})]})}function Cw(){const t=Sn(),[s,n]=c.useState([]),[r,a]=c.useState([]),[l,i]=c.useState(0),[o,d]=c.useState(!0),[u,x]=c.useState("all"),[m,h]=c.useState("all"),[g,w]=c.useState(null),[j,A]=c.useState(null);c.useEffect(()=>{b()},[]);const b=async()=>{try{d(!0);const k=await _.getNotifications(void 0,100);n(k.notifications||[]),i(k.unreadCount||0);try{const U=((await _.listMyTasks()).tasks||[]).filter(B=>{if(B.status==="Completed")return!1;const R=new Date;return new Date(B.dueDate)<R});a(U)}catch(O){console.log("Could not load urgent tasks:",O.message)}}catch(k){A(k.message)}finally{d(!1)}},p=async k=>{try{k.isRead||(await _.markNotificationRead(k._id),i(O=>Math.max(0,O-1)),n(O=>O.map(U=>U._id===k._id?{...U,isRead:!0}:U))),k.type==="LEAVE_HANDOVER_REQUEST"?(sessionStorage.setItem("openHandoverRequestId",k.relatedId),sessionStorage.setItem("handoverNotificationId",k._id),t("/my-applications")):k.link&&t(k.link)}catch(O){console.error("Failed to handle notification:",O)}},v=async()=>{try{await _.markAllNotificationsRead(),w("All notifications marked as read "),n(k=>k.map(O=>({...O,isRead:!0}))),i(0),setTimeout(()=>w(null),3e3)}catch(k){A(k.message)}},y=async(k,O)=>{if(O.stopPropagation(),!!confirm("Delete this notification?"))try{await _.deleteNotification(k),n(U=>U.filter(B=>B._id!==k)),w("Notification deleted"),setTimeout(()=>w(null),3e3)}catch(U){A(U.message)}},N=s.filter(k=>!(u==="unread"&&k.isRead||u==="read"&&!k.isRead||m==="leave"&&!k.type.startsWith("LEAVE_")||m==="tada"&&!k.type.startsWith("TADA_")||m==="handover"&&!k.type.includes("HANDOVER")||m==="task"&&!k.type.startsWith("TASK_")||m==="urgent")),C=k=>k.startsWith("LEAVE_")?e.jsx(fe,{className:"w-5 h-5 text-blue-600"}):k.startsWith("TADA_")?e.jsx(Lt,{className:"w-5 h-5 text-orange-600"}):k.includes("HANDOVER")?e.jsx(Ae,{className:"w-5 h-5 text-purple-600"}):k.startsWith("TASK_")?e.jsx(et,{className:"w-5 h-5 text-green-600"}):e.jsx(es,{className:"w-5 h-5 text-gray-600"}),E=k=>k.startsWith("LEAVE_")?"border-blue-200 bg-blue-50":k.startsWith("TADA_")?"border-orange-200 bg-orange-50":k.includes("HANDOVER")?"border-purple-200 bg-purple-50":k.startsWith("TASK_")?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50";return e.jsxs("div",{className:"p-4 md:p-6 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-navy flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg",children:e.jsx(es,{className:"w-6 h-6 text-white"})}),"All Notifications"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:l>0?`${l} unread notification${l>1?"s":""}`:"All caught up!"})]}),l>0&&e.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition",children:[e.jsx(Zh,{size:18}),"Mark All Read"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pi,{size:16,className:"text-gray-500"}),e.jsxs("select",{value:u,onChange:k=>x(k.target.value),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:outline-none text-sm",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"unread",children:"Unread"}),e.jsx("option",{value:"read",children:"Read"})]})]}),e.jsxs("select",{value:m,onChange:k=>h(k.target.value),className:"px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:outline-none text-sm",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"urgent",children:"Urgent Tasks"}),e.jsx("option",{value:"leave",children:"Leave Applications"}),e.jsx("option",{value:"tada",children:"TA/DA Applications"}),e.jsx("option",{value:"handover",children:"Handover Requests"}),e.jsx("option",{value:"task",children:"Tasks"})]})]})]}),g&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg flex items-center gap-2",children:[e.jsx(et,{size:18}),g]}),j&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg flex items-center gap-2",children:[e.jsx(xs,{size:18}),j]}),o?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Loading notifications..."})]}):e.jsxs("div",{className:"space-y-6",children:[m==="all"||m==="urgent"?r.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(fe,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("h2",{className:"text-lg font-bold text-navy",children:["Urgent Tasks (",r.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:r.map(k=>e.jsx("div",{onClick:()=>t("/tasks"),className:"p-4 rounded-xl border-2 border-red-200 bg-red-50 cursor-pointer hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white",children:e.jsx(Lt,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-semibold text-navy",children:k.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description||"No description"})]}),e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 font-medium",children:"Overdue"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500",children:[e.jsx(fe,{size:12}),"Due: ",new Date(k.dueDate).toLocaleDateString("en-GB")]})]})]})},k._id))})]}):null,N.length===0&&r.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx(es,{size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No notifications found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Try adjusting your filters"})]}):null,N.length>0&&e.jsxs("div",{children:[r.length>0&&m==="all"&&e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg",children:e.jsx(es,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("h2",{className:"text-lg font-bold text-navy",children:["System Notifications (",N.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:N.map(k=>{const O=k.type==="LEAVE_HANDOVER_REQUEST";return e.jsx("div",{onClick:()=>p(k),className:`p-4 rounded-xl border-2 cursor-pointer transition-all hover:shadow-md ${k.isRead?"bg-white border-gray-200":E(k.type)+" border-l-4"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${k.isRead?"bg-gray-100":"bg-white"}`,children:C(k.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:`text-base ${k.isRead?"font-medium text-gray-700":"font-semibold text-navy"}`,children:[k.title,O&&!k.isRead&&e.jsx("span",{className:"ml-2 text-xs bg-purple-600 text-white px-2 py-0.5 rounded-full",children:"Action Required"}),!k.isRead&&!O&&e.jsx("span",{className:"ml-2 inline-block w-2 h-2 bg-indigo-500 rounded-full"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.message}),k.sender&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("img",{src:k.sender.avatar,alt:k.sender.name,className:"w-5 h-5 rounded-full"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["from ",k.sender.name]})]})]}),e.jsx("button",{onClick:U=>y(k._id,U),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete notification",children:e.jsx(jn,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-400",children:[e.jsx(Rt,{size:12}),new Date(k.createdAt).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})},k._id)})})]})]})]})}function Aw(){const{user:t}=xe(),[s,n]=c.useState([]),[r,a]=c.useState([]),[l,i]=c.useState(null),[o,d]=c.useState([]),[u,x]=c.useState(""),[m,h]=c.useState(""),[g,w]=c.useState(!0),[j,A]=c.useState(!1),b=c.useRef(null),p=c.useRef(null),v=()=>{var S;(S=b.current)==null||S.scrollIntoView({behavior:"smooth"})};c.useEffect(()=>{v()},[o]),c.useEffect(()=>{y(),N();const S=setInterval(y,5e3);return()=>clearInterval(S)},[]),c.useEffect(()=>{if(l){C(l._id);const S=setInterval(()=>C(l._id),3e3);return()=>clearInterval(S)}},[l]);const y=async()=>{try{const S=await _.getConversations();n(S.conversations||[])}catch(S){console.error("Error loading conversations:",S)}finally{w(!1)}},N=async()=>{try{const P=((await _.listUsers()).users||[]).filter(D=>D._id!==t.id);a(P)}catch(S){console.error("Error loading users:",S)}},C=async S=>{try{const P=await _.getMessages(S);d(P.messages||[]),await _.markMessagesAsRead(S),y()}catch(P){console.error("Error loading messages:",P)}},E=async S=>{if(S.preventDefault(),!(!u.trim()||!l))try{A(!0),await _.sendMessage({recipient:l._id,content:u.trim()}),x(""),C(l._id),y()}catch(P){console.error("Error sending message:",P),alert("Failed to send message")}finally{A(!1)}},k=S=>{i(S)},U=(()=>{const S=new Map;s.forEach($=>{$.user&&$.user._id&&!S.has($.user._id)&&S.set($.user._id,{...$.user,hasConversation:!0,lastMessage:$.lastMessage,unreadCount:$.unreadCount||0})}),r.forEach($=>{$&&$._id&&!S.has($._id)&&S.set($._id,{...$,hasConversation:!1,lastMessage:null,unreadCount:0})});const P=[],D=[];return S.forEach($=>{$.hasConversation?P.push($):D.push($)}),D.sort(($,L)=>($.name||"").localeCompare(L.name||"")),[...P,...D]})().filter(S=>{var P,D,$;return((P=S==null?void 0:S.name)==null?void 0:P.toLowerCase().includes(m.toLowerCase()))||((D=S==null?void 0:S.email)==null?void 0:D.toLowerCase().includes(m.toLowerCase()))||(($=S==null?void 0:S.designation)==null?void 0:$.toLowerCase().includes(m.toLowerCase()))}),B=S=>{if(!S)return"";const P=new Date(S),$=new Date-P,L=Math.floor($/6e4),M=Math.floor($/36e5),H=Math.floor($/864e5);return L<1?"Just now":L<60?`${L}m ago`:M<24?`${M}h ago`:H<7?`${H}d ago`:P.toLocaleDateString()},R=S=>S?new Date(S).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return g?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(it,{size:48,className:"mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Loading messages..."})]})}):e.jsxs("div",{className:"h-[calc(100vh-64px)] flex bg-white rounded-xl shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"w-80 border-r flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-bold text-navy mb-3",children:"Messages"}),e.jsxs("div",{className:"relative",children:[e.jsx(pn,{size:18,className:"absolute left-3 top-2.5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search conversations...",value:m,onChange:S=>h(S.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:U.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(it,{size:48,className:"mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No colleagues found"}),e.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search"})]}):U.map(S=>e.jsx("div",{onClick:()=>k(S),className:`p-4 border-b cursor-pointer hover:bg-gray-50 transition ${(l==null?void 0:l._id)===S._id?"bg-blue-50 border-l-4 border-l-blue-500":""} ${S.hasConversation?"bg-gradient-to-r from-blue-50/30 to-transparent":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:S.avatar,alt:S.name,className:"w-12 h-12 rounded-full object-cover"}),S.hasConversation&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full border-2 border-white"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-navy truncate",children:S.name}),S.lastMessage&&e.jsx("span",{className:"text-xs text-gray-500",children:B(S.lastMessage.createdAt)})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:S.designation||S.role}),S.lastMessage&&e.jsxs("p",{className:"text-sm text-gray-500 truncate mt-1",children:[S.lastMessage.sender.toString()===t.id?"You: ":"",S.lastMessage.content]}),S.unreadCount>0&&e.jsxs("span",{className:"inline-block mt-1 px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:[S.unreadCount," new"]})]})]})},S._id))})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:l.avatar,alt:l.name,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-navy",children:l.name}),e.jsx("p",{className:"text-sm text-gray-500",children:l.designation||l.role})]})]}),e.jsx("button",{onClick:()=>i(null),className:"p-2 hover:bg-gray-100 rounded-lg transition md:hidden",children:e.jsx(fi,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:o.length===0?e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(it,{size:48,className:"mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No messages yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Send a message to start the conversation"})]})}):e.jsxs("div",{className:"space-y-4",children:[o.map(S=>{var L,M,H,Z,W;const P=((M=(L=S.sender)==null?void 0:L._id)==null?void 0:M.toString())||((H=S.sender)==null?void 0:H.toString()),D=((Z=t==null?void 0:t.id)==null?void 0:Z.toString())||((W=t==null?void 0:t._id)==null?void 0:W.toString()),$=P===D;return o.length>0&&S===o[0]&&console.log("Message alignment debug:",{senderId:P,currentUserId:D,isOwn:$}),e.jsx("div",{className:`flex ${$?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex gap-2 max-w-[70%] ${$?"flex-row-reverse":""}`,children:[!$&&e.jsx("img",{src:S.sender.avatar,alt:S.sender.name,className:"w-8 h-8 rounded-full object-cover flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:`p-3 rounded-lg ${$?"bg-blue-500 text-white":"bg-white text-gray-800 border"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:S.content})}),e.jsxs("div",{className:`flex items-center gap-2 mt-1 text-xs text-gray-500 ${$?"justify-end":""}`,children:[e.jsx("span",{children:R(S.createdAt)}),$&&e.jsx("span",{children:S.isRead?e.jsx(Zh,{size:14,className:"text-blue-400"}):e.jsx(Oy,{size:14,className:"text-gray-400"})})]})]})]})},S._id)}),e.jsx("div",{ref:b})]})}),e.jsx("form",{onSubmit:E,className:"p-4 border-t bg-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:p,type:"text",value:u,onChange:S=>x(S.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:j}),e.jsx("button",{type:"submit",disabled:!u.trim()||j,className:"p-3 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Bl,{size:20})})]})})]}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(it,{size:64,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Select a conversation"}),e.jsx("p",{children:"Choose a colleague from the list to start messaging"})]})})})]})}function Dw(){const{user:t}=xe(),[s,n]=c.useState([]),[r,a]=c.useState(!0),[l,i]=c.useState("all"),[o,d]=c.useState(""),[u,x]=c.useState(""),[m,h]=c.useState("all");c.useEffect(()=>{g()},[l,o,u,m]);const g=async()=>{try{a(!0);const N=(await _.listMyTasks()).tasks||[];let C=w(N);m==="completed"?C=C.filter(E=>E.status==="Completed"):m==="pending"&&(C=C.filter(E=>E.status!=="Completed")),C.sort((E,k)=>{const O=new Date(E.dueDate||E.createdAt);return new Date(k.dueDate||k.createdAt)-O}),n(C)}catch(y){console.error("Failed to load tasks:",y)}finally{a(!1)}},w=y=>{const N=new Date;switch(l){case"daily":{const C=new Date(N.getFullYear(),N.getMonth(),N.getDate());return y.filter(E=>new Date(E.dueDate||E.createdAt)>=C)}case"weekly":{const C=new Date(N);return C.setDate(N.getDate()-7),y.filter(E=>new Date(E.dueDate||E.createdAt)>=C)}case"monthly":{const C=new Date(N);return C.setMonth(N.getMonth()-1),y.filter(E=>new Date(E.dueDate||E.createdAt)>=C)}case"custom":{if(!o||!u)return y;const C=new Date(o),E=new Date(u);return E.setHours(23,59,59,999),y.filter(k=>{const O=new Date(k.dueDate||k.createdAt);return O>=C&&O<=E})}default:return y}},j={total:s.length,completed:s.filter(y=>y.status==="Completed").length,pending:s.filter(y=>y.status!=="Completed").length,overdue:s.filter(y=>y.status==="Completed"||!y.dueDate?!1:new Date(y.dueDate)<new Date).length},A=j.total>0?Math.round(j.completed/j.total*100):0,b=y=>{switch(y){case"Completed":return"bg-green-100 text-green-700";case"In Progress":return"bg-blue-100 text-blue-700";case"On Hold":return"bg-yellow-100 text-yellow-700";case"Blocked":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},p=y=>{switch(y){case"Critical":return"bg-red-100 text-red-700";case"High":return"bg-orange-100 text-orange-700";case"Medium":return"bg-yellow-100 text-yellow-700";case"Low":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},v=()=>{const y=["Title","Status","Priority","Due Date","Assigned By","Tags"],N=s.map(U=>{var B,R;return[U.title,U.status,U.priority,U.dueDate?new Date(U.dueDate).toLocaleDateString():"N/A",((B=U.assignedBy)==null?void 0:B.name)||"N/A",((R=U.tags)==null?void 0:R.join(", "))||"N/A"]}),C=[y.join(","),...N.map(U=>U.map(B=>`"${B}"`).join(","))].join(`
`),E=new Blob([C],{type:"text/csv"}),k=window.URL.createObjectURL(E),O=document.createElement("a");O.href=k,O.download=`task-report-${new Date().toISOString().split("T")[0]}.csv`,O.click(),window.URL.revokeObjectURL(k)};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Task Report"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View and analyze your task performance"})]}),e.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 bg-navy text-white rounded-lg hover:bg-navy/90 transition",children:[e.jsx(rs,{size:18}),"Export CSV"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:j.total})]}),e.jsx(zl,{size:32,className:"text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:j.completed})]}),e.jsx(dd,{size:32,className:"text-green-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-yellow-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:j.pending})]}),e.jsx(Rt,{size:32,className:"text-yellow-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:j.overdue})]}),e.jsx(Lt,{size:32,className:"text-red-500"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-navy flex items-center gap-2",children:[e.jsx(Et,{size:20}),"Completion Rate"]}),e.jsxs("span",{className:"text-2xl font-bold text-navy",children:[A,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-4 rounded-full transition-all duration-500",style:{width:`${A}%`}})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-navy mb-4 flex items-center gap-2",children:[e.jsx(pi,{size:20}),"Filters"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Period"}),e.jsxs("select",{value:l,onChange:y=>i(y.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"daily",children:"Today"}),e.jsx("option",{value:"weekly",children:"Last 7 Days"}),e.jsx("option",{value:"monthly",children:"Last 30 Days"}),e.jsx("option",{value:"custom",children:"Custom Range"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:m,onChange:y=>h(y.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed Only"}),e.jsx("option",{value:"pending",children:"Pending Only"})]})]}),l==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:o,onChange:y=>d(y.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:u,onChange:y=>x(y.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-semibold text-navy",children:["Task List (",s.length," ",m==="completed"?"Completed":m==="pending"?"Pending":""," Tasks)"]})}),r?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Rt,{size:48,className:"mx-auto mb-3 animate-spin"}),e.jsx("p",{children:"Loading tasks..."})]}):s.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(zl,{size:48,className:"mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No tasks found for the selected filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(y=>{var N,C;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-navy",children:y.title}),y.description&&e.jsx("div",{className:"text-sm text-gray-500 mt-1 line-clamp-1",children:y.description})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b(y.status)}`,children:y.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p(y.priority)}`,children:y.priority})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:y.dueDate?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{size:14}),new Date(y.dueDate).toLocaleDateString()]}):e.jsx("span",{className:"text-gray-400",children:"No due date"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:((N=y.assignedBy)==null?void 0:N.name)||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(C=y.tags)==null?void 0:C.map((E,k)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:E},k))})})]},y._id)})})]})})]})]})}function Tw(){var S;const{user:t}=xe(),[s,n]=c.useState([]),[r,a]=c.useState([]),[l,i]=c.useState(!0),[o,d]=c.useState("all"),[u,x]=c.useState(""),[m,h]=c.useState(""),[g,w]=c.useState("all"),[j,A]=c.useState("all"),[b,p]=c.useState("");c.useEffect(()=>{v()},[]),c.useEffect(()=>{y()},[o,u,m,g,j]);const v=async()=>{try{const P=await _.listUsers();a(P.users||[])}catch(P){console.error("Failed to load users:",P)}},y=async()=>{try{i(!0);let D=(await _.listAllTasks()).tasks||[];j!=="all"&&(D=D.filter(L=>L.assignedTo&&L.assignedTo.includes(j)));let $=N(D);g==="completed"?$=$.filter(L=>L.status==="Completed"):g==="pending"&&($=$.filter(L=>L.status!=="Completed")),$.sort((L,M)=>{const H=new Date(L.dueDate||L.createdAt);return new Date(M.dueDate||M.createdAt)-H}),n($)}catch(P){console.error("Failed to load tasks:",P)}finally{i(!1)}},N=P=>{const D=new Date;switch(o){case"daily":{const $=new Date(D.getFullYear(),D.getMonth(),D.getDate());return P.filter(L=>new Date(L.dueDate||L.createdAt)>=$)}case"weekly":{const $=new Date(D);return $.setDate(D.getDate()-7),P.filter(L=>new Date(L.dueDate||L.createdAt)>=$)}case"monthly":{const $=new Date(D);return $.setMonth(D.getMonth()-1),P.filter(L=>new Date(L.dueDate||L.createdAt)>=$)}case"custom":{if(!u||!m)return P;const $=new Date(u),L=new Date(m);return L.setHours(23,59,59,999),P.filter(M=>{const H=new Date(M.dueDate||M.createdAt);return H>=$&&H<=L})}default:return P}},C={total:s.length,completed:s.filter(P=>P.status==="Completed").length,pending:s.filter(P=>P.status!=="Completed").length,overdue:s.filter(P=>P.status==="Completed"||!P.dueDate?!1:new Date(P.dueDate)<new Date).length},E=C.total>0?Math.round(C.completed/C.total*100):0,k=P=>{switch(P){case"Completed":return"bg-green-100 text-green-700";case"In Progress":return"bg-blue-100 text-blue-700";case"On Hold":return"bg-yellow-100 text-yellow-700";case"Blocked":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},O=P=>{switch(P){case"Critical":return"bg-red-100 text-red-700";case"High":return"bg-orange-100 text-orange-700";case"Medium":return"bg-yellow-100 text-yellow-700";case"Low":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},U=()=>{const P=j!=="all"?r.find(F=>F._id===j):null,D=P?`task-report-${P.name.replace(/\s+/g,"-")}-${new Date().toISOString().split("T")[0]}.csv`:`task-report-all-${new Date().toISOString().split("T")[0]}.csv`,$=["Title","Status","Priority","Due Date","Assigned To","Assigned By","Tags"],L=s.map(F=>{var q,se,I;return[F.title,F.status,F.priority,F.dueDate?new Date(F.dueDate).toLocaleDateString():"N/A",((q=F.assignedTo)==null?void 0:q.map(z=>{const G=r.find(V=>V._id===z);return(G==null?void 0:G.name)||"Unknown"}).join(", "))||"N/A",((se=F.assignedBy)==null?void 0:se.name)||"N/A",((I=F.tags)==null?void 0:I.join(", "))||"N/A"]}),M=[$.join(","),...L.map(F=>F.map(q=>`"${q}"`).join(","))].join(`
`),H=new Blob([M],{type:"text/csv"}),Z=window.URL.createObjectURL(H),W=document.createElement("a");W.href=Z,W.download=D,W.click(),window.URL.revokeObjectURL(Z)},B=r.filter(P=>{var D,$,L;return((D=P.name)==null?void 0:D.toLowerCase().includes(b.toLowerCase()))||(($=P.email)==null?void 0:$.toLowerCase().includes(b.toLowerCase()))||((L=P.designation)==null?void 0:L.toLowerCase().includes(b.toLowerCase()))}),R=j==="all"?"All Employees":((S=r.find(P=>P._id===j))==null?void 0:S.name)||"Unknown";return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Admin Task Report"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View and analyze employee task performance"})]}),e.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-navy text-white rounded-lg hover:bg-navy/90 transition",children:[e.jsx(rs,{size:18}),"Export CSV"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-navy mb-4 flex items-center gap-2",children:[e.jsx(Ae,{size:20}),"Select Employee"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx(pn,{size:18,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or designation...",value:b,onChange:P=>p(P.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Employee (",R,")"]}),e.jsxs("select",{value:j,onChange:P=>A(P.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Employees"}),B.map(P=>e.jsxs("option",{value:P._id,children:[P.name," - ",P.designation||P.role]},P._id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:C.total})]}),e.jsx(zl,{size:32,className:"text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:C.completed})]}),e.jsx(dd,{size:32,className:"text-green-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-yellow-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:C.pending})]}),e.jsx(Rt,{size:32,className:"text-yellow-500"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-navy mt-1",children:C.overdue})]}),e.jsx(Lt,{size:32,className:"text-red-500"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-navy flex items-center gap-2",children:[e.jsx(Et,{size:20}),"Completion Rate - ",R]}),e.jsxs("span",{className:"text-2xl font-bold text-navy",children:[E,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-4 rounded-full transition-all duration-500",style:{width:`${E}%`}})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-navy mb-4 flex items-center gap-2",children:[e.jsx(pi,{size:20}),"Filters"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Period"}),e.jsxs("select",{value:o,onChange:P=>d(P.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"daily",children:"Today"}),e.jsx("option",{value:"weekly",children:"Last 7 Days"}),e.jsx("option",{value:"monthly",children:"Last 30 Days"}),e.jsx("option",{value:"custom",children:"Custom Range"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:g,onChange:P=>w(P.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed Only"}),e.jsx("option",{value:"pending",children:"Pending Only"})]})]}),o==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:u,onChange:P=>x(P.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:m,onChange:P=>h(P.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-semibold text-navy",children:["Task List (",s.length," ",g==="completed"?"Completed":g==="pending"?"Pending":""," Tasks)"]})}),l?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Rt,{size:48,className:"mx-auto mb-3 animate-spin"}),e.jsx("p",{children:"Loading tasks..."})]}):s.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(zl,{size:48,className:"mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No tasks found for the selected filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(P=>{var D,$,L;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-navy",children:P.title}),P.description&&e.jsx("div",{className:"text-sm text-gray-500 mt-1 line-clamp-1",children:P.description})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(D=P.assignedTo)==null?void 0:D.map(M=>{const H=r.find(Z=>Z._id===M);return H?e.jsxs("div",{className:"flex items-center gap-1 text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded",children:[e.jsx("img",{src:H.avatar,alt:H.name,className:"w-4 h-4 rounded-full"}),H.name]},M):null})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k(P.status)}`,children:P.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${O(P.priority)}`,children:P.priority})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:P.dueDate?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{size:14}),new Date(P.dueDate).toLocaleDateString()]}):e.jsx("span",{className:"text-gray-400",children:"No due date"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:(($=P.assignedBy)==null?void 0:$.name)||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(L=P.tags)==null?void 0:L.map((M,H)=>e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded",children:M},H))})})]},P._id)})})]})})]})]})}function Ew(){var P;const[t,s]=c.useState("admission"),[n,r]=c.useState("student"),[a,l]=c.useState([]),[i,o]=c.useState([]),[d,u]=c.useState([]),[x,m]=c.useState(""),[h,g]=c.useState(""),[w,j]=c.useState(!1),[A,b]=c.useState(""),[p,v]=c.useState(""),[y,N]=c.useState({courseId:"",month:"",targetValue:"",assignedTo:"",note:""}),E=(()=>{const D=[],$=new Date,L=$.getFullYear(),M=$.getMonth();for(let H=0;H<12;H++){const Z=L+Math.floor((M+H)/12),W=(M+H)%12,F=`${Z}-${String(W+1).padStart(2,"0")}`,se=new Date(Z,W,1).toLocaleDateString("en-US",{year:"numeric",month:"long"});D.push({value:F,label:se})}return D})();c.useEffect(()=>{const D=new Date().toISOString().slice(0,7);m(D),N({...y,month:D})},[]),c.useEffect(()=>{(async()=>{try{const $=await _.listCourses();l(($==null?void 0:$.courses)||[])}catch($){console.error("Failed to load courses:",$)}})()},[]),c.useEffect(()=>{(async()=>{try{const $=t==="admission"?"Admission":"Recruitment",L=await _.getTeamMembers($);o((L==null?void 0:L.members)||[])}catch($){console.error("Failed to load team members:",$)}})()},[t]),c.useEffect(()=>{x&&O()},[x,t,n,h]);const k=()=>t==="admission"?n==="student"?"AdmissionStudent":"AdmissionRevenue":n==="student"?"RecruitmentCandidate":"RecruitmentRevenue",O=async()=>{if(x){j(!0),b("");try{const D=k(),$=await _.getTargets(x,D,h||null);u(($==null?void 0:$.targets)||[])}catch(D){b("Failed to load targets: "+D.message)}finally{j(!1)}}},U=async D=>{D.preventDefault(),b(""),v("");const $=k();if(!y.month||!y.targetValue){b("Please fill all required fields");return}if($==="AdmissionStudent"&&!y.courseId){b("Please select a course");return}try{const L={targetType:$,month:y.month,targetValue:parseInt(y.targetValue),...y.courseId&&{courseId:y.courseId},...y.assignedTo&&{assignedTo:y.assignedTo},...y.note&&{note:y.note}};await _.setTarget(L),v("Target set successfully!"),N({courseId:"",month:x,targetValue:"",assignedTo:"",note:""}),O()}catch(L){b("Failed to set target: "+L.message)}},B=async D=>{if(confirm("Delete this target?"))try{await _.deleteTarget(D),v("Target deleted successfully!"),O()}catch($){b("Failed to delete target: "+$.message)}},R=()=>n==="student"?t==="admission"?"Students":"Candidates":"BDT",S=D=>n==="revenue"?`${D.toLocaleString()}`:D.toString();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg",children:e.jsx(Vt,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Targets"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Set and track performance targets for admission and recruitment teams"})]})]})}),A&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:A}),p&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:p}),e.jsxs("div",{className:"flex gap-2 border-b",children:[e.jsx("button",{onClick:()=>{s("admission"),r("student")},className:`px-6 py-3 font-medium transition-colors border-b-2 ${t==="admission"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{size:18}),"Admission Targets"]})}),e.jsx("button",{onClick:()=>{s("recruitment"),r("student")},className:`px-6 py-3 font-medium transition-colors border-b-2 ${t==="recruitment"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kh,{size:18}),"Recruitment Targets"]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r("student"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="student"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:t==="admission"?"Student Target":"Candidate Target"}),e.jsx("button",{onClick:()=>r("revenue"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="revenue"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{size:16}),"Revenue Target"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(as,{size:20}),"Set New Target"]}),e.jsxs("form",{onSubmit:U,className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[k()==="AdmissionStudent"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Course ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:y.courseId,onChange:D=>N({...y,courseId:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Course"}),a.map(D=>e.jsx("option",{value:D._id,children:D.name},D._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Month ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:y.month,onChange:D=>N({...y,month:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",required:!0,children:E.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Target (",R(),") ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0",value:y.targetValue,onChange:D=>N({...y,targetValue:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",placeholder:"Enter target",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Member (Optional)"}),e.jsxs("select",{value:y.assignedTo,onChange:D=>N({...y,assignedTo:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Team Target"}),i.map(D=>e.jsx("option",{value:D._id,children:D.name},D._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note (Optional)"}),e.jsx("input",{type:"text",value:y.note,onChange:D=>N({...y,note:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",placeholder:"Add note"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"Set Target"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Et,{size:20}),"Targets & Achievement"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:h,onChange:D=>g(D.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"All Team Members"}),i.map(D=>e.jsx("option",{value:D._id,children:D.name},D._id))]}),e.jsx("select",{value:x,onChange:D=>{console.log("[Month Filter] Changing from",x,"to",D.target.value),m(D.target.value)},className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",children:E.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))})]})]}),(()=>{var M;const D=new Date().toISOString().slice(0,7),$=x>D,L=x===D;return console.log("[Banner] currentMonth:",D,"selectedMonth:",x,"isFuture:",$,"isCurrent:",L),$?e.jsxs("div",{className:"mb-4 bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-lg flex items-start gap-2",children:[e.jsx(fe,{size:18,className:"mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Future Month Selected"}),e.jsxs("p",{className:"text-sm",children:["You are viewing targets for ",(M=E.find(H=>H.value===x))==null?void 0:M.label,". Achievement data will be calculated as the month progresses."]})]})]}):L?e.jsxs("div",{className:"mb-4 bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-lg flex items-start gap-2",children:[e.jsx(fe,{size:18,className:"mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Current Month"}),e.jsx("p",{className:"text-sm",children:"Achievement is calculated up to today. Final results will be available at month end."})]})]}):null})(),w?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading targets..."}):d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No targets set for ",(P=E.find(D=>D.value===x))==null?void 0:P.label]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[k()==="AdmissionStudent"&&e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Course"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Assigned To"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Target"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Achieved"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Progress"}),d.some(D=>D.note)&&e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Note"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:d.map(D=>{var M;const $=D.percentage||0,L=$>=100?"green":$>=75?"blue":$>=50?"yellow":"red";return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[k()==="AdmissionStudent"&&e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:((M=D.course)==null?void 0:M.name)||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:D.assignedTo?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:D.assignedTo.name}),e.jsx("div",{className:"text-xs text-gray-500",children:D.assignedTo.role})]}):e.jsx("span",{className:"text-gray-500 italic",children:"Team Target"})}),e.jsx("td",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:S(D.targetValue)}),e.jsx("td",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:S(D.achieved)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"flex-1 max-w-xs bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full bg-${L}-500`,style:{width:`${Math.min($,100)}%`}})}),e.jsxs("span",{className:`text-sm font-semibold text-${L}-600`,children:[$,"%"]})]})}),d.some(H=>H.note)&&e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:D.note||"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>B(D._id),className:"text-red-600 hover:text-red-800 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Target",children:e.jsx(jn,{size:16})})})]},D._id)})})]})})]})]})}function Mw(){var w;const{user:t}=xe(),[s,n]=c.useState([]),[r,a]=c.useState(""),[l,i]=c.useState(!1),[o,d]=c.useState(""),x=(()=>{const j=[],A=new Date,b=A.getFullYear(),p=A.getMonth();for(let v=0;v<12;v++){const y=b+Math.floor((p+v)/12),N=(p+v)%12,C=`${y}-${String(N+1).padStart(2,"0")}`,k=new Date(y,N,1).toLocaleDateString("en-US",{year:"numeric",month:"long"});j.push({value:C,label:k})}return j})();c.useEffect(()=>{const j=new Date().getFullYear(),A=new Date().getMonth()+1,b=`${j}-${String(A).padStart(2,"0")}`;a(b)},[]),c.useEffect(()=>{r&&t&&m()},[r,t]);const m=async()=>{if(!(!r||!t)){i(!0),d("");try{const j=await _.getTargets(r,"AdmissionStudent",t.id),A=await _.getTargets(r,"AdmissionRevenue",t.id),b=[...(j==null?void 0:j.targets)||[],...(A==null?void 0:A.targets)||[]];n(b)}catch(j){d("Failed to load targets: "+j.message)}finally{i(!1)}}},h=(j,A)=>A==="AdmissionRevenue"?`${j.toLocaleString()}`:j.toString(),g=j=>{switch(j){case"AdmissionStudent":return"Student Target";case"AdmissionRevenue":return"Revenue Target";default:return j}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg",children:e.jsx(Vt,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Targets"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View your assigned performance targets"})]})]})}),o&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Et,{size:20}),"Targets & Achievement"]}),e.jsx("select",{value:r,onChange:j=>a(j.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:x.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))})]}),(()=>{var y;const j=new Date().getFullYear(),A=new Date().getMonth()+1,b=`${j}-${String(A).padStart(2,"0")}`,p=r>b,v=r===b;return p?e.jsxs("div",{className:"mb-4 bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-lg flex items-start gap-2",children:[e.jsx(fe,{size:18,className:"mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Future Month Selected"}),e.jsxs("p",{className:"text-sm",children:["You are viewing targets for ",(y=x.find(N=>N.value===r))==null?void 0:y.label,". Achievement data will be calculated as the month progresses."]})]})]}):v?e.jsxs("div",{className:"mb-4 bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-lg flex items-start gap-2",children:[e.jsx(fe,{size:18,className:"mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Current Month"}),e.jsx("p",{className:"text-sm",children:"Achievement is calculated up to today. Final results will be available at month end."})]})]}):null})(),l?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading targets..."}):s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Vt,{size:48,className:"mx-auto mb-3 opacity-30"}),e.jsxs("p",{className:"font-medium",children:["No targets assigned for ",(w=x.find(j=>j.value===r))==null?void 0:w.label]}),e.jsx("p",{className:"text-sm mt-1",children:"Your targets will appear here once they are set by your admin."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Target Type"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Course"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Target"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Achieved"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-semibold text-gray-700",children:"Progress"}),s.some(j=>j.note)&&e.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Note"})]})}),e.jsx("tbody",{children:s.map(j=>{var p;const A=j.percentage||0,b=A>=100?"green":A>=75?"blue":A>=50?"yellow":"red";return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:g(j.targetType)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:((p=j.course)==null?void 0:p.name)||"All Courses"}),e.jsx("td",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:h(j.targetValue,j.targetType)}),e.jsx("td",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:h(j.achieved,j.targetType)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"flex-1 max-w-xs bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full bg-${b}-500`,style:{width:`${Math.min(A,100)}%`}})}),e.jsxs("span",{className:`text-sm font-semibold text-${b}-600 min-w-[45px] text-right`,children:[A,"%"]})]})}),s.some(v=>v.note)&&e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:j.note||"-"})]},j._id)})})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"About Your Targets"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Student Target:"})," Number of students you need to admit for specific courses"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Revenue Target:"})," Total admission fees you need to collect"]}),e.jsx("li",{children:" Progress is updated in real-time based on your actual admissions"}),e.jsx("li",{children:" Contact your admin if you have questions about your targets"})]})]})]})}function Pw(){var U,B;const{user:t}=xe(),[s,n]=c.useState([]),[r,a]=c.useState(!1),[l,i]=c.useState(!1),[o,d]=c.useState(null),[u,x]=c.useState(null),[m,h]=c.useState({batchName:"",category:"",targetedStudent:"",status:"Active"}),[g,w]=c.useState(null),[j,A]=c.useState(null),[b,p]=c.useState(!1),v=(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin",y=async()=>{try{p(!0);const{batches:R}=await _.listBatches();n(R||[]),w(null)}catch(R){w(R.message)}finally{p(!1)}};c.useEffect(()=>{y()},[]);const N=()=>{x(null),h({batchName:"",category:"",targetedStudent:"",status:"Active"}),a(!0)},C=R=>{x(R._id),h({batchName:R.batchName,category:R.category,targetedStudent:R.targetedStudent,status:R.status}),a(!0)},E=async R=>{R.preventDefault(),w(null),A(null);try{u?(await _.updateBatch(u,m),A("Batch updated successfully")):(await _.createBatch(m),A("Batch created successfully")),a(!1),y()}catch(S){w(S.message)}},k=async(R,S)=>{if(S){alert("Cannot delete batch with admitted students");return}if(confirm("Delete this batch?"))try{await _.deleteBatch(R),A("Batch deleted successfully"),y()}catch(P){w(P.message)}},O=async R=>{try{const{batch:S}=await _.getBatchReport(R._id);d(S),i(!0)}catch(S){w(S.message)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Batch Management"}),v&&e.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 bg-gold text-navy rounded-xl font-semibold hover:bg-lightgold",children:[e.jsx(as,{size:18}),"Add Batch"]})]}),j&&e.jsx("div",{className:"mb-3 p-3 bg-green-100 text-green-700 rounded-xl",children:j}),g&&e.jsx("div",{className:"mb-3 p-3 bg-red-100 text-red-600 rounded-xl",children:g}),b?e.jsx("div",{className:"text-center py-8 text-royal",children:"Loading batches..."}):e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#f3f6ff] text-royal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Batch ID"}),e.jsx("th",{className:"text-left p-3",children:"Batch Name"}),e.jsx("th",{className:"text-left p-3",children:"Category"}),e.jsx("th",{className:"text-left p-3",children:"Targeted Students"}),e.jsx("th",{className:"text-left p-3",children:"Admitted Students"}),e.jsx("th",{className:"text-left p-3",children:"Progress"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsxs("tbody",{children:[s.map(R=>{var $;const S=(($=R.admittedStudents)==null?void 0:$.length)||0,P=R.targetedStudent||0,D=P>0?Math.round(S/P*100):0;return e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 font-mono text-xs",children:R.batchId}),e.jsx("td",{className:"p-3 font-semibold text-navy",children:R.batchName}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-medium",children:R.category})}),e.jsx("td",{className:"p-3 text-center",children:P}),e.jsx("td",{className:"p-3 text-center font-semibold text-blue-600",children:S}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${D>=100?"bg-green-500":D>=75?"bg-blue-500":D>=50?"bg-yellow-500":"bg-orange-500"}`,style:{width:`${Math.min(D,100)}%`}})}),e.jsxs("span",{className:"text-xs font-medium",children:[D,"%"]})]})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${R.status==="Active"?"bg-green-100 text-green-700":R.status==="Completed"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:R.status})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(R),className:"p-2 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100",title:"View Report",children:e.jsx(hi,{size:16})}),v&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>C(R),className:"p-2 rounded-lg border hover:bg-gray-100",title:"Edit",children:e.jsx(qy,{size:16})}),e.jsx("button",{onClick:()=>k(R._id,S>0),className:"p-2 rounded-lg border hover:bg-red-50 text-red-600",title:"Delete",children:e.jsx(jn,{size:16})})]})]})})]},R._id)}),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-4 text-center text-royal/70",children:"No batches found"})})]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("form",{onSubmit:E,className:"bg-white rounded-2xl shadow-soft p-6 w-full max-w-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-navy mb-4",children:u?"Edit Batch":"Add New Batch"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-royal mb-1",children:"Batch Name *"}),e.jsx("input",{type:"text",required:!0,value:m.batchName,onChange:R=>h({...m,batchName:R.target.value}),className:"w-full border rounded-xl px-3 py-2",placeholder:"e.g., Graphics Design Batch 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-royal mb-1",children:"Category *"}),e.jsx("input",{type:"text",required:!0,value:m.category,onChange:R=>h({...m,category:R.target.value}),className:"w-full border rounded-xl px-3 py-2",placeholder:"e.g., Graphics Design"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-royal mb-1",children:"Targeted Students *"}),e.jsx("input",{type:"number",required:!0,min:"1",value:m.targetedStudent,onChange:R=>h({...m,targetedStudent:R.target.value}),className:"w-full border rounded-xl px-3 py-2",placeholder:"e.g., 25"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-royal mb-1",children:"Status"}),e.jsxs("select",{value:m.status,onChange:R=>h({...m,status:R.target.value}),className:"w-full border rounded-xl px-3 py-2",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 rounded-xl border hover:bg-gray-100",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-xl bg-gold text-navy font-semibold hover:bg-lightgold",children:u?"Update":"Create"})]})]})}),l&&o&&e.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-soft p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy",children:["Batch Report: ",o.batchName]}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-blue-600 mb-1",children:"Batch ID"}),e.jsx("div",{className:"text-lg font-bold text-blue-800",children:o.batchId})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-green-600 mb-1",children:"Admitted / Target"}),e.jsxs("div",{className:"text-lg font-bold text-green-800",children:[((U=o.admittedStudents)==null?void 0:U.length)||0," / ",o.targetedStudent]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[e.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Category"}),e.jsx("div",{className:"text-lg font-bold text-purple-800",children:o.category})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-navy mb-3",children:"Admitted Students"}),((B=o.admittedStudents)==null?void 0:B.length)>0?e.jsx("div",{className:"bg-gray-50 rounded-xl overflow-hidden",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Lead ID"}),e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Phone"}),e.jsx("th",{className:"text-left p-3",children:"Course"}),e.jsx("th",{className:"text-left p-3",children:"Admitted Date"})]})}),e.jsx("tbody",{children:o.admittedStudents.map((R,S)=>{var P,D,$,L;return e.jsxs("tr",{className:"border-t border-gray-300",children:[e.jsx("td",{className:"p-3 font-mono text-xs",children:((P=R.lead)==null?void 0:P.leadId)||"-"}),e.jsx("td",{className:"p-3 font-medium",children:((D=R.lead)==null?void 0:D.name)||"-"}),e.jsx("td",{className:"p-3",children:(($=R.lead)==null?void 0:$.phone)||"-"}),e.jsx("td",{className:"p-3",children:((L=R.lead)==null?void 0:L.interestedCourse)||"-"}),e.jsx("td",{className:"p-3",children:R.admittedAt?new Date(R.admittedAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"-"})]},S)})})]})}):e.jsx("div",{className:"text-center py-8 text-royal/70",children:"No students admitted yet"}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>i(!1),className:"px-6 py-2 rounded-xl bg-navy text-white font-semibold hover:bg-navy/90",children:"Close"})})]})})]})}function Lw(){const{login:t}=xe(),s=Sn(),[n,r]=c.useState("polok@primeacademy.org"),[a,l]=c.useState("password123"),[i,o]=c.useState(null),[d,u]=c.useState(!1),x=async m=>{m.preventDefault(),o(null),u(!0);try{await t(n,a),s("/")}catch(h){o((h==null?void 0:h.message)||"Login failed")}finally{u(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-royal/10 to-gold/10",children:e.jsxs("form",{onSubmit:x,className:"bg-white shadow-soft rounded-2xl p-6 w-full max-w-md",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"https://primeacademy.org/logo-full.png",alt:"Prime Academy",className:"w-56 object-contain"})}),e.jsx("h1",{className:"text-2xl font-bold text-navy mb-4",children:"Sign in"}),i&&e.jsx("div",{className:"mb-3 text-sm text-red-600",children:i}),e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Email"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2 mb-3",value:n,onChange:m=>r(m.target.value),placeholder:"you@domain.com"}),e.jsx("label",{className:"block text-sm text-royal mb-1",children:"Password"}),e.jsx("input",{className:"w-full border rounded-xl px-3 py-2 mb-4",type:"password",value:a,onChange:m=>l(m.target.value)}),e.jsx("button",{disabled:d,className:"w-full bg-gold text-navy rounded-xl py-2 font-semibold hover:bg-lightgold transition",children:d?"Signing in":"Sign In"}),e.jsxs("p",{className:"mt-3 text-xs text-royal/70",children:["Default password for seeded users: ",e.jsx("b",{children:"password123"})]})]})})}function Rw(){return e.jsx("div",{className:"p-6",children:"Not Found"})}function Iw(){const[t,s]=c.useState(!1);return e.jsxs("div",{className:"min-h-screen flex bg-[#f7f9fc]",children:[e.jsx(Zy,{isOpen:t,setIsOpen:s}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Ky,{onMenuClick:()=>s(!0)}),e.jsx("main",{className:"p-4 md:p-6 flex-1 overflow-auto",children:e.jsx(cd,{})})]})]})}function $w(){return e.jsxs(qh,{children:[e.jsx(ie,{element:e.jsx(Ty,{}),children:e.jsxs(ie,{element:e.jsx(Iw,{}),children:[e.jsx(ie,{path:"/",element:e.jsx(hv,{})}),e.jsx(ie,{path:"/profile",element:e.jsx(pv,{})}),e.jsx(ie,{path:"/my-tasks",element:e.jsx(jv,{})}),e.jsx(ie,{path:"/tasks-board",element:e.jsx(IN,{})}),e.jsx(ie,{path:"/messages",element:e.jsx(Aw,{})}),e.jsx(ie,{path:"/task-report",element:e.jsx(Dw,{})}),e.jsx(ie,{element:e.jsx(St,{roles:["Admin","Accountant","Admission","Recruitment","DigitalMarketing","MotionGraphics","Coordinator"]}),children:e.jsx(ie,{path:"/my-applications",element:e.jsx(ww,{})})}),e.jsx(ie,{path:"/notifications",element:e.jsx(Cw,{})}),e.jsxs(ie,{element:e.jsx(St,{roles:["SuperAdmin","Admin"]}),children:[e.jsx(ie,{path:"/assign-tasks",element:e.jsx(gv,{})}),e.jsx(ie,{path:"/employees",element:e.jsx($N,{})}),e.jsx(ie,{path:"/reports-view",element:e.jsx(BN,{})}),e.jsx(ie,{path:"/leads-center-view",element:e.jsx(UN,{})}),e.jsx(ie,{path:"/admin-task-report",element:e.jsx(Tw,{})}),e.jsx(ie,{path:"/admission-targets",element:e.jsx(Ew,{})}),e.jsx(ie,{path:"/batches",element:e.jsx(Pw,{})}),e.jsx(ie,{path:"/admin/approvals",element:e.jsx(Sw,{})})]}),e.jsx(ie,{element:e.jsx(St,{roles:["SuperAdmin","Admin","DigitalMarketing","Admission","Recruitment","MotionGraphics"]}),children:e.jsx(ie,{path:"/courses",element:e.jsx(ON,{})})}),e.jsxs(ie,{element:e.jsx(St,{roles:["DigitalMarketing"]}),children:[e.jsx(ie,{path:"/lead-entry",element:e.jsx(WN,{})}),e.jsx(ie,{path:"/leads-center",element:e.jsx(HN,{})}),e.jsx(ie,{path:"/dm-metrics",element:e.jsx(GN,{})})]}),e.jsx(ie,{element:e.jsx(St,{roles:["DigitalMarketing","Admin","SuperAdmin"]}),children:e.jsx(ie,{path:"/dm/dashboard",element:e.jsx(cp,{})})}),e.jsxs(ie,{element:e.jsx(St,{roles:["Admission","Admin","SuperAdmin"]}),children:[e.jsx(ie,{path:"/admission/dashboard",element:e.jsx(op,{})}),"   ",e.jsx(ie,{path:"/my-targets",element:e.jsx(Mw,{})}),e.jsx(ie,{path:"/admission/assigned",element:e.jsx(Mr,{})}),e.jsx(ie,{path:"/admission/counseling",element:e.jsx(Mr,{})}),e.jsx(ie,{path:"/admission/follow-up",element:e.jsx(Mr,{})}),e.jsx(ie,{path:"/admission/admitted",element:e.jsx(Mr,{})}),e.jsx(ie,{path:"/admission/not-admitted",element:e.jsx(Mr,{})}),e.jsx(ie,{path:"/admission/fees",element:e.jsx(XN,{})})]}),e.jsxs(ie,{element:e.jsx(St,{roles:["Accountant","Admin","SuperAdmin"]}),children:[e.jsx(ie,{path:"/accounting/dashboard",element:e.jsx(rp,{})}),e.jsx(ie,{path:"/accounting/fees",element:e.jsx(KN,{})}),e.jsx(ie,{path:"/accounting/due-collections",element:e.jsx(ZN,{})}),e.jsx(ie,{path:"/accounting/income",element:e.jsx(ew,{})}),e.jsx(ie,{path:"/accounting/expense",element:e.jsx(nw,{})}),e.jsx(ie,{path:"/accounting/tada-payments",element:e.jsx(kw,{})})]}),e.jsxs(ie,{element:e.jsx(St,{roles:["SuperAdmin","Admin","Accountant"]}),children:[e.jsx(ie,{path:"/employee-accounts/bank",element:e.jsx(rw,{})}),e.jsx(ie,{path:"/employee-accounts/salary",element:e.jsx(aw,{})})]}),e.jsxs(ie,{element:e.jsx(St,{roles:["MotionGraphics","Admin","SuperAdmin"]}),children:[e.jsx(ie,{path:"/mg/dashboard",element:e.jsx(lp,{})}),e.jsx(ie,{path:"/mg/production",element:e.jsx(vw,{})})]}),e.jsxs(ie,{element:e.jsx(St,{roles:["Recruitment","Admin","SuperAdmin"]}),children:[e.jsx(ie,{path:"/recruitment",element:e.jsx(ap,{})}),e.jsx(ie,{path:"/recruitment/candidates",element:e.jsx(iw,{})}),e.jsx(ie,{path:"/recruitment/jobs",element:e.jsx(dw,{})}),e.jsx(ie,{path:"/recruitment/employers",element:e.jsx(mw,{})}),e.jsx(ie,{path:"/recruitment/expenses",element:e.jsx(gw,{})})]}),e.jsx(ie,{element:e.jsx(St,{roles:["Recruitment","Accountant"]}),children:e.jsx(ie,{path:"/recruitment/income",element:e.jsx(hw,{})})}),e.jsxs(ie,{element:e.jsx(St,{roles:["Coordinator","Admin","SuperAdmin"]}),children:[e.jsx(ie,{path:"/coordinator/dashboard",element:e.jsx(ip,{})}),e.jsx(ie,{path:"/coordinator/due-fees",element:e.jsx(jw,{})}),e.jsx(ie,{path:"/coordinator/notifications",element:e.jsx(Nw,{})})]}),e.jsx(ie,{path:"*",element:e.jsx(pa,{to:"/",replace:!0})})]})}),e.jsx(ie,{path:"*",element:e.jsx(pa,{to:"/login",replace:!0})})]})}Fh(document.getElementById("root")).render(e.jsx(ge.StrictMode,{children:e.jsx(jy,{children:e.jsx(Dy,{children:e.jsxs(qh,{children:[e.jsx(ie,{path:"/login",element:e.jsx(Lw,{})}),e.jsx(ie,{path:"/*",element:e.jsx($w,{})}),e.jsx(ie,{path:"*",element:e.jsx(Rw,{})})]})})})}));
